(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1781],{18906:($,_,t)=>{"use strict";t.d(_,{Ad:()=>a,LD:()=>r,P2:()=>d,TR:()=>n,ZC:()=>y,cN:()=>p,fB:()=>c,jG:()=>l,m9:()=>s,nh:()=>u,qf:()=>i});var e=t(42218);const c=e.z.enum(["SCROLL_TARGET_SET","RECEIVE_PROJECT","CHANGE_HARDWARE","SWITCHING_HARDWARE","CHANGE_NAME","CHANGE_OWNER","SET_INIT_NOTEBOOK","SET_TEAM_ACCESS_TYPE","SET_RENAMING","SET_PROMOTING","SET_STARRING","SET_DOCKER_BUILD_STATE","SET_DOCKER_IMAGE","SET_PUBLISHED_STATE","SET_PUBLISHED_ACCESS","UNSET_PUBLISHED_STATE","SET_ENABLE_DUPLICATION","SET_USER_ACCESS_TYPE"]).enum;function l(T){return{type:c.RECEIVE_PROJECT,project:T}}function r(T){return{type:c.CHANGE_HARDWARE,hardware:T}}function d(T){return{type:c.SWITCHING_HARDWARE,hardwareSwitching:T}}function s(T){return{type:c.CHANGE_NAME,name:T}}function a(T){return{type:c.SET_TEAM_ACCESS_TYPE,teamAccessType:T}}function n(T){return{type:c.SET_DOCKER_IMAGE,image:T}}function i(T){return{type:c.SET_DOCKER_BUILD_STATE,dockerBuildState:T}}function p(T,C,m){return{type:c.SET_PUBLISHED_STATE,publishedAt:T,publishedAccess:C,notebookInDbID:m}}function u(){return{type:c.UNSET_PUBLISHED_STATE}}const y=e.z.enum(["SET_OPEN_RAW_LIST","SET_LATEST_CREATED_FILE_PATH","SET_RENAMING_FILE_PATH","ADD_UPLOADING_ITEM","UPDATE_UPLOADING_ITEM_PROGRESS","UPDATE_UPLOADING_ITEM_STATUS","REMOVE_UPLOADING_ITEMS","ENTITIES_LOADED","ENTITIES_RELOADING","SPACE_INFO_LOADED","SET_EXPANDED_DIRS","SET_DRAGGED_ID","SET_DRAGGED_OVER_ID","SET_IS_TOOLTIP_OPEN","SET_FILESYSTEM_UNAVAILABLE","CHANGE_PATH","SET_READONLY_DOCUMENT"]).enum},73266:($,_,t)=>{"use strict";t.d(_,{P:()=>r,x:()=>d});var e=t(50664),o=t(51881),c=t(31548),l=t(32912);const r="local-dockerfile",d=s=>{const{dispatch:a,getState:n}=s.store,i={async fetchCustomEnvironments(){const p=!e.y.runtimeConfig.IS_SINGLE_TENANCY,g=!n().project.environment_id||n().project.environment_id===r||p,y=n().project.id,T=await fetch(`/api/project/${y}/environments`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!T.ok){l.i.error({message:"Failed to fetch list of available environments for the project. Please try again later or contact our support."}),(0,o.H)(new Error(`[/api/project/${y}]/environments] failed with ${T.statusText}`),"error");return}const C=[...(await T.json()).environments,...g?[{name:"Dockerfile",id:r,link:"./Dockerfile",is_public:!0}]:[]];a({type:"SET_ENVIRONMENTS",list:C})},async changeProjectEnvironment(p){if(n().user.is_anonymous){s.modalApi.openModal({newModal:c.HM.SIGN_IN_MODAL,title:"Sign up to run code"});return}const g=n().project.id;a({type:"SET_ENV_LOADING",value:!0});const y=await fetch(`/api/project/${g}/environment`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({environment_id:p===r?null:p})});if(!y.ok){l.i.error({message:"Failed to change project's environment. Please try again later or contact our support."}),(0,o.H)(new Error(`[/api/${g}]/environment/${p}] failed with ${y.statusText}`),"error");return}a({type:"SET_ENV_LOADING",value:!1}),p!==r&&a({type:"SET_IMAGE_IMPORTING",value:!0}),await s.projectApi.restartHardware()},async deleteCustomEnvironment(p){const u=n().project.team_id,g=await fetch(`/api/environments/${p}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({team_id:u})});if(!g.ok){const y=(await g.json()).error;l.i.error({message:y??"We failed to delete the custom environment. Please try again later or contact our support."}),(0,o.H)(new Error(`[/api/environments] failed with ${g.statusText}`),"error");return}await i.fetchCustomEnvironments()},async createCustomEnvironment({link:p,name:u}){const g=n().project.team_id,y=await fetch("/api/environments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({team_id:g,name:u||void 0,link:p||void 0})});if(!y.ok)throw l.i.error({message:"We failed to create a custom environment. Please try again later or contact our support."}),(0,o.H)(new Error(`[/api/environments] failed with ${y.statusText}`),"error"),new Error("Failed to create a custom environment");return await i.fetchCustomEnvironments(),await y.json()},async updateCustomEnvironment({id:p,link:u,name:g}){const y=await fetch(`/api/environments/${p}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g||void 0,link:u||void 0})});if(!y.ok){l.i.error({message:"We failed to update a custom environment. Please try again later or contact our support."}),(0,o.H)(new Error(`[/api/environments] failed with ${y.statusText}`),"error");return}await i.fetchCustomEnvironments()},setImageImporting(p){a({type:"SET_IMAGE_IMPORTING",value:p})}};return i}},31311:($,_,t)=>{"use strict";t.d(_,{BR:()=>K,DB:()=>w,Dk:()=>y,L8:()=>u,Mv:()=>z,Ui:()=>U,hE:()=>B,iV:()=>k,jo:()=>N,l1:()=>G,n:()=>O,ri:()=>m});var e=t(87698),o=t(60022),c=t(66699),l=t(16530),r=t(19550),d=t(51881),s=t(55502),a=t(16551),n=t(40177),i=t(79090);function p(f,I,E){const D=R=>{const L=`${f}${R}`;return E.has(L)?D(R+1):L};return D(I+1)}function u(f){const I={cell_type:"sql",source:f.source??`SELECT *
FROM ${f.variableName??"<dataframe variable name or path to a csv file>"}`,metadata:{deepnote_variable_name:p("df_",f.usedBlockVariableNames?.size??0,f.usedBlockVariableNames??new Set),...f.integrationId?{sql_integration_id:f.integrationId}:{}},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,e.NF)(),content_dependencies:null};return{cellId:f.id,...I}}function g(f,I){if(f.endsWith(".head()")){const[E]=f.match(/^([a-zA-Z][\w_]*)\.head\(\)$/)?.slice(1)??[];return E??null}return null}function y(f){const E=f.split(`
`).filter(L=>L.trim()).filter(Boolean),D=T(E)?.trim();if(!D)return null;if(C(D))return D;const R=g(D,E);return R&&C(R)?R:null}function T(f){return f[f.length-1]}function C(f){return f===(0,o.T8)(f)}function m(f,I){const E={deepnote_app_block_visible:(0,c._)(f)};if(I==="code")return{id:f.id,type:"code",version:f.version,sorting_key:f.sorting_key,block_group:f.block_group,metadata:f.type==="code"?f.metadata:{...E},state:f.type==="code"?f.state:{execution_count:null,outputs_reference:null},children:(0,n.wR)(f)?f.children:[{text:a.bP.string(f)}]};if(I==="sql")return{id:f.id,type:"sql",version:f.version,sorting_key:f.sorting_key,block_group:f.block_group,metadata:f.type==="code"?f.metadata:{...E},state:f.type==="code"?f.state:{execution_count:null,outputs_reference:null},children:(0,n.wR)(f)?f.children:[{text:a.bP.string(f)}]};if(I==="markdown")return{id:f.id,type:"markdown",version:f.version,sorting_key:f.sorting_key,block_group:f.block_group,metadata:f.type==="markdown"?f.metadata:{...E},children:(0,n.wR)(f)?f.children:[{text:a.bP.string(f)}]};if((0,l.A0)(I))return{id:f.id,type:I,version:f.version,sorting_key:f.sorting_key,block_group:f.block_group,metadata:f.type===I?f.metadata:{...E,is_collapsed:!1},children:f.children};throw(0,r.d)(I),new Error(`Invalid argument newType: ${I}`)}function O(f,I){if(!I)return i.J;const E=f[I];return E?.length===0?i.J:E}function W(f){return!f||f.length===0}const K=(f,I)=>I==="leading"?f.replace(/^(\r\n|\n|\r)/,""):I==="trailing"?f.replace(/(\r\n|\n|\r)$/,""):(0,r.d)(I),H=f=>"notebook-focused-cell-"+f,N=(f,I)=>{const E=H(f);I?(0,s.Vv)(E,I):(0,s.jQ)(E)},w=f=>{const I=H(f);try{return localStorage.getItem(I)}catch(E){return(0,d.H)(E),null}},k=f=>"project-focus-"+f,F=f=>`scroll-${f}`,X=f=>`scroll-target-${f}`,z=(f,I)=>{const E=F(f);try{const D=Math.max(I,0);sessionStorage?.setItem(E,D.toString())}catch(D){(0,d.H)(D)}},B=(f,I,E)=>{const D=X(f);try{if(I){const R=[I.type,I.id,E].join(",");sessionStorage?.setItem(D,R)}else sessionStorage?.removeItem(D)}catch(R){(0,d.H)(R)}},U=f=>{const I=F(f);try{const E=parseInt(sessionStorage?.getItem(I)??"",10),D=Math.max(E,0);return Number.isNaN(E)?null:D}catch(E){return(0,d.H)(E),null}},G=f=>{const I=X(f);try{const E=sessionStorage?.getItem(I)??null;if(!E)return null;const[D,R,L]=E.split(","),x=parseInt(L,10)||0;return{target:{type:D,id:R},offset:x}}catch(E){return(0,d.H)(E),null}}},53420:($,_,t)=>{"use strict";t.d(_,{M1:()=>p,Pw:()=>d,nH:()=>n,uU:()=>s});var e=t(48154),o=t(11097),c=t.n(o),l=t(40177);const r=u=>`${u}_filtered`;function d(u,g,y){const{block:T}=(0,l.Sk)(u,g)??{};!T||!(0,l.An)(T)||(0,l.uM)(u,g,{deepnote_chart_filter:{filter:[],advancedFilters:y?.advancedFilters??void 0}})}function s(u){return(0,e.Ay)(u,g=>{const y=g.filter?.filter(O=>O.selectionType==="data")??[],T=g.filter?.filter(O=>O.selectionType==="values")??[],C=y.flatMap(O=>"axes"in O?O.axes.map(W=>({column:W.field,operator:a(O,W),comparativeValues:W.selectionType==="range"?[String(W.start),String(W.end)]:W.values.map(String)})):[]),m=T.map(O=>"field"in O&&"values"in O?{column:O.field,operator:O.filterType==="include"?"is-one-of":"is-not-one-of",comparativeValues:O.values.map(String)}:null).filter(Boolean);g.advancedFilters=[...g.advancedFilters??[],...C,...m]})}function a(u,g){return g.selectionType==="range"?u.filterType==="include"?"between":"outside-of":u.filterType==="include"?"is-one-of":"is-not-one-of"}function n(u,g){return(0,e.Ay)(g,y=>{y.filter&&y.filter?.filter(T=>!("field"in T&&(u?.encoding.color?.field===T.field||u?.encoding.size?.field===T.field)))})}const i=(u,g)=>({...u,source:g}),p=(u,g,y,T)=>{const C=[u?i(u,"color_legend"):null,g?i(g,"size_legend"):null,y?i(y,"data"):null];return c()(C).map(m=>({...m,filterType:T}))}},57008:($,_,t)=>{"use strict";t.d(_,{Fk:()=>z,Q4:()=>K,bf:()=>W,c2:()=>u,hW:()=>F,hg:()=>g,jb:()=>X});var e=t(19550),o=t(48154),c=t(11097),l=t.n(c),r=t(87907),d=t.n(r),s=t(4656),a=t(42218);const n=a.z.object({fields:a.z.array(a.z.object({field:a.z.string(),channel:a.z.enum(["x","y"]),type:a.z.enum(["E","R"])})),values:a.z.array(a.z.array(a.z.union([a.z.string(),a.z.number(),a.z.date()])))}),i=a.z.union([a.z.null(),n]),p={E:"values",R:"range"},u=B=>(U,G)=>{const f=i.safeParse(G);if(!f.success)return;const I=f.data;if(I===null||I.fields.length===0){B?.("data",null);return}const{fields:E,values:D}=I,R=E.map((L,x)=>{if(!L||typeof L!="object"||!("field"in L)||typeof L.field!="string")return null;const ne=L.field,M=p[L.type];if(M==="values")return{selectionType:"values",field:ne,values:D[x]};if(M==="range"){const q=D[x].sort((fe,oe)=>((0,s.isDate)(fe)?fe.getTime():fe)-((0,s.isDate)(oe)?oe.getTime():oe)).map(fe=>(0,s.isDate)(fe)?y(fe):fe);return{selectionType:"range",field:ne,start:q[0],end:q[1]}}else return(0,e.x)(M)});B("data",{selectionType:"data",axes:l()(R)})},g=(B,U)=>(G,f)=>{if(!f||typeof f!="object")return;const I="vlPoint"in f?d()(f,"vlPoint"):f,E=Object.entries(I)[0];if(typeof E>"u"){U(B,null);return}const[D,R]=E;!D||!R||U(B,{selectionType:"values",field:D,values:R})},y=B=>new Date(B).toISOString(),T=B=>new Date(B).getTime(),C=B=>{const U=new Date(B);return{year:U.getUTCFullYear(),month:U.getUTCMonth()+1,date:U.getUTCDate(),hours:U.getUTCHours(),minutes:U.getUTCMinutes(),seconds:U.getUTCSeconds(),milliseconds:U.getUTCMilliseconds()}},m=(B,U,G)=>({field:z(B),range:[U,G].map(f=>typeof f=="string"?C(f):f)}),O=B=>{if(!Array.isArray(B.comparativeValues)||B.comparativeValues.length!==2)return null;const[U,G]=B.comparativeValues,f=B.comparativeValues.every(L=>!isNaN(Date.parse(String(L)))&&isNaN(Number(L))),I=B.operator==="between",E=I?">":"<",D=I?"&":"|";if(!f)return`toNumber(datum['${z(B.column)}']) ${E} toNumber('${U}')  ${D} toNumber('${G}') ${E} toNumber(datum['${z(B.column)}'])`;const R=m(B.column,String(U),String(G));return I?R:{not:{and:[m(B.column,String(U),String(G))]}}},W=[{label:"Today",value:"today"},{label:"Yesterday",value:"yesterday"},{label:"Past week",value:"week-ago"},{label:"Past month",value:"month-ago"},{label:"Past 3 months",value:"quarter-ago"},{label:"Past 6 months",value:"half-year-ago"},{label:"Past year",value:"year-ago"}];function K(B){return W.some(U=>U.value===B)}function H(B){return{date:B.getDate(),month:B.getMonth()+1,year:B.getFullYear()}}function N(B,U,G){const f=H(U),I={field:z(B),timeUnit:"yearmonthdate"};switch(G){case"equal":return{...I,equal:f};case"gte":return{...I,gte:f};case"lte":return{...I,lte:f};default:return(0,e.x)(G)}}function w(B,U){const G=new Date(U.toISOString());G.setDate(G.getDate()-1);const f=new Date(U.toISOString());f.setDate(f.getDate()-7);const I=new Date(U.toISOString());I.setMonth(I.getMonth()-1);const E=new Date(U.toISOString());E.setMonth(E.getMonth()-3);const D=new Date(U.toISOString());D.setMonth(D.getMonth()-6);const R=new Date(U.toISOString());return R.setMonth(R.getMonth()-12),B.comparativeValues.map(L=>{switch(L){case"today":return N(B.column,U,"equal");case"yesterday":return N(B.column,G,"equal");case"week-ago":return N(B.column,f,"gte");case"month-ago":return N(B.column,I,"gte");case"quarter-ago":return N(B.column,E,"gte");case"half-year-ago":return N(B.column,D,"gte");case"year-ago":return N(B.column,R,"gte");default:return null}}).filter(Boolean)}function k(B,U){const G=B.flatMap(f=>{switch(f.operator){case"text-contains":return f.comparativeValues.map(I=>`indexof(lower(toString(datum['${z(f.column)}'])), lower(toString('${z(I)}'))) > -1`).join(" | ");case"text-does-not-contain":return f.comparativeValues.map(I=>`indexof(lower(toString(datum['${z(f.column)}'])), lower(toString('${z(I)}'))) == -1`).join(" | ");case"is-equal":case"is-one-of":return f.comparativeValues.map(I=>`lower(toString(datum['${z(f.column)}'])) == lower(toString('${z(I)}'))`).join(" | ");case"is-not-equal":case"is-not-one-of":return f.comparativeValues.map(I=>`lower(toString(datum['${z(f.column)}'])) != lower(toString('${z(I)}'))`).join(" & ");case"is-null":return`toString(datum['${z(f.column)}']) == null | toString(datum['${z(f.column)}']) == 'None'`;case"is-not-null":return`toString(datum['${z(f.column)}']) != null & toString(datum['${z(f.column)}']) != 'None'`;case"greater-than":return f.comparativeValues.map(I=>`toNumber(datum['${z(f.column)}']) > toNumber('${z(I)}')`).join(" | ");case"greater-than-or-equal":return f.comparativeValues.map(I=>`toNumber(datum['${z(f.column)}']) >= toNumber('${z(I)}')`).join(" | ");case"less-than":return f.comparativeValues.map(I=>`toNumber(datum['${z(f.column)}']) < toNumber('${z(I)}')`).join(" | ");case"less-than-or-equal":return f.comparativeValues.map(I=>`toNumber(datum['${z(f.column)}']) <= toNumber('${z(I)}')`).join(" | ");case"is-relative-today":return w(f,U);case"is-after":return N(z(f.column),new Date(f.comparativeValues[0]??""),"gte");case"is-on":return N(z(f.column),new Date(f.comparativeValues[0]??""),"equal");case"is-before":return N(z(f.column),new Date(f.comparativeValues[0]??""),"lte");case"between":case"outside-of":return O(f);default:return(0,e.x)(f.operator)}}).filter(Boolean);return G.length>0?G:void 0}function F(B,U){if(B?.advancedFilters&&(B.advancedFilters?.length||0)>0){const G=k(B.advancedFilters,U);return G?{and:G}:null}return null}function X(B,U){return(0,o.Ay)(B,G=>{Object.keys(U).length>0&&(G.transform=[{filter:U}])})}function z(B){return B?.replaceAll(/[,.*+?^${}()'|[\]\\]/g,"\\$&")??void 0}},85007:($,_,t)=>{"use strict";t.d(_,{Cg:()=>D,E1:()=>E,FE:()=>F,HE:()=>fe,Nt:()=>x,P$:()=>Ge,R0:()=>N,S3:()=>K,Vg:()=>H,XW:()=>M,_1:()=>b,_W:()=>X,a$:()=>k,aC:()=>B,aX:()=>oe,fM:()=>w,iT:()=>ie,jo:()=>We,jp:()=>ce,l3:()=>O,ll:()=>Qe,oE:()=>L,tJ:()=>Le,xv:()=>h,yJ:()=>ne});var e=t(26875),o=t(34501),c=t(83222),l=t(36664),r=t(48154),d=t(8963),s=t.n(d),a=t(45399),n=t.n(a),i=t(11097),p=t.n(i),u=t(53420),g=t(57535),y=t(57008);const T=[],C="application/vnd.vegalite.v4+json",m="application/vnd.vegalite.v5+json",O="Percentage of ",W=["x","y","color"],K={none:"0",small:"min(width, height) / 10",medium:"min(width, height) / 5",large:"min(width, height) / 3"},H={outside:"min(width, height) / 2 + 30",inside:"min(width, height) / 2 - 50"},N={outside:H.outside,inside:"min(width, height) / 2 - 30"};class w extends e.Cf{}function k(){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",mark:{type:"bar",tooltip:!0},encoding:Object.fromEntries(W.map(Ie=>[Ie,{field:"",type:"nominal",sort:null,scale:{type:"linear"},format:{type:"default",decimals:null}}])),width:"container",height:"container",config:{customFormatTypes:!0},usermeta:{tooltipDefaultMode:!0}}}function F(le,Ie){if(Ie[le]?.varType!=="DataFrame")return T;const V=Ie[le]?.varColumns??T,Y=Ie[le]?.varColumnTypes??T;return V.map((te,Ae)=>({name:te,type:Y[Ae]}))}function X(le){return Object.entries(le).filter(([,Ie])=>Ie.varType==="DataFrame").map(([Ie])=>Ie)}function z(le){const Ie=Y=>`%%%${Y}%%%`,P=Y=>Y.replaceAll(/"%%%(.+?)%%%"/g,"$1"),V=JSON.stringify(le,(Y,te)=>typeof te=="boolean"?Ie(te?"True":"False"):te===null?Ie("None"):te,2);return P(V)}function B(le,Ie){return`legend_${le}_${Ie}`}const U=(le,Ie)=>{const P=le.encoding?.[Ie];return Array.isArray(P)?null:P?.timeUnit??null};function G(le,Ie){const P=[{name:B("size",le),select:{type:"point",encodings:["size"],toggle:"true"},bind:"legend"},{name:B("color",le),select:{type:"point",encodings:["color"],toggle:"true"},bind:"legend"}],V=le==="0"||le==="0_0",Y=["x","y"],te=p()(Y.filter(ke=>Ie&&L(Ie)&&!U(Ie,ke))),Ae=V&&te.length>0?[{name:"interval_selection",select:{type:"interval",encodings:te}}]:[];return[...P,...Ae]}function f(le,Ie,P){const V=Ie==="point"||Ie==="circle"||Ie==="bar",Y=P.some(Ae=>Ae.name==="interval_selection"),te=V&&Y;return{condition:{test:{and:[{param:B("size",le)},{param:B("color",le)},...te?[{param:"interval_selection"}]:[]]},value:1},value:.2}}function I(le){if(L(le))return[le];if(ne(le))return le.layer;throw new w(`Invalid layer: ${JSON.stringify(le)}`)}function E(le){return le.layer?.map(Ie=>D(Ie))??[]}function D(le){if(L(le))return le;if(ne(le))return le.layer[0];throw new w(`Unexpected layer spec: ${JSON.stringify(le)}`)}function R(le){const{mark:Ie}="mark"in le?le:le.layer[0];return(typeof Ie=="string"?Ie:Ie?.type)??"bar"}function L(le){return!("layer"in le||typeof le.mark=="string"&&le.mark==="text"||typeof le.mark!="string"&&le.mark.type==="text")}function x(le){const Ie=typeof le.mark=="string"&&le.mark==="text",P=typeof le.mark!="string"&&le.mark?.type==="text";return Ie||P}function ne(le){if(!("layer"in le&&le.layer.length>0))return!1;const V=le.layer[0].mark;return V&&typeof V!="string"&&V.type!=="text"}function M(le,Ie){return(0,r.Ay)(le,P=>{if(P.layer)P.layer.forEach((te,Ae)=>{I(te).forEach((He,Fe)=>{He.params=G(`${Ae}_${Fe}`,null)});const ke=D(te),Ne=`${Ae}`,ue=G(Ne,ke);ke.params=ue;const Pe=R(ke);ke.encoding.opacity=f(Ne,Pe,ue)});else if(P.encoding){const te=G("0",P);P.params=te;const Ae=R(P);P.encoding.opacity=f("0",Ae,te)}P.height="container",P.width="container";const V=Ie?.colors?.bg?.neutral?.primary??"#FFFFFF",Y=Ie?.colors?.fg?.neutral?.primary??"#283849";P.background=V,P.padding=le.padding??32,P.autosize={type:"fit"},P.config||(P.config={}),P.config.view||(P.config.view={}),P.config.view={stroke:V},P.config.legend||(P.config.legend={}),P.config.legend={...P.config.legend,labelFont:l.gx.fontFamily.primaryFontFamily,labelFontSize:13,labelFontWeight:"normal",padding:4,rowPadding:8,symbolSize:48,symbolType:"circle",titleColor:Y,labelColor:Y,titleFont:l.gx.fontFamily.primaryFontFamily,titleFontWeight:"normal",titlePadding:12},P.config.title={anchor:"start",color:Y,dy:-16,font:l.gx.fontFamily.primaryFontFamily,fontWeight:500,fontSize:16,offset:24,orient:"top"},P.config.axis={domainCap:"round",gridCap:"round",gridColor:"#abbbca",gridWidth:.5,labelColor:Y,labelFont:l.gx.fontFamily.primaryFontFamily,labelFontSize:12,labelFontWeight:400,labelOverlap:"parity",titleColor:Y,titleFont:l.gx.fontFamily.primaryFontFamily,titleFontSize:12,titleFontWeight:500,titlePadding:16},P.config.axisX={labelPadding:6},P.config.axisY={labelPadding:12},P.config.axisBand={tickCap:"round",tickExtra:!1},P.config.axisQuantitative={tickCount:5},P.config.line={strokeCap:"butt",strokeWidth:1.5,strokeJoin:"bevel"},P.config.area={fill:"category",line:!0,opacity:.5},P.config.circle={size:48},P.config.mark={color:g.Vq},P.config.range={category:[...g.UW],ramp:[...g.eg]},P.config.customFormatTypes=!0})}const A=(le,Ie)=>{const P=le.metadata.deepnote_visualization_spec??k(),V=le.metadata.deepnote_chart_height??null,Y=le.metadata.deepnote_chart_filter??null,te=Y&&removeNonUsedColumnsInFilter(P,Y),Ae=te&&buildVegaFilterFromMetadata(te,new Date),ke=Ae?addFilterToVegaLiteSpec(P,Ae):P,Ne=M(ke,Ie),ue=_cloneDeep(Ne);return ue.height=fe(V),ue};function b(le,Ie){const P=z(le);return o.A.executeVisualizationWithSpecDict(Ie,P)}const q={default:440,min:280,max:1e3},fe=le=>le?s()(le,q.min,q.max):q.default,oe=le=>{const Ie=(0,c.wC)(le)?le.data:null;return Me(Ie&&(Ie[C]??Ie[m]))};function ie(le){return(0,r.Ay)(le,Ie=>{Ie.layer&&(Ie.layer=Ie.layer.filter(P=>{const V=D(P);return R(V)==="arc"?!0:V.encoding.x?.field||V.encoding.y?.field}))})}function h(le){return!!le?.field||!!le?.aggregate}function ce(le){return le?`${O}${le}`:""}function ve(le){return le.forEach(Ie=>{"calculate"in Ie&&(Ie.calculate=Ie.calculate.replaceAll("\\",""))}),le}function Me(le){return le&&(0,r.Ay)(le,Ie=>{Ie.transform&&(Ie.transform=ve(Ie.transform)),Ie.layer?.forEach(P=>{"layer"in P&&P.layer.forEach(V=>{"transform"in V&&V.transform&&ve(V.transform)})})})}function Le(le){return le.layers.reduce((Ie,P)=>(Ie||We(P.type))&&!P.axes.x.column,!1)}function We(le){return le==="histogram"}function Ge(le,Ie,P){return(0,r.Ay)(le??{},V=>{const Y=V.advancedFilters??[];Y.splice(P??Y.length,1,{...Ie}),V.advancedFilters=Y})}function $e(le){return typeof le=="number"?"int":new Date(String(le)).toString()!=="Invalid Date"?"date":"object"}function Qe(le){return(le?.data?.values??[]).reduce((Ie,P)=>(Ie.columns.length||(Ie.columns=Object.entries(P).map(([V,Y])=>({name:V,type:$e(Y)}))),Ie.columns.forEach(V=>{Ie.columnValues[V.name]||(Ie.columnValues[V.name]=new Set);const Y=P[V.name]??null;Y!==null&&Ie.columnValues[V.name]?.add(String(Y))}),Ie),{columns:[],columnValues:{}})}},57535:($,_,t)=>{"use strict";t.d(_,{F6:()=>a,OT:()=>i,R0:()=>l,Tj:()=>p,UW:()=>c,Vq:()=>r,_6:()=>u,eg:()=>d});const e=["#2266D3","#CC8BFF","#0E9384","#8DCA4C","#F9732C","#C8338A","#EEC026","#61646C","#4E2B89","#6E7BA4"],o=["#2266D3","#83AFF6","#CC8BFF","#8018D3","#0E9384","#5FD9C3","#8DCA4C","#BDEB92","#F9732C","#FEBD89","#C8338A","#EEB7DD","#EEC026","#F8E996","#61646C","#CECFD2","#4E2B89","#BFC6E1","#6E7BA4","#B8ABF1"],c=e,l=o,r=c[0],d=["#D1E0FF","#2266D3","#07419D"],a=[{scale:"deepnote_blues",pairedColor:r,alias:"Deepnote Blue",group:"single-hue",stops:d},{scale:"blues",pairedColor:"#4c78a8",alias:"Blue",group:"single-hue",stops:["#cfe1f2","#bed8ec","#a8cee5","#8fc1de","#74b2d7","#5ba3cf","#4592c6","#3181bd","#206fb2","#125ca4","#0a4a90"]},{scale:"oranges",pairedColor:"#f58518",alias:"Orange",group:"single-hue",stops:["#fdd8b3","#fdc998","#fdb87b","#fda55e","#fc9244","#f87f2c","#f06b18","#e4580b","#d14904","#b93d02","#9f3303"]},{scale:"reds",pairedColor:"#e45756",alias:"Red",group:"single-hue",stops:["#fdc9b4","#fcb49a","#fc9e80","#fc8767","#fa7051","#f6573f","#ec3f2f","#dc2a25","#c81b1d","#b21218","#970b13"]},{scale:"teals",pairedColor:"#83bcb6",alias:"Teal",group:"single-hue",stops:["#bbdfdf","#a2d4d5","#8ac9c9","#75bcbb","#61b0af","#4da5a4","#379998","#2b8b8c","#1e7f7f","#127273","#006667"]},{scale:"greens",pairedColor:"#54a24b",alias:"Green",group:"single-hue",stops:["#d3eecd","#c0e6ba","#abdda5","#94d391","#7bc77d","#60ba6c","#46ab5e","#329a51","#208943","#0e7735","#036429"]},{scale:"yelloworangebrown",pairedColor:"#f2cf5b",alias:"Yellow",group:"single-hue",stops:["#feeaa1","#fedd84","#fecc63","#feb746","#fca031","#f68921","#eb7215","#db5e0b","#c54c05","#ab3d03","#8f3204"]},{scale:"purples",pairedColor:"#b279a2",alias:"Purple",group:"single-hue",stops:["#e2e1ef","#d4d4e8","#c4c5e0","#b4b3d6","#a3a0cc","#928ec3","#827cb9","#7566ae","#684ea2","#5c3696","#501f8c"]},{scale:"redpurple",pairedColor:"#d67195",alias:"Pink",group:"single-hue",stops:["#fccfcc","#fcbec0","#faa9b8","#f98faf","#f571a5","#ec539d","#db3695","#c41b8a","#a90880","#8d0179","#700174"]},{scale:"browns",pairedColor:"#9e765f",alias:"Brown",group:"single-hue",stops:["#eedbbd","#ecca96","#e9b97a","#e4a865","#dc9856","#d18954","#c7784c","#c0673f","#b85536","#ad4433","#9f3632"]},{scale:"greys",pairedColor:"#bab0ac",alias:"Gray",group:"single-hue",stops:["#e2e2e2","#d4d4d4","#c4c4c4","#b1b1b1","#9d9d9d","#888888","#757575","#626262","#4d4d4d","#353535","#1e1e1e"]},{scale:"goldgreen",pairedColor:"#54a24b",alias:"Green gold",group:"multi-hue",stops:["#f4d166","#d5ca60","#b6c35c","#98bb59","#7cb257","#60a656","#4b9c53","#3f8f4f","#33834a","#257740","#146c36"]},{scale:"goldred",pairedColor:"#e45756",alias:"Red gold",group:"multi-hue",stops:["#f4d166","#f6be59","#f9aa51","#fc964e","#f6834b","#ee734a","#e56249","#db5247","#cf4244","#c43141","#b71d3e"]},{scale:"viridis",pairedColor:"#4c78a8",alias:"Viridis",group:"multi-hue",stops:["#440154","#482575","#414487","#35608d","#2a788e","#21918d","#22a884","#43bf71","#7ad151","#bcdf27","#fde725"]},{scale:"turbo",pairedColor:"#f2cf5b",alias:"Turbo",group:"multi-hue",stops:["#23171b","#4a58dd","#2f9df5","#27d7c4","#4df884","#95fb51","#dedd32","#ffa423","#f65f18","#ba2208","#900c00"]},{scale:"blueorange",pairedColor:"#4c78a8",alias:"Orange blue",group:"divergent",stops:["#134b85","#2f78b3","#5da2cb","#9dcae1","#d2e5ef","#f2f0eb","#fce0ba","#fbbf74","#e8932f","#c5690d","#994a07"]},{scale:"redyellowgreen",pairedColor:"#e45756",alias:"Red green",group:"divergent",stops:["#a50026","#d4322c","#f16e43","#fcac63","#fedd8d","#f9f7ae","#d7ee8e","#a4d86e","#64bc61","#22964f","#006837"]},{scale:"redyellowblue",pairedColor:"#f2cf5b",alias:"Red blue",group:"divergent",stops:["#a50026","#d4322c","#f16e43","#fcac64","#fedd90","#faf8c1","#dcf1ec","#abd6e8","#75abd0","#4a74b4","#313695"]}],i=[{scale:"deepnote10",colors:[c[0],c[1],c[2]],pairedScale:"deepnote_blues"},{scale:"deepnote20",colors:[l[0],l[1],l[3]],pairedScale:"deepnote_blues"},{scale:"accent",colors:["#90c786","#bbafd1","#f4c28e"],pairedScale:"greens"},{scale:"category10",colors:["#3b75af","#ef8636","#519e3e"],pairedScale:"blues"},{scale:"category20",colors:["#3b75af","#b3c6e5","#ef8636"],pairedScale:"blues"},{scale:"category20b",colors:["#393b75","#b89f4b","#d4a1d3"],pairedScale:"purples"},{scale:"category20c",colors:["#4880b8","#55a15c","#d9d9d9"],pairedScale:"blues"},{scale:"dark2",colors:["#4b9c79","#ca6627","#7470ae"],pairedScale:"teals"},{scale:"tableau10",colors:["#4c78a8","#f58518","#e45756"],pairedScale:"blues",alias:"default10"},{scale:"tableau20",colors:["#5677a4","#a7c9e6","#e68b39"],pairedScale:"blues",alias:"default20"},{scale:"paired",colors:["#aecde1","#3c76af","#bbde93"],pairedScale:"blues"},{scale:"set1",colors:["#d1352b","#4a7cb3","#68ad57"],pairedScale:"reds"}],p=a[0],u=i.find(g=>g.scale==="deepnote")??i[0]},43283:($,_,t)=>{"use strict";t.d(_,{J:()=>e});function e(o){return!!o.match(/\bdisplay\(/)}},54065:($,_,t)=>{"use strict";t.d(_,{CB:()=>l,Es:()=>d,Oh:()=>p,uq:()=>r});var e=t(74250),o=t(60022),c=t(33243);const l=(u,g)=>{if(u&&!g)return`Last run: ${r(u)}`;if(u&&g){const y=(0,o.Tf)(g);return`Last run: ${r(u)}, ${y}`}};function r(u){const g=(0,e.y)(u);return g.isSame(new Date,"day")?g.format("h:mma"):g.format("MMM D, h:mma")}function d(u){if(!u)return null;for(const g of u)if((0,c.bJ)(g))return g;return null}const s=/<ipython-.+>, line ([0-9]+)/,a=/-+> ([0-9]+)( +)\w/,n=/<(ipython-input-[a-z0-9-]+)>|(\/tmp\/ipykernel[^ ]+)/;function i(u){return u.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,"")}function p(u){if(u.ename==="KeyboardInterrupt")return[];const g=u.evalue.match(s);if(g?.[1])return[{startColumn:1,startLineNumber:parseInt(g[1],10),endColumn:999,endLineNumber:parseInt(g[1],10),message:`${u.ename}: ${u.evalue}`}];const y=u?.traceback?.map(i)?.filter(K=>K.match(a)).map(K=>{const H=K.match(n);return{module:H?.[1]??H?.[2],trace:K}});if(!y||y.length===0)return[];const T=y.find(K=>K.trace.includes("in <module>"))?.module??y[0]?.module,C=y.filter(K=>!!K.module&&K.module===T),m=y.filter(K=>K.trace.startsWith("Cell In [")),O=C[C.length-1]??m[m.length-1];if(!O)return[];const W=O.trace.match(a);return W?.[1]?[{startColumn:W?.[2]?.length??1,startLineNumber:parseInt(W[1],10),endColumn:999,endLineNumber:parseInt(W[1],10),message:`${u.ename}: ${u.evalue}`}]:[]}},99636:($,_,t)=>{"use strict";t.d(_,{$2:()=>T,Al:()=>p,E0:()=>d,EN:()=>n,Nt:()=>l,Oq:()=>i,d9:()=>y,mj:()=>s,wl:()=>u});var e=t(94270);const o=(0,e.J1)`
  fragment TableStateFrament on SharedTableOutputState {
    pageSize
    pageIndex
    wrappedTextColumnIds
    hiddenColumnIds
    columnOrder
    columnDisplayNames {
      columnName
      displayName
    }
    filters {
      ... on TableOutputColumnContainsFilter {
        column_name
        value
      }
    }
    conditionalFilters {
      column
      operator
      comparativeValues
    }
    sortBy {
      column_name
      type
    }
    cellFormattingRules {
      ... on DataTableCellFormattingRuleSingleColorType {
        columnSelectionMode
        columnNames
        operator
        comparativeValues
        styleName
      }
      ... on DataTableCellFormattingRuleColorScale {
        columnSelectionMode
        columnNames
        pointMin {
          valueType
          value
          customColor
        }
        pointMid {
          valueType
          value
          customColor
        }
        pointMax {
          valueType
          value
          customColor
        }
        scaleName
      }
    }
  }
`,c=(0,e.J1)`
  fragment BlockStateFragment on BlockState {
    outputs_reference
    execution_start
    execution_millis
    source_hash
    deepnote_to_be_reexecuted
    execution_context_id
    execution_count
    deepnote_table_state {
      ...TableStateFrament
    }
    deepnote_table_loading
    deepnote_table_invalid
    output_cleared
    last_executed_function_notebook_id
    last_function_run_started_at
    function_notebook_export_states {
      export_name
      table_state {
        ...TableStateFrament
      }
      table_loading
      table_invalid
    }
  }

  ${o}
`,l=(0,e.J1)`
  fragment FullBlockFragment on Block {
    id
    version
    sorting_key
    block_group
    type
    content
    metadata
    state {
      ...BlockStateFragment
    }
  }

  ${c}
`,r=(0,e.J1)`
  fragment BlockAmendFragment on Block {
    id
    version
    sorting_key
    state {
      ...BlockStateFragment
    }
  }

  ${c}
`,d=(0,e.J1)`
  fragment EditableNotebookMetadataFragment on Notebook {
    app_metadata {
      deepnote_app_layout
      deepnote_app_width
      deepnote_app_clear_outputs
      deepnote_app_comments_enabled
      deepnote_app_run_on_load_enabled
      deepnote_app_embed_enabled
      deepnote_app_execution_enabled
      deepnote_app_hide_all_code_blocks_enabled
      deepnote_app_table_of_contents_enabled
      deepnote_app_run_on_input_enabled
      deepnote_app_reactivity_enabled
    }
    editor_metadata {
      deepnote_full_width
    }
  }
`,s=(0,e.J1)`
  fragment NotebookInfoFragment on Notebook {
    working_directory
    execution_mode
    is_module
    ...EditableNotebookMetadataFragment
    persisted_state {
      deepnote_persisted_session {
        created_at
      }
    }
    is_manual_lock_enabled
  }

  ${d}
`,a=(0,e.J1)`
  fragment BlockExecutionQueueItemFragment on BlockExecutionQueueItem {
    block_id
    input_request {
      prompt
    }
  }
`,n=(0,e.J1)`
  fragment PrimitiveVariableFragment on PrimitiveVariable {
    name
    type
    size_bytes
    text_preview
  }
`,i=(0,e.J1)`
  fragment ArrayVariableFragment on ArrayVariable {
    name
    type
    size_bytes
    text_preview
    elements
    element_count
    element_type
  }
`,p=(0,e.J1)`
  fragment ObjectVariableFragment on ObjectVariable {
    name
    type
    size_bytes
    text_preview
    shape
  }
`,u=(0,e.J1)`
  fragment DataframeVariableFragment on DataframeVariable {
    name
    type
    size_bytes
    text_preview
    shape
    columns {
      name
      type
    }
    column_count
    row_count
  }
`,g=(0,e.J1)`
  fragment NotebookKernelVariablesFragment on NotebookKernelState {
    variables {
      ... on PrimitiveVariable {
        ...PrimitiveVariableFragment
      }
      ... on ArrayVariable {
        ...ArrayVariableFragment
      }
      ... on ObjectVariable {
        ...ObjectVariableFragment
      }
      ... on DataframeVariable {
        ...DataframeVariableFragment
      }
    }
  }

  ${n}
  ${i}
  ${p}
  ${u}
`,y=(0,e.J1)`
  fragment KernelStateFragment on NotebookKernelState {
    id
    status
    name
    execution_context_id
    currently_executing_item {
      ...BlockExecutionQueueItemFragment
    }
    block_execution_queue {
      ...BlockExecutionQueueItemFragment
    }
  }

  ${a}
`,T=(0,e.J1)`
  fragment NotebookKernelStateFragment on Notebook {
    editor_kernel_state {
      ...KernelStateFragment
      ...NotebookKernelVariablesFragment
    }
  }

  ${y}
  ${g}
`},74288:($,_,t)=>{"use strict";t.d(_,{E1:()=>H,Od:()=>N,QP:()=>k,di:()=>w,Xs:()=>F,v$:()=>X,p2:()=>K,Sx:()=>z,BT:()=>T});var e=t(38038),o=t(16530),c=t(51881),l=t(87574),r=t(53670);const d=new l.Ag({name:"Date",description:"Date custom scalar type",serialize(E){if(typeof E=="string")return new Date(E).getTime();if(E instanceof Date)return E.getTime();throw Error("GraphQL Date Scalar serializer expected a `Date` object")},parseValue(E){return typeof E=="number"?new Date(E):((0,c.H)(new Error("GraphQL Date Scalar parser expected a `number`"),"error"),new Date(0))},parseLiteral(E){return E.kind===r.b.INT?new Date(parseInt(E.value,10)):null}}),s=new l.Ag({name:"Double",description:"Large integer (over 32 bits)",serialize(E){if(typeof E=="number")return[E%2**32,Math.floor(E/2**32)];throw Error("GraphQL Date Scalar serializer expected a `Date` object")},parseValue(E){return Array.isArray(E)&&E.length===2&&typeof E[0]=="number"&&typeof E[1]=="number"?E[0]+E[1]*2**32:((0,c.H)(new Error("GraphQL Date Scalar parser expected a `[number, number]` tuple"),"error"),0)},parseLiteral(E){return E.kind===r.b.INT&&typeof E.value=="string"?parseInt(E.value,10):0}});var a=t(32928),n=t(89494),i=t(19550),p=t(90176),u=t(37112),g=t(40177),y=t(75909);function T(E,D,R){const L=D.map(x=>K(x));return{type:"notebook",notebookId:E,...C(R),...R.editor_kernel_state?{...m(R.editor_kernel_state),...O(R.editor_kernel_state)}:{kernelState:null,variables:{}},children:L}}function C(E){const{__typename:D,deepnote_app_layout:R,deepnote_app_width:L,...x}=E.app_metadata,{__typename:ne,...M}=E.editor_metadata;return{executionMode:E.execution_mode,isModule:E.is_module,workingDirectory:E.working_directory,editorMetadata:M,appMetadata:{...x,deepnote_app_layout:R?(0,e.W7)(R,"_","-"):void 0,deepnote_app_width:L?(0,e.W7)(L,"_","-"):void 0},persistedSessionTimestamp:E.persisted_state.deepnote_persisted_session?.created_at??null}}function m(E){const{status:D,name:R,currently_executing_item:L,block_execution_queue:x,execution_context_id:ne}=E;return{kernelState:{status:D,name:R,currentlyExecutingItem:L?W(L):null,blockExecutionQueue:x.map(W),executionContextId:ne}}}function O(E){const D=E.variables.map(L=>({varName:L.name,varType:L.type,varSize:L.size_bytes==null?null:parseInt(L.size_bytes,10),varShape:L.__typename==="ObjectVariable"||L.__typename==="DataframeVariable"?L.shape:null,varContent:L.text_preview,varElements:L.__typename==="ArrayVariable"?L.elements:null,varColumns:L.__typename==="DataframeVariable"?L.columns?.map(x=>x.name)??null:null,varColumnTypes:L.__typename==="DataframeVariable"?L.columns?.map(x=>x.type)??null:null,varUnderlyingType:L.__typename==="ArrayVariable"?L.element_type:null,numElements:L.__typename==="ArrayVariable"?parseInt(L.element_count,10):L.__typename==="DataframeVariable"?L.row_count:null,numColumns:L.__typename==="DataframeVariable"?L.column_count:null}))??[];return{variables:Object.fromEntries(D.map(L=>[L.varName,L]))}}function W(E){return{blockId:E.block_id,inputRequest:E.input_request}}function K(E){const D=(0,p.dE)(E.type)?E.type:null;if(!D)throw new Error(`Unknown block type: ${E.type}`);if((0,g.y9)(E.type)&&(0,o.A0)(E.type)){const{formattedRanges:R,...L}=E.metadata,x=(0,u.Vu)(E.content,R??[]);return{id:E.id,version:E.version,type:E.type,sorting_key:E.sorting_key,block_group:E.block_group,metadata:{...L},children:x}}else if((0,g.cU)(D)){E.state||(0,c.H)(new Error("Missing state in executable block from the Block API"),"error",{blockId:E.id,blockType:D});const R=B(E.state);return{id:E.id,version:E.version,type:D,sorting_key:E.sorting_key,block_group:E.block_group,metadata:{...E.metadata},state:R,children:[{text:E.content}]}}else return{id:E.id,version:E.version,type:D,sorting_key:E.sorting_key,block_group:E.block_group,metadata:{...E.metadata},children:[{text:E.content}]}}function H(E,D){if((0,g.Uu)(E)){D.state||(0,c.H)(new Error("Missing state in executable block from the Block API"),"error",{blockId:E.id,blockType:E.type});const R=B(D.state);return{...E,version:D.version,sorting_key:D.sorting_key,state:R}}else return D.state&&(0,c.H)(new Error("Unexpected state in non-executable block from the Block API"),"error",{blockId:E.id,blockType:E.type,state:D.state}),{...E,version:D.version,sorting_key:D.sorting_key}}function N(E,D){const{hasFailedTransaction:R,...L}=E;return{...L,...D.hasFailedTransaction?{hasFailedTransaction:!0}:{}}}function w(E,D){return{...E,...C(D)}}function k(E,D){return{...E,...m(D)}}function F(E,D){return{...E,...O(D)}}function X(E){if((0,g.p8)(E)){const{source:D,formattedRanges:R}=(0,u.__)(E.children);return{type:E.type,content:D,metadata:{...E.metadata,formattedRanges:R},block_group:E.block_group}}else return{type:E.type,content:(0,y.e)(E),metadata:{...E.metadata},block_group:E.block_group}}function z(E){return{partialMetadata:{deepnote_variable_value:E.metadata.deepnote_variable_value}}}function B(E){const{__typename:D,deepnote_table_state:R,execution_millis:L,execution_count:x,outputs_reference:ne,function_notebook_export_states:M,...A}=E??{},b=R?U(R):null,q=L?s.parseValue(L):null,fe=M?Object.fromEntries(M.map(({export_name:oe,table_state:ie,...h})=>[oe,(0,a.oF)({...h,table_state:ie?U(ie):null})])):null;return{...(0,a.oF)({...A,deepnote_table_state:b,execution_millis:q,function_notebook_export_states:fe}),execution_count:x??null,outputs_reference:ne??null}}function U(E){return(0,a.oF)({pageSize:E.pageSize,pageIndex:E.pageIndex,wrappedTextColumnIds:E.wrappedTextColumnIds,hiddenColumnIds:E.hiddenColumnIds,columnOrder:E.columnOrder,columnDisplayNames:E.columnDisplayNames?.map(({__typename:D,...R})=>R),sortBy:E.sortBy?.map(D=>G(D))??[],filters:E.filters?.map(D=>f(D))??null,conditionalFilters:E.conditionalFilters?.map(({__typename:D,...R})=>({...R,operator:n.yY[R.operator]})),cellFormattingRules:E.cellFormattingRules?.map(I)})}function G(E){return{id:E.column_name,type:E.type}}function f(E){switch(E.__typename){case"TableOutputColumnContainsFilter":{const{__typename:D,column_name:R,...L}=E;return{type:"contains",id:R,...L}}case void 0:throw new Error("Missing __typename in table filter");default:(0,i.x)(E.__typename)}}function I(E){if(E.__typename==="DataTableCellFormattingRuleSingleColorType"){const{__typename:D,...R}=E;return{...R,type:"singleColor",operator:n.yY[E.operator]}}if(E.__typename==="DataTableCellFormattingRuleColorScale"){const{__typename:D,pointMin:R,pointMid:L,pointMax:x,...ne}=E,{__typename:M,...A}=R,{__typename:b,...q}=L,{__typename:fe,...oe}=x;return{...ne,type:"colorScale",pointMin:A,pointMid:q,pointMax:oe}}if(E.__typename===void 0)throw new Error("Missing __typename in table cell formatting rule");(0,i.x)(E.__typename)}},15799:($,_,t)=>{"use strict";t.d(_,{FU:()=>i,LX:()=>p,fu:()=>y,pH:()=>g,qs:()=>n,w6:()=>u});var e=t(32928),o=t(16530),c=t(29828),l=t.n(c),r=t(16551),d=t(74288),s=t(59446),a=t(40177);function n(O,W,K){const H=K?(0,d.p2)(K):null,N=(0,a.Sk)(O,W);if(!N){H&&T(O,H);return}H?(C(O,N,H),p(O,W,{hasFailedTransaction:!1})):O.apply({type:"remove_node",path:N.path,node:N.block,remote:!0,affectsUserEditableData:!0})}function i(O,W,K){const H=(0,a.Sk)(O,W);if(!H){K&&console.warn("Block amend failed: block not found",{blockId:W});return}if(K){const N=(0,d.E1)(H.block,K);C(O,H,N)}else O.apply({type:"remove_node",path:H.path,node:H.block,remote:!0,affectsUserEditableData:!0})}function p(O,W,K){const H=(0,a.Sk)(O,W);if(!H){console.warn("Block transaction state update failed: block not found",{blockId:W});return}const N=(0,d.Od)(H.block,K);C(O,H,N)}function u(O,W){const K=(0,a.Vm)(O);if(!K){console.warn("Notebook info update failed: notebook not found");return}const H=(0,d.di)(K,W),N=(0,e.dX)(K,H);N&&O.apply({type:"set_node",path:(0,a.CT)([]),properties:(0,a.mt)(N,K),newProperties:N,remote:!0,affectsUserEditableData:!1})}function g(O,W){const K=(0,a.Vm)(O);if(!K){console.warn("Notebook info update failed: notebook not found");return}const H=(0,d.QP)(K,W),N=(0,e.dX)(K,H);N&&O.apply({type:"set_node",path:(0,a.CT)([]),properties:(0,a.mt)(N,K),newProperties:N,remote:!0,affectsUserEditableData:!1})}function y(O,W){const K=(0,a.Vm)(O);if(!K){console.warn("Notebook info update failed: notebook not found");return}const H=(0,d.Xs)(K,W),N=(0,e.dX)(K,H);N&&O.apply({type:"set_node",path:(0,a.CT)([]),properties:(0,a.mt)(N,K),newProperties:N,remote:!0,affectsUserEditableData:!1})}function T(O,W){const K=(0,a.qV)(O,W);O.apply({type:"insert_node",path:K,node:W,remote:!0,affectsUserEditableData:!0})}function C(O,W,K){const{block:H,path:N}=W,w=H.type!==K.type,k=H.sorting_key!==K.sorting_key;if(w){O.apply({type:"remove_node",path:N,node:H,remote:!0,affectsUserEditableData:!0});const F=k?(0,a.qV)(O,K):N;O.apply({type:"insert_node",path:F,node:K,remote:!0,affectsUserEditableData:!0})}else{const F=(0,e.dX)(W.block,K);if(F){const X=m(H,K),z=k?(0,a.qV)(O,K):N,B=O.selection;if(F.children&&!(0,a.wR)(K)&&B){const U=(0,a.TJ)(O,B);if(U?.block.id===K.id){O.preventDefaultScroll();const{anchor:G,focus:f}=B;O.apply({type:"set_selection",properties:{anchor:G,focus:f},newProperties:{anchor:{path:r.KE.path(O,U.path,{edge:"start"}),offset:0},focus:{path:r.KE.path(O,U.path,{edge:"start"}),offset:0}}})}}O.apply({type:"set_node",path:N,properties:(0,a.mt)(F,H),newProperties:F,remote:!0,affectsUserEditableData:X}),l()(N,z)||O.apply({type:"move_node",path:N,newPath:z,remote:!0,affectsUserEditableData:!0})}}}function m(O,W){if(O.hasFailedTransaction!==W.hasFailedTransaction)return!0;const K={...(0,s.e)(O),cellId:O.id,block_group:""},H={...(0,s.e)(W),cellId:W.id,block_group:""},N=(0,o.Tx)(K),w=(0,o.Tx)(H);return!l()(N,w)}},90176:($,_,t)=>{"use strict";t.d(_,{FW:()=>c,G1:()=>g,KX:()=>s,RA:()=>u,SD:()=>p,Vz:()=>n,_n:()=>a,bh:()=>l,dE:()=>T,fY:()=>i,kl:()=>y});var e=t(61103),o=t.n(e);const c=["text-cell-h1","text-cell-h2","text-cell-h3"],l=["code","sql"],r=[...l,"markdown"],d=["text-cell-bullet","text-cell-todo"],s=[...d,"text-cell-callout"],a=["text-cell-p","text-cell-callout",...c,...d],n=["input-text","input-textarea","input-select","input-slider","input-date","input-file"],i=["visualization",...r,"notebook-function",...n,"image","button","separator","big-number"],p=["sql",...n],u=["visualization","big-number","button",...l,"notebook-function",...n],g=["visualization","code","sql","notebook-function"],y=o()([...u,...r,...a,"image","button","separator"]);function T(C){return y.includes(C)}},59446:($,_,t)=>{"use strict";t.d(_,{e:()=>d,w:()=>r});var e=t(8847),o=t(19550),c=t(37112),l=t(75909);function r(s,a,n){switch(a.cell_type){case"big-number":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"big-number",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,children:[{text:a.source}],metadata:p,state:i}}case"code":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"code",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,children:[{text:a.source}],metadata:p,state:i}}case"sql":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"sql",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,children:[{text:a.source}],metadata:p,state:i}}case"markdown":return{children:[{text:a.source}],type:"markdown",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:{...a.metadata}};case"notebook-function":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"notebook-function",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,children:[{text:a.source}],metadata:p,state:i}}case"visualization":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"visualization",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,children:[{text:a.source}],metadata:p,state:i}}case"text-cell-h1":case"text-cell-h2":case"text-cell-h3":case"text-cell-p":case"text-cell-bullet":case"text-cell-todo":case"text-cell-callout":{const{formattedRanges:i,...p}=a.metadata;return{children:(0,c.Vu)(a.source,i??[]),type:a.cell_type,id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:{...p}}}case"input-text":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"input-text",children:[{text:a.source}],id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:p,state:i}}case"input-textarea":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"input-textarea",children:[{text:a.source}],id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:p,state:i}}case"input-file":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"input-file",children:[{text:a.source}],id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:p,state:i}}case"input-select":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"input-select",children:[{text:a.source}],id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:p,state:i}}case"input-slider":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"input-slider",children:[{text:a.source}],id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:p,state:i}}case"input-date":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{type:"input-date",children:[{text:a.source}],id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:p,state:i}}case"image":return{children:[{text:""}],type:"image",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:a.metadata};case"button":{const{state:i,metadata:p}=(0,e.v)({block_type:a.cell_type,metadata:a.metadata,execution_count:a.execution_count,outputs_reference:a.outputs_reference});return{children:[{text:""}],type:"button",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:p,state:i}}case"separator":return{children:[{text:""}],type:"separator",id:s,uniqueId:!0,version:0,sorting_key:n.sortingKey,block_group:n.blockGroup??s,metadata:a.metadata};default:return(0,o.x)(a)}}function d(s){switch(s.type){case"big-number":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"big-number",source:(0,l.e)(s),metadata:{...s.metadata,...i},outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group}}case"code":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"code",source:(0,l.e)(s),metadata:{...s.metadata,...i},outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group,content_dependencies:null}}case"sql":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"sql",source:(0,l.e)(s),metadata:{...s.metadata,...i},outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group,content_dependencies:null}}case"markdown":return{cell_type:"markdown",source:(0,l.e)(s),metadata:{...s.metadata},block_group:s.block_group};case"notebook-function":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"notebook-function",metadata:{...s.metadata,...i},outputs:[],outputs_reference:n,execution_count:a,source:"",block_group:s.block_group,content_dependencies:null}}case"visualization":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"visualization",metadata:{...s.metadata,...i},outputs:[],outputs_reference:n,execution_count:a,source:"",block_group:s.block_group}}case"text-cell-h1":case"text-cell-h2":case"text-cell-h3":case"text-cell-p":case"text-cell-bullet":case"text-cell-todo":case"text-cell-callout":{const{source:a,formattedRanges:n}=(0,c.__)(s.children);return{cell_type:s.type,source:a,metadata:{...s.metadata,formattedRanges:n},block_group:s.block_group}}case"input-text":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"input-text",metadata:{...s.metadata,...i},source:"",outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group}}case"input-textarea":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"input-textarea",metadata:{...s.metadata,...i},source:"",outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group}}case"input-file":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"input-file",metadata:{...s.metadata,...i},source:"",outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group}}case"input-select":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"input-select",metadata:{...s.metadata,...i},source:"",outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group}}case"input-slider":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"input-slider",metadata:{...s.metadata,...i},source:"",outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group}}case"input-date":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"input-date",metadata:{...s.metadata,...i},source:"",outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group}}case"image":return{cell_type:"image",source:"",metadata:s.metadata,block_group:s.block_group};case"button":{const{execution_count:a,outputs_reference:n,...i}=s.state;return{cell_type:"button",metadata:{...s.metadata,...i},source:"",outputs:[],outputs_reference:n,execution_count:a,block_group:s.block_group}}case"separator":return{cell_type:"separator",source:"",metadata:s.metadata,block_group:s.block_group};default:return(0,o.x)(s)}}},37112:($,_,t)=>{"use strict";t.d(_,{Vu:()=>a,__:()=>s});var e=t(11097),o=t.n(e),c=t(87527),l=t(79673);function r(m,O){const W=s(O.children),K={type:"link",url:O.url,fromCodePoint:m.codePointLength,toCodePoint:m.codePointLength+W.codePointLength,ranges:W.formattedRanges};return{codePointLength:m.codePointLength+W.codePointLength,source:m.source+W.source,formattedRanges:[...m.formattedRanges,K]}}function d(m,O){const{text:W,...K}=O,H=p(W),N=Object.keys(K).length>0;return{codePointLength:m.codePointLength+H,source:`${m.source}${W}`,formattedRanges:N?m.formattedRanges.concat({type:"marks",fromCodePoint:m.codePointLength,toCodePoint:m.codePointLength+H,marks:K}):m.formattedRanges}}function s(m){return m.reduce((O,W)=>(0,c.c1)(W)?r(O,W):(0,l.Q_)(W)?O:d(O,W),{codePointLength:0,source:"",formattedRanges:[]})}function a(m,O){const W=[...m],K=g(W,O),H={type:"marks",fromCodePoint:0,toCodePoint:W.length,marks:{}},N=K?n(H,O):[H];return N.flatMap((k,F)=>{if(k.type==="link"){const X=N[F-1],z=X&&X.type==="link"&&X.toCodePoint===k.fromCodePoint;return[...k.fromCodePoint===0||z?[{text:""}]:[],C(W,k),...k.toCodePoint===W.length?[{text:""}]:[]]}else return T(W,k)})}function n(m,O){return O.reduce((W,K)=>{const H=W.at(-1);return H?[...W.slice(0,-1),...i(H,K)]:W},[m])}function i(m,O){const W=m.fromCodePoint<O.fromCodePoint?{...m,toCodePoint:O.fromCodePoint}:null,K=m.toCodePoint>O.toCodePoint?{...m,fromCodePoint:O.toCodePoint}:null;return o()([W,O,K])}function p(m){return[...m].length}function u(m,O){return m.fromCodePoint>=0&&m.fromCodePoint<O.length&&m.toCodePoint>=0&&m.toCodePoint<=O.length&&m.fromCodePoint<=m.toCodePoint}function g(m,O){return O.every(W=>u(W,m))}function y(m,O){return m.slice(O.fromCodePoint,O.toCodePoint).join("")}function T(m,O){return{text:y(m,O),...O.marks}}function C(m,O){return{type:"inline-link",url:O.url,children:a(y(m,O),O.ranges)}}},36581:($,_,t)=>{"use strict";t.d(_,{KJ:()=>l});const e=new WeakMap,o=new WeakMap,c=new WeakMap,l={isMerging(r){return c.get(r)},isSaving(r){return o.get(r)},redo(r){r.redoEdit()},undo(r){r.undoEdit()},withoutMerging(r,d){const s=l.isMerging(r);c.set(r,!1),d(),c.set(r,s)},withoutSaving(r,d){const s=l.isSaving(r);o.set(r,!1),d(),o.set(r,s)}}},87527:($,_,t)=>{"use strict";t.d(_,{Ax:()=>s,c1:()=>l,cQ:()=>n,in:()=>d,jl:()=>r,oD:()=>a});var e=t(414),o=t(29317),c=t(16551);function l(i){return c.Hg.isElement(i)&&i.type==="inline-link"}function r(i,p){if(!p)return!1;const u=[...c.KE.nodes(i,{at:p,match:l})],g=u[0];if(u.length!==1||!g)return!1;const[,y]=g;return c.wA.isAncestor(y,p.anchor.path)&&c.wA.isAncestor(y,p.focus.path)}function d(i,p){if(!p)return!1;const[u]=c.KE.nodes(i,{at:p,match:l});return!!u}function s(i="",p){return{type:"inline-link",url:i,children:p!=null?[{text:p}]:[]}}function a(i){i.selection&&(d(i,i.selection)?c.gB.unwrapNodes(i,{match:l}):c.gB.wrapNodes(i,s(),{split:!0}))}function n(i,p,u){(0,o.Ay)("mod+shift+u",p)&&(a(i),(0,e.u4)("Text formatting applied",{type:"hyperlink",origin:"shortcut",workspaceId:u}))}},32908:($,_,t)=>{"use strict";t.d(_,{K:()=>d,q:()=>r});var e=t(16530),o=t(78881),c=t(147),l=t.n(c);function r(s){const a=(0,e.Tc)({type:s.type,source:"",metadata:s.metadata});if(s.type==="input-slider")return l()(s.state.execution_count);const n=a&&s.state.source_hash&&(0,o.$)(a)!==s.state.source_hash;return l()(s.state.execution_count)||!!n}function d(s){const a=s.metadata.deepnote_variable_value,n=s.metadata.deepnote_variable_options;return s.metadata.deepnote_variable_select_type==="from-variable"&&s.metadata.deepnote_variable_selected_variable&&typeof a=="string"?!n.includes(a):a.length===0?!1:!n.find(i=>a.includes(i))}},79673:($,_,t)=>{"use strict";t.d(_,{Hi:()=>c,IZ:()=>s,Q_:()=>o,du:()=>n,im:()=>a});var e=t(16551);function o(i){return e.Hg.isElement(i)&&i.type==="inline-slash-command"}function c(i,p){if(!p)return!1;const u=[...e.KE.nodes(i,{at:p,match:o})],g=u[0];if(u.length!==1||!g)return!1;const[,y]=g;return e.wA.isAncestor(y,p.anchor.path)&&e.wA.isAncestor(y,p.focus.path)}function l(i,p){if(!p)return!1;const[u]=Editor.nodes(i,{at:p,match:o});return!!u}function r(i="/"){return{type:"inline-slash-command",children:[{text:i}]}}function d(i){i.selection&&(l(i,i.selection)?Transforms.unwrapNodes(i,{match:o}):Transforms.wrapNodes(i,r(),{split:!0}))}function s(i){return e.bP.string(i).replace(/^\//,"")}function a(i){return`/${i}`}function n(i,p){return p.some(u=>u?.toLowerCase().includes(i.toLowerCase()))}},40177:($,_,t)=>{"use strict";t.d(_,{NP:()=>q,JW:()=>A,CT:()=>Ze,t5:()=>it,uD:()=>oe,Vm:()=>fe,u9:()=>j,t:()=>at,Oc:()=>$e,LY:()=>Le,EM:()=>We,TJ:()=>le,Sk:()=>Me,SC:()=>ct,CH:()=>_t,v5:()=>Ge,_$:()=>Qe,Dc:()=>st,qV:()=>Tt,L2:()=>et,mt:()=>b,e5:()=>Ie,Tv:()=>pt,NM:()=>ve,bk:()=>G,TL:()=>pe,oo:()=>Y,Zq:()=>S,y9:()=>T,IK:()=>R,x5:()=>ne,XQ:()=>Ae,Lr:()=>k,Uu:()=>H,cU:()=>K,xY:()=>O,S0:()=>N,Aw:()=>X,Mu:()=>F,p2:()=>D,cP:()=>V,yA:()=>W,Tm:()=>z,Y$:()=>P,lX:()=>B,YD:()=>Ne,Wd:()=>ue,qz:()=>Et,Q9:()=>ke,p8:()=>te,bf:()=>x,An:()=>I,wR:()=>m,OY:()=>Ke,Gk:()=>ie,Kf:()=>mt,LS:()=>h,DT:()=>ce,Ee:()=>He,uM:()=>Pe,lK:()=>qe});var e=t(87698),o=t(16530),c=t(48154),l=t(45399),r=t.n(l),d=t(11097),s=t.n(d),a=t(29828),n=t.n(a),i=t(16551),p=t(97020);function u(Q,Ee){const de=Q.split(Ee),be=de[de.length-1],we=parseInt(be,10);if(de.length===1||isNaN(we))return Q+Ee+"2";const Je=de.slice(0,-1).join(Ee),ot=we+1||2;return Je+Ee+ot}var g=t(90176),y=t(36581);function T(Q){return g.kl.includes(Q)}function C(Q){return g.fY.includes(Q)}function m(Q){return C(Q.type)}function O(Q){return g.bh.includes(Q.type)}function W(Q){return g.Vz.includes(Q.type)}function K(Q){return g.RA.includes(Q)}function H(Q){return O(Q)||B(Q)||W(Q)||I(Q)||G(Q)||R(Q)}function N(Q){return Ae(Q)||ke(Q)}function w(Q){return g.G1.includes(Q)}function k(Q){return w(Q.type)}function F(Q){return g.FW.includes(Q)}function X(Q){return F(Q.type)}function z(Q){return Q.type==="markdown"}function B(Q){return Q.type==="notebook-function"}function U(Q){return Q.type==="input-textarea"}function G(Q){return Q.type==="big-number"}function f(Q){return Q.type==="text-cell-bullet"}function I(Q){return Q.type==="visualization"}function E(Q){return g.SD.includes(Q.type)}function D(Q){return Q.type==="image"}function R(Q){return Q.type==="button"}function L(Q){return Q.type==="separator"}function x(Q){return Q.type==="text-cell-todo"}function ne(Q){return Q.type==="text-cell-callout"}function M(Q){return f(Q)||x(Q)}function A(Q){return Ae(Q)||ke(Q)||B(Q)}function b(Q,Ee){const de={};for(const be of Object.keys(Q))de[be]=Ee[be];return de}function q(Q){return{block:Q[0],path:Q[1]}}function fe(Q){return Q.children.length===0?null:i.KE.node(Q,[0])[0]}function oe(Q,Ee){const{at:de,match:be,...we}=Ee??{};return i.KE.nodes(Q,{...we,at:Q.children.length>0?de??Ze([]):[],match:Je=>Y(Je)&&(!be||be(Je))})}function ie(Q,Ee){const{at:de,match:be,targetBlockGroup:we,to:Je,...ot}=Ee;i.KE.withoutNormalizing(Q,()=>{const lt=oe(Q,{at:de??Ze([]),match:ut=>Y(ut)&&(!be||be(ut))}),At=ct(Je);let bt=!1;for(const[ut,yt]of lt)(!we||ut.block_group!==we)&&ce(Q,yt,we,{isMergeable:!0}),(i.wA.equals(yt,Ee.to)||i.wA.isChild(yt,Ee.to))&&(bt=!0);bt||i.gB.moveNodes(Q,{...ot,at:de??Ze([]),match:ut=>Y(ut)&&(!be||be(ut)),to:_t(At)})})}function h(Q,Ee,de,be={}){const we=Me(Q,Ee);return we?ce(Q,we.path,de,be):null}function ce(Q,Ee,de,be={}){const we=de??(0,e.NF)(),Je=We(Q,Ee);return Je?(Q.apply({type:"set_node",path:Ee,properties:{block_group:Je.block_group},newProperties:{block_group:we},isMergeable:!!be.isMergeable}),we):null}function ve(Q,Ee){try{return Ee?p.rL.toDOMRange(Q,Ee):null}catch(de){const be=de instanceof Error?de.message:String(de);if(be.includes("Cannot resolve a DOM node from Slate node")||be.includes("Cannot resolve a DOM point from Slate point"))return null;throw de}}function Me(Q,Ee){const be=[...oe(Q,{match:we=>we.id===Ee})][0]??null;return be?q(be):null}function Le(Q,Ee){try{const de=i.KE.node(Q,Ze([Ee]));return Y(de[0])?q(de):null}catch{return null}}function We(Q,Ee){let de=i.KE.node(Q,Ee);for(;de&&!("id"in de[0])&&de[1].length>0;)de=i.KE.parent(Q,de[1]);return de&&"id"in de[0]?de[0]:null}function Ge(Q){const Ee=Q.selection;return Ee?Qe(Q,Ee):[]}function $e(Q){const Ee=Q.selection;return Ee?le(Q,Ee):null}function Qe(Q,Ee){return[...oe(Q,{at:Ee})].map(q)}function le(Q,Ee){const de=Qe(Q,Ee);return de.length===1?de[0]??null:null}function Ie(Q,Ee){return le(Q,Ee)?.block.id??null}function P(Q){return i.Hg.isElement(Q)&&Q.type==="notebook"}function V(Q){return!("text"in Q)&&!("id"in Q)}function Y(Q){return"id"in Q}function te(Q){return Y(Q)&&(0,o.A0)(Q.type)}function Ae(Q){return Q.type==="code"}function ke(Q){return Q.type==="sql"}function Ne(Q){return g.KX.includes(Q.type)}function ue(Q,Ee){const de=ct(Ee)-1;if(de<0)return!1;const be=Le(Q,de);return!!(be&&te(be.block)&&i.KE.isEmpty(Q,be.block))}function Pe(Q,Ee,de){const be=Me(Q,Ee);be&&Fe(Q,be,de)}function He(Q,Ee,de){const be=p.rL.findPath(Q,Ee);if(!be)return;Fe(Q,{block:Ee,path:be},de)}function Fe(Q,Ee,de){const be=Ee.block.metadata,we=typeof de=="function"?(0,c.jM)(be,de):{...be,...de};n()(be,we)||i.gB.setNodes(Q,{metadata:we},{at:Ee.path})}function qe(Q,Ee){const de=fe(Q);if(!de)return;const be=de.appMetadata,we=de.editorMetadata,Je=de.isModule,ot=Ee.partialAppMetadata?{...be,...Ee.partialAppMetadata}:null,lt=Ee.partialEditorMetadata?{...we,...Ee.partialEditorMetadata}:null;(!ot||n()(be,ot))&&(!lt||n()(we,lt))&&(typeof Ee.isModule>"u"||Je===Ee.isModule)||i.gB.setNodes(Q,{...ot&&{appMetadata:ot},...lt&&{editorMetadata:lt},...typeof Ee.isModule<"u"&&{isModule:Ee.isModule}},{at:Ze([])})}function at(Q){const Ee={};for(const[de]of oe(Q)){const be=de.type;Ee[be]=(Ee[be]??0)+1}return Ee}function st(Q,Ee){return new Set([...oe(Q,{match:de=>de.type===Ee})].filter(de=>!!("deepnote_variable_name"in de[0].metadata&&de[0].metadata.deepnote_variable_name)).map(([de])=>de.metadata.deepnote_variable_name))}function it(Q,Ee){const de=r()(Q);if(de.id=(0,e.NF)(),de.uniqueId=!0,de.sorting_key=null,de.block_group=(0,e.NF)(),delete de.metadata.deepnote_app_block_group_id,delete de.metadata.deepnote_app_block_subgroup_id,delete de.metadata.deepnote_app_block_width,delete de.metadata.deepnote_app_block_order,H(de)&&(de.state={execution_count:null,outputs_reference:null},de.metadata.allow_embed=!1),N(de)&&delete de.metadata.function_export_name,E(de)){const be=de.metadata.deepnote_variable_name;if(be){let we=be;for(;Ee.existingVariableNames.has(we);)we=u(we,"_");de.metadata.deepnote_variable_name=we}}return de}function ht(Q,Ee){return!Path.isCommon(Ee,Q.anchor.path)||!Path.isCommon(Ee,Q.focus.path)?null:pt(Q)}function pt(Q){return{anchorOffset:Q.anchor.offset,focusOffset:Q.focus.offset,outsideMonacoEditor:!!Q.outsideMonacoEditor}}function St(Q,Ee){return DeepnoteRange.includes(Q,Ee)}function Ze(Q){return[0,...Q]}function ct(Q){return Q[1]}function _t(Q){return[0,Q]}function S(Q){return Q.length>Ze([]).length}function j(Q){const Ee=$e(Q)?.block;Ee&&Q.isVoid(Ee)||p.rL.focus(Q)}function pe(Q){return Q.offset===0&&Q.path.every(Ee=>Ee===0)}function Ke(Q,Ee){const de=r()(Q);for(const[be,we]of i.bP.nodes(de))if(Y(be)){const Je=Ee(be);if(Je!==be){const ot=i.bP.parent(de,we);ot.children[we[we.length-1]]=Je}}return de}function et(Q){const Ee=[...oe(Q,{at:Ze([]),match:E})],de=s()(Ee.map(be=>be[0].metadata.deepnote_variable_name));return new Set(de)}function mt(Q,Ee){y.KJ.withoutSaving(Q,()=>{const de=fe(Q);de?Q.apply({type:"set_node",path:Ze([]),properties:de,newProperties:Ee,remote:!0,isMergeable:!1}):Q.apply({type:"insert_node",path:Ze([]),node:Ee,remote:!0,isMergeable:!1})})}function Tt(Q,Ee){const de=Ee.sorting_key;if(!de)return Ze([0]);const be=oe(Q);let we=0;for(const[Je]of be)if(Je.id!==Ee.id&&Je.sorting_key){if(Je.sorting_key>=de)break;we+=1}return Ze([we])}function Et(Q,Ee){return!!(Q.selection&&i.Q6.isCollapsed(Q.selection)&&i.KE.isStart(Q,Q.selection.focus,Ee))}},75909:($,_,t)=>{"use strict";t.d(_,{R:()=>o,e:()=>e});function e(c){return c.children[0]?.text??""}function o(c){return[...c,0]}},83727:($,_,t)=>{"use strict";t.d(_,{DV:()=>l,II:()=>d,NG:()=>s,Vu:()=>c,cX:()=>e,hn:()=>r,iU:()=>o});function e(){return typeof window<"u"&&window.navigator.platform.includes("Mac")}function o(a){return a==="ready"}function c(a){return a==="starting"||a==="scaling"}function l(a){return a==="stopping"}function r(a){return a==="missing"}function d(a){return s(a)||a==="missing"}function s(a){return a.includes("error")}},95859:($,_,t)=>{"use strict";t.d(_,{GC:()=>n,Hn:()=>p,Ot:()=>u,lM:()=>i});var e=t(45470),o=t(50664),c=t(38435),l=t(32912),r=t(55549),d=t(28676),s=t.n(d),a=t(31464);function n(g){return decodeURIComponent(g.split(/#|\?/)?.[0]).split("/").pop()??"url-uploaded-file"}const i=g=>{l.i.error({message:(0,e.jsxs)("div",{children:['A file "',s()(g,{length:25}),`" you're trying to upload exceeds the maximum size limit of `,a.eh/1e9,"GB.",(0,e.jsxs)(r.N,{href:c.JZ.docsPage("deepnote-shared-datasets"),isExternal:!0,children:[" ","Upload it as a ",(0,e.jsx)("strong",{children:"Shared dataset"})," instead."]})]}),duration:a.u5*5})},p=g=>!o.y.runtimeConfig.IS_SINGLE_TENANCY&&g.size>a.eh;function u(g){return Math.floor(g.loaded/g.total*100)}},10378:($,_,t)=>{"use strict";t.d(_,{Y:()=>o,p:()=>e});const e=4,o=8},79090:($,_,t)=>{"use strict";t.d(_,{J:()=>e});const e=[]},54677:($,_,t)=>{"use strict";t.d(_,{I:()=>c});var e=t(50664);const c=e.y.runtimeConfig.PRELOADED_STATE?.user??{is_anonymous:!0,id:""}},31464:($,_,t)=>{"use strict";t.d(_,{Bs:()=>O,Ej:()=>g,KH:()=>l,Kk:()=>W,MH:()=>a,OD:()=>n,P4:()=>C,SC:()=>s,T3:()=>r,at:()=>y,eh:()=>e,jP:()=>p,lB:()=>c,lO:()=>K,lg:()=>u,m$:()=>d,r:()=>i,u5:()=>o,wQ:()=>m});const e=5*1e3*1e3*1e3,o=5,c=48,l=32,r=50,d=44,s="scroll-container",a=15,n=256,i=n,p=400,u=()=>window.innerWidth/2,g=()=>window.innerWidth*.75,y=()=>500,C=i-96,m=960,O=1e4,W="https://portal.productboard.com/deepnote/1-deepnote-product-portal/tabs/1-under-consideration",K=`{
"type": "service_account",
    "project_id": "PROJECT_ID",
    "private_key_id": "KEY_ID",
    "private_key": "-----BEGIN PRIVATE KEY-----
PRIVATE_KEY
-----END PRIVATE KEY-----
",
    "client_email": "SERVICE_ACCOUNT_EMAIL",
    "client_id": "CLIENT_ID",
    "auth_uri": "https://accounts.google.com/o/oauth2/auth",
    "token_uri": "https://accounts.google.com/o/oauth2/token",
    "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
    "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/SERVICE_ACCOUNT_EMAIL"
  }`},33754:($,_,t)=>{"use strict";t.d(_,{_P:()=>vt,Kv:()=>Mt,gf:()=>Rt});var e=t(45470),o=t(87435),c=t(63998),l=t(76417);function r(){const{flags:Oe}=(0,c.useContext)(l.LA);return Oe}var d=t(53694);const s=Oe=>{const{store:_e}=Oe;return{openCommentContainer(se,Se){_e.dispatch({type:"OPEN_COMMENT_CONTAINER",cellId:se,threadId:Se})},closeCommentContainer(se){_e.dispatch({type:"CLOSE_COMMENT_CONTAINER",cellId:se})},closeAllCommentContainers(){_e.dispatch({type:"CLOSE_ALL_COMMENT_EDITORS"})},openCommentEditMode(se,Se){_e.dispatch({type:"OPEN_COMMENT_EDIT_MODE",cellId:se,commentId:Se})},closeCommentEditMode(se,Se){_e.dispatch({type:"CLOSE_COMMENT_EDIT_MODE",cellId:se,commentId:Se})},openNewCommentEditor(se){_e.dispatch({type:"OPEN_NEW_COMMENT_EDITOR",cellId:se})},closeNewCommentEditor(se){_e.dispatch({type:"CLOSE_NEW_COMMENT_EDITOR",cellId:se})}}};var a=t(51881),n=t(32912),i=t(47888);const p=Oe=>{const{apolloClient:_e,store:me}=Oe;return{async setCommentsNotificationPreferences(Se){const{isSetByUser:Te}=Se;if(me.getState().user.is_anonymous)return;const xe=me.getState().project.id,ee=me.getState().config.commentsNotificationPreferences?.preference??null;if(!(me.getState().config.commentsNotificationPreferences?.isSetByUser&&!Te)){me.dispatch({type:"SET_COMMENT_NOTIFICATION_PREFERENCE",preferences:Se});try{if((await _e.mutate({mutation:i.T,variables:{projectId:xe,preference:Se.preference??"none",isSetByUser:Se.isSetByUser??!1}})).data?.setCommentsNotificationPreference?.__typename!=="Project")throw new Error("Failed to set comment notification preference")}catch(J){n.i.error({message:"There was an error setting notification preference. Please try again later or contact our support."}),(0,a.H)(J,"error"),me.dispatch({type:"SET_COMMENT_NOTIFICATION_PREFERENCE",preferences:{preference:ee,isSetByUser:!1}})}}},setCommentsDisplayPreferences(Se){me.dispatch({type:"SET_COMMENT_DISPLAY_PREFERENCES",option:Se})},toggleShowOnlyMyThreads(Se){me.dispatch({type:"TOGGLE_SHOW_ONLY_MY_THREADS",enabled:Se})}}},u=Oe=>{const{blockTransforms:_e,projectExecutionChannel:me}=Oe;return{async requestAutocomplete(Se,Te){if(!_e.getBlockById(Se.cellId))return(0,a.H)(new Error(`Tried to request autocomplete for cell ${Se.cellId} that isn't present in the notebook`),"error"),null;const ee=this._getAutocompleteBlocks();return ee?me.requestAutocomplete(Te,ee,Se):null},async requestHover(Se,Te){const xe=this._getAutocompleteBlocks();return xe?me.requestHover(Te,xe,Se):null},async requestSignatureHelp(Se,Te){const xe=this._getAutocompleteBlocks();return xe?me.requestSignatureHelp(Te,xe,Se):null},_getAutocompleteBlocks(){const Se=_e.getCodeBlocks({excludeShellBlocks:!0});if(!Se){const Te=new Error("Cannot collect code blocks, missing Slate instance");(0,a.H)(Te,"error");return}return Se},getBlocksForInlineCodeCompletion(Se,Te){const xe=_e.getBlocksByTypes(Se);if(!xe){const ee=new Error("Cannot collect blocks for code completion, missing Slate instance");return(0,a.H)(ee,"error"),null}return Te?.integrationId?xe.filter(ee=>ee.type!=="sql"||ee.metadata?.sql_integration_id===Te.integrationId):xe}}};var g=t(73266),y=t(60022),T=t(47628),C=t(748),m=t(31548),O=t(30598),W=t(24232),K=t(29828),H=t.n(K),N=t(8125),w=t.n(N),k=t(65878),F=t(18906),X=t(95859),z=t(93099),B=t(53601),U=t(37977),G=t(60622);const f=Oe=>{const{projectRedirect:_e,store:me,gettingStartedMutator:se,fileSystemFetcher:Se}=Oe,Te=me.dispatch,xe=async J=>new Promise((v,Z)=>{const re=new FileReader;re.onload=()=>{v(re.result)},re.onerror=()=>{Z(new Error(`Failed to read the contents of ${J.name}.`))},re.readAsText(J)}),ee=async J=>{if(!(0,B.UD)(J.name))return!1;const v=await xe(J);return(0,B.Y2)(v?.toString()??"")},ae={getDownloadLink(J){const v=me.getState().project.id;return(0,U.iX)(J,v)},getExportLink(){return`/api/project/${me.getState().project.id}/export`},cancelFileRename(){const J=(0,z.hl)(me.getState());(0,y.sE)(J,T.zd.MANIPULATE_FILES)&&Te({type:F.ZC.SET_RENAMING_FILE_PATH})},startFileRename(J){const v=(0,z.hl)(me.getState());(0,y.sE)(v,T.zd.MANIPULATE_FILES)&&Te({type:F.ZC.SET_RENAMING_FILE_PATH,renamingFilePath:J})},async refreshFilesystem(){const J=me.getState().project.id,v=me.getState().filesystem.expandedDirPaths,Z={type:"directory",path:"",relativePath:"",mtime:new Date,sizeInBytes:0,children:[]};try{const re=[Z,...await Se.fetchDirectoryContents(J,v)],ge=re.reduce((ye,Re)=>(ye[Re.relativePath]=Re,ye),{}),he=me.getState().filesystem.entities;H()(ge,he)||me.dispatch({type:F.ZC.ENTITIES_LOADED,entities:re,partial:!1})}catch(re){Te({type:F.ZC.SET_FILESYSTEM_UNAVAILABLE,isUnavailable:!0}),n.i.error({message:re instanceof Error?re.message:"Unknown error in refreshFilesystem"})}},isFilePathEmpty(J){return!me.getState().filesystem.entities[J]},async uploadItemFromUrl(J,v,Z,re){const ge=me.getState().project.id,he=ae.addUploadingItem(re,v),ye=await fetch(`/api/project/${ge}/upload-file-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({downloadUrl:J,targetFolderPath:Z})});if(!ye.ok){if(ye.status===507)(0,X.lM)(J);else{const Re=ye.status===406?"Your URL is badly formed or contains invalid characters":"An error ocurred while uploading the file.";n.i.error({message:Re})}ae.updateUploadingItemStatus(he,C.e.ERROR);return}me.getState().modalManager.openedModal!==m.HM.FILE_UPLOAD_MODAL?(n.i.success({message:`${v} has been uploaded successfully!`}),Te({type:F.ZC.REMOVE_UPLOADING_ITEMS,uuids:[he]})):ae.updateUploadingItemStatus(he,C.e.DONE)},async readMissingPaths(J){const v=me.getState().project.id,he=(J??me.getState().filesystem.expandedDirPaths).map(ye=>me.getState().filesystem.entities[ye]).filter(Boolean).filter(ye=>ye&&ye.type==="directory"&&(ye.children===void 0||ye.children.length===0)).map(ye=>ye.relativePath);await Se.fetchDirectoryContents(v,he).then(ye=>{Te({type:F.ZC.ENTITIES_LOADED,entities:ye,partial:!0})}).catch(ye=>{Te({type:F.ZC.SET_FILESYSTEM_UNAVAILABLE,isUnavailable:!0}),n.i.error({message:ye.message})})},async uploadLocalFile(J,v,Z,re=!1){const ge=(0,z.hl)(me.getState());if(!(0,y.sE)(ge,T.zd.MANIPULATE_FILES)){n.i.error({message:"You need at least Edit-level access to upload files."});return}if((0,X.Hn)(J)){(0,X.lM)(J.name);return}const he=await ee(J);return new Promise((ye,Re)=>{const Ve=ae.addUploadingItem(C.H.LOCAL,J.path??J.name,J.size),Xe=me.getState().project.id,tt=new FormData,gt=v??"/",ft=w().join(gt,w().dirname(J.path??""));tt.append("targetFolderPath",ft),tt.append("file",J,J.name),Z&&tt.append("uploadNotebooksToDb","true");const rt=Ce=>{re||n.i.error({message:"An error occurred while uploading the files."}),ae.updateUploadingItemStatus(Ve,C.e.ERROR),Re(new Error("An error occurred while uploading the files."))},Ye=new XMLHttpRequest;Ye.upload.addEventListener("progress",Ce=>{Ce.lengthComputable&&ae.updateUploadingItemProgress(Ve,(0,X.Ot)(Ce))},!1),Ye.addEventListener("load",Ce=>{if(Ye.status>=400){rt(Ce);return}me.getState().modalManager.openedModal!==m.HM.FILE_UPLOAD_MODAL&&!re?n.i.success({message:`${J.name} has been uploaded successfully!`}):ae.updateUploadingItemStatus(Ve,C.e.DONE),ae.refreshFilesystem().then(()=>{Te({type:F.ZC.REMOVE_UPLOADING_ITEMS,uuids:[Ve]})});try{const je=Ye.responseText,nt=JSON.parse(je);ye({uploadedFilePath:nt.uploadedFilePath,uploadedNotebookId:nt.uploadedNotebookId,uploadedNotebookName:nt.uploadedNotebookName,isStreamlitFile:he})}catch{ye(void 0)}const De=me.getState().filesystem.entities,Be=Object.keys(De),Ue=Be.filter(je=>je.includes(".ipynb")).length===2;J.name.includes(".ipynb")&&Ue&&_e.redirectToProjectFile(w().join(ft,J.name));const ze=Be.filter(je=>je.includes(".csv")).length<1;if(J.name.includes(".csv")&&ze){const je=me.getState().project.team_id;se.updateGettingStartedStepCompletionData(je,O.D.DATA_CONNECTION_SUBSTEP_CSV_UPLOADED)}},!1),Ye.addEventListener("error",Ce=>{rt(Ce)},!1),Ye.open("POST",`/api/project/${Xe}/upload-file`),Ye.withCredentials=!0,Ye.send(tt)})},addUploadingItem(J,v,Z){const re=(0,k.A)();return Te({type:F.ZC.ADD_UPLOADING_ITEM,source:J,name:v,size:Z,uuid:re}),re},setIsTooltipOpen(J){Te({type:F.ZC.SET_IS_TOOLTIP_OPEN,isOpen:J})},updateUploadingItemStatus(J,v){Te({type:F.ZC.UPDATE_UPLOADING_ITEM_STATUS,uuid:J,status:v})},updateUploadingItemProgress(J,v){Te({type:F.ZC.UPDATE_UPLOADING_ITEM_PROGRESS,uuid:J,progress:v})},removeUploadedItems(){const J=[];for(const[v,Z]of Object.entries(me.getState().filesystem.uploadingItems))Z.status===C.e.DONE&&J.push(v);Te({type:F.ZC.REMOVE_UPLOADING_ITEMS,uuids:J})},removeUploadedItemsById(J){Te({type:F.ZC.REMOVE_UPLOADING_ITEMS,uuids:J})},collapseDirectory(J){const{expandedDirPaths:v}=me.getState().filesystem;!v.includes(J.relativePath)||!(0,W.w)(J)||Te({type:F.ZC.SET_EXPANDED_DIRS,expandedDirPaths:v.filter(re=>re!==J.relativePath)})},async expandDirectory(J){const{expandedDirPaths:v}=me.getState().filesystem,Z=v.includes(J.relativePath),re=[...v,J.relativePath];if(!(Z||!(0,W.w)(J)))return Te({type:F.ZC.SET_EXPANDED_DIRS,expandedDirPaths:re}),ae.readMissingPaths(re)},setDraggedId(J){Te({type:F.ZC.SET_DRAGGED_ID,id:J})},setDraggedOverId(J){Te({type:F.ZC.SET_DRAGGED_OVER_ID,id:J})},resetDrag(){ae.setDraggedId(""),ae.setDraggedOverId("")},openFileInNewTab(J){const v=me.getState().project,Z=(0,G.X)({project:v,filePath:J.relativePath});window.open(Z.fullUrlWithFile)},async loadReadOnlyDocument(J){try{const v=this.getDownloadLink(J),Z=await fetch(v,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!Z.ok)throw new Error(`loadReadOnlyDocument() failed, status: ${Z.status}`);const re=await Z.text();Te({type:F.ZC.SET_READONLY_DOCUMENT,path:J,content:re})}catch(v){throw(0,a.H)(v,"error"),new Error("Failed to load readonly document")}},async reloadFilesystem(){Te({type:F.ZC.ENTITIES_RELOADING,isReloading:!0});try{await ae.refreshFilesystem()}finally{Te({type:F.ZC.ENTITIES_RELOADING,isReloading:!1})}}};return ae};var I=t(94270),E=t(24467),D=t(80092),R=t(19550),L=t(83727);const x=(0,I.J1)`
  mutation ConnectIntegration($projectId: ID!, $integrationId: ID!, $force: Boolean) {
    connectIntegration(projectId: $projectId, integrationId: $integrationId, force: $force) {
      ... on ConnectIntegrationSuccess {
        ok
      }
      ... on ConnectIntegrationError {
        message
        forcible
      }
    }
  }
`,ne=(0,I.J1)`
  mutation DisconnectIntegration($projectId: ID!, $integrationId: ID!, $force: Boolean) {
    disconnectIntegration(projectId: $projectId, integrationId: $integrationId, force: $force) {
      ... on DisconnectIntegrationSuccess {
        ok
      }
      ... on DisconnectIntegrationError {
        message
        forcible
      }
    }
  }
`;function M(Oe){const{fileApi:_e,modalApi:me,store:se,apolloClient:Se}=Oe,Te={async connectIntegrationWithConfirmation(ee,ae){const J=se.getState().connection.hardwareStatus,v=(0,L.iU)(J),Z=se.getState().integrationsState.integrations.find(ge=>ge.id===ee);if(!Z)return!1;if(Z.state===E.$G.ALWAYS_ON)return!0;if(v&&E.n4.includes(Z.type))return new Promise((ge,he)=>{ae({title:"Connect integration to project?",content:"Your machine will be restarted, and your notebook variables will be cleared.",confirmText:"Connect integration",onConfirm:()=>{Te.connectIntegration(ee).then(()=>ge(!0)).catch(he)}})});const re=await Te.connectIntegration(ee);return!re.ok&&re.forcible?new Promise((ge,he)=>{ae({title:"Interrupt running notebook to connect integration?",content:"We need to interrupt your notebook's execution in order to connect this integration now or you can connect the integration after the execution is finished",confirmText:"Interrupt and connect",onConfirm:()=>{Te.connectIntegration(ee,{force:!0}).then(()=>ge(!0)).catch(he)}})}):re.ok},async disconnectIntegrationWithConfirmation(ee,ae){const J=se.getState().connection.hardwareStatus,v=(0,L.iU)(J),Z=se.getState().integrationsState.integrations.find(ge=>ge.id===ee);if(!Z)return;if(Z.state===E.$G.ALWAYS_ON)return!0;if(v&&E.n4.includes(Z.type))return new Promise((ge,he)=>{ae({title:"Disconnect integration?",content:"Your machine will be restarted, and your notebook variables will be cleared.",confirmText:"Disconnect integration",onConfirm:()=>{xe(ee).then(()=>ge(!0)).catch(he)}})});const re=await xe(ee);if(!re.ok&&re.forcible)return new Promise((ge,he)=>{ae({title:"Interrupt running notebook to disconnect integration?",content:"We need to interrupt your notebook's execution in order to disconnect this integration now, or you can disconnect the integration after the execution is finished",confirmText:"Interrupt and disconnect",onConfirm:()=>{xe(ee,{force:!0}).then(()=>ge(!0)).catch(he)}})})},async connectIntegration(ee,ae){se.dispatch({type:"INTEGRATION_STATE_SET",payload:{integrationId:ee,nextState:E.$G.CONNECTING}});const J=ae?.projectId??se.getState().project.id;try{const{data:v}=await Se.mutate({mutation:x,variables:{projectId:J,integrationId:ee,force:ae?.force??null}});if(v?.connectIntegration.__typename==="ConnectIntegrationError")return n.i.error({message:v.connectIntegration.message}),se.dispatch({type:"INTEGRATION_STATE_SET",payload:{integrationId:ee,nextState:E.$G.AVAILABLE}}),{ok:!1,forcible:v.connectIntegration.forcible};se.dispatch({type:"INTEGRATION_STATE_SET",payload:{integrationId:ee,nextState:E.$G.CONNECTED}});const Z=se.getState().integrationsState.integrations.find(re=>re.id===ee);return Z&&(0,E.fQ)(Z.state)&&await _e.refreshFilesystem(),{ok:!0}}catch{return se.dispatch({type:"INTEGRATION_STATE_SET",payload:{integrationId:ee,nextState:E.$G.AVAILABLE}}),{ok:!1,forcible:!1}}},async refetchIntegrations(){const ee=se.getState().project.id;await Oe.integrationFetcher.fetchAndStoreIntegrations(ee)},async revokeIntegrationAuthToken(ee){(await fetch(`/auth/token/${ee}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).status!==200&&(0,a.H)(new Error("Failed to revoke integration auth token"),"error",{integrationId:ee})},setIntegrationOAuthDoneCallback(ee,ae,J={}){window.deepnote||(window.deepnote={}),window.deepnote.oauthDoneCallback=v=>{v?(J.refetchIntegration&&Te.refetchIntegrations(),ee(!0)):((0,a.H)(new Error("Federated integration authentication failed"),"error",{integrationId:J.integrationId,federatedAuthType:J.federatedAuthType}),J.displayMessageInCaseOfError&&n.i.error({message:"Failed to authenticate the integration. Please try again later or contact our support."}),ae(new Error("Federated integration authentication failed")))}},async authenticate(ee,ae,J,v={displayMessageInCaseOfError:!0,refetchIntegration:!0}){return new Promise((Z,re)=>{switch(ee){case D.fV.OKTA:window.open(`/auth/snowflake/okta/${ae}?source=${J}`,void 0,"popup");break;case D.fV.NATIVE_SNOWFLAKE:window.open(`/auth/snowflake/native/${ae}?source=${J}`,void 0,"popup");break;case D.fV.AZURE_AD:window.open(`/auth/snowflake/azuread/${ae}?source=${J}`,void 0,"popup");break;case D.$J.GOOGLE_OAUTH:window.open(`/auth/bigquery/google-oauth/${ae}?source=${J}`,void 0,"popup");break;case D.Ir.IndividualCredentials:me.openModal({newModal:m.HM.INDIVIDUAL_CREDENTIALS_MODAL,integrationId:ae});break;default:(0,R.x)(ee)}Te.setIntegrationOAuthDoneCallback(Z,re,{federatedAuthType:ee,integrationId:ae,displayMessageInCaseOfError:v.displayMessageInCaseOfError,refetchIntegration:v.refetchIntegration})})},async reAuthenticate(ee,ae){return await Te.revokeIntegrationAuthToken(ae),Te.authenticate(ee,ae,"notebook")}},xe=async(ee,ae)=>{se.dispatch({type:"INTEGRATION_STATE_SET",payload:{integrationId:ee,nextState:E.$G.DISCONNECTING}});const J=se.getState().project.id;try{const v=await Se.mutate({mutation:ne,variables:{projectId:J,integrationId:ee,force:ae?.force??null}});return v.data?.disconnectIntegration.__typename==="DisconnectIntegrationError"?(n.i.error({message:v.data.disconnectIntegration.message}),se.dispatch({type:"INTEGRATION_STATE_SET",payload:{integrationId:ee,nextState:E.$G.CONNECTED}}),{ok:!1,forcible:v.data.disconnectIntegration.forcible}):(se.dispatch({type:"INTEGRATION_STATE_SET",payload:{integrationId:ee,nextState:E.$G.AVAILABLE}}),{ok:!0})}catch(v){return n.i.error({message:v instanceof Error?v.message:"Unknown error while disconnecting the integration"}),se.dispatch({type:"INTEGRATION_STATE_SET",payload:{integrationId:ee,nextState:E.$G.CONNECTED}}),{ok:!1,forcible:!1}}};return Te}const A=Oe=>{const{store:_e}=Oe,me=_e.dispatch;return{switchProjectSidebarTab(Se){me({type:"SWITCH_PROJECT_SIDEBAR_TAB",tab:Se})},toggleAppPreview(Se,Te){me({type:"TOGGLE_APP_PREVIEW",open:Te,notebookId:Se})}}};var b=t(38038),q=t(16530),fe=t(92626),oe=t(38244),ie=t(31976),h=t(53929),ce=t.n(h),ve=t(85007),Me=t(59446),Le=t(40177),We=t(688),Ge=t(31311);const $e=Oe=>{const{blockTransforms:_e,projectExecutionChannel:me,store:se,projectTrack:Se}=Oe,Te=se.dispatch,xe=()=>se.getState().project.team_id;async function ee(v,Z){const re=se.getState().project.id;await fetch(`/api/project/${re}/trackCellShareStatus/${v}`,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({cellId:v,toggle:Z!==!1})})}const ae=v=>{const{cellId:Z,cellType:re}=v;if(re==="sql"){const ge=_e.getCellSqlIntegrationId(Z);return{integrationType:se.getState().integrationsState.integrations.find(ye=>ye.id===ge)?.type,integrationId:ge}}return{}},J={splitCell(){_e.transact(()=>{const v=_e.splitCell();v&&(Se.track("Block split",{type:v.type}),J.focusCell(v.id))})},async formatCell(v=null){const Z=se.getState().config.formatterUrl;if(!Z)return n.i.error({message:"Formatting failed"});try{await _e.formatCell(v,xe(),async re=>{const ge=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({snippet:re})});if(!ge.ok)throw new Error(`Formatter failed with status ${ge.status}`);const he=await ge.json();if(he.errorType==="InvalidInput")return n.i.error({message:"Parsing failed, please check your code for errors."}),null;if(he.errorMessage)throw new Error(he.errorMessage);return(0,b.Jn)(he)})}catch(re){(0,a.H)(re,"warning"),n.i.error({message:"Formatting failed"})}},async publishProject(v,Z,re={}){const ge=se.getState().project.id,he=await fetch(`/api/project/${ge}/publish`,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({publishedAccess:Z,notebookInDbID:v})});if(!he.ok){switch(he.status){case 403:await n.i.error({message:"Apps are not allowed to be shared publicly in your workspace. Contact a workspace admin to enable it."});break;default:await n.i.error({message:"Failed to publish the app. Please try again or contact our support."}),(0,a.H)(new Error(`Failed to publish project. Response status: ${he.statusText}, body: ${await he.json()}`),"error");break}return}re.successMessage&&n.i.info({message:re.successMessage}),Te(F.cN(new Date,Z,v))},async unpublishProject(v={}){const Z=v.errorMessage??"Failed to unpublish the notebook",re=se.getState().project.id,ge=await fetch(`/api/project/${re}/publish`,{credentials:"include",method:"DELETE"});if(!ge.ok){n.i.error({message:Z}),(0,a.H)(new Error(`Failed to unpublish project. Response status: ${ge.statusText}`),"error");return}v.successMessage&&n.i.info({message:v.successMessage}),Te(F.nh())},async submitUserInput(v){try{await me.submitUserInput(v,"")}catch(Z){n.i.error({message:"Failed to submit the input"}),(0,a.H)(Z,"error")}},async restartKernel(v){return me.restartNotebookKernel(v)},async executeAll({skipSqlCache:v}={}){if(!this._getFocusedNotebookId())return;if(se.getState().user.is_anonymous){Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to run code",redirectTo:J._getLinkToCurrentLocation()});return}return J._executeRange(null,null,{skipSqlCache:v,resetKernelState:!0,executionMode:"block"})},async executeFromThisCell(v){if(se.getState().user.is_anonymous){Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to run code",redirectTo:J._getLinkToCurrentLocation()});return}return J._executeRange(v,null)},async executeAboveThisCell(v){if(se.getState().user.is_anonymous){Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to run code",redirectTo:J._getLinkToCurrentLocation()});return}return J._executeRange(null,v)},focusCell(v,Z={}){const{position:re=null,align:ge=null,initial:he=!1}=Z;ge&&J.scrollToCell(v,{initial:he,align:ge}),_e.focusCell(v,{position:re})},defocus(){_e.defocus()},focusInitialCell(v){const Z=(0,Ge.DB)(v);Z&&J.focusCell(Z,{initial:!0,align:"center"})},doesPositionExist(v){return _e.doesPositionExist(v)},insertCellByType(v,Z,re){const ge=_e.getAppMetadata(),he=(0,z.hl)(se.getState());if(!ge||!(0,y.sE)(he,T.zd.MANIPULATE_CELLS))return;if(v==="sql"&&!re?.integration){(0,a.H)(new Error("Attempting to insert an sql cell but integration was not provided."),"error",{cellType:v,where:Z});return}const ye=_e.insertCellByType(v,Z,{...re??{},hideCodeInPublishedApp:!!ge.deepnote_app_hide_all_code_blocks_enabled,shouldBeInApp:!1});if(ye){if(Se.track("Block created",{parent:re?.parent,blockId:ye.id,type:v,location:Z,projectId:re?.projectId,button:re?.button,accessType:he,integrationType:v==="sql"?re?.integration?.type:void 0}),ye.type==="visualization"&&re?.cellId){const Re=_e.getCellDataFrameVariableName(re.cellId);if(Re){const Ve=(0,ve.a$)();J.editCellVariableName(ye.id,Re),J.editVisualizationCellSpec(ye.id,Ve),J.executeCell(ye.id,{selectBelow:!1,executionMode:"block"})}}return(re?.shouldFocus??!0)&&J._focusAddedCell(ye.id),ye.id}},_focusAddedCell(v){J.focusCell(v,{align:"in-view"})},convertCell(v,Z){_e.convertCell(v,Z,{workspaceId:xe()})},getCellSqlIntegrationId(v){return _e.getCellSqlIntegrationId(v)},async changeSqlCellIntegration(v,Z){await _e.changeSqlCellIntegration(v,Z)},async executeCell(v,Z={}){if(se.getState().user.is_anonymous){Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to run code",redirectTo:J._getLinkToCurrentLocation()});return}const ge=(0,z.hl)(se.getState()),he=this._getFocusedNotebookId();if(!he)throw new Error("Execute works only on notebook files");const ye=_e.getBlockById(v);if(ye&&(Z.selectBelow?J._focusOrCreateNextCell(ye.id):ye.type==="markdown"&&J.focusCell(ye.id),(0,Le.Uu)(ye))){if(ye.type==="sql"){const Re=_e.getCellSqlIntegrationId(ye.id);if(Re){const Ve=se.getState().integrationsState.integrations.find(Xe=>Xe.id===Re);if(!Ve||!(0,We.p0)(Ve.state)){n.i.info({message:"Assign the SQL block to a connected integration."});return}}else{n.i.info({message:"Select a database for this SQL block."});return}}ye.type==="input-select"&&_e.ensureSelectInputValidValue(ye.id);try{const Re={cellId:ye.id,...(0,Me.e)(ye)};if(!(0,q.$l)(Re))throw new Error("The serialized block is not executable");const Ve=_e.getExecutionMode(),Xe=Z.executionMode??Ve??"block",tt=await me.executeNotebookBlocks(he,[ye],{skipCache:!!Z.skipSqlCache,resetKernelState:!1,executionMode:Xe,variableContext:Z.variableContext??null}),gt=se.getState().project,ft={type:ye.type,projectId:gt.id,accessType:ge,workspaceId:gt.team_id,trigger:"user",executionMode:Xe,...ae({cellId:ye.id,cellType:ye.type})};if(Se.track("Block executed",ft),tt?.error==="FederatedAuthError"){const rt=tt.integrationId,Ye=(0,fe.dt)(se.getState().integrationsState.integrations,{integrationId:rt});Oe.modalApi.openModal({newModal:m.HM.PROMPT_FEDERATED_AUTH_SIGNIN,federatedAuthMethod:Ye.federatedAuthMethod,integrationId:Ye.id,integrationType:Ye.type,integrationName:Ye.name});return}if(tt?.error){const rt=tt.error;switch(rt){case"BlockHashMismatch":n.i.warning({message:"Not executing the block because it has been changed by another user."});break;case"HardwareInErrorState":n.i.warning({message:"Not executing the block because machine failed to start."});break;case"NotebookNotAvailable":n.i.warning({message:"The notebook is not available for executing blocks. Please refresh the page."});break;case"ProjectExecutorNotEnabled":n.i.warning({message:"Failed to execute the block due to runner changes. Please refresh the page."});break;default:n.i.warning({message:"Failed to execute the block."}),(0,R.x)(rt)}}}catch(Re){n.i.error({message:"Could not execute block, please try again later"}),(0,a.H)(Re,"error")}}},async executeCellsByIds(v,Z={executionMode:"block"}){try{const ge=(_e.getBlocksByIds(v)??[]).filter(ye=>(0,Le.Uu)(ye.block)).map(({block:ye})=>ye);if(ge.length===0){n.i.warning({message:"None of the blocks are runnable."});return}await J._executeBlocks(ge,{skipSqlCache:!!Z.skipSqlCache,resetKernelState:!1,executionMode:Z.executionMode});const he=v.at(-1);Z.selectBelow&&he&&J._focusOrCreateNextCell(he)}catch(re){n.i.error({message:"Could not execute blocks, please try again later"}),(0,a.H)(re,"error")}},async _executeRange(v,Z,re={executionMode:"block"}){try{const ge=_e.getExecutableBlocksInRange(v,Z);if(!ge){const he=new Error("No executable blocks in range");(0,a.H)(he,"error"),n.i.warning({message:"None of the blocks are runnable."});return}await J._executeBlocks(ge,{skipSqlCache:!!re.skipSqlCache,resetKernelState:!!re.resetKernelState,executionMode:re.executionMode})}catch(ge){n.i.error({message:"Could not execute blocks, please try again later"}),(0,a.H)(ge,"error")}},async _executeBlocks(v,Z){const re=this._getFocusedNotebookId();if(!re)throw new Error("_executeBlocks() works only on notebook files");const ge=await me.executeNotebookBlocks(re,v,{skipCache:Z.skipSqlCache,resetKernelState:Z.resetKernelState,executionMode:Z.executionMode,variableContext:null});if(ge?.error==="FederatedAuthError"){const he=ge.integrationId,ye=se.getState().integrationsState.integrations.find(Re=>Re.id===he);ye?Oe.modalApi.openModal({newModal:m.HM.PROMPT_FEDERATED_AUTH_SIGNIN,federatedAuthMethod:ye.federated_auth_method,integrationId:ye.id,integrationType:ye.type,integrationName:ye.name}):((0,a.H)(new Error("InvalidFederatedOAuthCredentials error caught, but project integration not available"),"error",{integrationId:ge.integrationId}),n.i.warning({message:'Some SQL blocks use an integration that requires authorization before running. Please click the "Authorize" button in the SQL block in the notebook.'}));return}if(ge?.error){const he=ge.error;switch(he){case"BlockHashMismatch":n.i.warning({message:"Not executing the block because it has been changed by another user."});break;case"HardwareInErrorState":n.i.warning({message:"Not executing the block because machine failed to start."});break;case"NotebookNotAvailable":n.i.warning({message:"The notebook is not available for executing blocks. Please refresh the page."});break;case"ProjectExecutorNotEnabled":n.i.warning({message:"Failed to execute the block due to runner changes. Please refresh the page."});break;default:n.i.warning({message:"Failed to execute the block."}),(0,R.x)(he)}}},_focusOrCreateNextCell(v){const Z=_e.getNextAvailableCellId(v,{canBePreviousBlock:!1});if(Z){J.focusCell(Z,{align:"in-view"});return}const re=(0,z.hl)(se.getState());if(!(0,y.sE)(re,T.zd.MANIPULATE_CELLS))return;const ge=_e.getBlockById(v),he=ge?.type;if(he==="sql"){const ye=se.getState().integrationsState.integrations.filter(T.pr).find(Re=>Re.id===ge.metadata.sql_integration_id);return J.insertCellByType(he,"below",{cellId:v,integration:ye})}if(he==="markdown"||he==="code"||he==="text-cell-p")return J.insertCellByType(he,"below",{cellId:v})},moveCellsUp(v){_e.moveCellsUp(v);const Z=v[0];Z&&J.scrollToCell(Z,{align:"in-view"})},moveCellsDown(v){_e.moveCellsDown(v);const Z=v.at(-1);Z&&J.scrollToCell(Z,{align:"in-view"})},moveCell(v,Z,re){J.moveCells([v],v,Z,re)},moveCells(v,Z,re,ge){_e.moveCells(v,Z,re,ge)},duplicateCell(v){return _e.duplicateCell(v)},duplicateCells(v){return _e.duplicateCells(v)},deleteCell(v,Z){const re=this._getFocusedNotebookId();if(!re)return;const ge=_e.getNextAvailableCellId(v,{canBePreviousBlock:!0});ge&&J.focusCell(ge,{align:"in-view"}),Z.currentlyExecutingCellIds.includes(v)&&J.interrupt(re),_e.deleteCell(v)},deleteCells(v,Z){const re=this._getFocusedNotebookId();if(!re)return;const ge=v.at(-1),he=ge?_e.getNextAvailableCellId(ge,{canBePreviousBlock:!0}):null;he&&J.focusCell(he,{align:"in-view"}),Z.currentlyExecutingCellIds.some(ye=>v.includes(ye))&&J.interrupt(re),_e.deleteCells(v,{deselectEditorBeforeDelete:Z.deselectEditorBeforeDelete})},_getFocusedNotebookId(){const v=Oe.projectRouteRef.current;return v.type==="notebook"?v.id:null},async interrupt(v){return me.interruptNotebookKernel(v)},async exportDataframe(v){const Z=this._getFocusedNotebookId();if(!Z)throw new Error("Export works only in notebook files");const re=_e.getBlockById(v);return ce()(re,"The block is not available"),ce()((0,Le.Uu)(re),"The block is not executable"),me.exportDataframe(Z,re)},async getDataframeColumnDistinctValues(v,Z){const re=this._getFocusedNotebookId();if(!re)throw new Error("Getting dataframe columns works only in notebook files");return me.getDataframeColumnDistinctValues(re,v,Z)},scrollToCell(...v){Oe.commonApi.scrollToCell(...v)},setCellSharingStatus(v,Z){_e.setCellSharingStatus(v,Z),ee(v,Z)},shareCell(v){Oe.modalApi.openModal({newModal:m.HM.CELL_EMBED_MODAL,cellId:v})},toggleAllCellVisibility(v,Z={}){_e.toggleAllCellVisibility(v,Z)},toggleCellVisibility(v,Z,re={}){_e.toggleCellVisibility(v,Z,re)},toggleCellOutputHeightLimit(v,Z={}){_e.toggleCellOutputHeightLimit(v,Z)},addCellToApp(v){_e.addBlockToApp(v),Se.track("App block added",{blockId:v,type:_e.getCellType(v)})},addCodeCellToApp(v){_e.addCodeCellToApp(v),Se.track("App block added",{blockId:v,type:_e.getCellType(v)})},removeCellFromApp(v){_e.removeBlockFromApp(v),Se.track("App block deleted")},removeCodeCellFromApp(v){_e.removeCodeCellFromApp(v),Se.track("App block deleted")},toggleCellCodeInApp(v,Z){_e.toggleBlockCodeInApp(v,Z),Z?Se.track("App block code hidden"):Se.track("App block code shown")},toggleCellOutputInApp(v,Z){_e.toggleBlockOutputInApp(v,Z),Z?Se.track("App block output hidden"):Se.track("App block output shown")},setBlockDropdownPosition(v){Te({type:"SET_BLOCK_ADDING_DROPDOWN_POSITION",position:v})},addAllBlocksToApp(){_e.addAllBlocksToApp(),Se.track("App layout set",{to:"powerful-article"})},addAllNonCodeBlocksToApp(){_e.addAllNonCodeBlocksToApp(),Se.track("All blocks added to app")},copyLinkToCell(v){const Z=J._getLinkToCell(v);(0,oe.u)(Z),n.i.success({message:"Link successfully copied."})},getLinkToFile(v){const Z=se.getState(),{fullUrlWithFile:re}=(0,G.X)({project:Z.project,filePath:v});return re},async editVisualizationCellSpec(v,Z){await _e.editVisualizationCellSpec(v,Z)},async editCellTableState(v,Z,re,ge=!0){await me.setBlockDataTableState(v,Z,re,ge)},async editNotebookFunctionCellImportTableState(v,Z,re,ge,he=!0){await me.setNoteboookFunctionBlockImportDataTableState(v,Z,re,ge,he)},editCellVariableName(v,Z){_e.editCellVariableName(v,Z)},getFocusedBlockId(){return _e.getFocusedCellId()},editInputCellSelectMetadata(v,Z,re,ge,he){_e.editInputCellSelectMetadata(v,Z,re,ge,he)},setCellColor(v,Z){_e.setCellColor(v,Z)},_getLinkToCurrentLocation(){const v=_e.getFocusedCellId();return J._getLinkToCell(v)},_getLinkToCell(v){const Z=new URL(window.location.href);return Z.hash=v?`#${v}`:"",Z.href},async executeAndCreateCodeCellBelow(v){return J.insertCellByType("code","below",{cellId:v}),J.executeCell(v,{selectBelow:!1})},async updateCellLayoutMetadata(v,Z){await me.updateNotebookBlockLayoutMetadata(v,Z)},setIsDraggingBlocks(v){Te({type:"SET_IS_DRAGGING_BLOCKS",isDraggingBlocks:v})},async restoreSession(){const v=J._getFocusedNotebookId();if(v){try{await me.restoreNotebookSession(v)}catch(Z){throw n.i.error({message:"Failed to restore variables, please contact support."}),Z}n.i.success({message:"Variables from your last session were restored succesfully!"})}},setFullWidth(v){_e.setFullWidth(v),Se.track("Full width mode switched",{to:v?"on":"off"})},isDataframeSqlCellFocused(){const v=_e.getFocusedCellId();if(!v)return!1;const Z=_e.getBlockById(v);return Z?.type!=="sql"?!1:Z.metadata.sql_integration_id===ie.yy},toggleBlockOptionsPopover(v,Z){const re=se.getState().layout.blockOptionsPopoverOpened[v];Te({type:"TOGGLE_BLOCK_OPTIONS_POPOVER",payload:{blockId:v,value:Z??!re}})},updateImageCellAlignment(v,Z){_e.updateImageCellAlignment(v,Z)},updateImageCellWidth(v,Z){_e.updateImageCellWidth(v,Z)}};return J};var Qe=t(36987),le=t(74381),Ie=t.n(le),P=t(97395);const V=500,Y=5e3,te=Oe=>{const{blockTransforms:_e,notebookApi:me,store:se}=Oe,Se=se.dispatch;let Te=[],xe=[];const ee=Ie()(()=>{Te.length>0&&(Se({type:"UPDATE_CELL_OUTPUT_HEIGHT",payload:Te}),Te=[])},V,{maxWait:V}),ae=Ie()(()=>{xe.length>0&&(Se({type:"UPDATE_CELL_HEIGHT",payload:xe}),xe=[])},V,{maxWait:V}),J=Ie()(Z=>{const re=(0,z.hl)(se.getState()),ge=_e.getAllBlockIds();if(!ge||!(0,y.sE)(re,T.zd.MANIPULATE_CELLS))return;const he=(0,P._4)(se.getState())[Z];if(!he)return;const ye={};Object.entries(he.cells).forEach(([Re,Ve])=>{if(Ve&&ge.includes(Re)){ye[Re]=ye[Re]??{};const Xe=ye[Re];Xe&&(Xe.deepnote_cell_height=Ve)}}),Object.entries(he.outputs).forEach(([Re,Ve])=>{if(Ve&&ge.includes(Re)){ye[Re]=ye[Re]??{};const Xe=ye[Re];Xe&&(Xe.deepnote_output_heights=Ve)}}),me.updateCellLayoutMetadata(Z,ye)},Y,{maxWait:Y});return{outputMessageHandler(Z,re){(0,Qe.n3)(re)&&(Te.push({notebookId:Z,cellId:re.cellId,outputIndex:re.outputIndex,height:re.height}),ee(),J(Z))},updateCellHeight(Z,re){const ge=Oe.projectRouteRef.current,he=ge.type==="notebook"?ge.id:null;if(!he){(0,a.H)(new Error("Cell layout received without focused notebook."),"error");return}xe.push({notebookId:he,cellId:Z,height:re}),ae(),J(he)},async fetchOutputsForCells(Z){const re=await Promise.all(Z.map(async({cellId:he,cellOutputsReference:ye})=>{const Re=await fetch(`/api/blocks/${he}/outputs?outputs_reference=${ye}&allow_mismatch=true`);return Re.status===409?null:{outputs:Re.status===200?await Re.json():null}})),ge=Z.reduce((he,{cellId:ye},Re)=>{const Ve=re[Re];return Ve&&(he[ye]=Ve.outputs??null),he},{});se.dispatch({type:"NEW_OUTPUTS",cellIdsToOutputs:ge})},clearFetchedOutputsForCells(Z){se.dispatch({type:"NEW_OUTPUTS",cellIdsToOutputs:Object.fromEntries(Z.map(re=>[re,null]))})}}};var Ae=t(74250),ke=t(95059),Ne=t(30749),ue=t(23240);const Pe=(0,I.J1)`
  mutation RestoreProjectVersion($projectId: String!, $versionId: String!) {
    restoreProjectVersion(projectId: $projectId, versionId: $versionId) {
      id
    }
  }
`,He=Oe=>{const{apolloClient:_e,projectExecutionChannel:me,store:se,projectTrack:Se}=Oe,Te=se.dispatch,xe={async requestAdditionalAccess(ee){const ae=se.getState().project.id;try{return(await fetch(`/api/project/${ae}/request-access`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:ee?JSON.stringify({accessType:ee}):void 0})).ok?(n.i.success({message:"Request for additional access has been sent successfully!"}),!0):(n.i.error({message:"Failed to send a request for additional access. Please, try again."}),!1)}catch{return n.i.error({message:"Failed to send a request for additional access. Please, try again."}),!1}},async updateProjectInDb(ee,ae){return fetch(`/api/project/${ee.projectId}`,{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ae)})},async updateLinkSharing(ee){const ae=(0,z.hl)(se.getState());if(!(0,y.sE)(ae,T.zd.MANAGE_COLLABORATORS))return;const J={sharing_link_on:ee!=="none",link_access_type:ee!=="none"?ee:T.BD.VIEW},v=se.getState().project.id;try{Te(F.jG(J)),await xe.updateProjectInDb({projectId:v},J)}catch(Z){n.i.error({message:"Oops! Looks like we failed to update your sharing link. Mind trying again?"}),(0,a.H)(new Error("There was an error changing link access"),"error",{error:Z,newSettings:J})}},async leaveProject(){const ee=se.getState().project.id,ae=(0,z.hl)(se.getState());return(0,y.sE)(ae,T.zd.LEAVE_PROJECT)?(await fetch(`/api/project/${ee}/collaborator-myself`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"})).status!==200?((0,a.H)(new Error("Error leaving project"),"error"),n.i.error({message:"Oops! Looks like we failed to remove you from the project. Mind trying again?"}),!1):!0:(n.i.warning({message:"You can not leave project with your current access type."}),!1)},async addCollaborators(ee,ae={}){const J=(0,z.hl)(se.getState());if(!(0,y.sE)(J,T.zd.MANAGE_COLLABORATORS))return n.i.warning({message:"You cannot change collaborators with your current access type."}),!1;const Z=se.getState().project.collaborationProperties.collaborators.map(Re=>Re.email),re=ee.filter(Re=>!Z.includes(Re));if(re.length===0)return n.i.warning({message:ee.length>1?"Collaborators are already invited.":`Collaborator ${ee[0]} is already invited.`}),!1;const ge=se.getState().project.id;ae.newAccessType===void 0&&(ae.newAccessType=T.BD.VIEW,(0,a.H)(new Error("Adding collaborator but no access type provided. Defaulting to view"),"warning"));const he={method:"POST",body:{emails:re,userAccessType:ae.newAccessType}},ye=await fetch(`/api/project/${ge}/collaborators`,{method:he.method,headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(he.body)});if(ye.status!==200){let Re="";try{Re=await ye.json()}catch{}return(0,a.H)(new Error("Error adding collaborators"),"error",{errorJson:Re}),n.i.error({message:"There was an error adding collaborators. Refresh the page, and try again."}),!1}return!0},async updateCollaborators(ee,ae,J={}){const v=(0,z.hl)(se.getState());if(!(0,y.sE)(v,T.zd.MANAGE_COLLABORATORS))return n.i.warning({message:"You cannot change collaborators with your current access type."}),!1;const Z=se.getState().project.id;if(ee==="change-access-type"&&J.newAccessType===void 0)return(0,a.H)(new Error("Trying to change access type but no new access type was provided"),"error"),!1;const re={method:ee==="remove"?"DELETE":"PATCH",body:{email:ae,userAccessType:J.newAccessType}},ge=await fetch(`/api/project/${Z}/collaborator`,{method:re.method,headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(re.body)});if(ge.status!==200){let he="";try{he=await ge.json()}catch{}return(0,a.H)(new Error("Error changing collaborator"),"error",{errorJson:he}),n.i.error({message:"Oops! Looks like we failed to update your collaborators. Mind trying again?"}),!1}return!0},closeModal(){se.getState().modalManager.openedModal===m.HM.FILE_UPLOAD_MODAL&&Oe.fileApi.removeUploadedItems(),Te({type:m.d_.CLOSE_MODAL})},toggleCellCommandsDropdown(ee){const ae=se.getState().layout.activeCommandDropdownBlockId!==ee;Te(ae?{type:"SET_ACTIVE_COMMAND_DROPDOWN_BLOCK_ID",blockId:ee}:{type:"SET_ACTIVE_COMMAND_DROPDOWN_BLOCK_ID",blockId:void 0})},hideCellCommandsDropdown(ee){const{activeCommandDropdownBlockId:ae}=se.getState().layout;ae===ee&&Te({type:"SET_ACTIVE_COMMAND_DROPDOWN_BLOCK_ID",blockId:void 0})},isTeamHardwareActive(){const ee=se.getState().project.owner,ae=se.getState().project.teams,J=se.getState().project.hardware;return!!ae.filter(Z=>Z.id===ee.teamId)[0]?.team_hardwares.includes(J)},async setTeamAccessType(ee){const ae=se.getState().project.id,J=await fetch(`/api/project/${ae}/team-access`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamAccessType:ee})});if(!J.ok){await n.i.error({message:"Unable to set team access"});const v=new Error(`[${ae}] Setting team access to ${ee} failed with ${J.status} ${J.statusText}`);(0,a.H)(v,"error")}Te(F.Ad(ee))},async renameProject(ee){const ae=(0,z.hl)(se.getState()),J=se.getState().project.isRenamingProject;if(!(0,y.sE)(ae,T.zd.RENAME_PROJECT)||J)return;const Z=se.getState().project.id,ge=se.getState().project.name;let he=!1;Te({type:F.fB.SET_RENAMING,payload:!0}),Te(F.m9(ee));try{(await fetch(`/api/project/${Z}`,{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:ee})})).status===200&&(he=!0)}finally{he||Te(F.m9(ge)),Te({type:F.fB.SET_RENAMING,payload:!1})}},async turnOnNotifications(){"Notification"in window||n.i.error({message:"This browser does not support desktop notifications"}),Notification.permission==="default"&&!(0,ke.A_)("development")&&await Notification.requestPermission().then(async ee=>{ee==="granted"&&(Se.track("Execution notification enabled"),await navigator.serviceWorker.ready.then(async ae=>{await ae.showNotification("Deepnote",{body:"Notifications are enabled \u{1F389}!"})}))})},async selectHardware(ee){return me.setHardware(ee)},async dismissHardwareNotification(ee){try{await me.dismissHardwareNotification(ee)}catch(ae){(0,a.H)(ae,"warning")}},async startHardware(){return se.getState().user.is_anonymous?(Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to run code"}),!1):me.startHardware()},async restartProject(){if(se.getState().user.is_anonymous){Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to run code"});return}return me.restartProject()},async restartHardware(){if(se.getState().user.is_anonymous){Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to run code"});return}return me.restartHardware()},async stopHardware(){if(se.getState().user.is_anonymous){Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to run code"});return}return me.stopHardware()},async restoreProjectVersion(ee){const ae=(0,z.hl)(se.getState());if(!(0,y.sE)(ae,T.zd.RESTORE_VERSION))return n.i.warning({message:"Sorry, you can not restore project to a previous version."}),!1;const J=se.getState().project.id;J&&await _e.mutate({mutation:Pe,variables:{projectId:J,versionId:ee}}).catch(()=>{n.i.warning({message:"Sorry, we could not restore project to selected version"})})},getWorkspaceId(){return se.getState().project.team_id},submitDockerBuild(ee){const ae=se.getState().project.id;Se.track("Environment docker built",{projectId:ae}),Te(F.qf({status:"WORKING"})),fetch(`/api/cloudbuild/?projectId=${ae}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({dockerFileData:ee})}).then(async J=>{if(!J.ok){if(J.status===400){Te(F.qf({status:"INVALID_DOCKERFILE"}));return}if(J.status===403){Te(F.qf({status:"FORBIDDEN"}));return}throw new Error(`Submit custom docker build failed with status ${J.status} ${J.statusText}`)}Te(F.qf({status:"WORKING"}))}).catch(J=>((0,a.H)(J,"error"),Te(F.qf({status:"FAILURE"})),n.i.error({message:"Error building image"})))},cancelDockerBuild(ee){const ae=(0,Ne.O)(ee);fetch(`/api/cloudbuild/${ae}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(J=>{if(!J.ok)return Promise.reject(new Error(`Interrupting build failed  ${J.status} ${J.statusText}`))}).catch(J=>((0,a.H)(J,"error"),Te(F.qf({status:"FAILURE"})),n.i.error({message:"Failed to cancel the Docker build"})))},async fetchDockerBuildStatus(ee){const ae=(0,Ne.O)(ee),J=await fetch(`/api/cloudbuild/${ae}/latest-build`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(J.ok){const v=await J.json();Te(F.qf({status:v.status,outputs:v.outputs,image:v.image,timestamp:v.timestamp}))}else J.status===404&&Te(F.qf({status:"NOT_FOUND",outputs:"",image:""}))},async fetchCurrentImage(){const ee=(0,z.hl)(se.getState()),ae=se.getState().project.id;if((0,y.sE)(ee,T.zd.PROJECT_INFO)){if((0,ke.A_)("development")){se.dispatch(F.TR("deepnote/python:3.9"));return}try{const J=await fetch(`/api/project/${ae}/image`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(J.ok){const{image:v}=await J.json();se.dispatch(F.TR(v))}else(0,ue.Z)({message:"Failed to fetch Docker image"})}catch(J){(0,a.H)(J,"fatal")}}},async fetchSessionStart(){const ee=se.getState().project.id;return fetch(`/api/usage/project/${ee}/start`,{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(async ae=>{if(ae.status===401||ae.status===403)return;if(!ae.ok){const v=await ae.text();(0,a.H)(new Error(`Error retrieving start of session for project ${ee}, ${v}`),"error");return}const{lastSessionStart:J}=await ae.json();return J})},async fetchInactivityGracePeriod(){const ee=se.getState().project.id,ae=await fetch(`/api/project/${ee}/fetch-inactivity-grace-period`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!ae.ok){const v=await ae.text();return(0,a.H)(new Error(`[${ee}]/fetch-inactivity-grace-period failed with ${ae.statusText}`),"error",{responseText:v}),Ae.y.duration(15,"m")}const{inactivityGracePeriodSeconds:J}=await ae.json();return Ae.y.duration(J,"s")},async setInactivityGracePeriod(ee){const ae=se.getState().project.id;Se.track("Inactivity period changed",{projectId:ae,inactivityPeriodMinutes:ee/60});const J=await fetch(`/api/project/${ae}/set-inactivity-grace-period`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({inactivityGracePeriod:ee})});if(!J.ok){n.i.error({message:"Looks like we failed to set the inactivity grace period. Please, try again."});const v=await J.text();(0,a.H)(new Error(`[${ae}]/set-inactivity-grace-period failed with ${J.statusText}`),"error",{responseText:v})}},async stopHardwareById(ee){const ae=await fetch(`/api/project/${ee}/stop-hardware`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!ae.ok)throw n.i.error({message:"Unable to stop the machine. Try again, or contact support."}),(0,a.H)(new Error(`[${ee}]/stop-hardware failed with ${ae.statusText}`),"error"),new Error(`[${ee}] API /stop-hardware failed with ${ae.statusText}`)},async _getRunningProjects(){const ee=se.getState().user.id,J=`/api/billing/runningHardware/${(0,z.Dk)(se.getState())}`,v=await fetch(J,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});return v.ok?await v.json():((0,a.H)(new Error(`[${ee}]/runningHardware failed with ${v.statusText}`),"error"),[])},async fetchTunnelingState(){const ee=se.getState().project.id,ae=await fetch(`/api/tunnel/${ee}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!ae.ok){const v=await ae.text();throw(0,a.H)(new Error(`[${ee}] GET /api/tunnel failed with ${ae.statusText}`),"error",{responseText:v}),new Error("Failed to fetch tunneling configuration. Please contact support.")}const{enabled:J}=await ae.json();return J},async setTunnelingState(ee){const ae=se.getState().project.id,J=await fetch(`/api/tunnel/${ae}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:ee})});if(!J.ok){n.i.error({message:"Looks like we failed to set tunneling configuration. Please, try again."});const v=await J.text();(0,a.H)(new Error(`[${ae}] POST /api/tunneling failed with ${J.statusText}`),"error",{responseText:v})}},fetchUser(){fetch("/api/user/me",{method:"GET",credentials:"include"}).then(async ee=>{if(!ee.ok)throw new Error(ee.statusText);const ae=await ee.json();se.dispatch({type:"USER_SET",payload:ae})}).catch(ee=>(0,ue.Z)({message:`Error fetching own user data, error: ${ee}`}))},fetchConfig(ee){fetch(`/api/project/${ee}/config`,{method:"GET",credentials:"include"}).then(async ae=>{if(!ae.ok)throw new Error(ae.statusText);const J=await ae.json();se.dispatch({type:"CONFIG_SET",payload:J})}).catch(ae=>(0,ue.Z)({message:`Error fetching config for project ${ee}, error: ${ae}`}))}};return xe};function Fe(Oe){const{store:_e}=Oe;return{openNotebookInNewTab(se,Se){const Te=_e.getState().project,xe=(0,G.X)({project:Te,notebook:{id:se,name:Se}});window.open(xe.fullUrlWithFile)}}}var qe=t(36664),at=t(83963),st=t.n(at),it=t(89341),ht=t(36837),pt=t.n(ht);class St{#e=null;activate(_e){this.#e=_e,_e.loadWebfontAndOpen=async function(me){if(this.element)return me.appendChild(this.element),this;const se=this.options.fontFamily,Se=new(pt())(se).load(),Te=new(pt())(se,{weight:"bold"}).load();return Se.constructor.all([Se,Te]).then(()=>(this.open(me),this),()=>(this.options.fontFamily="Courier",this.open(me),this))}}dispose(){delete this.#e?.loadWebfontAndOpen}}var Ze=t(45494),ct=t(45298);const _t="Failed to create terminal. Please try refreshing the page.",S="Failed to process request. Please try refreshing the page.",j="Failed to load terminals. Please try refreshing the page.",pe="Failed to delete terminal. Please try refreshing the page.",Ke="Failed to rename terminal. Please try refreshing the page.";class et extends Error{}class mt extends Error{}const Tt=(0,I.J1)`
  query GetTerminals($projectId: String!) {
    projectById(id: $projectId) {
      ... on Project {
        id
        terminals {
          terminalId
          name
          terminalRows
          terminalColumns
          ownerId
          ownerName
          ownerEmail
          createdAt
          sessionName
          terminalContents
          version
        }
      }
    }
  }
`,Et=(0,I.J1)`
  mutation StartNewTerminal($projectId: String!) {
    startNewTerminal(projectId: $projectId) {
      ... on NewTerminalStartSuccess {
        ok
        terminal {
          terminalId
          name
          createdAt
        }
      }
      ... on NewTerminalStartError {
        error
      }
    }
  }
`,Q=(0,I.J1)`
  mutation RenameTerminal($projectId: String!, $terminalId: String!, $newName: String!, $oldName: String!) {
    renameTerminal(projectId: $projectId, terminalId: $terminalId, oldName: $oldName, newName: $newName) {
      ... on RenameTerminalSuccess {
        ok
      }
      ... on RenameTerminalError {
        error
      }
    }
  }
`,Ee=(0,I.J1)`
  mutation DeleteTerminal($projectId: String!, $terminalId: String!) {
    deleteTerminal(projectId: $projectId, terminalId: $terminalId) {
      ... on DeleteTerminalSuccess {
        ok
      }
      ... on DeleteTerminalError {
        error
      }
    }
  }
`,[de,be]=(0,ct.A)(()=>t.e(3543).then(t.t.bind(t,11383,23)),j),we=Oe=>{const{apolloClient:_e,store:me,terminalStore:se,projectRedirect:Se,projectTrack:Te,projectRouteRef:xe}=Oe,ee=me.getState().project.id,ae=new Set,J={timeout:1e4,transports:["polling","websocket","webtransport"],autoConnect:!1},v=(0,ke.A_)("development")?(0,it.io)("http://localhost:9201",J):(0,it.io)({...J,path:`/terminals-connect/${ee}/socket.io`});function Z(){return de.current}function re(){if(!de.current?.Terminal)return null;const Ce=new de.current.Terminal({cursorBlink:!1,fontFamily:qe.Zc,fontSize:14});return Ce.loadAddon(new St),Ce}function ge(Ce){se[Ce]?.listenerStore.forEach(je=>je.dispose()),se[Ce]?.terminal.dispose(),delete se[Ce];const De=xe.current;(De.type==="terminal"?De.id:null)===Ce&&Se.redirectToProjectRoot();const ze={...me.getState().terminal.terminals};delete ze[Ce],me.dispatch({type:"SET_TERMINAL_NAMES",terminals:ze})}async function he(){const Ce=me.getState().terminal.terminals,De=Object.keys(Ce);if(Te.track("Terminal opened"),De.length>0&&De[0])Se.redirectToProjectTerminal(De[0]);else try{await Ye.createTerminal()}catch(Be){console.error("Failed to create terminal:",Be)}}async function ye(){await be();const De=(await Ye.getExistingTerminals()).map(({terminalContents:Be,terminalId:Ue,name:ze,createdAt:je,terminalColumns:nt,terminalRows:It,version:Ct})=>{const dt=re();if(!dt)return console.error("Failed to create terminal while initializing project terminals."),null;const Ot=dt.onData(Pt=>Re(Ue,Pt));return dt.resize(nt,It),dt.write(Be),se[Ue]={terminal:dt,version:Ct,listenerStore:[Ot]},{[Ue]:{name:ze,createdAt:je}}}).filter(Boolean);me.dispatch({type:"SET_TERMINAL_NAMES",terminals:Object.assign({},...De)})}async function Re(Ce,De){if(Ye.isConnected())try{Ye.sendTerminalMessage(Ce,"stdin",[De])}catch(Be){console.error(`Error sending terminal stdin: ${Be.message}`)}else n.i.closeAll(),n.i.info({message:Ye.getDisconnectedMessage()})}function Ve(){Object.keys(se).forEach(Ce=>{ge(Ce)})}async function Xe(Ce){for(const De of Ce){const Be=De.terminalId,Ue=se[De.terminalId];if(!Ue){if(!ae.has(Be)){ae.add(Be);const ze=new Error(`Received a message ${JSON.stringify(De)}, but there is no such terminal.`);(0,a.H)(ze,"error")}return}if(De.version===Ue.version+1)Ue.terminal.write(De.content),Ue.version=De.version;else{const ze=await Ye.refetchTerminal(De.terminalId);if(!ze)continue;Ue.terminal.reset(),Ue.terminal.write(ze.terminalContents),Ue.version=ze.version}}}function tt(){v.on("connect",()=>{ye()}),v.on("disconnect",gt),v.on("terminal:error",({error:Ce,errorCode:De,terminalId:Be})=>{(0,a.H)(new Error(`${De}: ${Ce} (terminalId: ${Be}, projectId: ${ee})`),"error"),n.i.error({message:S})}),v.on("terminal:stdout",Ce=>{Xe([Ce])})}function gt(){console.log("Disconnected from executor socket"),Ve(),Se.redirectToProjectRoot()}async function ft(){if(!v.connected)return v.connect(),new Promise((Ce,De)=>{const Be=()=>{v.off("connect_error",Ue),Ce()},Ue=ze=>{v.off("connect",Be),De(ze)};v.once("connect",Be),v.once("connect_error",Ue)})}async function rt(){try{await st()(()=>ft(),{retries:10,minTimeout:1e3,maxTimeout:1e4,onFailedAttempt:Ce=>{console.debug(`Attempt ${Ce.attemptNumber} failed. Retrying...`)}})}catch(Ce){(0,a.H)(Ce,"error")}}const Ye={isConnected(){return v.connected},getDisconnectedMessage(){return v.connected?"Machine is not running yet. You can start typing once it's ready.":"It seems you're offline. You can start typing when you're back online."},handleTerminalCreated(Ce){const{terminalId:De,name:Be,createdAt:Ue}=Ce,ze=me.getState().terminal.terminals;if(ze[De])return;const je=re();if(!je){console.error("Failed to create new terminal");return}const nt=je.onData(It=>Re(De,It));se[De]={terminal:je,version:0,listenerStore:[nt]},me.dispatch({type:"SET_TERMINAL_NAMES",terminals:{...ze,[De]:{name:Be,createdAt:Ue}}})},handleTerminalRenamed(Ce,De){const Be=me.getState().terminal.terminals,Ue=Be[Ce];if(Ue){const ze={...Ue,name:De};me.dispatch({type:"SET_TERMINAL_NAMES",terminals:{...Be,[Ce]:ze}})}},handleTerminalDeleted(Ce){ge(Ce)},resizeTerminal(Ce,De){se[Ce]&&v.emit("terminal:message",{terminalId:Ce,message:{type:"set_size",content:De},userId:me.getState().user?.id})},sendTerminalMessage(Ce,De,Be){v.emit("terminal:message",{message:{type:De,content:Be},terminalId:Ce,userId:me.getState().user?.id})},leaveTerminal(Ce){v.emit("terminal:leave",{terminalId:Ce})},async joinTerminal(Ce){try{await rt()}catch(nt){(0,a.H)(nt)}const De=await v.emitWithAck("terminal:join",{terminalId:Ce});if(De.status!=="OK")return;const Be=se[Ce];if(!Be)return;const{terminal:Ue}=De,{terminalContents:ze,version:je}=Ue;Be.terminal.reset(),Be.terminal.write(ze),Be.version=je},async getExistingTerminals(){const{data:Ce,error:De}=await _e.query({query:Tt,variables:{projectId:ee},fetchPolicy:"network-only"});return De?((0,a.H)(De),[]):Ce.projectById?.__typename==="ProjectUnauthorized"?[]:Ce.projectById?.__typename==="Project"?Ce.projectById.terminals.map(Be=>({...Be,createdAt:new Date(Be.createdAt)})):[]},async refetchTerminal(Ce){await rt();const De=await v.emitWithAck("terminal:refetch-terminal-state",{terminalId:Ce});return De.status!=="OK"?null:De.terminal},async createTerminal(){if(!Z()){n.i.error({message:j});return}const De=(0,z.hl)(me.getState());if(!(0,Ze.Ot)(me.getState())&&(0,y.sE)(De,T.zd.RUN_TERMINAL)){me.dispatch({type:"SET_IS_CREATING_TERMINAL",isCreatingTerminal:!0});try{if(!me.getState().user)return;const ze=await st()(async()=>{const{data:je}=await _e.mutate({mutation:Et,variables:{projectId:ee}});if(je?.startNewTerminal.__typename==="NewTerminalStartError"){if(je.startNewTerminal.error==="ProjectUnreachable")throw new mt("Project is unreachable");if(je.startNewTerminal.error==="TerminalsNotReady")throw new et("Terminals are not ready");if(je.startNewTerminal.error==="TerminalStartFailed")throw new(st()).AbortError("Terminal start failed")}return je},{retries:20,minTimeout:200,factor:1.3471,onFailedAttempt:je=>{console.debug(`Attempt to create terminal ${je.attemptNumber} failed. Retrying...`)}});if(ze?.startNewTerminal.__typename==="NewTerminalStartSuccess"){const{terminalId:je,name:nt,createdAt:It}=ze.startNewTerminal.terminal,Ct=me.getState().terminal.terminals,dt=re();if(!dt)throw new Error(_t);await Ye.joinTerminal(je);const Ot=dt.onData(Pt=>Re(je,Pt));se[je]={terminal:dt,version:0,listenerStore:[Ot]},me.dispatch({type:"SET_TERMINAL_NAMES",terminals:{...Ct,[je]:{name:nt,createdAt:new Date(It)}}}),Se.redirectToProjectTerminal(je)}}catch(Ue){Ue instanceof et||Ue instanceof mt?n.i.warning({message:"The terminal failed to be created because the machine took too long to start. Please try again once the machine is ready."}):(n.i.error({message:_t}),(0,a.H)(Ue))}finally{me.dispatch({type:"SET_IS_CREATING_TERMINAL",isCreatingTerminal:!1})}}},async deleteTerminal(Ce){try{const{data:De}=await _e.mutate({mutation:Ee,variables:{projectId:ee,terminalId:Ce}});De?.deleteTerminal.__typename==="DeleteTerminalError"&&n.i.error({message:pe}),ge(Ce)}catch(De){n.i.error({message:pe}),(0,a.H)(De,"error")}},async renameTerminal(Ce,De){if(se[Ce])try{const{data:Ue}=await _e.mutate({mutation:Q,variables:{projectId:ee,terminalId:Ce,newName:De,oldName:"temp"}});Ue?.renameTerminal.__typename==="RenameTerminalError"&&n.i.error({message:Ke})}catch(Ue){n.i.error({message:Ke}),(0,a.H)(Ue,"error")}},async openATerminal(){return he()}};return tt(),ye(),Ye},Je=Oe=>{const{store:_e}=Oe,{dispatch:me,getState:se}=_e;return{updateScheduling:async ee=>{if(_e.getState().user.is_anonymous)return Oe.modalApi.openModal({newModal:m.HM.SIGN_IN_MODAL,title:"Sign up to schedule a notebook"}),!1;const J=se().project.id,v=se().scheduling;if(ee.schedulingEnabled){const Z=await fetch(v.schedulingEnabled?`/scheduling/${J}`:"/scheduling",{method:v.schedulingEnabled?"PATCH":"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({crontab:ee.crontab,emailEnabled:ee.emailEnabled,emailOnFailed:ee.emailOnFailed,emailOnSuccess:ee.emailOnSuccess,emailOnSuccessRecipients:ee.emailOnSuccessRecipients,emailOnFailedRecipients:ee.emailOnFailedRecipients,frequency:ee.frequency,notebookId:ee.notebookId,projectId:J,republish:ee.republish,slackEnabled:ee.slackEnabled,slackOnFailed:ee.slackOnFailed,slackOnSuccess:ee.slackOnSuccess,slackOnSuccessRecipients:ee.slackOnSuccessRecipients,slackOnFailedRecipients:ee.slackOnFailedRecipients,timezone:ee.timezone})});if(!Z.ok){try{const re=await Z.json();n.i.error({message:re.error})}catch{n.i.error({message:"Failed to update scheduling. Please try again later or contact our support."}),(0,a.H)(new Error(`[/api/${J}]/scheduling] failed with ${Z.statusText}`),"error")}return!1}return n.i.success({message:"Scheduling settings updated"}),me({type:"UPDATE_SCHEDULING",newSchedulingState:ee}),!0}else{const Z=await fetch(`/scheduling/${J}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});return Z.ok?(n.i.success({message:"Scheduling settings updated"}),me({type:"REMOVE_SCHEDULING"}),!0):(n.i.error({message:"Failed to remove scheduling. Please try again later or contact our support."}),(0,a.H)(new Error(`DELETE [/api/${J}]/scheduling] failed with ${Z.statusText}`),"error"),!1)}},fetchScheduling:ee=>{fetch(`/scheduling/${ee}`,{method:"GET",credentials:"include"}).then(async ae=>{if(!ae.ok)throw new Error(ae.statusText);const J=await ae.json();_e.dispatch({type:"UPDATE_SCHEDULING",newSchedulingState:J})}).catch(ae=>(0,ue.Z)({message:`Error fetching scheduling config for project ${ee}, error: ${ae}`}))}}};var ot=t(10822),lt=t(32227),At=t(87106),bt=t(76253),ut=t(7168),yt=t(23785),Dt=t(16927);const kt=Oe=>(0,d.x)({commentsApi:s,editorApi:u,environmentApi:g.x,fileApi:f,integrationApi:M,notebookApi:$e,outputsApi:te,projectApi:He,projectFocusApi:Fe,schedulingApi:Je,layoutApi:A,commentsPreferencesApi:p,terminalApi:we,projectExecutionChannel:ot.P,notebookWriteQueue:Oe.notebookWriteQueue},{apolloClient:Oe.apolloClient,blockTransforms:Oe.blockTransforms,blockTransport:Oe.blockTransport,commonApi:Oe.commonApi,fileSystemFetcher:Oe.fileSystemFetcher,integrationFetcher:Oe.integrationFetcher,modalApi:Oe.modalApi,slateRef:Oe.slateRef,store:Oe.store,terminalStore:Oe.terminalStore,projectRedirect:Oe.projectRedirect,projectRouteRef:Oe.projectRouteRef,projectTrack:Oe.projectTrack,gettingStartedMutator:Oe.gettingStartedMutator,featureFlagProvider:Oe.featureFlagProvider}),{ServiceContext:vt,useServices:Rt}=(0,ut.B)();function Mt(Oe){const{commonApi:_e,modalApi:me,gettingStartedMutator:se}=(0,bt.v$)(),Se=(0,lt.CU)(),Te=(0,Dt.t4)(),xe=(0,o.m)(),ee=(0,At.VG)(),ae=(0,yt.zO)(),J=r(),[v,Z]=(0,c.useState)(null);return(0,c.useEffect)(()=>{const{blockTransforms:re,blockTransport:ge,fileSystemFetcher:he,integrationFetcher:ye,notebookWriteQueue:Re,slateRef:Ve,terminalStore:Xe,projectTrack:tt}=Te;Z(kt({apolloClient:xe,blockTransforms:re,blockTransport:ge,commonApi:_e,fileSystemFetcher:he,integrationFetcher:ye,notebookWriteQueue:Re,modalApi:me,slateRef:Ve,store:Se,terminalStore:Xe,projectRedirect:ee,projectRouteRef:ae,projectTrack:tt,gettingStartedMutator:se,featureFlagProvider:J}))},[xe,_e,me,se,Se,Te,ee,ae,J]),v?(0,e.jsx)(vt.Provider,{value:v,children:Oe.children}):null}},98024:($,_,t)=>{"use strict";t.d(_,{HM:()=>p,wS:()=>i});var e=t(45470),o=t(38435),c=t(67723),l=t(51881),r=t(99695),d=t(63998),s=t(64523),a=t(61320);const n=(0,d.createContext)([]),i=()=>(0,d.useContext)(n),p=({workspaceId:u,children:g})=>{const{loading:y,data:T,error:C}=(0,a.B)(u,{fetchPolicy:"cache-first"});return(0,d.useEffect)(()=>{C&&(0,s.pk)(C,c.w.WRONG_AUTH_PROVIDER)&&((0,r.O$)("wrong-auth-provider"),window.location.href=o.JZ.signIn()+"?workspace_id="+u)},[C,u]),C&&(0,l.H)(C),y&&!T?null:T?(0,e.jsx)(n.Provider,{value:T,children:g}):null}},69652:($,_,t)=>{"use strict";t.d(_,{b:()=>s,e:()=>d});var e=t(45470),o=t(51881),c=t(63998),l=t(31786);const r=(0,c.createContext)({data:[],refetch:()=>{}}),d=()=>(0,c.useContext)(r),s=({workspaceId:a,children:n})=>{const{loading:i,data:p,error:u,refetch:g}=(0,l.P)(a,{fetchPolicy:"cache-first"});return u&&(0,o.H)(u),i&&!p?null:p?(0,e.jsx)(r.Provider,{value:{data:p,refetch:g},children:n}):null}},76253:($,_,t)=>{"use strict";t.d(_,{AK:()=>F,v$:()=>k});var e=t(45470),o=t(87435),c=t(53694),l=t(80704),r=t(63998),d=t(51881),s=t(414),a=t(14651),n=t(74822),i=t(31976),p=t(74762),u=t(32912),g=t(18906);async function y(X){const z=new TextDecoder;let B="";for(;;){const G=await X.read();if(!G)break;const{done:f,value:I}=G;if(f)break;const E=z.decode(I,{stream:!0});if(E.includes("}")){B+=E.replace(/^\.*/,"");break}}const U=JSON.parse(B);if(U&&!U.error)return U;throw new Error("Could not process streamed data")}function T(X){const{store:z,history:B}=X,U=z.dispatch;async function G(b,q,fe,oe,ie,h){const ce=h?"template":"project";try{const ve=await fetch(`/api/project/${b}/duplicate`,{method:"POST",headers:{Accept:"text/plain","Content-Type":"application/json","Transfer-Encoding":"chunked"},credentials:"include",body:JSON.stringify({teamId:fe,privateTeamProject:q,categoryId:ie,target:ce,shouldCreateNewWorkspace:oe})});if(ve.status===200&&ve.body)try{const Me=await y(ve.body?.getReader());return{projectId:Me.id,projectSlug:Me.slug,teamId:Me.teamId,teamSlug:Me.teamSlug}}catch{throw new Error(`Could not duplicate ${ce}`)}if(ve.status>=400&&ve.status<500){const Me=await ve.json();if(Me?.error)return u.i.error({message:Me.error}),{projectId:null,projectSlug:null,teamId:null,teamSlug:null,userId:null}}throw new Error(`Could not duplicate project. Response failed with ${ve.status}`)}catch(ve){return(0,d.H)(ve,"error"),u.i.error({message:`Could not duplicate ${ce}`}),{projectId:null,projectSlug:null,teamId:null,teamSlug:null,userId:null}}}async function f(b){try{return(await fetch(`/api/project/${b}/request-access`,{method:"POST"})).ok?(u.i.success({message:"Access request has been sent successfully!"}),!0):(u.i.error({message:"Failed to send the access request. Please, try again."}),!1)}catch{return u.i.error({message:"Failed to send the access request. Please, try again."}),!1}}async function I(b,q={template:"deepnote",isTemplate:!1}){const fe={template:q.template,templateId:q.templateId,isTemplate:q.isTemplate,teamId:b,url:q.url,privateTeamProject:q.isPrivateTeamProject,categoryId:q.categoryId,source:q.source};class oe extends Error{}try{(0,s.u4)("Project creation initiated",{workspaceId:b});const ie=await fetch("/api/project",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(fe)});if(!ie.ok){const ce=await ie.json();throw ce?.error?new oe(ce?.error):new Error(ie.statusText)}const h=await ie.json();return{projectId:h.id,projectSlug:h.slug,teamId:h.teamId}}catch(ie){throw ie instanceof oe?u.i.error({message:ie.message}):((0,d.H)(ie,"error"),u.i.error({message:"There was an error creating a new project. Please try again in a moment, or contact our support."})),ie}}function E(b,q={}){const{initial:fe=!1,align:oe="in-view",behavior:ie="auto"}=q;U({type:g.fB.SCROLL_TARGET_SET,target:{cellId:b,initial:fe,align:oe,behavior:ie,range:null,includesViewportOffset:!1}})}function D(b){return(0,a.S)()?null:document.getElementById(b)}function R(b){return(0,a.S)()?null:document.getElementById(`output-${b}`)}function L(b){return(0,a.S)()?null:document.getElementById(`content-${b}`)}const x=b=>{const q=b??!z.getState().layout.isProjectPrimarySidebarCollapsed;U(q?{type:"COLLAPSE_PROJECT_SIDEBAR"}:{type:"EXPAND_PROJECT_SIDEBAR"})},ne=()=>{const q=!!(0,n.St)(B.location,i.X8);if(!z.getState().layout.isProjectPrimarySidebarCollapsed||q){const ie=(0,n.OU)(B.location,i.X8);B.replace(ie),U({type:"COLLAPSE_PROJECT_SIDEBAR"})}else{U({type:"EXPAND_PROJECT_SIDEBAR"});const{secondaryProjectSidebarView:ie}=z.getState().layout;if(!ie)return;const h=(0,n.kX)(B.location,{[i.X8]:ie});B.replace(h)}},M=async()=>{try{const b=await fetch("/api/integration/drive/revoke",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!b.ok)throw(0,d.H)(new Error(`Unable to revoke drive access, status: ${b.status}`),"error"),new Error("Unable to revoke Google Drive access.")}catch(b){throw(0,d.H)(new Error("Unable to revoke drive access"),"error",{error:b}),new Error("Unable to revoke Google Drive access.")}},A=async()=>{try{return(await fetch("/api/integration/drive/authorized",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})).ok}catch{return u.i.error({message:"Failed to fetch Google Drive status "}),!1}};return{duplicateProject:G,createNewProject:I,requestProjectAccess:f,scrollToCell:E,getCellElement:D,getCellOutputElement:R,getCellContentElement:L,openSupportChat:p.U,toggleProjectPrimarySidebarCollapsed:x,toggleUI:ne,revokeGoogleDriveAccess:M,hasUserAuthorizedGoogleDrive:A}}var C=t(31548);function m(X){const{dispatch:z,getState:B}=X.store;return{openModal(G){const f=B().modalManager.openedModal;G.newModal===C.HM.COMMAND_PALETTE_MODAL&&f||z({type:C.d_.OPEN_MODAL,payload:G})}}}var O=t(8719);function W(X){const{apolloClient:z}=X;return{async updateGettingStartedStepCompletionData(B,U){await z.mutate({mutation:O.G,variables:{workspaceId:B,stepId:U}})}}}var K=t(32227),H=t(7168);function N(X,z){return(0,c.x)({commonApi:T,modalApi:m,gettingStartedMutator:W,history:()=>(0,l.zR)()},{store:X,apolloClient:z})}const{ServiceContext:w,useServices:k}=(0,H.B)();function F(X){const z=(0,K.CU)(),B=(0,o.m)(),[U]=(0,r.useState)(()=>N(z,B));return(0,e.jsx)(w.Provider,{value:U,children:X.children})}},11796:($,_,t)=>{"use strict";t.d(_,{Zn:()=>r,hS:()=>d});var e=t(45470),o=t(74111),c=t(63998);const l=(0,c.createContext)(null);function r(s){const n=(0,c.useContext)(l)?.clearModal,[i,p]=(0,c.useState)(null),u=(0,c.useCallback)(T=>{n?.();let C=null;C=T(()=>{p(O=>O===C?null:O)}),p(C)},[n]),g=(0,c.useCallback)(()=>{p(null),n?.()},[n]),y=(0,c.useMemo)(()=>({openModal:u,clearModal:g}),[u,g]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Provider,{value:y,children:s.children}),i?(0,e.jsx)(o.Z,{children:i}):null]})}function d(){const s=(0,c.useContext)(l);if(!s)throw new Error("useModal must be used within a ModalProvider");return s.openModal}},23785:($,_,t)=>{"use strict";t.d(_,{g6:()=>r,ij:()=>d,zO:()=>s});var e=t(45470),o=t(63998);const c={type:"root"},l=(0,o.createContext)({projectRoute:c,projectRouteRef:{current:c}});function r(a){const n=(0,o.useMemo)(()=>a.terminalId?{type:"terminal",id:a.terminalId}:a.notebookId?{type:"notebook",id:a.notebookId,blockId:a.blockId,commentThreadId:a.commentThreadId}:a.filePath?{type:"file",path:a.filePath,forceOpenAsText:a.forceOpenAsText}:{type:"root"},[a.terminalId,a.notebookId,a.blockId,a.filePath,a.commentThreadId,a.forceOpenAsText]),i=(0,o.useRef)(n);i.current=n;const p=(0,o.useMemo)(()=>({projectRoute:n,projectRouteRef:i}),[n]);return(0,e.jsx)(l.Provider,{value:p,children:a.children})}function d(){return(0,o.useContext)(l).projectRoute}function s(){return(0,o.useContext)(l).projectRouteRef}},16927:($,_,t)=>{"use strict";t.d(_,{oz:()=>E,t4:()=>I});var e=t(45470),o=t(87435),c=t(53694),l=t(63998),r=t(94270),d=t(4173);const s=D=>{const R=(0,d.Bk)();!R||(0,d.et)(R).op!=="pageload"||(D?(R.setStatus({code:1,message:"ok"}),R.setAttribute("project-initialisation","successful")):(R.setStatus({code:2,message:"internal_error"}),R.setAttribute("project-initialisation","failed")),R.end())};var a=t(51881),n=t(15479);class i extends null{}const p=(0,r.J1)`
  mutation LogProjectAccess($id: String!) {
    logProjectAccess(id: $id)
  }
`,u=D=>{const{store:R,apolloClient:L}=D,x=async()=>{const M=R.getState().project.id;return L.mutate({mutation:p,variables:{id:M}})};return{initialize:()=>{R.dispatch({type:"PROJECT_INITIALIZATION_STARTED"}),(0,n.Yz)("starting function initialize()");const M=R.getState().project.id,A=D.projectFetcher.fetchProject(M);x().catch(ie=>{(0,a.H)(ie,"warning")});const b=setTimeout(()=>{(0,n.Yz)("initialisation timed out"),(0,a.H)(new Error("Initialisation of project timed out"),"error"),R.dispatch({type:"PROJECT_INITIALIZATION_WARNING",warning:"This is taking longer than usual. We are still trying though. If the issue persists, please try restarting your browser."})},3e4),q=ie=>{clearTimeout(b),ie?(R.dispatch({type:"PROJECT_INITIALIZATION_ERROR",error:"Something went wrong during project inititalisation. Please try again later."}),(0,a.H)(ie,"error"),s(!1)):R.dispatch({type:"PROJECT_INITIALIZATION_FINISHED"})};return(async()=>{await A;const ie=D.integrationFetcher.fetchAndStoreIntegrations(M);q(),s(!0),await ie})().catch(ie=>q(ie)).finally(()=>q()),(0,n.Yz)("initialisation of initialisation class done"),()=>{clearTimeout(b)}}}};var g=t(32912);function y(D){const{store:R}=D;return{async fetchAndStoreIntegrations(L){R.dispatch({type:"INTEGRATION_LOAD_START"});try{const x=await fetch(`/api/integration/project/${L}`);if(!x.ok){if(x.status===403){g.i.error({message:"Failed to fetch integrations due to invalid permissions."});return}throw new Error("Failed fetch integrations request")}const ne=await x.json();R.dispatch({type:"INTEGRATION_BATCH_ADD",payload:{integrations:ne}})}finally{R.dispatch({type:"INTEGRATION_LOAD_END"})}}}}var T=t(2802),C=t(5012),m=t(52405),O=t(71380),W=t(30052),K=t(76878),H=t(414);function N(D){return{track:(R,L={},x={})=>{(0,H.u4)(R,{workspaceId:D,...L},x)}}}var w=t(3104);function k(){return{}}var F=t(32227),X=t(87106),z=t(76253),B=t(7168),U=t(23785);function G(D,R){return(0,c.x)({blockFetchQueue:O.H,notebookWriteQueue:K.e,blockTransforms:w.g,blockTransport:m.g,init:u,fileSystemFetcher:W.LL,integrationFetcher:y,projectFetcher:C.Z,payAsYouGoMachinesFetcher:T.z,terminalStore:k,slateRef:()=>({current:null}),projectTrack:()=>N(R.workspaceId)},{commonApi:D.commonApi,store:D.store,apolloClient:D.apolloClient,projectRedirect:D.projectRedirect,projectRouteRef:D.projectRouteRef})}const{ServiceContext:f,useServices:I}=(0,B.B)();function E(D){const{commonApi:R}=(0,z.v$)(),L=(0,F.CU)(),x=(0,o.m)(),ne=(0,X.VG)(),M=(0,U.zO)(),[A,b]=(0,l.useState)(null);return(0,l.useEffect)(()=>{b(G({commonApi:R,store:L,apolloClient:x,projectRedirect:ne,projectRouteRef:M},{projectId:D.projectId,workspaceId:D.workspaceId}))},[R,L,ne,M,D.projectId,x,D.workspaceId]),(0,l.useEffect)(()=>{if(!A)return;const{init:q}=A,fe=q.initialize();return()=>{fe()}},[A,L]),A?(0,e.jsx)(f.Provider,{value:A,children:D.children}):null}},7168:($,_,t)=>{"use strict";t.d(_,{B:()=>o});var e=t(63998);function o(){const c=(0,e.createContext)({});return c.displayName="ServiceContext",{ServiceContext:c,useServices:()=>(0,e.useContext)(c)}}},82524:($,_,t)=>{"use strict";t.d(_,{D:()=>s,k:()=>d});var e=t(45470);const o=["sql","text"];var c=t(74231),l=t(63998);const r=(0,l.createContext)({isAutoAiEnabledByUser:!0,setIsAutoAiEnabledByUser:()=>{},checkIsAutoAiOutputTypeEnabled:()=>!0,toggleAutoAiOutputType:()=>{},enabledAutoAiOutputTypes:o});function d(){return(0,l.useContext)(r)}function s({children:a}){const[n,i]=(0,c.M)("auto-ai-switch-enabled",!0),[p,u]=(0,c.M)("auto-ai-enabled-output-types",{sql:!0,text:!0}),g=(0,l.useCallback)(m=>p[m]??!0,[p]),y=(0,l.useCallback)((m,O)=>{u({...p,[m]:O})},[p,u]),T=(0,l.useMemo)(()=>o.filter(m=>g(m)),[g]),C=(0,l.useMemo)(()=>({isAutoAiEnabledByUser:n,setIsAutoAiEnabledByUser:i,checkIsAutoAiOutputTypeEnabled:g,toggleAutoAiOutputType:y,enabledAutoAiOutputTypes:T}),[T,n,g,y,i]);return(0,e.jsx)(r.Provider,{value:C,children:a})}},37746:($,_,t)=>{"use strict";t.d(_,{W:()=>l,p:()=>c});var e=t(45470),o=t(95059);const c=(0,o.YG)()?"700d27dc-457a-4de4-bdb9-193b27c5af28":"8beaa1f5-d498-4e36-94c4-7583a9706c26";function l({workspaceId:r,children:d}){return r!==c?(0,e.jsx)(e.Fragment,{children:d}):null}},17829:($,_,t)=>{"use strict";t.d(_,{du:()=>p});var e=t(94270),o=t(64980),c=t(64472),l=t(63998),r=t(50740),d=t(664),s=t(82524),a=t(37746);const n=(0,e.J1)`
  query getWorkspaceDeepnoteAutoAiSettings($workspaceId: String!) {
    team(id: $workspaceId) {
      __typename
      ... on Team {
        id
        deepnote_ai_enabled
        deepnote_ai_has_access_to_outputs
        deepnote_auto_ai_enabled
        isUnderHipaa
      }
    }
  }
`,i=u=>{const g=!u.isWorkspaceUnderHipaa,y=g&&u.isAutoAiEnabledForWorkspace,T=g&&u.isAutoAiEnabledForWorkspace&&u.isAutoAiEnabledByUser,C=!u.hasLimit||u.isOnUnlimitedAi||u.isFreeAiUsageEnabled&&u.hasLimit&&!u.hasLimitBeenHit;return{isAiUiShown:(u.isOnUnlimitedAi||!u.hasLimit||u.isFreeAiUsageEnabled&&u.hasLimit)&&u.isSingleAIEnabledForWorkspace,isAutoAiEnabledInWorkspaceSettings:y,autoAiEnabledBySettings:T,isOnUsageBasedAi:u.isFreeAiUsageEnabled&&u.hasLimit&&!u.isOnUnlimitedAi,isAiEnabled:g&&u.isSingleAIEnabledForWorkspace&&C,isAutoAiEnabled:T&&C,hasAiUsageLimitBeenHit:u.isFreeAiUsageEnabled&&!!(u.hasLimitBeenHit&&u.hasLimit)&&!u.isOnUnlimitedAi}},p=u=>{const{isAutoAiEnabledByUser:g,setIsAutoAiEnabledByUser:y}=(0,s.k)(),T=(0,c.n)("FREE_AI_USAGE"),{hasLimit:C,hasLimitBeenHit:m}=(0,d.d)("LIMIT_WORKSPACE_AI_USAGE"),{canUseFeature:O}=(0,r.X)("UNLIMITED_AI_USAGE"),{data:W,loading:K}=(0,o.IT)(n,{fetchPolicy:"cache-first",variables:{workspaceId:u}}),H=!K&&W?.team?.__typename==="Team"?W.team.deepnote_ai_enabled:!1,N=!K&&W?.team?.__typename==="Team"?W.team.deepnote_ai_enabled&&W.team.deepnote_ai_has_access_to_outputs&&W.team.deepnote_auto_ai_enabled:!1,w=!K&&W?.team?.__typename==="Team"?W.team.isUnderHipaa:!1,k=u===a.p,F=!w&&H&&!k,X=(0,l.useMemo)(()=>i({isWorkspaceUnderHipaa:w,isAutoAiEnabledForWorkspace:N,isAutoAiEnabledByUser:g,hasLimit:C,hasLimitBeenHit:m,isFreeAiUsageEnabled:T,isSingleAIEnabledForWorkspace:H,isOnUnlimitedAi:O}),[w,N,g,C,m,T,H,O]);return{isDeepnoteAiEnabled:F,setIsAutoAiEnabledByUser:y,...X}}},47888:($,_,t)=>{"use strict";t.d(_,{A:()=>r,T:()=>l});var e=t(94270),o=t(69e3),c=t(63998);const l=(0,e.J1)`
  mutation SetCommentNotificationPreference(
    $projectId: String!
    $preference: CommentNotificationPreference!
    $isSetByUser: Boolean!
  ) {
    setCommentsNotificationPreference(projectId: $projectId, preference: $preference, isSetByUser: $isSetByUser) {
      id
      commentNotificationPreference
    }
  }
`;function r(){const[d,{loading:s,error:a}]=(0,o.n)(l),n=(0,c.useCallback)((i,p,u)=>d({variables:{projectId:i,preference:p,isSetByUser:u}}),[d]);return{error:a,loading:s,setCommentNotificationPreference:n}}},688:($,_,t)=>{"use strict";t.d(_,{TH:()=>n,U4:()=>s,ld:()=>r,p0:()=>a});var e=t(24467),o=t(32371),c=t.n(o);function l(i){return c()(e.pU,i)}function r(i){return l(i.state)}function d(i){return i===e.$G.AVAILABLE}function s(i){return d(i.state)}function a(i){return i===e.$G.CONNECTED||i===e.$G.ALWAYS_ON}function n(i){return!a(i.state)}},83756:($,_,t)=>{"use strict";t.d(_,{Ey:()=>a,To:()=>s,gj:()=>r,lk:()=>d,ni:()=>n,vB:()=>i});var e=t(51881),o=t(32912),c=t(81882),l=t(32369);const r=async p=>{const u=await fetch("/api/team",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...p})});return u.status!==200&&((0,e.H)(new Error("Failed to create a workspace"),"error"),o.i.error({message:"Failed to create a workspace. Please contact support"})),u.json()},d=(p,u)=>fetch(`/api/team/${p}/resend-invitation`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberEmail:u})}),s=p=>{fetch(`/api/team/${p}`,{method:"DELETE",credentials:"include"}).then(async u=>{if(!u.ok){o.i.error({message:"We failed to cancel your plan, please contact support."});const g=await u.text(),y=new Error(`Cancel plan failed on deleteTeam non-200 response: ${g}`);(0,e.H)(y,"fatal",{teamId:p});return}window.location.assign("/")}).catch(u=>{(0,e.H)(u,"error",{teamId:p}),o.i.error({message:"We failed to cancel your plan, please contact support."})})},a=async(p,u)=>{const g=u,y=await fetch(`/api/team/${p}/link/${g}`,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}});if(y.ok)return(await y.json()).token;{const T=await y.text();throw new Error(`/api/team/${p}/link/${g} responded with code ${y.status}, text ${T}`)}},n=async(p,u)=>{const g=u,y=await fetch(`/api/team/${p}/link/${g}`,{method:"DELETE",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!y.ok){const T=await y.text();throw new Error(`/api/team/${p}/link/${g} responded with code ${y.status}, text ${T}`)}},i=async(p,u,g)=>{const y=(0,c.c)(l.WS),T=fetch(`/api/team/${u}/upgrade-plan`,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({planName:p,planPeriodType:g})}),[C,m]=await Promise.all([y,T]);if(!C)throw(0,e.H)(new Error("Failed to load stripe"),"error"),new Error("Failed to load stripe");if(!m.ok)throw new Error("Unable to upgrade team plan");const{sessionId:O,switchedToAnnual:W,addOnToPro:K}=await m.json();if(W){await o.i.success({message:"Thank you for signing up for the annual plan, you will be charged for the next year. If you have any question about your recent upgrade or about the product, reach out to our support."});return}if(K)return await o.i.success({message:"Thanks for signing up with our Team plan! If you have any questions about your recent upgrade or about the product, reach out to our support."}),{addOnToPro:K};const H=await C?.redirectToCheckout({sessionId:O});if(H.error)throw(0,e.H)(new Error("Checkout redirect failed"),"error",{stripeResult:H}),new Error("Redirect to checkout failed")}},81723:($,_,t)=>{"use strict";t.d(_,{t:()=>r});var e=t(45470),o=t(55549),c=t(95149),l=t(8674);const r=({source:d})=>{const s=(0,c.WA)(),a=(0,l.S)(s,d);return(0,e.jsxs)(e.Fragment,{children:[" ",(0,e.jsx)(o.N,{onClick:a,children:"Send report"})]})}},8674:($,_,t)=>{"use strict";t.d(_,{S:()=>C});var e=t(45470),o=t(414),c=t(11796),l=t(40162),r=t(91340),d=t(73126),s=t(52889),a=t(67483),n=t(38320),i=t(98474),p=t(44366),u=t(52187),g=t(63998);const y=({onCancel:m,onSubmit:O})=>{const[W,K]=(0,g.useState)("");return(0,e.jsxs)(r.a,{isOpen:!0,onClose:m,size:"lg",isCentered:!0,children:[(0,e.jsx)(d.m,{}),(0,e.jsxs)(s.$,{overflow:"auto",children:[(0,e.jsx)(a.r,{children:"Report a problem"}),(0,e.jsx)(n.c,{overflow:"visible",children:(0,e.jsx)(i.T,{size:"sm",placeholder:"Tell us what happened",onChange:H=>{K(H.target.value)}})}),(0,e.jsx)(p.j,{justifyContent:"flex-end",children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.$,{variant:"ghost",onClick:m,children:"Cancel"}),(0,e.jsx)(u.$,{onClick:()=>O(W),children:"Submit"})]})})]})]})},T=({onClose:m,workspaceId:O,source:W})=>(0,e.jsx)(y,{onCancel:m,onSubmit:K=>{(0,o.u4)("User report submitted",{workspaceId:O??null,explanation:K,source:W},{allowNullWorkspaceId:!0}),W==="error-boundary"&&(0,l.Sq)({message:K,url:window.location.href,email:window.__userEmail??""}),m()}}),C=(m,O)=>{const W=(0,c.hS)();return()=>{(0,o.u4)("User report form opened",{workspaceId:m??null,source:O},{allowNullWorkspaceId:!0}),W(K=>(0,e.jsx)(T,{onClose:K,workspaceId:m,source:O}))}}},2802:($,_,t)=>{"use strict";t.d(_,{z:()=>o});var e=t(2400);function o(c){const{apolloClient:l}=c;return{async refetch(){await l.refetchQueries({include:[e.mf]})}}}},5012:($,_,t)=>{"use strict";t.d(_,{Z:()=>c});var e=t(23240),o=t(18906);function c(l){const{store:r}=l;return{async fetchProject(d,s){const a=s?`/api/project/${d}?refetch`:`/api/project/${d}`;return fetch(a,{method:"GET",credentials:"include"}).then(n=>{if(!n.ok)throw window.location.reload(),new Error(n.statusText);return n.json()}).then(n=>{r.dispatch((0,o.jG)(n))}).catch(n=>(0,e.Z)({message:`Error refetching project from ${a}, error: ${n}`}))}}}},64523:($,_,t)=>{"use strict";t.d(_,{GQ:()=>l,II:()=>d,pk:()=>o});var e=t(67723);function o(s,a){return s.graphQLErrors.some(n=>!!n.extensions&&n.extensions?.code===a)}const c=[e.w.SUBSCRIPTION_UNSUFFICIENT_PERMISSIONS_ERROR],l=s=>!!s.extensions&&c.includes(s.extensions?.code),r=["BAD_USER_INPUT","UNAUTHENTICATED","FORBIDDEN",e.w.SNOWFLAKE_SCHEMA_ERROR,e.w.BIGQUERY_SCHEMA_ERROR,e.w.SQLSERVER_SCHEMA_ERROR,e.w.REDSHIFT_SCHEMA_ERROR,e.w.ATHENA_SCHEMA_ERROR,e.w.POSTGRES_SCHEMA_ERROR,e.w.MYSQL_SCHEMA_ERROR,e.w.CLICKHOUSE_SCHEMA_ERROR,e.w.USER_SUSPENDED,e.w.WRONG_AUTH_PROVIDER,e.w.DREMIO_SCHEMA_ERROR,e.w.TRINO_SCHEMA_ERROR,e.w.GIT_EXPORT_ERROR,e.w.DAG_INVALID_SYNTAX,e.w.NOTEBOOK_INSUFFICIENT_PERMISSIONS_ERROR];function d(s){return!!s.extensions&&r.includes(s.extensions?.code)}},24370:($,_,t)=>{"use strict";t.d(_,{i:()=>l});var e=t(87435),o=t(63998),c=t(29740);function l(r,d){const s=(0,e.m)(),[a,n]=(0,o.useState)({connected:!1,connecting:!1,error:null}),[i,p]=(0,o.useState)(1),u=(0,c.f)(d.variables),g=!!d.skip,y=(0,o.useRef)(d.onConnect);y.current=d.onConnect;const T=(0,o.useRef)(d.onData);T.current=d.onData;const C=(0,o.useRef)(d.onError);C.current=d.onError;const m=(0,o.useRef)(d.onComplete);return m.current=d.onComplete,(0,o.useEffect)(()=>{if(g){n({connected:!1,connecting:!1,error:null});return}const O=s.subscribe({query:r,variables:u});let W=null;const K=O.subscribe({next(N){typeof N<"u"&&T.current?.call(null,{data:{data:N.data,loading:!1,variables:u},client:s})},error(N){N&&(n(w=>({...w,error:N,connected:!K.closed})),C.current?.call(null,N)),W=K.closed?setTimeout(()=>{W=null,p(w=>w+1)},1e4):null},complete(){m.current?.call(null)}});n({connecting:!1,connected:!0,error:null});let H=setTimeout(()=>{H=null,y.current?.call(null),n(N=>({...N,connecting:!1,connected:!0}))},1e3);return()=>{H&&clearTimeout(H),W&&(clearTimeout(W),W=null),K.unsubscribe()}},[i,u,s,r,g]),a}},50740:($,_,t)=>{"use strict";t.d(_,{X:()=>o});var e=t(98024);function o(c){const r=(0,e.wS)().find(d=>d.name===c);return{canUseFeature:r?.canUse??!1,options:{isRoleSufficient:r?.options?.isRoleSufficient??void 0,minimumRequiredPlan:r?.options?.minimumRequiredPlan??void 0,minimumRequiredRole:r?.options?.minimumRequiredRole??void 0}}}},664:($,_,t)=>{"use strict";t.d(_,{d:()=>c});var e=t(63998),o=t(69652);function c(l){const r=(0,o.e)(),d=(0,e.useMemo)(()=>r.data.find(i=>i.name===l),[r.data,l]),s=(0,e.useMemo)(()=>d?.currentValue,[d]),a=(0,e.useMemo)(()=>d?.hasLimitBeenHit??!1,[d]),n=(0,e.useMemo)(()=>d?.options??{limit:0},[d]);return{hasLimitBeenHit:a,currentValue:s??0,options:n,hasLimit:!!d,limit:d,refetch:r.refetch}}},29740:($,_,t)=>{"use strict";t.d(_,{f:()=>l});var e=t(29828),o=t.n(e),c=t(63998);function l(r,d=o()){const s=(0,c.useRef)(),a=s.current,n=a!==void 0&&d(a,r);return(0,c.useEffect)(()=>{n||(s.current=r)},[r,n]),n?a:r}},34879:($,_,t)=>{"use strict";t.d(_,{H:()=>e});function e(o,c,l){o.cache.modify({id:`Notebook:${c}`,fields:{blocks:(r,{readField:d,toReference:s})=>{const a=r.filter(g=>{const y=d("id",g),T=l.deletedBlockIds??new Set;return!y||!T.has(y)}),n=new Set(a.map(g=>d("id",g)).filter(Boolean)),p=[...l.upsertedBlockIds??[]].map(g=>n.has(g)?null:s({__typename:"Block",id:g})).filter(Boolean);return[...a,...p]}}})}},61320:($,_,t)=>{"use strict";t.d(_,{B:()=>l});var e=t(94270),o=t(64980);const c=(0,e.J1)`
  query CanUseFeatureGatesData($workspaceId: String!) {
    featureGates(workspaceId: $workspaceId) {
      name
      canUse
      options {
        isRoleSufficient
        minimumRequiredPlan
        minimumRequiredRole
      }
    }
  }
`;function l(r,d={}){const{data:s,loading:a,error:n}=(0,o.IT)(c,{variables:{workspaceId:r},fetchPolicy:d.fetchPolicy});return{data:s?s?.featureGates:[],loading:a,error:n}}},31786:($,_,t)=>{"use strict";t.d(_,{P:()=>l});var e=t(94270),o=t(64980);const c=(0,e.J1)`
  query CanUseFeatureLimitsData($workspaceId: String!) {
    featureLimits(workspaceId: $workspaceId) {
      name
      hasLimitBeenHit
      currentValue
      options {
        limit
      }
    }
  }
`;function l(r,d={}){const{data:s,loading:a,error:n,refetch:i}=(0,o.IT)(c,{variables:{workspaceId:r},fetchPolicy:d.fetchPolicy});return{data:s?s?.featureLimits:[],loading:a,error:n,refetch:i}}},35537:($,_,t)=>{"use strict";t.d(_,{t:()=>c});var e=t(6536),o=t(48154);const c=(l=e.T,r)=>r.type==="CONFIG_SET"?(0,o.jM)(l,d=>{d.commentsNotificationPreferences=r.payload.commentsNotificationPreferences,d.formatterUrl=r.payload.formatterUrl,d.announcement=r.payload.experimentalMessage}):r.type==="SET_COMMENT_NOTIFICATION_PREFERENCE"?(0,o.jM)(l,d=>{d.commentsNotificationPreferences=r.preferences}):r.type==="SET_LAST_SEARCH_QUERY"?(0,o.jM)(l,d=>{d.lastSearchQuery=r.lastSearchQuery}):l},52341:($,_,t)=>{"use strict";t.d(_,{AO:()=>X,G1:()=>W,Gs:()=>w,PB:()=>H,SP:()=>y,b4:()=>z,eH:()=>u,h8:()=>O,kA:()=>K,kx:()=>B,lv:()=>N,tt:()=>C,xb:()=>k,xv:()=>T});var e=t(88563),o=t(74822),c=t(47628),l=t(42191),r=t(56093),d=t(11272),s=t(6536),a=t(31548),n=t(54677),i=t(53206),p=t(61083);const u={sessionId:"",initializationState:"initializing",initializationMessage:void 0};function g(){return(0,o.td)()??{id:"",name:""}}function y(){const U=g();return{id:U.id,name:U.name??"",currentDockerImage:"",created_at:new Date,updated_at:null,team_id:"",image:"",user_id:"",pod_name:"",pvc_name:"",last_activity:new Date,deleted_at:null,load_file_from_url:"",sharing_link_on:!1,link_access_type:c.BD.NONE,create_state:"",collaborationProperties:{collaborators:[],owner:{email:"",avatar:null,name:null}},hardware:l.rR.FJORD,published_enable_duplication:!1,scrollTarget:null,isRenamingProject:!1,isStarringProject:!1,isPromotingNotebook:!1,owner:m,teams:[],hardwareSwitching:void 0,init_notebook_id:null,default_notebook_id:null,published_notebook_id:null,currentUserAccessType:c.BD.VIEW}}const T={isProjectPrimarySidebarCollapsed:!1,isAppPreviewOpened:{},secondaryProjectSidebarView:null,isProjectSharingPopoverOpened:!1,selectedProjectPrimarySidebarTab:void 0,openedBlockDropdownPosition:null,isDraggingBlocks:!1,newlyCreatedProjectId:null,blockOptionsPopoverOpened:{}},C={currentLayout:{},cachedLayout:{}},m={slug:"",name:"",teamId:"",custom_env_enabled:!0,billingVersion:e.J4,activeBillingPlans:[]},O={terminals:{},isCreatingTerminal:!1},W={list:[],loading:!1,importing:!1},K={entities:{},expandedDirPaths:[""],openRawList:["/Dockerfile"],uploadingItems:{},isTooltipOpen:!0,readOnlyDocuments:{},isUnavailable:!1,isReloading:!1},H={hardwareStatus:"missing"},N={cellIdToCommentsCounts:{},commentEditors:{},commentsDisplayPreferences:i.xd.UNRESOLVED,hasOpenedLinkedThread:!1,showOnlyMyThreads:!1},w={outputs:{}},k={},X={integrationTemplates:["clickhouse","env","local","google-drive","s3","gcs","pgsql","redshift","athena","mongodb","big-query","snowflake","mysql","sql-server","mindsdb","gcr","ecr","dockerhub","github_package","ssh-key"].map(U=>({type:U,link:r.I[U].link,desc:r.I[U].description})),integrations:[],integrationsLoading:!1,integrationsLoaded:!1},z={schedulingEnabled:!1,emailOnSuccess:!1,emailOnFailed:!1,emailEnabled:!1,emailOnSuccessRecipients:[],emailOnFailedRecipients:[],frequency:d.up.DAILY,slackOnSuccess:!1,slackOnFailed:!1,slackEnabled:!1,slackOnSuccessRecipients:[],slackOnFailedRecipients:[],republish:!0,crontab:null,notebookId:null,timezone:null},B={config:s.T,output:w,runtimeErrors:k,sessionConfig:u,layout:T,notebookLayout:C,user:n.I,modalManager:a.tD,project:y(),terminal:O,filesystem:K,connection:H,commentsState:N,integrationsState:X,history:p.z8,environment:W,scheduling:z}},53206:($,_,t)=>{"use strict";t.d(_,{xd:()=>l});var e=t(42218);const o=null,l=e.z.enum(["UNRESOLVED","RESOLVED"]).enum,r=null},97395:($,_,t)=>{"use strict";t.d(_,{Yw:()=>l,_4:()=>c,rW:()=>d});var e=t(82263);const o=s=>s.notebookLayout.cachedLayout,c=s=>s.notebookLayout.currentLayout,l=s=>(0,e.Mz)(o,a=>a[s]?.deepnote_cell_height??0),r=[],d=s=>(0,e.Mz)(o,a=>a[s]?.deepnote_output_heights??r)},93099:($,_,t)=>{"use strict";t.d(_,{DK:()=>n,Dk:()=>K,Gh:()=>O,Kq:()=>C,LH:()=>a,OM:()=>u,Ow:()=>W,To:()=>d,UA:()=>g,Wm:()=>c,bH:()=>w,eF:()=>r,hl:()=>m,hx:()=>p,jF:()=>N,j_:()=>T,sg:()=>y,vp:()=>s,xY:()=>l,yN:()=>o,ye:()=>i});var e=t(82263);const o=k=>k.project,c=k=>k.project.init_notebook_id,l=k=>k.project.published_notebook_id,r=k=>k.project.default_notebook_id,d=k=>k.project.id,s=k=>k.project.name,a=k=>k.project.owner,n=k=>k.project.sharing_link_on,i=k=>k.project.link_access_type,p=k=>k.project.public_access_allowed,u=k=>k.project.isPromotingNotebook,g=k=>k.project.environment_id,y=k=>k.project.hardware,T=k=>k.project.dockerBuildState,C=k=>k.project.currentDockerImage,m=k=>k.project.currentUserAccessType,O=k=>k.project.collaborationProperties.owner,W=k=>k.project.collaborationProperties.collaborators,K=k=>k.project.team_id,H=k=>k.project.scrollTarget,N=k=>(0,e.Mz)(H,F=>F?.cellId===k?F:null),w=()=>(0,e.Mz)(W,k=>k.length)},45494:($,_,t)=>{"use strict";t.d(_,{Ot:()=>c,Ye:()=>o,kv:()=>l});var e=t(82263);const o=r=>r.terminal.terminals,c=r=>r.terminal.isCreatingTerminal;function l(r){return(0,e.Mz)(o,d=>d[r])}},52405:($,_,t)=>{"use strict";t.d(_,{g:()=>n});var e=t(60022),o=t(47628),c=t(87698),l=t(31311),r=t(74288),d=t(40177),s=t(93099),a=t(15479);function n(i){const{notebookWriteQueue:p,store:u}=i;return{saveCell(y,T,C){const m=(0,s.hl)(u.getState()),O=(0,e.sE)(m,o.zd.MANIPULATE_CELLS)?(0,r.v$)(C):(0,e.sE)(m,o.zd.EDIT_INPUT_CELL_VALUE)&&(0,d.yA)(C)?(0,r.Sx)(C):null;if(!O){console.error("The user is not allowed to update the block",C);return}const W={id:(0,c.NF)(),notebookId:y,operations:[{type:"block-update",blockId:T,blockDataUpdate:O}]};(0,a.Yz)("Block API: saveCell",W),p.queueBlockTransaction(W)},saveNewCell(y,T,C,m,O){const W=(0,r.v$)(m),K={id:(0,c.NF)(),notebookId:y,operations:[{type:"block-insert",blockId:T,insertAfterBlockId:O?.id??null,blockData:W}]};(0,a.Yz)("Block API: saveNewCell",K),p.queueBlockTransaction(K)},saveDeletedCell(y,T,C,m){const O={id:(0,c.NF)(),notebookId:y,operations:[{type:"block-delete",blockId:T}]};(0,a.Yz)("Block API: saveDeletedCell",O),p.queueBlockTransaction(O)},saveCellMove(y,T,C,m,O){const W={id:(0,c.NF)(),notebookId:y,operations:[{type:"block-move",blockId:T,moveAfterBlockId:O?.id??null}]};(0,a.Yz)("Block API: saveCellMove",W),p.queueBlockTransaction(W)},saveCellFocus(y,T){(0,l.jo)(y,T)},updateNotebookMetadata(y,T){p.queueNotebookMetadataUpdate(y,T)}}}},71380:($,_,t)=>{"use strict";t.d(_,{H:()=>u});var e=t(53929),o=t.n(e),c=t(94270),l=t(99636),r=t(15799),d=t(36581),s=t(40177),a=t(34879),n=t(14046);const i=(0,c.Ay)`
  query NotebookCatchup(
    $notebookId: String!
    $sinceHistoryId: String
    $sinceVersions: [BlockIdVersionPairInput!]!
    $includeAddedBlocks: Boolean!
  ) {
    notebookById(id: $notebookId) {
      id
      block_history_id
      ...NotebookInfoFragment
      changedBlocksSinceVersions(
        sinceHistoryId: $sinceHistoryId
        sinceVersions: $sinceVersions
        includeAddedBlocks: $includeAddedBlocks
      ) {
        blockId
        blockVersion
        block {
          ...FullBlockFragment
        }
      }
    }
  }

  ${l.mj}
  ${l.Nt}
`,p=(0,c.Ay)`
  query KernelCatchup($notebookId: String!) {
    notebookById(id: $notebookId) {
      id
      ...NotebookKernelStateFragment
    }
  }

  ${l.$2}
`;function u(g){const y=w=>g.apolloClient.readFragment({id:`Notebook:${w}`,fragment:(0,c.Ay)`
        fragment KnownNotebookBlockHistory on Notebook {
          id
          block_history_id
        }
      `})?.block_history_id??null,T=async(w,k,F)=>{if(F.knownBlockVersions.length===0&&!F.includeAddedBlocks)return;const X=y(w),z=await g.apolloClient.query({query:i,variables:{notebookId:w,sinceHistoryId:X,sinceVersions:F.knownBlockVersions,includeAddedBlocks:F.includeAddedBlocks}});if(F.abortSignal?.throwIfAborted(),!z.data)throw new Error("No data returned from NotebookCatchup query");const B=z.data.notebookById;if(!B){console.debug("Block Fetch Queue: Notebook not available (404) for catching up with notebook updates",{notebookId:w});return}const{changedBlocksSinceVersions:U,...G}=B;d.KJ.withoutSaving(k,()=>{(0,r.w6)(k,G),U.forEach(E=>{(0,r.qs)(k,E.blockId,E.block)})});const f=new Set(U.map(E=>E.block?null:E.blockId).filter(Boolean)),I=new Set(U.map(E=>E.block?E.blockId:null).filter(Boolean));(0,a.H)(g.apolloClient,w,{deletedBlockIds:f,upsertedBlockIds:I})},C=async(w,k,F)=>{const X=await g.apolloClient.query({query:p,variables:{notebookId:w}});if(F.abortSignal?.throwIfAborted(),!X.data)throw new Error("No data returned from KernelCatchup query");const z=X.data.notebookById;if(!z){console.debug("Block Fetch Queue: Notebook not available (404) for catchup with kernel state",{notebookId:w});return}const B=z.editor_kernel_state;B&&d.KJ.withoutSaving(k,()=>{(0,r.pH)(k,B)})},m=async(w,k,F)=>{await Promise.allSettled([T(w,k,F),C(w,k,{abortSignal:F.abortSignal})]).then(X=>{const z=X.filter(B=>B.status==="rejected").map(B=>B.reason);if(z[0])throw z[0]})},O=(w,k)=>{const F=k.blockUpdates,X=new Set(F.map(B=>B.blockId)),z=w.blockUpdates.filter(B=>!X.has(B.blockId));return{type:"block-update",notebookId:k.notebookId,slate:k.slate,blockUpdates:[...z,...F]}},W=async(w,k)=>{const F=[...(0,s.uD)(w.slate)].map(([X])=>({id:X.id,version:X.version}));return await m(w.notebookId,w.slate,{knownBlockVersions:F,includeAddedBlocks:!0,abortSignal:k}),null},K=async w=>{const k=w.blockUpdates.flatMap(({blockId:F,incomingBlockData:X})=>{const z=(0,s.Sk)(w.slate,F)?.block.version;return z&&X&&z>=X.version?[]:[{blockId:F,knownBlockVersion:z,incomingBlockData:X}]});return d.KJ.withoutSaving(w.slate,()=>{k.forEach(({blockId:F,incomingBlockData:X})=>{(0,r.qs)(w.slate,F,X)})}),null},H=(w,k)=>{if(w.type==="catchup")return W(w,k.abortSignal);if(w.type==="block-update")return K(w);throw new Error(`Unknown task type: ${w.type}`)},N=(0,n.M)("Block Fetch Queue",H,{key:w=>`nb:${w.notebookId}/${w.type}`,merge:(w,k)=>{if(o()(w.notebookId===k.notebookId,"Cannot merge tasks of different notebooks."),w.type==="catchup"&&k.type==="catchup")return k;if(w.type==="block-update"&&k.type==="block-update")return O(w,k);throw new Error(`Cannot merge tasks of types ${w.type} and ${k.type}.`)},taskDelay:10,retryBeforeOtherTasks:!0,retryDelay:5e3});return{pause:()=>N.pause(),resume:()=>N.resume(),receiveBlockUpdate:async(w,k)=>{const F=g.slateRef.current;return o()(F,"Cannot receive notebook content without an active Slate editor instance."),N.pushTask({type:"block-update",notebookId:w,slate:F,blockUpdates:[k]})},catchUpWithBlockUpdates:async w=>{const k=g.slateRef.current;return o()(k,"Cannot queue fetches of notebook content without an active Slate editor instance."),N.pushTask({type:"catchup",notebookId:w,slate:k})},cancelRunningCatchup:w=>{N.cancelRunningTasks(`nb:${w}/catchup`).length>0&&console.debug("Block Fetch Queue: Canceled running catchup task",{notebookId:w})}}}},30052:($,_,t)=>{"use strict";t.d(_,{A:()=>d,CO:()=>s,LL:()=>n,bP:()=>r});var e=t(15567),o=t(7565),c=t.n(o),l=t(94270);const r=(0,l.Ay)`
  fragment FileInfoFragment on FileSystemFileItem {
    path
    size_bytes
    updated_at
  }
`,d=(0,l.Ay)`
  fragment DirectoryInfoFragment on FileSystemDirectoryItem {
    path
  }
`,s=(0,l.Ay)`
  fragment DirectoryContentsFragment on FileSystemDirectory {
    path
    items {
      ... on FileSystemFileItem {
        ...FileInfoFragment
      }
      ... on FileSystemDirectoryItem {
        ...DirectoryInfoFragment
      }
    }
  }

  ${r}
  ${d}
`,a=(0,l.Ay)`
  query GetDirectoryContents($projectId: String!, $directoryPath: String!) {
    projectById(id: $projectId) {
      ... on Project {
        fileSystemDirectoryContents(directoryPath: $directoryPath) {
          ...DirectoryContentsFragment
        }
      }
    }
  }

  ${s}
`;function n(i){const{apolloClient:p}=i;return{fetchDirectoryContents:async(u,g)=>{try{return(await c().map(g,async C=>{const{data:m}=await p.query({query:a,variables:{projectId:u,directoryPath:C}}),W=(m.projectById?.__typename==="Project"?m.projectById:null)?.fileSystemDirectoryContents?.items;if(!W)throw new Error("The directory is not available.");return W.map(K=>K.__typename==="FileSystemFileItem"?{type:"file",path:`${K.path}`,relativePath:`${K.path}`,mtime:new Date(K.updated_at),sizeInBytes:parseInt(K.size_bytes,10)}:{type:"directory",path:K.path,relativePath:K.path,mtime:new Date,sizeInBytes:0,children:[]})},{concurrency:5})).flat()}catch(y){throw y instanceof e.K4&&y.networkError?new Error("Failed to fetch the contents of the directory. Please check your internet connection."):y}}}}},14046:($,_,t)=>{"use strict";t.d(_,{s:()=>s,M:()=>a});var e=t(15567),o=t(60022),c=t(51881),l=t(58057),r=t(15479);function d(n,i){let p=!1;const u=()=>{let k=()=>{};return{promise:new Promise(X=>{k=X}),reset:k}};let g=!1,y=i.initialDelay,T=i.multiplier??2,C=i.maxDelay??null,m=u();const O=()=>{g=!1},W=()=>{const k=m;m=u(),O(),y=i.initialDelay,T=i.multiplier??2,C=i.maxDelay??null,k.reset()},K=()=>{W(),g=!0},H=()=>{y=Math.min(y*T,C??1/0)};return{enable:K,reset:W,check:async()=>{if(!(!g||p))try{if(await Promise.race([new Promise(k=>setTimeout(k,y)),m.promise]),!g||p)return;await n(),O()}catch(k){throw H(),k}},dispose:()=>{p||(p=!0)}}}class s extends Error{}function a(n,i,p){const{connectionCheckRetryDelay:u,...g}=p,y={items:[],getSnapshot:()=>y.items.slice().reverse(),push:(...H)=>{y.items.push(`${new Date().toISOString()}: ${JSON.stringify(H)}`),y.items.length>200&&y.items.shift()}},T=d(async()=>{y.push("connectionChecker: pinging"),await Promise.race([fetch("/health/ping"),(0,o.yy)(1e4).then(()=>new Error("Connection check timed out."))])},{initialDelay:2e3,multiplier:1.5,maxDelay:6e4}),C=()=>{T.reset()};window.addEventListener("online",C);const m=async(H,N)=>{y.push("handleTask: start task",{key:N._task.key,attempt:N.attempt});try{return await i(H,N)}catch(w){throw y.push("handleTask: task error",w instanceof Error?w.name:w,w instanceof Error?w.message:null),w instanceof Error?w.name==="AbortError"?w:w instanceof e.K4&&w.networkError?(y.push("handleTask: apollo network error, enabling ping check"),T.enable(),console.debug(`${n}: network problem, retrying after 2s and then exponentially.`,`${w.name}: ${w.message}`),new s(w.message,{cause:w})):w instanceof s?(console.debug(`${n}: retryable graphql error, retrying after 2s and then exponentially.`,`${w.name}: ${w.message}`),w):((0,c.H)(w,"error"),(0,r.Yz)(`${n}: problem with submission, retrying every 5s.`,w instanceof e.K4?`${w.name}: ${w.message}`:w),w):(console.error(`${n}: unknown error`,w),w)}finally{y.push("handleTask: end task",{key:N._task.key,attempt:N.attempt})}},O=new Set,W=async()=>{try{y.push("connectionChecker: check?"),await T.check(),y.push("connectionChecker: ok")}catch(H){throw y.push("connectionChecker: error",H instanceof Error?H.message:H),new Error("Connection to the server is not available.")}},K=new l.Y(m,{...g,precheck:W,retryPrecheckOnFailure:!0,precheckRetryDelay:0,retryOnFailure:!0,onDrain:()=>{p.onDrain?.()},onChange:H=>{O.forEach(N=>N(H))}});return{log:y,getCurrentTask:()=>K._currentTask,pushTask:H=>(T.reset(),K.pushTask(H)),getTasks:()=>K.getTasks(),hasTaskOfKey:H=>K.getTasks().some(w=>w.key===H),cancelTasks:H=>(y.push("networkQueue.cancelTasks()",H),K.cancelTasks(H)),cancelRunningTasks:H=>(y.push("networkQueue.cancelRunningTasks()",H),K.cancelRunningTasks(H)),pause:()=>{y.push("networkQueue.pause()"),K.pause()},resume:()=>{y.push("networkQueue.resume()"),K.resume()},onQueueChange(H){return O.add(H),()=>{O.delete(H)}}}}},76878:($,_,t)=>{"use strict";t.d(_,{e:()=>B});var e=t(94270),o=t(15567),c=t(51881),l=t(19550),r=t(38038),d=t(32928),s=t(53929),a=t.n(s),n=t(51317),i=t.n(n),p=t(87907),u=t.n(p),g=t(42111),y=t.n(g),T=t(99636),C=t(15799),m=t(36581),O=t(34879),W=t(40362),K=t(48127);class H extends Error{constructor(x){super(x),this.name="RawMutationError"}}async function N(L){const x=(0,W.XY)(L.mutation),ne=x.definitions.find(q=>q.kind==="OperationDefinition")?.name,M=ne?.kind==="Name"?ne.value:null;if(!M)throw new H("Could not find mutation name in mutation source");const A=await fetch(`/graphql?operation_name=${M}&agent=raw-fetch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:(0,K.y)(x),variables:L.variables})});if(!A.ok)throw new H(`GraphQL response status code: ${A.status}`);const b=await A.json();if(b.errors)throw new H(`GraphQL errors: ${JSON.stringify(b.errors)}`);if(!b.data)throw new H("No data returned from mutation");return L.apolloClient.writeQuery({query:L.mutation,variables:L.variables,data:b.data}),b.data}var w=t(14046);const k=(0,e.J1)`
  mutation SubmitBlockTransactions($transactions: [BlockTransaction!]!) {
    submitBlockTransactions(transactions: $transactions) {
      results {
        id
        status
        notebookId
        blockUpdates {
          blockId
          blockVersion
          block {
            # NOTE: We are using the full fragment and not just amend as we need to update the Apollo client cache
            #   to have fresh full block data for switching between cached notebooks. The extra data fetched this way
            #   as opposed to only fetch the amend fragment is not fed into Slate directly, only on notebook load/switch.
            # ...AmendBlockFragment
            ...FullBlockFragment
          }
        }
      }
    }
  }

  # \${AMEND_BLOCK_FRAGMENT}
  ${T.Nt}
`,F=(0,e.J1)`
  mutation UpdateNotebookMetadata($notebookId: String!, $metadataUpdates: NotebookMetadataUpdatesInput!) {
    updateNotebookMetadata(notebookId: $notebookId, metadataUpdates: $metadataUpdates) {
      id
      ...EditableNotebookMetadataFragment
    }
  }

  ${T.E0}
`,X=(0,e.J1)`
  mutation SubmitNotebookBlockExecution(
    $notebookId: String!
    $blockIds: [String!]!
    $blockHashes: [BlockHashInput!]
    $executionMode: ExecutionMode!
    $skipCache: Boolean
    $resetKernelState: Boolean
    $variableContext: [String!]
  ) {
    submitNotebookBlockExecution(
      notebookId: $notebookId
      blockIds: $blockIds
      blockHashes: $blockHashes
      executionMode: $executionMode
      skipCache: $skipCache
      resetKernelState: $resetKernelState
      variableContext: $variableContext
    ) {
      ... on NotebookExecutionSuccess {
        ok
      }
      ... on NotebookExecutionError {
        error
      }
      ... on NotebookExecutionFederatedAuthError {
        integrationId
      }
    }
  }
`,z=(0,e.J1)`
  mutation SetFileContent($projectId: String!, $filePath: String!, $text: String!, $append: Boolean!) {
    setFileContent(projectId: $projectId, path: $filePath, text: $text, append: $append) {
      ... on SetFileContentError {
        code
      }
    }
  }
`;function B(L){const{apolloClient:x,blockFetchQueue:ne,slateRef:M}=L;let A=null;const b=()=>{A&&(clearTimeout(A),A=null)},q=V=>{b();const Y={...V},te=P.log.getSnapshot();A=setTimeout(()=>{const Ae=P.getTasks(),ke=P.getCurrentTask(),Ne=P.log.getSnapshot().filter(ue=>!te.includes(ue));console.debug("Last started task",Y),console.debug("Current task",ke),console.debug("Queued tasks",Ae.map(ue=>({type:ue.task.type,key:ue.key,...y()(ue,["running","attempts"])}))),i()(te,15).forEach(ue=>{console.debug("Queue events before current task:",ue)}),i()(Ne,15).forEach(ue=>{console.debug("Most recent queue events:",ue)}),(0,c.H)(new Error("Queue seems stuck"),"warning"),A=setTimeout(()=>{const ue=P.getTasks(),Pe=P.getCurrentTask(),He=P.log.getSnapshot().filter(Fe=>!te.includes(Fe)&&!Ne.includes(Fe));console.debug("Last started task",Y),console.debug("Current task",Pe),console.debug("Queued tasks",ue.map(Fe=>({type:Fe.task.type,key:Fe.key,...y()(Fe,["running","attempts"])}))),i()(te,15).forEach(Fe=>{console.debug("Queue events before current task:",Fe)}),i()(Ne,15).forEach(Fe=>{console.debug("Queue events after being stuck for 8s:",Fe)}),i()(He,15).forEach(Fe=>{console.debug("Most recent queue events:",Fe)}),(0,c.H)(new Error("Queue seems really stuck"),"warning")},82e3)},8e3)},fe=(V,Y)=>({type:Y.type,notebookId:Y.notebookId,slate:Y.slate,transactions:U([...V.transactions,...Y.transactions])}),oe=(V,Y)=>({type:Y.type,notebookId:Y.notebookId,metadataUpdates:{partialAppMetadata:{...V.metadataUpdates.partialAppMetadata,...Y.metadataUpdates.partialAppMetadata},partialEditorMetadata:{...V.metadataUpdates.partialEditorMetadata,...Y.metadataUpdates.partialEditorMetadata}}}),ie=(V,Y)=>(a().equal(V.skipCache,Y.skipCache,"Cannot merge tasks with different skipCache config."),a().equal(V.resetKernelState,Y.resetKernelState,"Cannot merge tasks with different resetKernelState config."),a().equal(V.executionMode,Y.executionMode,"Cannot merge tasks with different executionMode config."),Y.blockHashes?.forEach(({blockId:te,blockSourceHash:Ae})=>{const ke=V.blockHashes?.find(Ne=>Ne.blockId===te);ke&&a().equal(ke.blockSourceHash,Ae,"Cannot merge block execution tasks with different hashes for the same block.")}),{type:Y.type,notebookId:Y.notebookId,blockIds:[...V.blockIds,...Y.blockIds],blockHashes:[...Y.blockHashes??[],...V.blockHashes??[]],executionMode:Y.executionMode,skipCache:Y.skipCache,resetKernelState:Y.resetKernelState,variableContext:Y.variableContext}),h=(V,Y)=>(a().equal(V.filePath,Y.filePath,"Cannot merge tasks with different file paths."),Y),ce=async V=>{P.log.push("processBlockTransactionTask: start - transaction count:",V.transactions.length);try{const te=(await N({mutation:k,variables:{transactions:V.transactions.map(ke=>({...ke,operations:ke.operations.map(Ne=>{switch(Ne.type){case"block-insert":return{insertBlock:u()(Ne,"type")};case"block-update":return{updateBlock:u()(Ne,"type")};case"block-move":return{moveBlock:u()(Ne,"type")};case"block-delete":return{deleteBlock:u()(Ne,"type")};default:throw new Error(`Unknown operation type: ${Ne.type}`)}})}))},onHttpResponse:ke=>{P.log.push("processBlockTransactionTask: received response",ke.status)},apolloClient:x})).submitBlockTransactions.results;P.log.push("processBlockTransactionTask: received response with result count:",te?.length),m.KJ.withoutSaving(V.slate,()=>{te.flatMap(Ne=>Ne.blockUpdates).forEach(Ne=>{(0,C.FU)(V.slate,Ne.blockId,Ne.block)}),te.forEach(Ne=>{V.transactions.find(Pe=>Pe.id===Ne.id)?.operations.forEach(Pe=>{(0,C.LX)(V.slate,Pe.blockId,{hasFailedTransaction:Ne.status==="failure"})})})});const Ae=te.filter(ke=>ke.status==="success");D(x,Ae)}catch(Y){throw P.log.push("processBlockTransactionTask: error:",Y instanceof Error?Y.message:Y),(Y instanceof o.K4||Y instanceof H)&&V.transactions.forEach(te=>{te.operations.forEach(Ae=>{(0,C.LX)(V.slate,Ae.blockId,{hasFailedTransaction:!0})})}),Y}return null},ve=async V=>{P.log.push("processNotebookMetadataUpdateTask: start");try{await N({mutation:F,variables:{notebookId:V.notebookId,metadataUpdates:V.metadataUpdates},onHttpResponse:Y=>{P.log.push("processNotebookMetadataUpdateTask: received response",Y.status)},apolloClient:x})}catch(Y){throw P.log.push("processNotebookMetadataUpdateTask: error:",Y instanceof Error?Y.message:Y),Y}return null},Me=async V=>{P.log.push("processNotebookExecutionTask: start with block count",V.blockIds.length);try{const te=(await N({mutation:X,variables:{notebookId:V.notebookId,blockIds:V.blockIds,blockHashes:V.blockHashes?.map(({blockId:Ae,blockSourceHash:ke})=>({block_id:Ae,block_source_hash:ke}))??null,executionMode:V.executionMode,skipCache:V.skipCache,resetKernelState:V.resetKernelState,variableContext:V.variableContext??null},onHttpResponse:Ae=>{P.log.push("processNotebookExecutionTask: received response",Ae.status)},apolloClient:x})).submitNotebookBlockExecution??null;if(te.__typename==="NotebookExecutionFederatedAuthError")return{error:"FederatedAuthError",integrationId:te.integrationId};if(te.__typename==="NotebookExecutionError"){if(te.error==="HardwareTransitioning")throw new w.s("Hardware is in transitioning state");if(te.error==="ExecutorNotReady")throw new w.s("Payloads already submitted");return{error:te.error}}}catch(Y){throw P.log.push("processNotebookExecutionTask: error",Y instanceof Error?Y.message:Y),Y}return null},Le=async V=>{P.log.push("processFileUpdateTask: start",V.filePath);try{const Y=await N({mutation:z,variables:{projectId:V.projectId,filePath:V.filePath,text:V.text,append:V.append},onHttpResponse:te=>{P.log.push("processFileUpdateTask: received response",te.status)},apolloClient:x});if(Y.setFileContent.__typename==="SetFileContentError")throw new Error(Y.setFileContent.code)}catch(Y){throw P.log.push("processFileUpdateTask: error",Y instanceof Error?Y.message:Y),Y}return null},We=(V,Y)=>{switch(V.type){case"block-transactions":return a()(V.type===Y.type,"Cannot merge tasks of different types."),a()(V.notebookId===Y.notebookId,"Cannot merge tasks of different notebooks."),fe(V,Y);case"notebook-metadata-update":return a()(V.type===Y.type,"Cannot merge tasks of different types."),a()(V.notebookId===Y.notebookId,"Cannot merge tasks of different notebooks."),oe(V,Y);case"notebook-block-execution":return a()(V.type===Y.type,"Cannot merge tasks of different types."),a()(V.notebookId===Y.notebookId,"Cannot merge tasks of different notebooks."),ie(V,Y);case"file-update":return a()(V.type===Y.type,"Cannot merge tasks of different types."),a()(V.projectId===Y.projectId,"Cannot merge tasks of different projects."),h(V,Y);default:(0,l.x)(V)}},Ge=async(V,Y)=>{P.log.push("processTask: start task",Y._task.key,V.type),q(V);try{switch(V.type){case"block-transactions":return await ce(V);case"notebook-metadata-update":return await ve(V);case"notebook-block-execution":try{return await Me(V)}catch(te){throw P.log.push("processTask(notebook-block-execution): error",te instanceof Error?te.message:te,`attempt ${Y.attempt}`),!(te instanceof w.s)&&Y.attempt>5&&(P.log.push("processTask(notebook-block-execution): cancel notebook-block-execution tasks"),P.cancelRunningTasks(`nb:${V.notebookId}/notebook-block-execution`)),Y.abortSignal?.throwIfAborted(),te}case"file-update":return await Le(V);default:(0,l.x)(V)}}finally{P.log.push("processTask: end task",Y._task.key),q({finishedTask:!0})}};let $e=!1;const Qe=V=>{V.preventDefault(),V.returnValue=!0},le=()=>{$e||(window.addEventListener("beforeunload",Qe),$e=!0)},Ie=()=>{$e&&(window.removeEventListener("beforeunload",Qe),$e=!1)},P=(0,w.M)("Notebook Write Queue",Ge,{key:V=>V.type==="file-update"?`p:${V.projectId}/${V.type}`:`nb:${V.notebookId}/${V.type}`,merge:(V,Y)=>{try{return P.log.push("merge:",V.type,Y.type),We(V,Y)}catch(te){throw P.log.push("merge failed:",te instanceof Error?te.message:te),te}},mergeConsecutiveOnly:!0,taskDelay:250,retryBeforeOtherTasks:!0,retryDelay:5e3,onDrain:()=>{P.log.push("drain"),b(),Ie(),ne.resume()}});return{async queueBlockTransaction(V){const Y=M.current;a()(Y,"Cannot queue fetches of notebook content without an active Slate editor instance."),ne.pause(),le(),P.log.push("pushTask(block-transactions)",{notebookId:V.notebookId,blockIds:V.operations.map(te=>[te.type,te.blockId])}),await P.pushTask({type:"block-transactions",notebookId:V.notebookId,slate:Y,transactions:[V]})},async queueNotebookMetadataUpdate(V,Y){const{partialAppMetadata:te,isModule:Ae,...ke}=Y,{deepnote_app_layout:Ne,deepnote_app_width:ue,...Pe}=Y.partialAppMetadata??{},He={...ke,...Y.partialAppMetadata?{partialAppMetadata:{...Pe,deepnote_app_layout:Ne&&(0,r.W7)(Ne,"-","_"),deepnote_app_width:ue&&(0,r.W7)(ue,"-","_")}}:{},...Ae!=null?{is_module:Ae}:{}};P.log.push("pushTask(notebook-metadata-update)",{notebookId:V}),await P.pushTask({type:"notebook-metadata-update",notebookId:V,metadataUpdates:He})},async queueNotebookBlockExecution(V,Y,te,Ae){return P.log.push("pushTask(notebook-block-execution)",{notebookId:V,blockIds:Y}),P.pushTask({type:"notebook-block-execution",notebookId:V,blockIds:Y,blockHashes:te,executionMode:Ae.executionMode,skipCache:Ae.skipCache,resetKernelState:Ae.resetKernelState,variableContext:Ae.variableContext})},async queueFileUpdate(V,Y,te,Ae={}){le(),P.log.push("pushTask(file-update)",{projectId:V,filePath:Y}),await P.pushTask({type:"file-update",projectId:V,filePath:Y,text:te,append:!!Ae.append})},hasBlockTransaction(){return P.getTasks().some(({task:Y})=>Y.type==="block-transactions")},hasFileUpdates(){return P.getTasks().some(({task:Y})=>Y.type==="file-update")},getQueueTaskTransactionLength(){return P.getTasks().reduce((Y,te)=>te.task.type==="block-transactions"?Y+te.task.transactions.length:Y+1,0)},getQueuedBlockTransactions(){const V=[];return P.getTasks().forEach(({task:te})=>{te.type==="block-transactions"&&V.push(...te.transactions)}),V},getRequestedBlockExecutions(V){const Y=[];return P.getTasks().forEach(({task:Ae})=>{Ae.type==="notebook-block-execution"&&Ae.notebookId===V&&Y.push(Ae)}),Y},cancelNotebookExecutionTasks(V){P.cancelTasks(`nb:${V}/notebook-block-execution`)},onQueueChange(V){return P.onQueueChange(V)}}}function U(L){const x=[];return L.forEach(ne=>{const M=x.pop(),A=M?G(M,ne):[ne];x.push(...A)}),x}function G(L,x){if(x.operations.length!==1||L.operations.length!==1)return[L,x];const ne=L.operations[0],M=x.operations[0];if(ne.blockId!==M.blockId)return[L,x];switch(ne.type){case"block-insert":switch(M.type){case"block-insert":return[{...L,operations:[f(ne,M)]}];case"block-update":return[{...L,operations:[I(ne,M)]}];case"block-move":return[L,x];case"block-delete":return[];default:return(0,l.x)(M)}case"block-update":switch(M.type){case"block-insert":return[x];case"block-update":return[{...L,operations:[E(ne,M)]}];case"block-move":return[L,x];case"block-delete":return[x];default:return(0,l.x)(M)}case"block-move":return[L,x];case"block-delete":switch(M.type){case"block-insert":return[L,x];case"block-update":return[L,x];case"block-move":return[L,x];case"block-delete":return[x];default:return(0,l.x)(M)}default:return(0,l.x)(ne)}}function f(L,x){return a()(L.type==="block-insert"&&x.type==="block-insert"),{...L,blockData:{...L.blockData,...x.blockData}}}function I(L,x){return a()(L.type==="block-insert"&&x.type==="block-update"),{...L,blockData:{...L.blockData,...(0,d.oF)(x.blockDataUpdate)}}}function E(L,x){return a()(L.type==="block-update"&&x.type==="block-update"),{...L,blockDataUpdate:{...L.blockDataUpdate,...x.blockDataUpdate}}}function D(L,x){const{deletedBlockIdsByNotebook:ne,upsertedBlockIdsByNotebook:M}=R(x);new Set([...ne.keys(),...M.keys()]).forEach(b=>{(0,O.H)(L,b,{deletedBlockIds:ne.get(b)??null,upsertedBlockIds:M.get(b)??null})})}function R(L){const x=new Map,ne=new Map;return L.forEach(M=>{const A=x.get(M.notebookId)??new Set,b=ne.get(M.notebookId)??new Set;M.blockUpdates.forEach(q=>{q.block?(b.add(q.blockId),A.delete(q.blockId)):(A.add(q.blockId),b.delete(q.blockId))}),x.set(M.notebookId,A),ne.set(M.notebookId,b)}),{deletedBlockIdsByNotebook:x,upsertedBlockIdsByNotebook:ne}}},10822:($,_,t)=>{"use strict";t.d(_,{P:()=>E,_:()=>I});var e=t(45470),o=t(19550),c=t(89494),l=t(32928),r=t(16530),d=t(78881),s=t(32912),a=t(53929),n=t.n(a),i=t(94270),p=t(18906),u=t(43283),g=t(40177),y=t(75909),T=t(81723);const C=(0,i.Ay)`
  mutation SetBlockDataTableState(
    $notebookId: String!
    $blockId: String!
    $state: SharedTableOutputStateInput!
    $shouldExecuteAfterEdit: Boolean!
  ) {
    setNotebookBlockDataTableState(
      notebookId: $notebookId
      blockId: $blockId
      state: $state
      shouldExecuteAfterEdit: $shouldExecuteAfterEdit
    ) {
      ... on BlockDataTableStateSetSuccess {
        ok
      }
      ... on BlockDataTableStateSetError {
        error
      }
    }
  }
`,m=(0,i.Ay)`
  mutation SetNotebookFunctionBlockImportDataTableState(
    $notebookId: String!
    $blockId: String!
    $exportName: String!
    $state: SharedTableOutputStateInput!
    $shouldExecuteAfterEdit: Boolean!
  ) {
    setNotebookFunctionBlockImportDataTableState(
      notebookId: $notebookId
      blockId: $blockId
      exportName: $exportName
      state: $state
      shouldExecuteAfterEdit: $shouldExecuteAfterEdit
    ) {
      ... on BlockDataTableStateSetSuccess {
        ok
      }
      ... on BlockDataTableStateSetError {
        error
      }
    }
  }
`,O=(0,i.Ay)`
  mutation StartProjectHardware($projectId: String!) {
    startProjectExecutor(projectId: $projectId) {
      ... on ProjectExecutorStartSuccess {
        ok
      }
      ... on ProjectExecutorStartError {
        error
      }
    }
  }
`,W=(0,i.Ay)`
  mutation RestartProjectHardware($projectId: String!) {
    restartProjectExecutor(projectId: $projectId) {
      ... on ProjectExecutorRestartSuccess {
        ok
      }
      ... on ProjectExecutorRestartError {
        error
      }
    }
  }
`,K=(0,i.Ay)`
  mutation StopProjectHardware($projectId: String!) {
    stopProjectExecutor(projectId: $projectId) {
      ... on ProjectExecutorStopSuccess {
        ok
      }
      ... on ProjectExecutorStopError {
        error
      }
    }
  }
`,H=(0,i.Ay)`
  mutation SetProjectHardware($projectId: String!, $hardwareOption: String!) {
    setProjectHardware(projectId: $projectId, hardwareOption: $hardwareOption) {
      ... on SetProjectHardwareSuccess {
        ok
      }
      ... on SetProjectHardwareError {
        error
      }
    }
  }
`,N=(0,i.Ay)`
  mutation DismissHardwareNotification($projectId: String!, $delayShutdown: Boolean!) {
    dismissHardwareNotification(projectId: $projectId, delayShutdown: $delayShutdown) {
      ... on DismissHardwareNotificationSuccess {
        ok
      }
      ... on DismissHardwareNotificationError {
        error
      }
    }
  }
`,w=(0,i.Ay)`
  mutation ExportBlockDataframe($notebookId: String!, $blockId: String!) {
    exportNotebookBlockDataframe(notebookId: $notebookId, blockId: $blockId) {
      ... on BlockDataframeExportSuccess {
        ok
        file_path
      }
      ... on BlockDataframeExportError {
        error
      }
    }
  }
`,k=(0,i.Ay)`
  mutation StartNotebookKernel($notebookId: String!, $restoreSession: Boolean! = false) {
    startNotebookKernel(notebookId: $notebookId, restoreSession: $restoreSession) {
      ... on NotebookKernelStartSuccess {
        ok
      }
      ... on NotebookKernelStartError {
        error
      }
    }
  }
`,F=(0,i.Ay)`
  mutation InterruptNotebookKernel($notebookId: String!) {
    interruptNotebookKernel(notebookId: $notebookId) {
      ... on NotebookKernelInterruptSuccess {
        ok
      }
      ... on NotebookKernelInterruptError {
        error
      }
    }
  }
`,X=(0,i.Ay)`
  mutation RestartNotebookKernel($notebookId: String!) {
    restartNotebookKernel(notebookId: $notebookId) {
      ... on NotebookKernelRestartSuccess {
        ok
      }
      ... on NotebookKernelRestartError {
        error
      }
    }
  }
`,z=(0,i.Ay)`
  mutation SubmitNotebookExecutionUserInput($notebookId: String!, $input: String!) {
    submitNotebookExecutionUserInput(notebookId: $notebookId, input: $input) {
      ... on NotebookExecutionUserInputSuccess {
        ok
      }
      ... on NotebookExecutionUserInputError {
        error
      }
    }
  }
`,B=(0,i.Ay)`
  query GetAutocompletions(
    $notebookId: String!
    $blocks: [CodeIntelligenceBlockInput!]!
    $blockId: String!
    $blockContentOffset: Int!
  ) {
    notebookById(id: $notebookId) {
      id
      editor_kernel_state {
        id
        autocompletions(blocks: $blocks, blockId: $blockId, blockContentOffset: $blockContentOffset) {
          completions {
            label
            insert_text
            sort_text
            detail
            kind
            documentation
          }
        }
      }
    }
  }
`,U=(0,i.Ay)`
  query GetHoverInfo(
    $notebookId: String!
    $blocks: [CodeIntelligenceBlockInput!]!
    $blockId: String!
    $blockContentOffset: Int!
  ) {
    notebookById(id: $notebookId) {
      id
      editor_kernel_state {
        id
        hoverInfo(blocks: $blocks, blockId: $blockId, blockContentOffset: $blockContentOffset) {
          contents {
            ... on HoverInfoMarkupContent {
              __typename
              value
              kind
            }
            ... on HoverInfoStringContent {
              __typename
              value
              language
            }
            ... on HoverInfoStringArrayContent {
              contents {
                value
                language
              }
            }
          }
          range {
            start_line
            start_character
            end_line
            end_character
          }
        }
      }
    }
  }
`,G=(0,i.Ay)`
  query GetSignatureHelp(
    $notebookId: String!
    $blocks: [CodeIntelligenceBlockInput!]!
    $blockId: String!
    $blockContentOffset: Int!
  ) {
    notebookById(id: $notebookId) {
      id
      editor_kernel_state {
        id
        signatureHelp(blocks: $blocks, blockId: $blockId, blockContentOffset: $blockContentOffset) {
          signatures {
            label
            documentation
            parameters {
              label
              signature_range_start
              signature_range_end
              documentation
            }
          }
          active_signature_index
          active_parameter_index
        }
      }
    }
  }
`,f=(0,i.Ay)`
  query GetDistinctDataframeColumnValues(
    $notebookId: String!
    $dataframeVariableName: String!
    $dataframeColumnName: String!
  ) {
    notebookById(id: $notebookId) {
      id
      editor_kernel_state {
        id
        distinctDataframeVariableColumnValues(variableName: $dataframeVariableName, columnName: $dataframeColumnName) {
          values
        }
      }
    }
  }
`;class I extends Error{isUsingDisplay;constructor(x,ne){super(x),this.isUsingDisplay=ne.isUsingDisplay}}function E(L){const{apolloClient:x,notebookWriteQueue:ne,store:M}=L;return{async startHardware(){const A=M.getState().project.id,{data:b}=await x.mutate({mutation:O,variables:{projectId:A}});return b?.startProjectExecutor?.__typename==="ProjectExecutorStartSuccess"},async stopHardware(){const A=M.getState().project.id;try{const{data:b}=await x.mutate({mutation:K,variables:{projectId:A}});if(b?.stopProjectExecutor?.__typename!=="ProjectExecutorStopSuccess")throw new Error("Failed to stop hardware")}catch{s.i.warning({message:(0,e.jsxs)(e.Fragment,{children:["Unable to stop the machine. Try again, or contact support. ",(0,e.jsx)(T.t,{source:"toast"})]})})}},async restartHardware(){const A=M.getState().project.id;try{const{data:b}=await x.mutate({mutation:W,variables:{projectId:A}});if(b?.restartProjectExecutor?.__typename!=="ProjectExecutorRestartSuccess")throw new Error("Failed to restart hardware")}catch{s.i.warning({message:(0,e.jsxs)(e.Fragment,{children:["Unable to restart the machine. Try again, or contact support. ",(0,e.jsx)(T.t,{source:"toast"})]})})}},async setHardware(A){const b=M.getState().project.id;M.dispatch(p.P2(A));try{const{data:q}=await x.mutate({mutation:H,variables:{projectId:b,hardwareOption:A}});if(q?.setProjectHardware?.__typename!=="SetProjectHardwareSuccess")throw new Error("Failed to change hardware");M.dispatch(p.LD(A))}catch{s.i.error({message:(0,e.jsxs)(e.Fragment,{children:["There was an error during machine selection. ",(0,e.jsx)(T.t,{source:"toast"})]})})}finally{M.dispatch(p.P2(void 0))}},async dismissHardwareNotification(A){const b=M.getState().project.id,{data:q}=await x.mutate({mutation:N,variables:{projectId:b,delayShutdown:A.delayShutdown}});if(q?.dismissHardwareNotification?.__typename==="DismissHardwareNotificationError")switch(q.dismissHardwareNotification.error){case"DismissHardwareNotificationFailed":s.i.error({message:(0,e.jsxs)(e.Fragment,{children:["There was an error while dismissing notification. ",(0,e.jsx)(T.t,{source:"toast"})]})});break;case"ShutdownDelayFailed":s.i.error({message:(0,e.jsxs)(e.Fragment,{children:["There was an error while delaying machine shutdown. ",(0,e.jsx)(T.t,{source:"toast"})]})});break;default:(0,o.x)(q.dismissHardwareNotification.error)}},async restartProject(){await this.stopHardware()},async executeNotebookBlocks(A,b,q){const fe=b.map(h=>h.id),oe=b.map(h=>({blockId:h.id,blockSourceHash:D(h)?R(h):null}));return await ne.queueNotebookBlockExecution(A,fe,oe,q)},async exportDataframe(A,b){n()((0,g.Uu)(b),`The block ${b.id} is not executable`);const{data:q}=await x.mutate({mutation:w,variables:{notebookId:A,blockId:b.id}});if(q?.exportNotebookBlockDataframe.__typename!=="BlockDataframeExportSuccess"){if(q?.exportNotebookBlockDataframe.__typename==="BlockDataframeExportError"){const fe=q.exportNotebookBlockDataframe.error;if(fe==="DataframeExportTimedOut")return s.i.error({message:"The export operation timed out. Please try again later."}),null;if(fe==="DataframeExportSizeError")return s.i.error({message:"The DataFrame is too large (above 1GB). Please try to export a smaller DataFrame."}),null;throw new I(`Failed to export dataframe: ${JSON.stringify(q?.exportNotebookBlockDataframe)}`,{isUsingDisplay:(0,u.J)((0,y.e)(b))})}return s.i.error({message:"Could not export the DataFrame into a .csv file. Please try again later or contact our support."}),null}return q.exportNotebookBlockDataframe.file_path},async getDataframeColumnDistinctValues(A,b,q){const{data:fe}=await x.query({query:f,variables:{notebookId:A,dataframeVariableName:b,dataframeColumnName:q}});return fe?.notebookById?.editor_kernel_state.distinctDataframeVariableColumnValues?.values??null},async setBlockDataTableState(A,b,q,fe){const{data:oe}=await x.mutate({mutation:C,variables:{notebookId:A,blockId:b,state:(0,c.al)(q),shouldExecuteAfterEdit:fe}});if(oe?.setNotebookBlockDataTableState?.__typename!=="BlockDataTableStateSetSuccess")throw new Error("Failed to change table state")},async setNoteboookFunctionBlockImportDataTableState(A,b,q,fe,oe){const{data:ie}=await x.mutate({mutation:m,variables:{notebookId:A,blockId:b,exportName:q,state:(0,c.al)(fe),shouldExecuteAfterEdit:oe}});if(ie?.setNotebookFunctionBlockImportDataTableState?.__typename!=="BlockDataTableStateSetSuccess")throw new Error("Failed to change table state")},async updateNotebookBlockLayoutMetadata(A,b){},async restoreNotebookSession(A){const{data:b}=await x.mutate({mutation:k,variables:{notebookId:A,restoreSession:!0}});if(b?.startNotebookKernel?.__typename!=="NotebookKernelStartSuccess")throw new Error("Failed to start kernel and restore session")},async submitUserInput(A,b){const{data:q}=await x.mutate({mutation:z,variables:{notebookId:A,input:b}});if(q?.submitNotebookExecutionUserInput?.__typename!=="NotebookExecutionUserInputSuccess")throw new Error("Failed to submit user input")},async startNotebookKernel(A){const{data:b}=await x.mutate({mutation:k,variables:{notebookId:A,restoreSession:!1}});if(b?.startNotebookKernel?.__typename==="NotebookKernelStartError"&&b?.startNotebookKernel?.error!=="HardwareNotRunning")throw new Error("Failed to start kernel")},async interruptNotebookKernel(A){ne.cancelNotebookExecutionTasks(A);const{data:b}=await x.mutate({mutation:F,variables:{notebookId:A}});if(b?.interruptNotebookKernel?.__typename!=="NotebookKernelInterruptSuccess")throw new Error("Failed to interrupt kernel")},async restartNotebookKernel(A){const{data:b}=await x.mutate({mutation:X,variables:{notebookId:A}});if(b?.restartNotebookKernel?.__typename!=="NotebookKernelRestartSuccess")throw new Error("Failed to restart kernel")},async requestAutocomplete(A,b,q){const{data:fe}=await x.query({query:B,variables:{notebookId:A,blocks:b.map(ie=>({block_id:ie.id,block_content:(0,y.e)(ie)})),blockId:q.cellId,blockContentOffset:q.offset}});return fe?.notebookById?.editor_kernel_state.autocompletions.completions.map(ie=>({label:ie.label,insertText:ie.insert_text,...(0,l.oF)({detail:ie.detail??void 0,documentation:ie.documentation??void 0,sortText:ie.sort_text??void 0,kind:ie.kind??void 0,offset:void 0})}))??[]},async requestHover(A,b,q){const{data:fe}=await x.query({query:U,variables:{notebookId:A,blocks:b.map(Le=>({block_id:Le.id,block_content:(0,y.e)(Le)})),blockId:q.cellId,blockContentOffset:q.offset}}),oe=Le=>Le.language?{value:Le.value,language:Le.language}:Le.value,ie=Le=>Le.contents.map(We=>oe(We)),h=fe?.notebookById?.editor_kernel_state.hoverInfo,ce=h?.contents,ve=ce?ce.__typename==="HoverInfoMarkupContent"?ce:ce.__typename==="HoverInfoStringContent"?oe(ce):ce.__typename==="HoverInfoStringArrayContent"?ie(ce):null:null,Me=h?.range?{start:{line:h.range.start_line,character:h.range.start_character},end:{line:h.range.end_line,character:h.range.end_character}}:null;return ve?{contents:ve,range:Me??void 0}:null},async requestSignatureHelp(A,b,q){const{data:fe}=await x.query({query:G,variables:{notebookId:A,blocks:b.map(ce=>({block_id:ce.id,block_content:(0,y.e)(ce)})),blockId:q.cellId,blockContentOffset:q.offset}}),oe=ce=>ce.signature_range_start!=null&&ce.signature_range_end!=null?[ce.signature_range_start,ce.signature_range_end]:ce.label,ie=fe?.notebookById?.editor_kernel_state.signatureHelp;return{signatures:ie?.signatures.map(ce=>({label:ce.label,documentation:ce.documentation??void 0,parameters:ce.parameters.map(ve=>({label:oe(ve),documentation:ve.documentation??void 0}))}))??[],activeSignature:ie?.active_signature_index??void 0,activeParameter:ie?.active_parameter_index??void 0}}}}function D(L){return L.type!=="visualization"}function R(L){const x=(0,r.Tc)({type:L.type,source:(0,y.e)(L),metadata:L.metadata});return(0,d.$)(x)}},3104:($,_,t)=>{"use strict";t.d(_,{g:()=>B});var e=t(60022),o=t(87698),c=t(16530),l=t(51881),r=t(414),d=t(19550),s=t(32912),a=t(16551),n=t(21057),i=t(31311),p=t(52126),u=t(53485),g=t.n(u),y=t(48424),T=t.n(y),C=t(10378),m=t(40177);function O(U,G){switch(G.type){case"move-blocks":{G.groups.map(I=>({...I,rangeStartPathRef:a.KE.pathRef(U,I.rangeStartPath),rangeEndPathRef:a.KE.pathRef(U,I.rangeEndPath),targetPathRef:a.KE.pathRef(U,I.targetPath)})).reverse().forEach(I=>{const E=I.rangeStartPathRef.unref(),D=I.rangeEndPathRef.unref(),R=I.targetPathRef.unref();!E||!(0,m.Zq)(E)||!D||!(0,m.Zq)(D)||!R||!(0,m.Zq)(R)||(0,m.Gk)(U,{at:a.KE.range(U,E,D),to:R,targetBlockGroup:I.targetBlockGroup})});break}case"set-block-group":{const f=G.targetBlockGroup??(0,o.NF)();G.blockPaths.forEach(I=>{(0,m.DT)(U,I,f,{isMergeable:!0})});break}default:(0,d.x)(G)}}function W(U,G){const f=U.filter(h=>G.includes(h.id));if(!f||f.length===0||f.length!==G.length)return null;const I=new Set(f.map(h=>h.block_group)),E=f[0],D=f[f.length-1],R=U.indexOf(E),L=U.indexOf(D),x=T()(U.slice(0,R).reverse(),h=>h.block_group===E.block_group),ne=T()(U.slice(L+1),h=>h.block_group===D.block_group),M=[...x,...f,...ne];if(x.length>0)return I.size===1&&ne.length>0?{type:"move-blocks",groups:[{rangeStartPath:(0,m.CH)(R),rangeEndPath:(0,m.CH)(L),targetPath:(0,m.CH)(L+1),targetBlockGroup:D.block_group}]}:{type:"set-block-group",blockPaths:g()(R,L+1).map(h=>(0,m.CH)(h)),targetBlockGroup:null};if(ne.length>0){if(I.size===1)return{type:"move-blocks",groups:[{rangeStartPath:(0,m.CH)(R),rangeEndPath:(0,m.CH)(L),targetPath:(0,m.CH)(L+1),targetBlockGroup:D.block_group}]};const h=R+f.length-1+ne.length;return{type:"move-blocks",groups:[{rangeStartPath:(0,m.CH)(R),rangeEndPath:(0,m.CH)(L),targetPath:(0,m.CH)(h),targetBlockGroup:null}]}}const A=L+1,b=U[A],q=T()(U.slice(A),h=>h.block_group===b.block_group);if(q.length===0)return null;if(M.length===1&&q.length>1&&q.length<C.p)return{type:"set-block-group",blockPaths:[(0,m.CH)(R)],targetBlockGroup:b.block_group};const fe=L+ne.length+q.length,oe=(0,p.M2)(f,h=>h.block_group);return{type:"move-blocks",groups:oe.map((h,ce)=>{const ve=oe.slice(0,ce).reduce((Me,Le)=>Me+Le.length,R-1);return{rangeStartPath:(0,m.CH)(ve+1),rangeEndPath:(0,m.CH)(ve+h.length),targetPath:(0,m.CH)(fe),targetBlockGroup:h[0].block_group}})}}function K(U,G){const f=U.slice().reverse(),I=G.slice().reverse(),E=W(f,I);return E?H(U.length,E):null}function H(U,G){switch(G.type){case"move-blocks":return{...G,groups:G.groups.map(f=>({...f,rangeStartPath:N(U,f.rangeStartPath),rangeEndPath:N(U,f.rangeEndPath),targetPath:N(U,f.targetPath)}))};case"set-block-group":return{...G,blockPaths:G.blockPaths.map(f=>N(U,f))};default:(0,d.x)(G)}}function N(U,G){const f=[...G];return f[1]=w(U,G[1]),f}function w(U,G){return U-1-G}var k=t(90176),F=t(59446),X=t(32908),z=t(75909);const B=U=>{const{slateRef:G}=U;return{getBlocksByIds(f){const I=G.current;return I?Array.from((0,m.uD)(I,{match:E=>f.includes(E.id)})).map(m.NP):null},getAllBlockIds(){const f=G.current;return f?Array.from((0,m.uD)(f,{at:(0,m.CT)([])})).map(m.NP).map(({block:I})=>I.id):null},getExecutableBlocksInRange(f,I){const E=G.current;if(!E)return null;const D=(0,m.uD)(E),R=[];let L=!f;for(const x of D){const ne=(0,m.NP)(x);if(ne.block.id===I)break;(L||ne.block.id===f)&&(L=!0,(0,m.Uu)(ne.block)&&R.push(ne.block))}return R},getCodeBlocks(f){const I=G.current;if(!I)return null;const E=(0,m.uD)(I,{match:R=>R.type==="code"&&(!f.excludeShellBlocks||!(0,e.Oy)((0,z.e)(R)))}),D=[];for(const[R]of E)D.push(R);return D},getBlocksByTypes(f){const I=G.current;if(!I)return null;const E=(0,m.uD)(I,{match:R=>f.includes(R.type)}),D=[];for(const[R]of E)D.push(R);return D},splitCell(){const f=G.current;if(!f)return null;const I=(0,m.Oc)(f);if(!I)return null;const E=I.block,D=(0,m.SC)(I.path);if(!(0,m.wR)(E))return null;const R={id:(0,o.NF)(),type:"code"},L=f.selection?.focus.offset,x=(0,z.e)(E),ne=(0,i.BR)(x.slice(0,L),"trailing"),M=(0,i.BR)(x.slice(L),"leading"),A=D+1,b=(0,c.I1)(R.type,{id:R.id,source:M,existingCellCounts:{}});return this.transact(()=>{a.gB.insertNodes(f,(0,F.w)(R.id,b,{sortingKey:null,blockGroup:null}),{at:(0,m.CH)(A)}),a.gB.setNodes(f,{text:ne},{at:(0,z.R)((0,m.CH)(D)),voids:!0})}),R},async formatCell(f,I,E){const D=G.current;if(!D)return;const R=f?(0,m.Sk)(D,f):(0,m.Oc)(D);if(!R||!(0,m.wR)(R.block))return(0,l.H)(new Error("Block source not found")),s.i.error({message:"Formatting failed"});(0,r.u4)("Block formatted",{workspaceId:I,blockType:R.block.type});const L=(0,z.e)(R.block),x=R.block.type==="code"?await E(L):R.block.type==="sql"?n.Ay.format(L,{indent:"    "}):L;if(x===null)return;const ne=f?(0,m.Sk)(D,f):(0,m.Oc)(D);!ne||!(0,m.wR)(ne.block)||(0,z.e)(ne.block)!==L||a.gB.setNodes(D,{text:x},{at:(0,z.R)(R.path),voids:!0})},setVoidBlockSource(f,I,E={}){const D=G.current;if(!D)return;const R=(0,m.Sk)(D,f);if(!R){(0,l.H)(new Error("Block not found, cannot set new source")),s.i.error({message:"Failed to set block source"});return}if(!(0,m.wR)(R.block)){(0,l.H)(new Error("Cannot set new source on a non-void block")),s.i.error({message:"Failed to set block source"});return}D.apply({type:"set_node",path:(0,z.R)(R.path),properties:{text:(0,z.e)(R.block)},newProperties:{text:I},isMergeable:!!E.isMergeable})},setBlockSource(f,I){const E=G.current;if(!E)return;const D=(0,m.Sk)(E,f);if(!D){(0,l.H)(new Error("Block not found, cannot set new source")),s.i.error({message:"Failed to set block source"});return}if((0,m.wR)(D.block)){(0,l.H)(new Error("Cannot set new source on a void block")),s.i.error({message:"Failed to set block source"});return}a.gB.insertText(E,I,{at:(0,z.R)(D.path),voids:!0})},getFocusedCellId(){const f=G.current;return(f?(0,m.Oc)(f):null)?.block.id??null},getFocusedCellType(){const f=G.current;return(f?(0,m.Oc)(f):null)?.block.type??null},getCellIndex(f){const I=G.current,E=I?(0,m.Sk)(I,f):null;return E?(0,m.SC)(E.path):-1},getBlockById(f){const I=G.current;return(I?(0,m.Sk)(I,f):null)?.block??null},getCellType(f){const I=G.current;return(I?(0,m.Sk)(I,f):null)?.block.type??null},focusCell(f,I){const E=G.current;if(!E)return{focusChanged:!1};const D=(0,m.Sk)(E,f);if(!D)return{focusChanged:!1};const R=D.path,[,L]=a.KE.first(E,R);return a.gB.select(E,{path:L,offset:0}),(0,m.u9)(E),{focusChanged:!0}},defocus(){const f=G.current;f&&a.gB.deselect(f)},doesPositionExist(f){const I=G.current;if(!I)return!1;const E=(0,m.Sk)(I,f.cellId),D=E&&(0,m.wR)(E.block)?(0,z.e)(E.block):null,R=D?D.split(`
`)[f.line-1]:null;return R!=null&&R.length>=f.offset},insertCell(f,I,E){const D=G.current;if(!D)return null;const R=(0,m.Vm)(D);if(!R)return null;const L=(()=>{if(I==="notebook-end")return R.children.length;if(I==="below"||I==="above"||I==="left"||I==="right"){const x=E?.cellId?(0,m.Sk)(D,E.cellId):(0,m.Oc)(D);if(!x)return R.children.length;const ne=(0,m.SC)(x.path);return I==="above"||I==="left"?ne:ne+1}(0,d.x)(I)})();return a.gB.insertNodes(D,(0,F.w)(f.cellId,f,{sortingKey:null,blockGroup:null}),{at:(0,m.CH)(L)}),{id:f.cellId,type:f.cell_type}},insertCellByType(f,I,E={}){const D=G.current;if(!D)return null;const R=(0,m.t)(D),L=E.source??"",x=E.cellId&&E.integration?.type==="pandas-dataframe"?this.getCellDataFrameVariableName(E.cellId):null,ne=(0,o.NF)(),M=f==="sql"?(0,i.L8)({id:ne,integrationId:E.integration.id,source:L,variableName:x,usedBlockVariableNames:(0,m.Dc)(D,"sql")}):(0,c.I1)(f,{id:ne,source:L,existingCellCounts:R,metadata:E.metadata});return E.shouldBeInApp&&(M.metadata.deepnote_app_block_visible=E.shouldBeInApp),E.hideCodeInPublishedApp&&k.bh.includes(f)&&(M.metadata.deepnote_app_is_code_hidden=!0),this.insertCell(M,I,E)},getCellDataFrameVariableName(f){const I=G.current;if(!I)return null;const E=(0,m.Sk)(I,f);if(!E)return null;const D=E.block;return D?.type==="sql"?D.metadata.deepnote_variable_name??null:D?.type==="code"?(0,i.Dk)((0,z.e)(D)):null},convertCell(f,I,E){const D=G.current;if(!D)return;const R=(0,m.Sk)(D,f);if(!R||R.block.type===I)return;(0,r.u4)("Block type changed",{from:R.block.type,to:I,workspaceId:E.workspaceId});const L=(0,i.ri)(R.block,I);a.gB.setNodes(D,L,{at:R.path})},getCellSqlIntegrationId(f){const I=G.current;if(!I)return null;const E=(0,m.Sk)(I,f);return!E||E.block.type!=="sql"?null:E.block.metadata.sql_integration_id??null},async changeSqlCellIntegration(f,I){const E=G.current;E&&(0,m.uM)(E,f,{sql_integration_id:I})},getNextAvailableCellId(f,{canBePreviousBlock:I}){const E=G.current;if(!E)return null;const D=(0,m.Vm)(E),R=(0,m.Sk)(E,f);if(!D||!R)return null;const L=(0,m.SC)(R.path);if(D.children.length!==L+1){const x=D.children[L+1];return x&&(0,m.oo)(x)?x.id:null}if(I){const x=D.children[L-1];return x&&(0,m.oo)(x)?x.id:null}return null},moveCells(f,I,E,D){const R=G.current;if(!R)return;const L=(0,m.Sk)(R,D);if(!L)return;const x=0,ne=this.getCellIndex(I),M=(0,m.SC)(L.path),A=E==="above"||E==="left"?M:M+1+x,b=ne<A?A-1:A;(0,m.Gk)(R,{match:q=>f.includes(q.id),to:(0,m.CH)(b),targetBlockGroup:E==="left"||E==="right"?L.block.block_group:null})},moveCellsDown(f){const I=G.current,E=I?(0,m.Vm)(I):null;if(!I||!E)return;const D=W(E.children,f);D&&O(I,D)},moveCellsUp(f){const I=G.current,E=I?(0,m.Vm)(I):null;if(!I||!E)return;const D=K(E.children,f);D&&O(I,D)},duplicateCell(f){const I=G.current;if(!I)return null;const E=(0,m.Sk)(I,f);if(!E)return null;const D=(0,m.SC)(E.path)+1,R=(0,m.t5)(E.block,{existingVariableNames:(0,m.L2)(I)});return a.gB.insertNodes(I,R,{at:(0,m.CH)(D)}),R.id},duplicateCells(f){const I=G.current;if(!I)return null;const E=[...(0,m.uD)(I,{match:x=>f.includes(x.id)})],D=E.at(-1);if(!D)return null;const R=(0,m.SC)(D[1])+1,L=[];return a.KE.withoutNormalizing(I,()=>{E.forEach(([x],ne)=>{const M=(0,m.t5)(x,{existingVariableNames:(0,m.L2)(I)}),A=R+ne;a.gB.insertNodes(I,M,{at:(0,m.CH)(A)}),L.push(M.id)})}),L},deleteCell(f){const I=G.current;if(!I)return;const E=(0,m.Sk)(I,f);E&&a.gB.removeNodes(I,{at:E.path})},deleteCells(f,I){const E=G.current;E&&(I.deselectEditorBeforeDelete&&a.gB.deselect(E),a.gB.removeNodes(E,{at:(0,m.CT)([]),match:D=>(0,m.oo)(D)&&f.includes(D.id)}))},setCellSharingStatus(f,I){const E=G.current;E&&(0,m.uM)(E,f,{allow_embed:I})},toggleAllCellVisibility(f,I={}){const E=G.current;if(!E)return;const D=f==="output"?"is_output_hidden":"is_code_hidden",R=[...(0,m.uD)(E)],L=R.some(([ne])=>("is_code_hidden"in ne.metadata||"is_output_hidden"in ne.metadata)&&!!ne.metadata[D]),x=I.newSetting??!L;return R.forEach(([ne])=>{this.toggleCellVisibility(ne.id,f,{newSetting:x})})},toggleCellVisibility(f,I,E={}){const D=G.current;if(!D)return;const R=I==="output"?"is_output_hidden":"is_code_hidden",L=I==="output"?"deepnote_app_is_output_hidden":"deepnote_app_is_code_hidden",x=(0,m.Sk)(D,f);if(!x){(0,l.H)(new Error("Trying to toggle cell output visibility, but there is no cell"),"error");return}if(!(0,m.JW)(x.block))return;const ne=x.block.metadata[R],M=E.newSetting??!ne,A=x.block.metadata[L]==null?{[L]:M}:{};(0,m.uM)(D,f,{[R]:M,...A})},toggleCellOutputHeightLimit(f,I={}){const E=G.current;if(!E)return;const D=(0,m.Sk)(E,f);if(!D){(0,l.H)(new Error("Trying to toggle output height limit, but there is no cell"),"error");return}if(!(0,m.xY)(D.block)){(0,l.H)(new Error("Trying to toggle output height limit, but the cell is not code"),"warning");return}const R=D.block.metadata.deepnote_output_height_limit_disabled,L=I.newSetting??!R;(0,m.uM)(E,f,{deepnote_output_height_limit_disabled:L})},addCodeCellToApp(f){const I=G.current;!I||!(0,m.Sk)(I,f)||(0,m.uM)(I,f,{deepnote_app_block_visible:!0,deepnote_app_is_code_hidden:!1,deepnote_app_is_output_hidden:!1})},addBlockToApp(f){const I=G.current;!I||!(0,m.Sk)(I,f)||(0,m.uM)(I,f,D=>{D.deepnote_app_block_visible=!0})},removeBlockFromApp(f){const I=G.current;I&&(0,m.uM)(I,f,E=>{E.deepnote_app_block_visible=!1})},removeCodeCellFromApp(f){const I=G.current;I&&(0,m.uM)(I,f,{deepnote_app_block_visible:!1,deepnote_app_is_code_hidden:!0,deepnote_app_is_output_hidden:!0})},toggleBlockCodeInApp(f,I){const E=G.current;E&&(0,m.uM)(E,f,{deepnote_app_is_code_hidden:I})},toggleBlockOutputInApp(f,I){const E=G.current;E&&(0,m.uM)(E,f,{deepnote_app_is_output_hidden:I})},addAllBlocksToApp(){const f=G.current;if(!f)return;const I=(0,m.uD)(f);for(const[E]of I)this.addBlockToApp(E.id)},addAllNonCodeBlocksToApp(){const f=G.current;if(!f)return;const I=(0,m.uD)(f);for(const[E]of I)this.addBlockToApp(E.id),(0,m.JW)(E)&&(this.toggleBlockCodeInApp(E.id,!0),this.toggleBlockOutputInApp(E.id,!1))},async editVisualizationCellSpec(f,I){const E=G.current;if(!E)return;const D=(0,m.Sk)(E,f);if(D){if(D.block.type!=="visualization"){(0,l.H)(new Error(`Trying to deepnote_visualization_spec property on cell type ${D.block.type}`),"error");return}(0,m.uM)(E,f,{deepnote_visualization_spec:I})}},editCellVariableName(f,I){const E=G.current;if(!E)return;const D=(0,m.Sk)(E,f);if(!D)return;const R=D.block.type;if(R!=="input-date"&&R!=="input-select"&&R!=="input-slider"&&R!=="input-text"&&R!=="input-textarea"&&R!=="sql"&&R!=="visualization"){(0,l.H)(new Error(`Trying to change variable name property on cell type ${R}`),"error");return}(0,m.uM)(E,f,L=>{I?L.deepnote_variable_name=(0,e.T8)(I):delete L.deepnote_variable_name})},editInputCellSelectMetadata(f,I,E,D,R){const L=G.current;if(!L)return;const x=(0,m.Sk)(L,f);if(!x)return;const ne=x.block.type;if(ne!=="input-date"&&ne!=="input-select"&&ne!=="input-slider"&&ne!=="input-text"&&ne!=="input-textarea"){(0,l.H)(new Error("Trying to change input property on non-input cell type"),"error");return}const M=I[0]??"",A=x.block.metadata.deepnote_variable_value,b=Array.isArray(A)?I.find(q=>A.includes(q))??M:I.includes(A)?A:M;(0,m.uM)(L,f,{deepnote_variable_value:b,deepnote_variable_options:I,deepnote_variable_custom_options:E,deepnote_variable_selected_variable:D,deepnote_variable_select_type:R})},setCellColor(f,I){const E=G.current;if(!E)return;const D=(0,m.Sk)(E,f);if(D){if(!(0,m.x5)(D.block)){(0,l.H)(new Error("Trying to change color property on non-callout cell"),"error");return}(0,m.uM)(E,f,{color:I})}},ensureSelectInputValidValue(f){const I=G.current;if(!I)return;const E=(0,m.Sk)(I,f);if(!E||E.block.type!=="input-select")return;const{block:D}=E,R=D.metadata.deepnote_variable_options??[];(0,X.K)(D)&&(0,m.uM)(I,f,{deepnote_variable_value:R[0]??""})},updateImageCellAlignment(f,I){const E=G.current;if(!E)return;const D=(0,m.Sk)(E,f);if(D){if(!(0,m.p2)(D.block)){(0,l.H)(new Error(`Trying to set image block property on non-image cell: ${D.block.type}`),"error");return}(0,m.uM)(E,f,{deepnote_img_alignment:I??void 0})}},updateImageCellWidth(f,I){const E=G.current;if(!E)return;const D=(0,m.Sk)(E,f);if(D){if(!(0,m.p2)(D.block)){(0,l.H)(new Error(`Trying to set image block property on non-image cell: ${D.block.type}`),"error");return}(0,m.uM)(E,f,{deepnote_img_width:I??void 0})}},setFullWidth(f){const I=G.current;I&&(0,m.lK)(I,{partialEditorMetadata:{deepnote_full_width:f}})},getExecutionMode(){const f=G.current;if(!f)return null;const I=(0,m.Vm)(f);return I?I.executionMode:null},getAppMetadata(){const f=G.current;if(!f)return null;const I=(0,m.Vm)(f);return I?I.appMetadata:null},transact(f){const I=G.current;I&&a.KE.withoutNormalizing(I,f)}}}},32227:($,_,t)=>{"use strict";t.d(_,{Ay:()=>ne,j2:()=>I,jL:()=>D,A1:()=>E,CU:()=>R});var e=t(31548),o=t(51881),c=t(73570),l=t(37523),r=t(52341);const d=(M=r.b4,A)=>A.type==="UPDATE_SCHEDULING"?A.newSchedulingState:A.type==="REMOVE_SCHEDULING"?r.b4:M;var s=t(48154);const a=(M=r.lv,A)=>{if(A.type==="SET_COMMENT_DISPLAY_PREFERENCES")return(0,s.jM)(M,b=>{b.commentsDisplayPreferences=A.option});if(A.type==="TOGGLE_SHOW_ONLY_MY_THREADS")return(0,s.jM)(M,b=>{b.showOnlyMyThreads=A.enabled});if(A.type==="OPEN_COMMENT_CONTAINER")return M.commentEditors[A.cellId]?M:(0,s.jM)(M,b=>{b.commentEditors[A.cellId]={selectedThreadId:A.threadId,editingComments:[],openedNewCommentEditor:!1}});if(A.type==="CLOSE_COMMENT_CONTAINER")return M.commentEditors[A.cellId]?(0,s.jM)(M,q=>{delete q.commentEditors[A.cellId]}):M;if(A.type==="OPEN_NEW_COMMENT_EDITOR")return(0,s.jM)(M,b=>{b.commentEditors={[A.cellId]:{...b.commentEditors[A.cellId]||{},openedNewCommentEditor:!0}}});if(A.type==="CLOSE_NEW_COMMENT_EDITOR")return(0,s.jM)(M,b=>{b.commentEditors[A.cellId]={...b.commentEditors[A.cellId],openedNewCommentEditor:!1}});if(A.type==="OPEN_COMMENT_EDIT_MODE")return M.commentEditors[A.cellId]?.editingComments.includes(A.commentId)?M:(0,s.jM)(M,b=>{b.commentEditors[A.cellId]?.editingComments.push(A.commentId)});if(A.type==="CLOSE_COMMENT_EDIT_MODE"){if(!M.commentEditors[A.cellId])return M;const b=M.commentEditors[A.cellId]?.editingComments.indexOf(A.commentId)??-1;return b<=-1?M:(0,s.jM)(M,q=>{q.commentEditors[A.cellId]?.editingComments.splice(b,1)})}return A.type==="CLOSE_ALL_COMMENT_EDITORS"?(0,s.jM)(M,b=>{b.commentEditors={}}):A.type==="UPDATE_CELL_ID_TO_COMMENTS_COUNTS"?(0,s.jM)(M,b=>{b.cellIdToCommentsCounts=A.cellIdToCommentsCounts}):A.type==="OPENED_LINKED_THREAD"?(0,s.jM)(M,b=>{b.hasOpenedLinkedThread=!0}):M};var n=t(35537);const i=(M=r.PB,A)=>A.type==="UPDATE_HARDWARE_STATUS"?(0,s.jM)(M,b=>{b.hardwareStatus=A.hardwareStatus}):M,p=(M=r.G1,A)=>A.type==="SET_ENVIRONMENTS"?(0,s.jM)(M,b=>{b.list=A.list}):A.type==="SET_ENV_LOADING"?(0,s.jM)(M,b=>{b.loading=A.value}):A.type==="SET_IMAGE_IMPORTING"?(0,s.jM)(M,b=>{b.importing=A.value}):A.type==="UPDATE_HARDWARE_STATUS"&&M.importing&&A.hardwareStatus!=="starting"?(0,s.jM)(M,b=>{b.importing=!1}):M;var u=t(748),g=t(18906),y=t(37977);const T=(M=r.kA,A)=>A.type===g.ZC.SET_OPEN_RAW_LIST?(0,s.jM)(M,b=>{b.openRawList=A.openRawList}):A.type===g.ZC.SET_EXPANDED_DIRS?(0,s.jM)(M,b=>{const q=A.expandedDirPaths.slice();b.expandedDirPaths=[...new Set(q)]}):A.type===g.ZC.ENTITIES_LOADED?(0,s.jM)(M,b=>{A.partial||(b.entities={}),b.isUnavailable=!1,A.entities.forEach(q=>{b.entities[q.relativePath]=q;const fe=(0,y.hR)(q.relativePath),oe=b.entities[fe];oe&&oe.type==="directory"&&oe.relativePath!==q.relativePath&&(oe.children=[...new Set([...oe.children,q.relativePath])])})}):A.type===g.ZC.ENTITIES_RELOADING?(0,s.jM)(M,b=>{b.isReloading=A.isReloading}):A.type===g.ZC.SET_FILESYSTEM_UNAVAILABLE?(0,s.jM)(M,b=>{b.isUnavailable=A.isUnavailable,b.isReloading=!1,b.entities={}}):A.type===g.ZC.CHANGE_PATH?(0,s.jM)(M,b=>{const q=b.entities[A.oldPath];q.relativePath=A.newPath}):A.type===g.ZC.SET_RENAMING_FILE_PATH?(0,s.jM)(M,b=>{b.renamingFilePath=A.renamingFilePath}):A.type===g.ZC.SET_LATEST_CREATED_FILE_PATH?(0,s.jM)(M,b=>{b.latestCreatedFilePath=A.latestCreatedFilePath}):A.type===g.ZC.ADD_UPLOADING_ITEM?(0,s.jM)(M,b=>{b.uploadingItems[A.uuid]={status:u.e.STARTED,progress:0,name:A.name,size:A.size,source:A.source}}):A.type===g.ZC.SET_IS_TOOLTIP_OPEN?(0,s.jM)(M,b=>{b.isTooltipOpen=A.isOpen}):A.type===g.ZC.UPDATE_UPLOADING_ITEM_PROGRESS?(0,s.jM)(M,b=>{b.uploadingItems[A.uuid]||(0,o.H)(new Error("Trying to update progress of an item that does not exist"),"warning");const q=b.uploadingItems[A.uuid];q&&(q.progress=A.progress)}):A.type===g.ZC.UPDATE_UPLOADING_ITEM_STATUS?(0,s.jM)(M,b=>{b.uploadingItems[A.uuid]||(0,o.H)(new Error("Trying to update status of an item that does not exist"),"warning");const q=b.uploadingItems[A.uuid];q&&(q.status=A.status)}):A.type===g.ZC.REMOVE_UPLOADING_ITEMS?(0,s.jM)(M,b=>{A.uuids.forEach(q=>delete b.uploadingItems[q])}):A.type===g.ZC.SET_READONLY_DOCUMENT?(0,s.jM)(M,b=>{b.readOnlyDocuments[A.path]=A.content}):M,C=(M=r.AO,A)=>{if(A.type==="TEMPLATE_ADD")return(0,s.jM)(M,b=>{b.integrationTemplates.push(A.payload)});if(A.type==="TEMPLATE_BATCH_ADD")return(0,s.jM)(M,b=>{b.integrationTemplates=b.integrationTemplates.concat(A.payload)});if(A.type==="INTEGRATION_ADD")return(0,s.jM)(M,b=>{b.integrations.push(A.payload.integration),b.integrationsLoaded=!0});if(A.type==="INTEGRATION_LOAD_START")return(0,s.jM)(M,b=>{b.integrationsLoading=!0});if(A.type==="INTEGRATION_LOAD_END")return(0,s.jM)(M,b=>{b.integrationsLoading=!1});if(A.type==="INTEGRATION_BATCH_ADD")return(0,s.jM)(M,b=>{b.integrations=A.payload.integrations,b.integrationsLoaded=!0});if(A.type==="INTEGRATION_CLEAR_ALL")return(0,s.jM)(M,b=>{b.integrations=[],b.integrationsLoaded=!1});if(A.type==="INTEGRATION_STATE_SET"){const{integrationId:b,nextState:q}=A.payload;return(0,s.jM)(M,fe=>{fe.integrations=fe.integrations.map(oe=>oe.id===b?{...oe,state:q}:oe)})}return M},m=(M=r.xv,A)=>A.type==="COLLAPSE_PROJECT_SIDEBAR"?(0,s.jM)(M,b=>{b.isProjectPrimarySidebarCollapsed=!0}):A.type==="TOGGLE_APP_PREVIEW"?(0,s.jM)(M,b=>{b.isAppPreviewOpened[A.notebookId]=A.open}):A.type==="EXPAND_PROJECT_SIDEBAR"?(0,s.jM)(M,b=>{b.isProjectPrimarySidebarCollapsed=!1}):A.type==="SET_SECONDARY_PROJECT_SIDEBAR_VIEW"?(0,s.jM)(M,b=>{b.secondaryProjectSidebarView=A.view}):A.type==="RESET_SECONDARY_PROJECT_SIDEBAR_VIEW"?(0,s.jM)(M,b=>{b.secondaryProjectSidebarView=null}):A.type==="OPEN_SHARING_POPOVER"?(0,s.jM)(M,b=>{b.isProjectSharingPopoverOpened=!0}):A.type==="CLOSE_SHARING_POPOVER"?(0,s.jM)(M,b=>{b.isProjectSharingPopoverOpened=!1}):A.type==="SWITCH_PROJECT_SIDEBAR_TAB"?(0,s.jM)(M,b=>{b.selectedProjectPrimarySidebarTab=A.tab}):A.type==="SET_ACTIVE_COMMAND_DROPDOWN_BLOCK_ID"?(0,s.jM)(M,b=>{b.activeCommandDropdownBlockId=A.blockId}):A.type==="SET_BLOCK_ADDING_DROPDOWN_POSITION"?(0,s.jM)(M,b=>{b.openedBlockDropdownPosition=A.position}):A.type==="SET_IS_DRAGGING_BLOCKS"?(0,s.jM)(M,b=>{b.isDraggingBlocks=A.isDraggingBlocks}):A.type==="TOGGLE_BLOCK_OPTIONS_POPOVER"?(0,s.jM)(M,b=>{b.blockOptionsPopoverOpened[A.payload.blockId]=A.payload.value}):M,O=(M=r.tt,A)=>A.type==="UPDATE_CELL_HEIGHT"?(0,s.jM)(M,b=>{A.payload.forEach(q=>{const fe=b.currentLayout;fe[q.notebookId]=fe[q.notebookId]||{cells:{},outputs:{}},fe[q.notebookId].cells[q.cellId]=q.height})}):A.type==="UPDATE_CELL_OUTPUT_HEIGHT"?(0,s.jM)(M,b=>{A.payload.forEach(q=>{const fe=b.currentLayout[q.notebookId]??{cells:{},outputs:{}};fe.outputs[q.cellId]=fe.outputs[q.cellId]??[];const oe=fe.outputs[q.cellId];fe.outputs[q.cellId]?.fill(0,oe.length,q.outputIndex+1),oe[q.outputIndex]=q.height,b.currentLayout[q.notebookId]=fe})}):A.type==="CACHED_CELL_LAYOUT_FETCHED"?(0,s.jM)(M,b=>{b.cachedLayout=A.payload}):M;var W=t(67178),K=t.n(W);const H=(M=r.Gs,A)=>A.type==="NEW_OUTPUTS"?(0,s.jM)(M,b=>{K()(A.cellIdsToOutputs,(q,fe)=>{b.outputs[fe]=q?.filter(oe=>oe.output_type!=="stream"?!0:oe.text!=="")??null})}):M,N=(M=(0,r.SP)(),A)=>A.type===g.fB.RECEIVE_PROJECT?(0,s.jM)(M,b=>{Object.assign(b,A.project)}):A.type===g.fB.SET_INIT_NOTEBOOK?(0,s.jM)(M,b=>{b.init_notebook_id=A.initNotebookId}):A.type===g.fB.CHANGE_HARDWARE?(0,s.jM)(M,b=>{b.hardware=A.hardware}):A.type===g.fB.SWITCHING_HARDWARE?(0,s.jM)(M,b=>{b.hardwareSwitching=A.hardwareSwitching}):A.type===g.fB.CHANGE_NAME?(0,s.jM)(M,b=>{b.name=A.name}):A.type===g.fB.CHANGE_OWNER?(0,s.jM)(M,b=>{b.owner.teamId=A.teamId}):A.type===g.fB.SET_TEAM_ACCESS_TYPE?(0,s.jM)(M,b=>{b.owner.teamAccessType=A.teamAccessType}):A.type===g.fB.SET_RENAMING?(0,s.jM)(M,b=>{b.isRenamingProject=A.payload}):A.type===g.fB.SET_PROMOTING?(0,s.jM)(M,b=>{b.isPromotingNotebook=A.payload}):A.type===g.fB.SET_STARRING?(0,s.jM)(M,b=>{b.isStarringProject=A.payload}):A.type===g.fB.SCROLL_TARGET_SET?(0,s.jM)(M,b=>{b.scrollTarget=A.target}):A.type===g.fB.SET_DOCKER_BUILD_STATE?(0,s.jM)(M,b=>{b.dockerBuildState=A.dockerBuildState}):A.type===g.fB.SET_DOCKER_IMAGE?(0,s.jM)(M,b=>{b.currentDockerImage=A.image}):A.type===g.fB.SET_PUBLISHED_STATE?(0,s.jM)(M,b=>{b.published_at=A.publishedAt,b.published_access=A.publishedAccess,b.published_notebook_id=A.notebookInDbID}):A.type===g.fB.SET_PUBLISHED_ACCESS?(0,s.jM)(M,b=>{b.published_access=A.publishedAccess}):A.type===g.fB.UNSET_PUBLISHED_STATE?(0,s.jM)(M,b=>{b.published_notebook_id=null,b.published_at=void 0}):A.type===g.fB.SET_ENABLE_DUPLICATION?(0,s.jM)(M,b=>{b.published_enable_duplication=A.enabled}):A.type===g.fB.SET_USER_ACCESS_TYPE?(0,s.jM)(M,b=>{b.currentUserAccessType=A.userAccessType}):M;var w=t(54065);const k=(M=r.xb,A)=>A.type==="NEW_OUTPUTS"?(0,s.jM)(M,b=>{K()(A.cellIdsToOutputs,(q,fe)=>{b[fe]=q?.filter(oe=>oe.output_type==="error").map(oe=>(0,w.Oh)(oe)).flat()??[]})}):M,F=(M=r.eH,A)=>A.type==="PROJECT_INITIALIZATION_FINISHED"?(0,s.jM)(M,b=>{b.initializationState="done",b.initializationMessage=void 0}):A.type==="PROJECT_INITIALIZATION_STARTED"?(0,s.jM)(M,b=>{b.initializationState="initializing",b.initializationMessage=void 0}):A.type==="PROJECT_INITIALIZATION_ERROR"?(0,s.jM)(M,b=>{b.initializationState="error",b.initializationMessage=A.error}):A.type==="PROJECT_INITIALIZATION_WARNING"?M.initializationState==="error"||M.initializationState==="done"?M:(0,s.jM)(M,b=>{b.initializationState="initializing-warning",b.initializationMessage=A.warning}):A.type==="UPDATE_SESSION_CONFIG"?(0,s.jM)(M,b=>{b.sessionId=A.sessionId}):M,X=(M=r.h8,A)=>A.type==="SET_TERMINAL_NAMES"?(0,s.jM)(M,b=>{b.terminals=A.terminals}):A.type==="SET_IS_CREATING_TERMINAL"?(0,s.jM)(M,b=>{b.isCreatingTerminal=A.isCreatingTerminal}):M;var z=t(54677);const B=(M=z.I,A)=>A.type==="USER_SET"?(0,s.Ay)(M,b=>{Object.assign(b,A.payload)}):M;var U=t(15479),G=t(61083);const f=(0,l.HY)({config:n.t,output:H,runtimeErrors:k,sessionConfig:F,layout:m,notebookLayout:O,user:B,modalManager:e.f4,project:N,commentsState:a,terminal:X,environment:p,filesystem:T,connection:i,scheduling:d,integrationsState:C,history:G.t0}),I=typeof window<"u"&&typeof window.__REDUX_DEVTOOLS_EXTENSION__=="function"?window.__REDUX_DEVTOOLS_EXTENSION__():void 0;typeof window<"u"&&(window.__deepnoteStoreCounter=window.__deepnoteStoreCounter?window.__deepnoteStoreCounter+1:1,window.__deepnoteStoreCounter>1&&(0,o.H)(new Error("creating multiple stores"),"fatal"));function E(M,A){return(0,c.d4)(M,A)}const D=c.wA;function R(){return(0,c.Pj)()}const L=(0,l.y$)(f,r.kx,I),x=L.dispatch;L.dispatch=M=>{const{type:A,...b}=M;return(0,U.Yz)(`dispatch(${M.type})`,b),x(M)};const ne=L},15479:($,_,t)=>{"use strict";t.d(_,{Os:()=>d,VC:()=>c,Yz:()=>r});var e=t(14651),o=t(23240);const c=()=>{try{if(!(0,e.S)()&&window?.localStorage.getItem("conditional-logging-enabled")==="true")return!0}catch(a){console.warn(`During conditional debugging, there was error: ${a instanceof Error?a.message:"Unknown reason"}`)}return!1};let l=0;const r=(a,...n)=>{c()?console.log(a,...n):(0,o.Z)({level:"debug",message:`${"\u25BA ".repeat(l)}${a}`,...s(...n)})};function d(...a){const n=a.pop(),[i,...p]=a,u=c();u?console.group(...a):(0,o.Z)({level:"debug",message:`${"\u25BA ".repeat(l)}${i}:`,...s(...p)}),l+=1;try{return n()}finally{l-=1,u&&console.groupEnd()}}function s(...a){return a.length===0?{}:{data:a.length===1&&typeof a=="object"&&a[0]!=null?a[0]:{args:a}}}},53601:($,_,t)=>{"use strict";t.d(_,{BL:()=>u,CI:()=>r,Q0:()=>e,UD:()=>l,Y2:()=>g,ZH:()=>a,Zy:()=>c,bo:()=>p,fx:()=>s,tc:()=>o,u:()=>i,w6:()=>d});const e=y=>y?.toLowerCase().endsWith(".ipynb"),o=y=>y.toLowerCase().endsWith(".zip")||y.toLowerCase().endsWith(".tar")||y.toLowerCase().endsWith(".tar.gz"),c=y=>y?.toLowerCase().endsWith(".csv"),l=y=>y.toLowerCase().endsWith(".py"),r=y=>y.toLowerCase().endsWith(".txt"),d=y=>y.toLowerCase().endsWith(".xlsx"),s=y=>y.toLowerCase().endsWith("dockerfile"),a=y=>y.toLowerCase().endsWith(".pdf"),n=[".png",".jpg",".jpeg",".gif",".svg",".webp"],i=y=>n.some(T=>y.toLowerCase().endsWith(T)),p=y=>!y.relativePath.startsWith("/.deepnote")&&!y.relativePath.startsWith(".deepnote"),u=y=>y==="/requirements.txt",g=y=>!!(y.includes("import streamlit")||y.includes("from streamlit"))},37977:($,_,t)=>{"use strict";t.d(_,{$4:()=>p,ed:()=>m,uN:()=>w,z1:()=>s,hR:()=>a,WP:()=>n,Xg:()=>C,iX:()=>W,dh:()=>K,sF:()=>H,D:()=>N,$e:()=>y,zs:()=>T});var e=t(64688),o=t(24232);const c=(k,F)=>{const X=/^~/;let z=k.replace(X,"/root");if(F.isAbsolute(z)){const B=/^\/root\/work\/|^\/work\//;z=z.replace(B,""),z=F.normalize(z)}return z};var l=t(31558),r=t(8125);const d=[".csv",".txt",".gitignore",".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har",".abap",".cls",".azcli",".bat",".cmd",".mligo",".clj",".cljs",".cljc",".edn",".coffee",".c",".h",".cpp",".cc",".cxx",".hpp",".hh",".hxx",".cs",".csx",".cake",".css",".dockerfile",".fs",".fsi",".ml",".mli",".fsx",".fsscript",".go",".graphql",".gql",".handlebars",".hbs",".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm",".ini",".properties",".gitconfig",".java",".jav",".js",".es6",".jsx",".kt",".less",".lua",".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext",".s",".dax",".msdax",".m",".pas",".p",".pp",".ligo",".pl",".php",".php4",".php5",".phtml",".ctp",".dats",".sats",".hats",".pq",".pqm",".ps1",".psm1",".psd1",".jade",".pug",".py",".rpy",".pyw",".cpy",".gyp",".gypi",".r",".rhistory",".rprofile",".rt",".cshtml",".redis",".rst",".rb",".rbx",".rjs",".gemspec",".pp",".rs",".rlib",".sb",".scm",".ss",".sch",".rkt",".scss",".sh",".bash",".sol",".aes",".sql",".st",".iecst",".iecplc",".lc3lib",".swift",".tcl",".twig",".ts",".tsx",".vb",".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl",".yaml",".yml",".scala",".sbt"];function s(k){const X=k.replace(/^\//,"").split("/").slice(0,-1);return["",...X.map((z,B)=>X.slice(0,B+1).join("/"))]}function a(k){return k.split("/").slice(0,-1).join("/")}function n(k){return r.basename(k)}function i(k){return k.substr(k.lastIndexOf(".")+1)}function p(k,F){if(k===F)return!1;const X=k.split("/");return!F.split("/").every((U,G)=>X[G]===U)}function u(k){const F=k.relativePath.split("/");return F[F.length-1]}function g(k,F){const X=k.relativePath.split("/");if(X.length===1)return null;const z=F[X.slice(0,X.length-1).join("/")];return z||null}function y(k,F,X){const z=u(k);if(F.type==="file"){const B=g(F,X);return B?.children?!B.children.includes(z):u(F)!==z}return F.children?!F.children.includes(z):!0}const T=k=>{const F=k.relativePath;return F!==""&&!F.startsWith(".deepnote")};function C(k,F=window.location){try{const X=new URL(k);if(X.host===F.host&&X.protocol===F.protocol){const z=X.pathname.match(/^\/workspace\/([^/]+)\/project\/([^/]+)/)??X.pathname.match(/^\/project\/([^/]+)/)??null,B=z?.[z.length-1],U=B?(0,e.d)(B):null;if(!z||!U)return null;const G=z[0].length+1,f=decodeURIComponent(X.pathname.substr(G));return{filePath:f.startsWith("/")?f:`/${f}`,cellId:X.hash.substr(1)||void 0,projectNameSlug:U.name,projectId:U.id}}else return null}catch{return null}}const m=(k,F)=>{const{relativePath:X}=k;return r.basename(X)===F.relativePath||F.relativePath===X||r.dirname(X)===F.relativePath?X:(0,o.w)(k)&&F.relativePath===""?`${r.basename(k.relativePath)}`:(0,o.f)(F)&&a(F.relativePath)===""?`${r.basename(X)}`:(0,o.f)(F)&&(0,o.f)(F)?`${r.dirname(F.relativePath)}/${r.basename(X)}`:(0,o.w)(k)?`${F.relativePath}/${r.basename(X)}`:F.relativePath===""?`${r.basename(X)}`:`${F.relativePath}/${r.basename(X)}`},O=k=>{const F={};return k.forEach(X=>{F[X.relativePath]=X}),F},W=(k,F)=>{const X=c(k,r);return`/api/project/${F}/download-file?path=${encodeURIComponent(X)}`},K=(k,F)=>{const X=c(k,r);return`/api/project/${F}/view-file?path=${encodeURIComponent(X)}`},H=k=>{if(k.resourceSrc)if((0,l.EE)(k.resourceSrc)){const F=(0,r.join)(k.pathToFolder,k.resourceSrc);return W(F,k.projectId)}else return k.resourceSrc};function N(k){if(!k)return!1;if(k.startsWith(".")&&k.length>1||k==="Dockerfile"||i(k)==="ipynb")return!0;const F="."+i(k);return d.some(X=>X===F)}function w(k,F,X=[".deepnote"]){const z=k?.[F];if(z?.type!=="directory"||z?.children.length===0)return null;const B=z.relativePath;return z.children.map(U=>U.startsWith(B)?U.substring(B.length):U).filter(U=>!X.some(G=>U.startsWith(G)))}},60622:($,_,t)=>{"use strict";t.d(_,{X:()=>c,l:()=>l});var e=t(94751),o=t(57892);const c=({project:r,filePath:d,urlHash:s,notebook:a,source:n,medium:i,campaign:p})=>(0,e.Xo)({serverUrl:o.V,project:r,filePath:d,urlHash:s,notebook:a,source:n,medium:i,campaign:p}),l=({streamlitAppId:r,project:d,author:s,source:a,medium:n,campaign:i})=>(0,e.lv)({serverUrl:o.V,project:d,streamlitAppId:r,author:s,source:a,medium:n,campaign:i})},62046:($,_,t)=>{"use strict";t.d(_,{v:()=>c});var e=t(51881),o=t(64688);function c(r,d){const s=l();return s?r(s.id,s.slug,d):""}function l(){const r=window.location.href.match(/\/workspace\/[\w_.'"%-]+/),d=r?r[0].substring(11):null;if(!d){(0,e.H)(new Error("Could not find workspace slug with id in current url"),"error");return}const{id:s,slug:a}=(0,o.$)(d);if(!s||!a){(0,e.H)(new Error("Could not parse workspace slug with id in current url"),"error");return}return{id:s,slug:a}}},45298:($,_,t)=>{"use strict";t.d(_,{A:()=>c});var e=t(51881),o=t(32912);function c(l,r,d=3){let s=0;const a={current:null};return[a,async()=>{for(;s<d&&!a.current;){s++;try{a.current=await l()}catch(p){s===d&&((0,e.H)(p,"warning",{message:"We failed loading a library 3 times.",userFacingMessage:r}),r&&(o.i.closeAll(),o.i.error({message:r})))}}return a.current}]}},13432:($,_,t)=>{"use strict";t.d(_,{C:()=>f});var e=t(45470),o=t(38435),c=t(47628),l=t(414),r=t(63998),d=t(23773),s=t(83756),a=t(62046),n=t(1978),i=t(34651),p=t(45162),u=t(54660),g=t(91340),y=t(73126),T=t(52889),C=t(42971),m=t(79967),O=t(67483),W=t(38320),K=t(7245),H=t(55549),N=t(58037),w=t(44366),k=t(61250),F=t(52187),X=t(17165),z=t(64592);const B=3e4,U=({handleViewPlansClick:I,userName:E})=>(0,e.jsx)(z.m,{isDisabled:!E,openDelay:B,label:(0,e.jsxs)(e.Fragment,{children:["Hey ",E," \u{1F44B}",(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),"If you got any questions about Deepnote, upgrading, or life in general, you can always reach out directly to us at help@deepnote.com",(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),"We would love to chat \u{1F499}"]}),children:(0,e.jsx)(F.$,{colorScheme:"blue",onClick:I,children:"View plans"})}),G=({type:I,version:E,isModalOpen:D,handleModalClose:R,handleUpgradeToProClick:L,handleViewPlansClick:x,handleTrackUpgradeCTATriggered:ne,userName:M})=>{const{title:A,subtitle:b,image:q,list:fe,link:oe,linkText:ie,proof:h,logos:ce,upgradePageTrackingSource:ve,upgradePageTrackingSourceFeature:Me,cta:Le}=(0,X.IZ)(I,E),We=()=>x({upgradePageTrackingSource:ve,upgradePageTrackingSourceFeature:Me});return(0,r.useEffect)(()=>{ne({upgradePageTrackingSourceFeature:Me})},[ne,ve,Me]),(0,e.jsxs)(g.a,{closeOnOverlayClick:!1,isOpen:D,onClose:R,size:"lg",isCentered:!0,children:[(0,e.jsx)(y.m,{}),(0,e.jsxs)(T.$,{overflow:"auto",children:[q&&(0,e.jsx)(C.s,{alignItems:"center",justifyContent:"center",margin:9,marginBottom:0,sx:{img:{borderRadius:"8px",maxWidth:"100%"}},children:(0,e.jsx)(m._,{src:q,alt:`${A} - thumbnail`})}),(0,e.jsx)(O.r,{pt:q?5:6,children:A}),(0,e.jsxs)(W.c,{overflow:"visible",children:[b&&(0,e.jsxs)(K.x,{pb:4,children:[b," ",oe&&(0,e.jsx)(H.N,{href:oe,children:ie})]}),fe&&(0,e.jsx)(N.B8,{children:fe.map((Ge,$e)=>(0,e.jsxs)(N.ck,{paddingBottom:2,display:"flex",alignItems:"flex-start",children:[(0,e.jsx)(N.kp,{as:u.i,color:"fg.positive.primary",marginTop:.5}),(0,e.jsx)(K.x,{children:Ge})]},$e))})]}),(0,e.jsxs)(w.j,{justifyContent:h?"space-between":"flex-end",children:[h&&ce&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.x,{marginRight:1,children:"Trusted by teams at"}),(0,e.jsx)(k.z,{spacing:"-14px",children:ce.map((Ge,$e)=>(0,e.jsx)(p.e,{src:Ge,background:"none",showBorder:!0},$e))})]}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(F.$,{colorScheme:"gray",variant:"ghost",onClick:R,children:"Maybe later"}),Le?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(F.$,{colorScheme:"accentOne",onClick:L,children:"Get unlimted AI"})}):(0,e.jsx)(U,{userName:M,handleViewPlansClick:We})]})]})]})]})},f=({onModalClose:I,upgradePageTrackingSourceFeature:E,upgradePageTrackingSourceRole:D,workspaceId:R,type:L})=>{const x=(0,d.W6)(),[ne,M]=(0,r.useState)(!0),{data:{userDetails:A}}=(0,n.n)(),{data:b,loading:q}=(0,i.s)(R),fe=(ce="maybe_later")=>(M(!1),I(ce)),oe=async()=>{await(0,s.vB)(c.uW.PERSONAL,R,"month"),(0,l.u4)("Upgrade CTA clicked",{sourceFeature:E,sourceRole:D,workspaceId:R}),M(!1)},ie=({upgradePageTrackingSource:ce,upgradePageTrackingSourceFeature:ve})=>{const Me=E??ve;return(0,l.u4)("Upgrade CTA clicked",{sourceFeature:Me,sourceRole:D,workspaceId:R}),x.push((0,a.v)(o.JZ.workspaceSettingsUpgrade,{source:ce,sourceFeature:Me,sourceRole:D})),fe("view_plans")},h=({upgradePageTrackingSourceFeature:ce})=>{const ve=E??ce;(0,l.u4)("Upgrade CTA triggered",{sourceFeature:ve,sourceRole:D,workspaceId:R})};return q&&!b?null:(0,e.jsx)(G,{isModalOpen:ne,type:L,userName:A?.name,version:b.version,handleUpgradeToProClick:oe,handleModalClose:fe,handleViewPlansClick:ie,handleTrackUpgradeCTATriggered:h})}},79269:($,_,t)=>{"use strict";t.d(_,{C:()=>e.C});var e=t(13432)},17165:($,_,t)=>{"use strict";t.d(_,{IZ:()=>n,dg:()=>g,gU:()=>R});var e=t(45470),o=t(88563),c=t(19550),l=t(47628),r=t(37189),d=t(45119),s=t(53833);const a=null,n=(h,ce)=>{switch(h){case"editor-limit":return u(ce);case"more-roles":return i(ce);case"more-roles-link":return p(ce);case"project-limit":return g(ce);case"folders":return y(ce);case"public-app-sharing":return T(ce);case"integration-athena":return X;case"integration-gcr":return D(ce);case"integration-ecr":return E(ce);case"integration-dockerhub":return I(ce);case"integration-s3":return F;case"integration-sql-server":return w;case"integration-redshift":return m;case"integration-gcs":return k;case"integration-snowflake":return O;case"integration-bigquery":return H;case"integration-trino":return N;case"integration-dremio":return W;case"integration-databricks":return K;case"paid-machines":return R;case"scheduling":return C;case"project-access-control":return L;case"whitelabelling-ipynb":return x(ce);case"api-execute":return ne(ce);case"hardware-shutdown":return M(ce);case"audit-logs":return A(ce);case"user-groups":return b(ce);case"integration-federated-auth":return q(ce);case"integration-ssh-tunnel":return fe(ce);case"integration-github-package":return oe(ce);case"sql-query-caching":return z;case"ai-code-completion":return B;case"deepnote-ai":return U;case"deepnote-ai-usage":return G;case"cloudbuild":return ie(ce);case"notebook-limit":return f;default:(0,c.x)(h)}},i=h=>({title:`Manage access to your workspace with the ${(0,o.Hb)({name:l.uW.PRO,version:h})} plan`,list:["Set granular permissions for team members.","Add editors without giving them Admin permissions."],upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"workspace-permissions",image:"/static/upsell-modals/editor-limit.webp"}),p=h=>({title:`Manage access to your workspace with the ${(0,o.Hb)({name:l.uW.PRO,version:h})} plan`,list:["Set granular permissions for team members.","Add editors without giving them Admin permissions."],upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"workspace-permissions-generate-link",image:"/static/upsell-modals/editor-limit.webp"}),u=h=>({title:"Upgrade now to add unlimited members",subtitle:`You can still continue adding unlimited Viewers, or you can upgrade your plan to enjoy ${(0,o.Hb)({name:l.uW.PRO,version:h})} benefits, such as: `,list:["Add unlimited admins and editors for seamless collaboration.","Customize member permissions to keep your workspace secure."],upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"limit-editors",image:"/static/upsell-modals/editor-limit.webp"}),g=h=>{const ce=(0,o.Hb)({name:l.uW.PRO,version:h});return{title:`Create more projects with the ${ce} plan`,list:["Create unlimited projects","Organize projects into folders to keep your workspace clean",`Enjoy other ${ce} benefits, including unlimited team members`],image:"/static/upsell-modals/project-limit.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"limit-projects"}},y=h=>({title:"Upgrade now to create folders",list:["Organize your projects in folders, so your work is easy to find",`Enjoy other ${(0,o.Hb)({name:l.uW.PRO,version:h})} benefits, including unlimited projects and team members`],image:"/static/upsell-modals/project-limit.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"folders"}),T=h=>({title:`Keep your dashboards secure with the ${(0,o.Hb)({name:l.uW.PRO,version:h})} plan`,subtitle:"Set granular permissions on published apps, so you can ensure that your work is not accessible to anyone outside your team.",image:"/static/upsell-modals/public-app-sharing-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"publishing-permissions"}),C={title:"Upgrade to schedule your notebooks",list:["Schedule notebooks to run from hourly up to monthly intervals.","Receive instant email notifications about your notebook's results.","Review past runs in version history."],image:"/static/upsell-modals/scheduling-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"scheduling"},m={title:"Upgrade now to connect to Redshift ",list:["Query your Redshift data directly from your notebooks","Combine SQL queries with Python for ultimate flexibility"],image:"/static/upsell-modals/redshift-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-redshift"},O={title:"Upgrade now to connect to Snowflake",list:["Query your Snowflake data directly from your notebooks","Combine SQL queries with Python for ultimate flexibility"],image:"/static/upsell-modals/snowflake-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-snowflake"},W={title:"Upgrade now to connect to Dremio",list:["Query your Dremio data directly from your notebooks","Combine SQL queries with Python for ultimate flexibility"],image:"/static/upsell-modals/dremio-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-dremio"},K={title:"Upgrade now to connect to Databricks",list:["Query your Databricks lakehouse directly from your notebooks","Combine SQL queries with Python for ultimate flexibility"],image:"/static/upsell-modals/databricks-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-databricks"},H={title:"Upgrade now to connect to BigQuery",list:["Query your Bigquery data directly from your notebooks","Combine SQL queries with Python for ultimate flexibility"],image:"/static/upsell-modals/bigquery-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-bigquery"},N={title:"Upgrade now to connect to Trino",list:["Query your Trino data directly from your notebooks","Combine SQL queries with Python for ultimate flexibility"],image:"/static/upsell-modals/trino-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-trino"},w={title:"Upgrade now to connect to SQL Server",list:["Query your SQL Server data directly from your notebook","Combine SQL queries with Python for ultimate flexibility"],image:"/static/upsell-modals/sqlserver-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-sql-server"},k={title:"Upgrade now to connect to your cloud storage",list:["Read data from GCS directly into your notebooks","Integrate with other Google services such as Google BigQuery"],image:"/static/upsell-modals/googlecloud-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-gcs"},F={title:"Upgrade now to connect to your S3 buckets",list:["Read data from S3 buckets directly into your notebooks","Integrate with other AWS services such as Athena and Redshift"],image:"/static/upsell-modals/s3-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-s3"},X={title:"Upgrade now to query with Athena",list:["Query your S3 data directly from your notebook","Combine SQL queries with Python for ultimate flexibility"],image:"/static/upsell-modals/athena-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-athena"},z={title:"Upgrade now to speed up SQL queries with caching",list:["Improve notebook performance with cached results for recently run SQL queries","Take control of your database/warehouse costs with granular caching controls"],image:"/static/upsell-modals/sql-query-caching-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"sql-query-caching"},B={title:"Get instant code suggestions with AI completion",list:["AI completion speeds up coding and reduces errors, allowing you to focus on complex tasks.","Get suggestions for cleaner, maintainable code that's easier to understand and modify."],image:"/static/upsell-modals/ai-code-completion-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"ai-code-completion"},U={title:"Upgrade and get contextual AI help in notebooks",list:["Boost productivity with Deepnote AI, your on-demand coding ally","Ask questions in natural language and let AI generate answers","Easily debug, fix or explain code with automated AI help"],image:"/static/upsell-modals/ai-disabled-feature-gate-upsell.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"deepnote-ai"},G={title:"Unlock the power of AI for your data analysis",subtitle:(0,e.jsxs)(r.E,{children:["As a Free user, you receive ",(0,e.jsx)(d.B.span,{fontWeight:"bold",children:"30 AI prompts"})," per month, allowing you to make up to ",(0,e.jsx)(d.B.span,{fontWeight:"bold",children:"30 AI prompts"})," within each"," ",(0,e.jsx)(d.B.span,{fontWeight:"bold",children:"month"}),". On the 1st of every month, your quota resets, providing you with a fresh set of ",(0,e.jsx)(d.B.span,{fontWeight:"bold",children:"30 AI prompts"}),"."]}),list:["Boost productivity with Deepnote AI, your on-demand coding ally","Ask questions in natural language and let AI generate answers","Easily debug, fix or explain code with automated AI help"],image:"/static/upsell-modals/ai-disabled-feature-gate-upsell.webp",cta:"deepnote-ai-addon",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"deepnote-ai-usage"},f={title:"Upgrade to create more notebooks",subtitle:`Your current plan doesn't allow you to create more than ${s.lp} notebooks within a single project. Upgrade to a paid plan to create unlimited notebooks.`,upgradePageTrackingSource:"throttled-feature-cta",upgradePageTrackingSourceFeature:"notebook-limit"},I=h=>({title:"Upgrade to connect private docker images",subtitle:`Your current plan doesn\u2019t allow you to connect to private Docker Hub images. Upgrade to the ${(0,o.Hb)({name:l.uW.ENTERPRISE,version:h})} plan to enable this feature.`,image:"/static/upsell-modals/dockerhub-2-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-dockerhub"}),E=h=>{const ce=(0,o.Hb)({name:l.uW.ENTERPRISE,version:h});return{title:`Private ECR images are on the ${ce} plan`,subtitle:`Your current plan doesn\u2019t allow you to connect to private GCR and ECR docker images. Upgrade to the ${ce} plan to enable this feature.`,image:"/static/upsell-modals/ECR-2-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-ecr"}},D=h=>{const ce=(0,o.Hb)({name:l.uW.ENTERPRISE,version:h});return{title:`Private GCR images are on the ${ce} plan`,subtitle:`Your current plan doesn\u2019t allow you to connect to private GCR and ECR docker images. Upgrade to the ${ce} plan to enable this feature.`,image:"/static/upsell-modals/GCR-2-feature-gate.webp",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-gcr"}},R={title:"Speed up your work with powerful machines",subtitle:"",list:["Upgrade now for stronger machines","Run notebooks faster with more RAM and computation power","Enjoy other benefits, including unlimited projects and team members"],upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"stronger-machines"},L={title:"Control who can access projects",subtitle:"",list:["Invite collaborators to only comment or execute on your projects","Make your projects private in your workspace and share them once they are ready"],upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"project-permissions-team"},x=h=>({title:"Upgrade now to remove labels",list:["Remove Deepnote branding from exported notebooks",`Enjoy other ${(0,o.Hb)({name:l.uW.PRO,version:h})} benefits, including unlimited projects and team members`],upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"whitelabelling-ipynb"}),ne=h=>({title:"Execute notebooks anywhere, anytime",subtitle:`Upgrade to ${(0,o.Hb)({name:l.uW.PRO,version:h})} to generate an API key that allows you to execute Deepnote notebooks from anywhere.`,upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"api-execute"}),M=h=>({title:"Upgrade now to keep your machine on longer",subtitle:"Keep your notebooks live for up to 24 hours, so you don\u2019t need to worry about losing any progress overnight.",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"hardware-shutdown"}),A=h=>({title:"Upgrade and export the workspace audit log",subtitle:"Upgrade to the Enterprise plan and export a .CSV of the workspace activity from all members.",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"audit-logs",image:"/static/upsell-modals/audit-logs.webp"}),b=h=>({title:"Upgrade to create and manage Groups",subtitle:"Organize workspace members into groups, which allows you to share projects with a group of users in one click, instead of individually.",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"user-groups"}),q=h=>({title:"Upgrade and use OAuth access for integrations",subtitle:"Upgrade to the Enterprise plan and configure additional access types that will require each user to authenticate when they want to run a project containing sensitive information.",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-federated-auth"}),fe=h=>({title:"Upgrade now to create an SSH Tunnel",subtitle:"Upgrade Connect to resources in a secure network.",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-ssh-tunnel",image:"/static/upsell-modals/ssh-tunnel-feature-gate.webp"}),oe=h=>({title:"Upgrade now to connect your GitHub repo",list:["Import packages or files from your repository","Available for both private & public repositories"],upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"integration-github-package",image:"/static/upsell-modals/github-package-gate.webp"}),ie=h=>({title:"Upgrade to build your Dockerfile inside Deepnote",subtitle:"Docker building is a paid feature. Upgrade to a paid plan to build your own Docker environment with Deepnote.",upgradePageTrackingSource:"paid-feature-cta",upgradePageTrackingSourceFeature:"cloudbuild"})},27529:($,_,t)=>{"use strict";t.d(_,{F6:()=>m,fC:()=>O,fx:()=>K,ye:()=>W,sp:()=>H});var e=t(45470),o=t(94270),c=t(87435),l=t(51881),r=t(45399),d=t.n(r),s=t(29828),a=t.n(s),n=t(63998),i=t(34158),p=t(48154);function u(N,w,k){let F=0;return(0,p.Ay)(k,X=>{X.databases.forEach(z=>{w.databaseId&&z.id!==w.databaseId||w.databaseName&&z.name!==w.databaseName||z.schemas.forEach(B=>{w.schemaName&&B.name!==w.schemaName||B.tables.forEach(U=>{if(U.name===w.tableName){if(F++,F>1)throw new Error(`Found multiple tables named ${w.tableName}`);U.columns=N}})})})})}const g=(0,o.J1)`
  query GetIntegrationStructure($integrationId: String!, $invalidateCache: Boolean) {
    integrationStructure(integrationId: $integrationId, invalidateCache: $invalidateCache) {
      fetchType
      databases {
        isDummy
        name
        id
        errorMessage
        schemas {
          name
          tables {
            type
            name
            columns {
              name
              type
            }
          }
        }
      }
      createdAt
    }
  }
`,y=(0,o.J1)`
  query PrepareIntegrationStructure($integrationId: String!, $invalidateCache: Boolean) {
    integrationStructure(integrationId: $integrationId, invalidateCache: $invalidateCache) {
      fetchType
      createdAt
    }
  }
`,T=(0,o.J1)`
  query GetIntegrationColumns(
    $integrationId: String!
    $databaseName: String
    $databaseId: String
    $schemaName: String
    $tableName: String!
  ) {
    integrationColumns(
      integrationId: $integrationId
      databaseName: $databaseName
      databaseId: $databaseId
      schemaName: $schemaName
      tableName: $tableName
    ) {
      name
      type
    }
  }
`,C=(0,n.createContext)({hasIntegrationStructure:()=>!1,getIntegrationStructure:()=>Promise.reject(new Error("IntegrationStructureCacheContext not initialized")),getIntegrationStructureColumns:()=>Promise.reject(new Error("IntegrationStructureCacheContext not initialized")),prepareIntegrationStructure:()=>Promise.reject(new Error("IntegrationStructureCacheContext not initialized")),subscribeToUpdates:()=>()=>{}}),m=(0,n.memo)(function(w){const k=(0,c.m)(),F=(0,n.useRef)({}),X=(0,n.useRef)({}),z=(0,n.useRef)({}),B=(0,n.useCallback)((R,L)=>{z.current[R]?.forEach(x=>x(L))},[]),U=(0,n.useCallback)((R,L)=>(z.current[R]||(z.current[R]=new Set),z.current[R].add(L),()=>{z.current[R]?.delete(L),z.current[R]?.size===0&&delete z.current[R]}),[]),G=(0,n.useCallback)(R=>!!F.current[R],[]),f=(0,n.useCallback)((R,L={})=>{const x={refresh:!1,invalidateCache:!1,...L},ne=F.current[R];if(ne&&!x.refresh&&!x.invalidateCache)return Promise.resolve(ne);if(a()(x,X.current[R]?.params))return X.current[R]?.promise;const M=k.query({query:g,variables:{integrationId:R,invalidateCache:x.invalidateCache},fetchPolicy:"no-cache"}).then(({data:A,errors:b})=>{if(delete X.current[R],b)throw F.current[R]=null,new Error(b.map(fe=>fe.message).join(`
`));const q=A.integrationStructure??null;if(!q)throw F.current[R]=null,new Error(`Integration structure not found for integration ${R}`);return F.current[R]=q,ne&&!x.invalidateCache?ne:(F.current[R]=q,B(R,q),q)});return X.current[R]={params:x,promise:M},M},[k,B]),I=(0,n.useCallback)((R,L)=>{const x=F.current[R];if(!x)throw new Error(`Integration structure not found for integration ${R}`);if(x?.fetchType!=="none"){const M=(0,i.z8)(x,{integrationId:R,...L})?.columns;if(Array.isArray(M))return Promise.resolve(M)}return k.query({query:T,variables:{integrationId:R,databaseId:L.databaseId??null,databaseName:L.databaseName??null,schemaName:L.schemaName??null,tableName:L.tableName},fetchPolicy:"cache-first"}).then(({data:M})=>{if(!M.integrationColumns)throw new Error(`Integration structure columns not found for integration ${R}, databaseName: ${L.databaseName}, databaseId: ${L.databaseId}, schemaName: ${L.schemaName}, tableName: ${L.tableName}`);const A=M.integrationColumns??[],b=d()(x);try{const q=u(A,L,b);return F.current[R]=q,B(R,q),A}catch(q){(0,l.H)(new Error("Failed to merge integration structure columns: "+q),"warning")}return[]})},[k,B]),E=(0,n.useCallback)(async(R,L={})=>{F.current[R]&&!L.refresh&&!L.invalidateCache||await k.query({query:y,variables:{integrationId:R,invalidateCache:!!L.invalidateCache},fetchPolicy:"no-cache"})},[k]),D=(0,n.useMemo)(()=>({hasIntegrationStructure:G,getIntegrationStructure:f,getIntegrationStructureColumns:I,subscribeToUpdates:U,prepareIntegrationStructure:E}),[G,f,I,U,E]);return(0,e.jsx)(C.Provider,{value:D,children:w.children})});function O(N){const{hasIntegrationStructure:w,getIntegrationStructure:k,subscribeToUpdates:F}=(0,n.useContext)(C),[X,z]=(0,n.useState)({integrationStructure:null,loading:!1,error:null}),B=(0,n.useRef)(null),U=(0,n.useCallback)(I=>{z(E=>({...E,integrationStructure:I,loading:!1,error:null}))},[]);(0,n.useEffect)(()=>{const I=F(N.integrationId,U);return()=>{I()}},[N.integrationId,F,U]);const G=(0,n.useCallback)(I=>{k(N.integrationId,{refresh:I.refresh,invalidateCache:I.invalidateCache}).then(E=>{I.abortSignal.aborted||z(D=>({...D,integrationStructure:E,loading:!1,error:null}))},E=>{I.abortSignal.aborted||E.name==="AbortError"||z(D=>({...D,integrationStructure:null,loading:!1,error:E}))})},[N.integrationId,k]),f=(0,n.useCallback)(I=>{B.current?.abort();const E=new AbortController;B.current=E,z(D=>({...D,loading:!0,error:null})),G({...I,refresh:!0,abortSignal:E.signal})},[G]);return(0,n.useEffect)(()=>{B.current?.abort();const I=new AbortController;B.current=I,w(N.integrationId)||z(E=>({...E,loading:!0,error:null})),G({refresh:!1,invalidateCache:!1,abortSignal:I.signal})},[N.integrationId,w,G]),(0,n.useEffect)(()=>()=>{B.current?.abort()},[]),{...X,refetch:f}}function W(N){const{hasIntegrationStructure:w,getIntegrationStructure:k}=(0,n.useContext)(C),[F,X]=(0,n.useState)({}),z=(0,n.useRef)(null),B=(0,n.useCallback)(U=>{k(U.integrationId,{refresh:!1,invalidateCache:!1}).then(G=>{U.abortSignal.aborted||X(f=>({...f,[U.integrationId]:{integrationStructure:G,loading:!1,error:null,fetched:!0}}))},G=>{U.abortSignal.aborted||G.name==="AbortError"||X(f=>({...f,[U.integrationId]:{integrationStructure:null,loading:!1,error:G,fetched:!0}}))})},[k]);return(0,n.useEffect)(()=>{z.current?.abort();const U=new AbortController;return z.current=U,X(G=>{const f={...G};return Object.keys(f).forEach(I=>{N.includes(I)||delete f[I]}),N.forEach(I=>{f[I]||(f[I]={integrationStructure:null,loading:!1,error:null,fetched:!1}),(!w(I)||!f[I].fetched)&&(f[I]={...f[I],loading:!0,error:null},B({integrationId:I,abortSignal:U.signal}))}),f}),()=>{z.current?.abort()}},[N,B,w]),Object.fromEntries(Object.entries(F).map(([U,G])=>[U,G.integrationStructure]))}function K(){const{getIntegrationStructure:N,getIntegrationStructureColumns:w,subscribeToUpdates:k}=(0,n.useContext)(C),F=(0,n.useRef)(null),X=(0,n.useRef)(null),z=(0,n.useRef)(null);(0,n.useEffect)(()=>{const f=k("*",I=>{z.current=I});return()=>{f()}},[k]);const B=(0,n.useCallback)(G=>{F.current?.abort();const f=new AbortController;return F.current=f,N(G.integrationId,{invalidateCache:G.invalidateCache}).then(I=>(f.signal.throwIfAborted(),z.current=I,{integrationStructure:I,error:null}),I=>({integrationStructure:null,error:I}))},[N]),U=(0,n.useCallback)(G=>{X.current?.abort();const f=new AbortController;return X.current=f,w(G.integrationId,G.params).then(I=>(f.signal.throwIfAborted(),{columns:I,error:null}),I=>({columns:null,integrationStructure:null,error:I}))},[w]);return(0,n.useEffect)(()=>()=>{F.current?.abort(),X.current?.abort()},[]),{fetchIntegrationStructure:B,fetchIntegrationStructureColumns:U}}function H(){const{prepareIntegrationStructure:N}=(0,n.useContext)(C),w=(0,n.useRef)(null);return{prepare:(0,n.useCallback)(F=>{w.current?.abort();const X=new AbortController;w.current=X,N(F.integrationId,{refresh:!0,invalidateCache:F.invalidateCache}).catch(z=>{X.signal.aborted||z.name==="AbortError"||console.warn("Failed to prepare integration structure",F.integrationId,z)})},[N])}}},87106:($,_,t)=>{"use strict";t.d(_,{VG:()=>g,t$:()=>p});var e=t(45470),o=t(38435),c=t(19550),l=t(25395),r=t(31976),d=t(63998),s=t(23773),a=t(15479);const n={redirectToProjectRoot:()=>{},redirectToProjectNotebook:()=>{},redirectToProjectNotebookEditorView:()=>{},redirectToProjectFile:()=>{},redirectToProjectTerminal:()=>{}},i=(0,d.createContext)(n);function p(T){const C=(0,s.W6)(),m=(H,N)=>{if(N===C.location.pathname+C.location.search+C.location.hash){(0,a.Yz)("not redirecting, already on the same page");return}switch(H){case"push":C.push(N);break;case"replace":C.replace(N);break;default:(0,c.x)(H)}},O={redirectToProjectRoot:()=>{if((0,a.Yz)("redirectToProjectRoot"),T.workspaceSlugWithId&&T.projectSlug){const H=C.location.search+C.location.hash;m("push",`${o.JZ.workspaceProjectPath(T.workspaceSlugWithId,T.projectSlug)}${H}`)}},redirectToProjectNotebook:(H,N,w={})=>{if((0,a.Yz)("redirectToProjectNotebook",{nextNotebookId:H,nextNotebookName:N,...w}),T.workspaceSlugWithId&&T.projectSlug){const k=C.location.search,F=(0,l.IM)(H,N);m(w.replace?"replace":"push",`${o.JZ.workspaceProjectNotebookPath(T.workspaceSlugWithId,T.projectSlug,F)}${k}${w.blockId?`#${w.blockId}`:""}`)}},redirectToProjectNotebookEditorView:()=>{if((0,a.Yz)("redirectToProjectNotebookEditorView"),T.workspaceSlugWithId&&T.projectSlug&&T.notebookSlug){const H=C.location.search+C.location.hash;m("replace",`${o.JZ.workspaceProjectNotebookPath(T.workspaceSlugWithId,T.projectSlug,T.notebookSlug)}${H}`)}},redirectToProjectFile:(H,N={})=>{if((0,a.Yz)("redirectToProjectFile",{nextFilePath:H,...N}),T.workspaceSlugWithId&&T.projectSlug){const w=new URLSearchParams(C.location.search);N.raw?w.set("raw",""):w.delete("raw"),m(N.replace?"replace":"push",`${o.JZ.workspaceProjectPath(T.workspaceSlugWithId,T.projectSlug)}/${H}${y(w)}`)}},redirectToProjectTerminal:(H,N={})=>{if((0,a.Yz)("redirectToProjectTerminal",{nextTerminalId:H}),T.workspaceSlugWithId&&T.projectSlug){const w=C.location.search;m(N.replace?"replace":"push",`${C.location.pathname}${w}#${r.uX}${H}`)}}},W=(0,d.useRef)(O);W.current=O;const[K]=(0,d.useState)(()=>new Proxy(O,{has:(H,N)=>N in W.current,get:(H,N)=>W.current[N]}));return(0,e.jsx)(i.Provider,{value:K,children:T.children})}function u(T){const{onRedirectRequest:C}=T,m=useMemo(()=>({redirectToProjectRoot:()=>C({type:"root"}),redirectToProjectNotebook:(O,W,K={})=>C({type:"notebook",id:O,name:W,blockId:K.blockId??null}),redirectToProjectNotebookEditorView:()=>C({type:"notebook-editor"}),redirectToProjectFile:(O,W={})=>C({type:"file",filePath:O,raw:W.raw??!1}),redirectToProjectTerminal:O=>C({type:"terminal",terminalId:O})}),[C]);return jsx(i.Provider,{value:m,children:T.children})}const g=()=>(0,d.useContext)(i);function y(T){const C=T.toString().replace(/=(&|$)/g,"$1");return C?`?${C}`:""}},32369:($,_,t)=>{"use strict";t.d(_,{WS:()=>n,hE:()=>i,c:()=>p,MG:()=>g,Rv:()=>y,qC:()=>u});var e=t(50664),o=t(90706),c=t(45470),l=t(54507);const r=(0,l.w)({displayName:"Users01DuotoneIcon",viewBox:"0 0 24 24",path:(0,c.jsxs)("g",{fill:"none",children:[(0,c.jsx)("path",{opacity:"0.12",d:"M9.5 11C11.7091 11 13.5 9.20914 13.5 7C13.5 4.79086 11.7091 3 9.5 3C7.29086 3 5.5 4.79086 5.5 7C5.5 9.20914 7.29086 11 9.5 11Z",fill:"currentColor"}),(0,c.jsx)("path",{d:"M22 21V19C22 17.1362 20.7252 15.5701 19 15.126M15.5 3.29076C16.9659 3.88415 18 5.32131 18 7C18 8.67869 16.9659 10.1159 15.5 10.7092M17 21C17 19.1362 17 18.2044 16.6955 17.4693C16.2895 16.4892 15.5108 15.7105 14.5307 15.3045C13.7956 15 12.8638 15 11 15H8C6.13623 15 5.20435 15 4.46927 15.3045C3.48915 15.7105 2.71046 16.4892 2.30448 17.4693C2 18.2044 2 19.1362 2 21M13.5 7C13.5 9.20914 11.7091 11 9.5 11C7.29086 11 5.5 9.20914 5.5 7C5.5 4.79086 7.29086 3 9.5 3C11.7091 3 13.5 4.79086 13.5 7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})});var d=t(21210);const s=(0,l.w)({displayName:"CpuChip01DuotoneIcon",viewBox:"0 0 24 24",path:(0,c.jsxs)("g",{fill:"none",children:[(0,c.jsx)("path",{opacity:"0.12",d:"M9 10.6C9 10.0399 9 9.75992 9.10899 9.54601C9.20487 9.35785 9.35785 9.20487 9.54601 9.10899C9.75992 9 10.0399 9 10.6 9H13.4C13.9601 9 14.2401 9 14.454 9.10899C14.6422 9.20487 14.7951 9.35785 14.891 9.54601C15 9.75992 15 10.0399 15 10.6V13.4C15 13.9601 15 14.2401 14.891 14.454C14.7951 14.6422 14.6422 14.7951 14.454 14.891C14.2401 15 13.9601 15 13.4 15H10.6C10.0399 15 9.75992 15 9.54601 14.891C9.35785 14.7951 9.20487 14.6422 9.10899 14.454C9 14.2401 9 13.9601 9 13.4V10.6Z",fill:"currentColor"}),(0,c.jsx)("path",{d:"M9 2V4M15 2V4M9 20V22M15 20V22M20 9H22M20 14H22M2 9H4M2 14H4M8.8 20H15.2C16.8802 20 17.7202 20 18.362 19.673C18.9265 19.3854 19.3854 18.9265 19.673 18.362C20 17.7202 20 16.8802 20 15.2V8.8C20 7.11984 20 6.27976 19.673 5.63803C19.3854 5.07354 18.9265 4.6146 18.362 4.32698C17.7202 4 16.8802 4 15.2 4H8.8C7.11984 4 6.27976 4 5.63803 4.32698C5.07354 4.6146 4.6146 5.07354 4.32698 5.63803C4 6.27976 4 7.11984 4 8.8V15.2C4 16.8802 4 17.7202 4.32698 18.362C4.6146 18.9265 5.07354 19.3854 5.63803 19.673C6.27976 20 7.11984 20 8.8 20ZM10.6 15H13.4C13.9601 15 14.2401 15 14.454 14.891C14.6422 14.7951 14.7951 14.6422 14.891 14.454C15 14.2401 15 13.9601 15 13.4V10.6C15 10.0399 15 9.75992 14.891 9.54601C14.7951 9.35785 14.6422 9.20487 14.454 9.10899C14.2401 9 13.9601 9 13.4 9H10.6C10.0399 9 9.75992 9 9.54601 9.10899C9.35785 9.20487 9.20487 9.35785 9.10899 9.54601C9 9.75992 9 10.0399 9 10.6V13.4C9 13.9601 9 14.2401 9.10899 14.454C9.20487 14.6422 9.35785 14.7951 9.54601 14.891C9.75992 15 10.0399 15 10.6 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a=(0,l.w)({displayName:"InfinityLineIcon",viewBox:"0 0 24 24",path:(0,c.jsx)("g",{fill:"none",children:(0,c.jsx)("path",{d:"M18.1777 8C23.2737 8 23.2737 16 18.1777 16C13.0827 16 11.0447 8 5.43875 8C0.85375 8 0.85375 16 5.43875 16C11.0447 16 13.0828 8 18.1788 8H18.1777Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),n=`${e.y.runtimeConfig.STRIPE_PUBLIC_KEY}`,i={title:"AI prompts per month",limitDescription:" Upgrade your workspace plan to include unlimited AI.",description:"Upgrade your workspace plan to include unlimited AI.",icon:o.m},p={title:"editors",description:" to your workspace.",limitDescription:"Upgrade your workspace plan to invite more editors.",icon:r},u={title:"projects created",limitDescription:"Upgrade your workspace plan to create more projects.",icon:d.x},g={title:"machine hours used",description:"Your workspace gets 750 free machine hours for every editor.",limitDescription:"Invite more members to get additional machine hours.",icon:s},y={title:"Unlimited machine hours",description:"You can use Basic (5 GB RAM, 2 vCPU) machines. View plans to use more powerful machines.",limitDescription:"",icon:a}},76695:($,_,t)=>{"use strict";t.d(_,{i:()=>s,g:()=>a});var e=t(42191),o=t(67248),c=t.n(o);const l={lake:{nodeSelector:{type:"project",hardware:"lake"},cpuCount:1,resources:{requests:{memory:"3635M",cpu:"210m"},limits:{memory:"5G",cpu:"1000m"}}},sea:{nodeSelector:{type:"project",hardware:"sea"},cpuCount:4,resources:{requests:{"nvidia.com/gpu":"1",memory:"58760M",cpu:"2700m"},limits:{"nvidia.com/gpu":"1",memory:"58820M",cpu:"2800m"}}},super_sea:{nodeSelector:{type:"project",hardware:"super-sea"},cpuCount:8,resources:{requests:{"nvidia.com/gpu":"1",memory:"58760M",cpu:"6620m"},limits:{"nvidia.com/gpu":"1",memory:"58820M",cpu:"6720m"}}},ocean_10:{nodeSelector:{type:"project",hardware:"ocean-10"},cpuCount:8,resources:{requests:{"nvidia.com/gpu":"1",memory:"29000M",cpu:"6620m"},limits:{"nvidia.com/gpu":"1",memory:"29000M",cpu:"6620m"}}},ocean_20:{nodeSelector:{type:"project",hardware:"ocean-20"},cpuCount:8,resources:{requests:{"nvidia.com/gpu":"1",memory:"58000M",cpu:"12000m"},limits:{"nvidia.com/gpu":"1",memory:"60000M",cpu:"14000m"}}},fjord:{nodeSelector:{type:"project",hardware:"fjord"},cpuCount:4,resources:{requests:{memory:"15510M",cpu:"1640m"},limits:{memory:"16G",cpu:"4"}}},ocean:{nodeSelector:{type:"project",hardware:"fjord"},cpuCount:16,resources:{requests:{memory:"62760M",cpu:"7225m"},limits:{memory:"64G",cpu:"14890m"}}},gulf:{nodeSelector:{type:"project",hardware:"fjord"},cpuCount:16,resources:{requests:{memory:"125760M",cpu:"14670m"},limits:{memory:"125760M",cpu:"14670m"}}},eoch_group:{nodeSelector:{type:"project",hardware:"eoch_group"},cpuCount:16,resources:{requests:{memory:"61760M",cpu:"14670m"},limits:{memory:"61760M",cpu:"14670m"}}},eoch_denali:{nodeSelector:{type:"project",hardware:"fjord"},cpuCount:16,resources:{requests:{memory:"125760M",cpu:"14670m"},limits:{memory:"125760M",cpu:"14670m"}}},eoch_elias:{nodeSelector:{type:"project",hardware:"moat"},cpuCount:32,resources:{requests:{memory:"125760M",cpu:"30630m"},limits:{memory:"125760M",cpu:"30630m"}}}};function r(n){const p=l[n].resources.limits?.cpu??"1";return p.endsWith("m")?c()(Number(p.slice(0,-1))/1e3,1):Number(p)}function d(n){return n==="sea"||n==="super_sea"}const s=[e.rR.LAKE,e.rR.FJORD,e.rR.OCEAN,e.rR.GULF,e.rR.OCEAN_10,e.rR.OCEAN_20,e.rR.SEA,e.rR.SUPER_SEA],a={[e.rR.LAKE]:{name:"CPU (Basic)",specs:"2 vCPU, 5 GB memory",billingPageTooltipLabel:"The Basic Free machine is included in all plans.",selectModalFeatures:["Internet access"],cpuCount:r(e.rR.LAKE)},[e.rR.OCEAN_10]:{name:"GPU (T4)",specs:"8 vCPU, 32 GB memory, 16 GB VRAM",selectModalFeatures:["Internet access"],cpuCount:r(e.rR.OCEAN_10)},[e.rR.OCEAN_20]:{name:"GPU (L4)",specs:"16 vCPU, 64 GB memory, 24 GB VRAM",selectModalFeatures:["Internet access"],cpuCount:r(e.rR.OCEAN_20)},[e.rR.SEA]:{name:"GPU (K80)",specs:"4 vCPU, 64 GB memory, 12 GB VRAM",selectModalFeatures:["Internet access"],cpuCount:r(e.rR.SEA),deprecated:!0},[e.rR.SUPER_SEA]:{name:"GPU (V100)",specs:"8 vCPU, 64 GB memory, 16 GB VRAM",selectModalFeatures:["Internet access"],cpuCount:r(e.rR.SUPER_SEA),deprecated:!0},[e.rR.FJORD]:{name:"CPU (Plus)",specs:"4 vCPU, 16 GB memory",selectModalFeatures:["Internet access"],cpuCount:r(e.rR.FJORD)},[e.rR.OCEAN]:{name:"CPU (Performance)",specs:"16 vCPU, 64 GB memory",selectModalFeatures:["Internet access"],cpuCount:r(e.rR.OCEAN)},[e.rR.GULF]:{name:"CPU (High memory)",specs:"16 vCPU, 128 GB memory",selectModalFeatures:["Internet access"],cpuCount:r(e.rR.GULF)},[e.rR.EOCH_GROUP]:{name:"Eoch Team",specs:"16 vCPUs, 64 GB memory",selectModalFeatures:["Dedicated machine"],cpuCount:r(e.rR.EOCH_GROUP)},[e.rR.EOCH_DENALI]:{name:"Eoch Team High-Mem",specs:"16 vCPUs, 128 GB memory",selectModalFeatures:["Dedicated machine"],cpuCount:r(e.rR.EOCH_DENALI)},[e.rR.EOCH_ELIAS]:{name:"Eoch Team High-Mem High-CPU",specs:"32 vCPUs, 128 GB memory",selectModalFeatures:["Dedicated machine"],cpuCount:r(e.rR.EOCH_ELIAS)}}},8719:($,_,t)=>{"use strict";t.d(_,{G:()=>c,u:()=>l});var e=t(94270),o=t(69e3);const c=(0,e.J1)`
  mutation markGettingStartedStepCompleted($workspaceId: String!, $stepId: GETTING_STARTED_STEP_ID_ENUM!) {
    markGettingStartedStepCompleted(team_id: $workspaceId, stepId: $stepId) {
      stepId
      completed
      subSteps {
        stepId
        completed
      }
    }
  }
`,l=r=>{const[d,{loading:s}]=(0,o.n)(c);return{handleMarkGettingStartedStepCompleted:n=>d({variables:{workspaceId:r,stepId:n}}),isLoading:s}}},53833:($,_,t)=>{"use strict";t.d(_,{N9:()=>o,QM:()=>c,U9:()=>e,lp:()=>l});const e={PROJECT:"project",SCHEMA:"schema"},o={COMMENTS:"comments",VERSIONS:"versions"},c={comments:"Comments",versions:"Version history"},l=3},61083:($,_,t)=>{"use strict";t.d(_,{ZV:()=>c,t0:()=>r,z8:()=>l});var e=t(48154),o=t(72687);const c=[o.Up.EXECUTIONS,o.Up.FILE_CHANGES,o.Up.KERNEL,o.Up.HARDWARE,o.Up.NOTEBOOK_SCHEDULE,o.Up.PUBLISHING,o.Up.VERSION_AUTOMATIC,o.Up.VERSION_MANUAL],l={filters:c},r=(d=l,s)=>s.type==="FILTER_HISTORY"?(0,e.jM)(d,a=>{s.isChecked?a.filters=[...a.filters,s.category]:a.filters=a.filters.filter(n=>n!==s.category)}):d},72687:($,_,t)=>{"use strict";t.d(_,{Up:()=>u,dU:()=>g,tz:()=>y});var e=t(48811),o=t(75152),c=t(98262),l=t(8014),r=t(64566),d=t(45470),s=t(54507);const a=(0,s.w)({displayName:"DesktopIcon",viewBox:"0 0 16 16",path:(0,d.jsx)("path",{d:"M14 1.3335H1.99999C1.26666 1.3335 0.666656 1.9335 0.666656 2.66683V10.6668C0.666656 11.4002 1.26666 12.0002 1.99999 12.0002H6.66666V13.3335H5.33332V14.6668H10.6667V13.3335H9.33332V12.0002H14C14.7333 12.0002 15.3333 11.4002 15.3333 10.6668V2.66683C15.3333 1.9335 14.7333 1.3335 14 1.3335ZM14 10.6668H1.99999V2.66683H14V10.6668Z",fill:"#5B768F"})});var n=t(27089),i=t(42218);const u=i.z.enum(["FILE_CHANGES","EXECUTIONS","KERNEL","HARDWARE","NOTEBOOK_SCHEDULE","SNAPSHOT_AUTOMATIC","SNAPSHOT_MANUAL","PUBLISHING","VERSION_AUTOMATIC","VERSION_MANUAL","ANALYTICS"]).enum,g={FILE_CHANGES:"#00D68C",EXECUTIONS:"#F56549",KERNEL:"#F5B218",HARDWARE:"#839DB5",SNAPSHOT_AUTOMATIC:"fg.neutral.secondary",SNAPSHOT_MANUAL:"fg.neutral.secondary",VERSION_AUTOMATIC:"#9042CC",VERSION_MANUAL:"#C83DE3",PUBLISHING:"#00C7E0",NOTEBOOK_SCHEDULE:"#0C9EF7",ANALYTICS:"fg.neutral.secondary"},y={[u.FILE_CHANGES]:e.q,[u.EXECUTIONS]:o.e,[u.KERNEL]:c.U,[u.HARDWARE]:l.V,[u.SNAPSHOT_AUTOMATIC]:r.B,[u.SNAPSHOT_MANUAL]:r.B,[u.VERSION_AUTOMATIC]:r.B,[u.VERSION_MANUAL]:r.B,[u.PUBLISHING]:a,[u.NOTEBOOK_SCHEDULE]:n.O,[u.ANALYTICS]:r.B},T="FILTER_HISTORY"},34158:($,_,t)=>{"use strict";t.d(_,{IT:()=>f,N_:()=>G,vK:()=>D,zF:()=>E,pb:()=>I,QF:()=>w,Pj:()=>b,Fe:()=>fe,vM:()=>U,rp:()=>W,z8:()=>K,_y:()=>O,bn:()=>H});var e=t(51368),o=t(27089),c=t(634),l=t(45470),r=t(54507);const d=(0,r.w)({displayName:"Columns03LineIcon",viewBox:"0 0 24 24",path:(0,l.jsx)("g",{fill:"none",children:(0,l.jsx)("path",{d:"M9 3V21M15 3V21M7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s=(0,r.w)({displayName:"Server02LineIcon",viewBox:"0 0 24 24",path:(0,l.jsx)("g",{fill:"none",children:(0,l.jsx)("path",{d:"M6 8H6.01M6 16H6.01M6 12H18M6 12C3.79086 12 2 10.2091 2 8C2 5.79086 3.79086 4 6 4H18C20.2091 4 22 5.79086 22 8C22 10.2091 20.2091 12 18 12M6 12C3.79086 12 2 13.7909 2 16C2 18.2091 3.79086 20 6 20H18C20.2091 20 22 18.2091 22 16C22 13.7909 20.2091 12 18 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});var a=t(83587),n=t(63376),i=t(41843),p=t(11097),u=t.n(p),g=t(68199),y=t.n(g),T=t(80407),C=t.n(T),m=t(65878);function O(oe,ie,h=[]){if(ie.length!==3)return null;const[ce,ve,Me]=ie,Le=h.find(We=>We.name===ce)?.id??void 0;return{integrationId:oe,databaseId:Le,databaseName:ce,schemaName:ve,tableName:Me}}function W(oe){const ie=[];if(oe.databases.length===1&&oe.databases[0]){const h=oe.databases[0];if(ie.push(U([X(h)])),h.schemas.length===1){const ce=h.schemas[0];ce&&ie.push(U([X(h),z(ce)]))}}return ie}const K=(oe,ie)=>oe.databases.find(h=>h.name===ie.databaseName||h.isDummy&&ie.databaseName===void 0)?.schemas.find(h=>h.name===ie.schemaName)?.tables.find(h=>h.name===ie.tableName)??null;function H(oe){return[oe.databaseName,oe.schemaName,oe.tableName]}function N(oe){return[oe.databaseId??oe.databaseName,oe.schemaName,oe.tableName]}function w(oe,ie){const h=N(oe);return R(h,ie.type)}function k(oe,ie){return{id:(0,m.A)(),path:[],type:oe,isDummy:!0,name:"",errorMessage:ie}}function F(oe,ie,h){return ie.length===1&&ie[0]?.id===""?ie[0]?.children:ie.length===0?[k(oe,h)]:y()(ie,"name")}function X(oe){return oe.isDummy?void 0:oe.name}function z(oe){return oe.name}function B(oe){return oe.name}function U(oe){return oe.join(" / ")}const G=oe=>({id:"",name:"",path:[],isRoot:!0,children:F("database",oe.databases.map(ie=>{const h=[X(ie)];return{id:U(h),path:h,name:ie.name,type:"database",errorMessage:ie.errorMessage??void 0,children:F("schema",ie.schemas.map(ve=>{const Me=[...h,z(ve)];return{id:U(Me),path:Me,name:ve.name,type:"schema",children:F("table",ve.tables.map(We=>{const Ge=[...Me,B(We)];return{id:U(Ge),path:Ge,name:We.name,type:We.type}}))}}),ie.errorMessage??void 0)}}))}),f=oe=>{const ie=[];return oe.databases.forEach(h=>{const ce=[X(h)];h.schemas.forEach(ve=>{const Me=[...ce,z(ve)];ve.tables.forEach(Le=>{const We=[...Me,B(Le)];(Le.columns??[]).forEach(Ge=>{const $e=[...We,Ge.name];ie.push({id:U($e),path:$e,name:Ge.name,type:Ge.type,tableType:Le.type})})})})}),ie},I=(oe,ie)=>{const h=ie(oe);let ce=h?1:0;if(!oe.children)return[h?oe:null,ce];const ve=[];oe.children.forEach(Le=>{const[We,Ge]=I(Le,ie);ce+=Ge,We!==null&&ve.push(We)});const Me=ve.length!==0;return h||Me?[{...oe,children:Me?ve:void 0},ce]:[null,0]};function E(oe){if(oe.fetchType==="none")return null;const ie=oe.databases??[];return C()(ie.flatMap(h=>(h.schemas??[]).flatMap(ve=>(ve.tables??[]).length)))}function D(oe){if(oe.fetchType!=="full")return null;const ie=oe.databases??[];return C()(ie.flatMap(h=>h.schemas.flatMap(ce=>ce.tables.flatMap(ve=>ve.columns?.length??0))))}const R=(oe,ie)=>u()(oe).map(h=>(0,i.wG)(h,ie)).join("."),L=["bool","bit","int","decimal","fixed","numeric","number","float","real"],x=["date","time","year"],ne=["char","text","string","enum"],M=["binary","image"],A=["clob","blob","xml","json"],b=oe=>{const ie=oe.toLowerCase(),h=[];return L.some(ce=>ie.includes(ce))&&h.push(e.A),x.some(ce=>ie.includes(ce))&&h.push(o.O),ne.some(ce=>ie.includes(ce))&&h.push(c.$),M.some(ce=>ie.includes(ce))&&h.push(d),A.includes(ie)&&h.push(d),h.length===1?h[0]:d},q={database:s,schema:a.e,table:n.e,view:n.e};function fe(oe){return oe?q[oe]:null}},95149:($,_,t)=>{"use strict";t.d(_,{QU:()=>a,WA:()=>d,wO:()=>s});var e=t(45470),o=t(14651),c=t(74822),l=t(63998);const r={data:{workspaceId:null,workspaceSlug:null},setData:null};function d(){return(0,l.useContext)(s).data.workspaceId}const s=(0,l.createContext)(r);function a({workspaceSlugWithId:n,children:i}){const p=(0,o.S)()?r.data:(0,c.MG)(n??window.location.pathname),[u,g]=(0,l.useState)(p);return(0,e.jsx)(s.Provider,{value:{data:u,setData:g},children:typeof i=="function"?i({workspaceId:u.workspaceId}):i})}},2400:($,_,t)=>{"use strict";t.d(_,{bz:()=>a,mf:()=>r});var e=t(94270),o=t(64980),c=t(69e3),l=t(63998);const r=(0,e.J1)`
  query GetPayAsYouGoMachinesData($id: String!) {
    team(id: $id) {
      ... on Team {
        id
        payAsYouGoMachinesAllowed
      }
    }
  }
`,d=(0,e.J1)`
  mutation SetPayAsYouGoMachinesAllowed($id: String!, $allowed: Boolean!) {
    setPayAsYouGoMachinesAllowed(team_id: $id, allowed: $allowed) {
      ... on Team {
        id
        payAsYouGoMachinesAllowed
      }
    }
  }
`,s=!0;function a(n){const{data:i,loading:p,error:u}=(0,o.IT)(r,{variables:{id:n},fetchPolicy:"cache-first"}),[g,{error:y}]=(0,c.n)(d),T=(0,l.useCallback)(async C=>{await g({variables:{id:n,allowed:C},optimisticResponse:{setPayAsYouGoMachinesAllowed:{id:n,payAsYouGoMachinesAllowed:C}}})},[g,n]);return{data:{payAsYouGoMachinesAllowed:i?.team?.__typename==="Team"?i.team.payAsYouGoMachinesAllowed:s},mutations:{setPayAsYouGoMachinesAllowed:T},loading:p,error:u,setPayAsYouGoMachinesAllowedError:y}}},1978:($,_,t)=>{"use strict";t.d(_,{n:()=>l});var e=t(94270),o=t(64980);const c=(0,e.J1)`
  query getUserDetails {
    me {
      __typename
      ... on AnonymousProfile {
        id
      }
      ... on Profile {
        id
        is_onboarded
        created_at
        name
        last_name
        email
        isEmailDomainPublic
        avatar
        is_anonymous
        edu_approval
        suspended
        clearbit
        sharedWithMeProjectsCount
        onboardingInfo {
          id
          usage
          teamSize
          motivation
          programmingLanguage
          jobsToBeDone
          referral
          industry
          industryUserInput
          roleTitle
          notebookSolution
          clearbit
          intent
          intentUserInput
          kindOfWork
          kindOfWorkUserInput
        }
        custom_ai_instructions
      }
    }
  }
`;function l(){const{data:r,loading:d,error:s,refetch:a}=(0,o.IT)(c,{fetchPolicy:"cache-first"});return{data:{userDetails:(r?.me?.__typename==="Profile"?r?.me:null)??null},loading:d,error:s,refetch:a}}},34651:($,_,t)=>{"use strict";t.d(_,{s:()=>d});var e=t(94270),o=t(64980),c=t(88563),l=t(47628);const r=(0,e.J1)`
  query GetWorkspacePlan($id: String!) {
    team(id: $id) {
      __typename
      ... on Team {
        activePlan {
          planName
          displayName
          version
          isTrial
          trialExpiresAt
          createdAt
        }
      }
    }
  }
`;function d(s){const{data:a,loading:n}=(0,o.IT)(r,{fetchPolicy:"cache-first",variables:{id:s}});return{data:a?.team?.__typename==="Team"?{...a.team.activePlan,planName:a.team.activePlan.planName}:{planName:l.uW.STANDARD,displayName:"Standard",version:c.J4,isTrial:!1,trialExpiresAt:null,createdAt:Date.now()},loading:n}}},88563:($,_,t)=>{"use strict";t.d(_,{Hb:()=>D,J4:()=>r,et:()=>F,lG:()=>R,rX:()=>f,u0:()=>I});var e=t(95059),o=t(47628),c=t(19550);const l=(0,e.A_)("production"),r=o.A5.VERSION_6,d=o.A5.VERSION_4,s=[o.cn.USE_TEAM],a=[...s,o.cn.UNLIMITED_COLLABORATORS,o.cn.SET_INACTIVITY_GRACE_PERIOD],n=[...s,o.cn.UNLIMITED_COLLABORATORS],i={name:o.uW.STANDARD,features:s,version:r},p={[o.uW.PRO]:l?"price_1HyPWxBD0NYKzyxFlwErxQkU":"price_1HyPVvBD0NYKzyxFLevQKe2l",[o.uW.ENTERPRISE]:l?"price_1K3mOfBD0NYKzyxFdBMMMr2q":"price_1K3mRPBD0NYKzyxFa4BJ0SOE",[o.uW.AI_ADDON]:l?"prod_RAn4QlqB2iNJ1w":"prod_RA7sYPaZi3R7R2"},u={[o.uW.PRO]:l?"prod_IZYeAI3q8NQRRK":"prod_IZYd03d3041ITm",[o.uW.ENTERPRISE]:l?"prod_KjEsYZgbUQE1H8":"prod_KjEvlednl0ZwDC",[o.uW.AI_ADDON]:l?"prod_RAn4QlqB2iNJ1w":"prod_RA7sYPaZi3R7R2"},g={[o.uW.PRO]:l?"price_1LlE0NBD0NYKzyxF7Urhw7py":"price_1LmECNBD0NYKzyxFtPGF9rcX",[o.uW.ENTERPRISE]:l?"price_1LmEQpBD0NYKzyxFDpWbRT3B":"price_1LmEVZBD0NYKzyxF4XsLtvWJ",[o.uW.AI_ADDON]:l?"price_1QIRU1BD0NYKzyxFlfS5EWoE":"price_1QHncqBD0NYKzyxFX6PZBLw1"},y={[o.uW.PRO]:l?"price_1ND7BPBD0NYKzyxFSInGZlqC":"price_1ND5RZBD0NYKzyxF3SMHZaDo",[o.uW.ENTERPRISE]:l?"price_1Ms4GXBD0NYKzyxFdvKWdvoB":"price_1K3mRPBD0NYKzyxFa4BJ0SOE",[o.uW.AI_ADDON]:l?"price_1QIRU1BD0NYKzyxFlfS5EWoE":"price_1QHncqBD0NYKzyxFX6PZBLw1"},T={[o.uW.PRO]:l?"prod_MUCPw981QNT467":"prod_MVEfQZb2DO3DIv",[o.uW.ENTERPRISE]:l?"prod_MVEuNcvCadKTJP":"prod_MVEzHbEOzapYVf",[o.uW.AI_ADDON]:l?"prod_RAn4QlqB2iNJ1w":"prod_RA7sYPaZi3R7R2"},C={[o.uW.PRO]:l?"price_1QCzJlBD0NYKzyxF3pLgZKH9":"price_1QCzD7BD0NYKzyxFzbOAs2i9",[o.uW.ENTERPRISE]:g[o.uW.ENTERPRISE],[o.uW.AI_ADDON]:l?"price_1QIRU1BD0NYKzyxFlfS5EWoE":"price_1QHncqBD0NYKzyxFX6PZBLw1"},m={[o.uW.PRO]:l?"price_1QCzK2BD0NYKzyxFENmlBtNP":"price_1QCzDWBD0NYKzyxFyUm8iv8Y",[o.uW.ENTERPRISE]:y[o.uW.ENTERPRISE],[o.uW.AI_ADDON]:l?"price_1QIRU1BD0NYKzyxFlfS5EWoE":"price_1QHncqBD0NYKzyxFX6PZBLw1"},O={[o.uW.PRO]:T[o.uW.PRO],[o.uW.ENTERPRISE]:T[o.uW.ENTERPRISE],[o.uW.AI_ADDON]:l?"prod_RAn4QlqB2iNJ1w":"prod_RA7sYPaZi3R7R2"},W={[o.uW.PERSONAL]:l?"price_1QjgcoBD0NYKzyxFCpDpv5G4":"price_1Qjd1QBD0NYKzyxFuSs0wk1r",[o.uW.PRO]:C[o.uW.PRO],[o.uW.ENTERPRISE]:C[o.uW.ENTERPRISE],[o.uW.AI_ADDON]:C[o.uW.AI_ADDON]},K={[o.uW.PERSONAL]:l?"price_1QjgcoBD0NYKzyxFudaNDU2V":"price_1QnFsTBD0NYKzyxFHJBzSyBi",[o.uW.PRO]:m[o.uW.PRO],[o.uW.ENTERPRISE]:m[o.uW.ENTERPRISE],[o.uW.AI_ADDON]:m[o.uW.AI_ADDON]},H={[o.uW.PERSONAL]:l?"prod_RcwV6nQbx9QPQY":"prod_RcsmTPPIVMNqXt",[o.uW.PRO]:O[o.uW.PRO],[o.uW.ENTERPRISE]:O[o.uW.ENTERPRISE],[o.uW.AI_ADDON]:O[o.uW.AI_ADDON]},N=null,w={[o.uW.ACADEMIA]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.ACADEMIA,features:a,version:o.A5.USAGE_BASED_BILLING},[o.A5.VERSION_3]:{name:o.uW.ACADEMIA,features:a,version:o.A5.VERSION_3},[o.A5.VERSION_4]:{name:o.uW.ACADEMIA,features:a,version:o.A5.VERSION_3},[o.A5.VERSION_5]:{name:o.uW.ACADEMIA,features:a,version:o.A5.VERSION_5},[o.A5.VERSION_6]:{name:o.uW.ACADEMIA,features:a,version:o.A5.VERSION_6}},[o.uW.ENTERPRISE]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.ENTERPRISE,features:a,version:o.A5.USAGE_BASED_BILLING,stripePriceId:p[o.uW.ENTERPRISE],stripeProductId:u[o.uW.ENTERPRISE]},[o.A5.VERSION_3]:{name:o.uW.ENTERPRISE,features:a,version:o.A5.VERSION_3,stripePriceId:g[o.uW.ENTERPRISE],stripeProductId:T[o.uW.ENTERPRISE]},[o.A5.VERSION_4]:{name:o.uW.ENTERPRISE,features:a,version:o.A5.VERSION_4,stripePriceId:g[o.uW.ENTERPRISE],stripeProductId:T[o.uW.ENTERPRISE]},[o.A5.VERSION_5]:{name:o.uW.ENTERPRISE,features:a,version:o.A5.VERSION_5,stripePriceId:C[o.uW.ENTERPRISE],stripeProductId:O[o.uW.ENTERPRISE]},[o.A5.VERSION_6]:{name:o.uW.ENTERPRISE,features:a,version:o.A5.VERSION_6,stripePriceId:W[o.uW.ENTERPRISE],stripeProductId:H[o.uW.ENTERPRISE]}},[o.uW.ENTERPRISE_TRIAL]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.ENTERPRISE_TRIAL,features:a,version:o.A5.USAGE_BASED_BILLING},[o.A5.VERSION_3]:{name:o.uW.ENTERPRISE_TRIAL,features:a,version:o.A5.VERSION_3},[o.A5.VERSION_4]:{name:o.uW.ENTERPRISE_TRIAL,features:a,version:o.A5.VERSION_4},[o.A5.VERSION_5]:{name:o.uW.ENTERPRISE_TRIAL,features:a,version:o.A5.VERSION_5},[o.A5.VERSION_6]:{name:o.uW.ENTERPRISE_TRIAL,features:a,version:o.A5.VERSION_6}},[o.uW.STANDARD]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.STANDARD,features:s,version:o.A5.USAGE_BASED_BILLING},[o.A5.VERSION_3]:{name:o.uW.STANDARD,features:s,version:o.A5.VERSION_3},[o.A5.VERSION_4]:{name:o.uW.STANDARD,features:s,version:o.A5.VERSION_4},[o.A5.VERSION_5]:{name:o.uW.STANDARD,features:s,version:o.A5.VERSION_5},[o.A5.VERSION_6]:{name:o.uW.STANDARD,features:s,version:o.A5.VERSION_6}},[o.uW.AI_ADDON]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.AI_ADDON,features:[],version:o.A5.USAGE_BASED_BILLING,stripePriceId:C[o.uW.AI_ADDON],stripeProductId:O[o.uW.AI_ADDON]},[o.A5.VERSION_3]:{name:o.uW.AI_ADDON,features:[],version:o.A5.VERSION_3,stripePriceId:C[o.uW.AI_ADDON],stripeProductId:O[o.uW.AI_ADDON]},[o.A5.VERSION_4]:{name:o.uW.AI_ADDON,features:[],version:o.A5.VERSION_4,stripePriceId:C[o.uW.AI_ADDON],stripeProductId:O[o.uW.AI_ADDON]},[o.A5.VERSION_5]:{name:o.uW.AI_ADDON,features:[],version:o.A5.VERSION_5,stripePriceId:C[o.uW.AI_ADDON],stripeProductId:O[o.uW.AI_ADDON]},[o.A5.VERSION_6]:{name:o.uW.AI_ADDON,features:[],version:o.A5.VERSION_6,stripePriceId:W[o.uW.AI_ADDON],stripeProductId:H[o.uW.AI_ADDON]}},[o.uW.PRO]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.PRO,features:a,version:o.A5.USAGE_BASED_BILLING,stripePriceId:p[o.uW.PRO],stripeProductId:u[o.uW.PRO]},[o.A5.VERSION_3]:{name:o.uW.PRO,features:a,version:o.A5.VERSION_3,stripePriceId:y[o.uW.PRO],stripePriceMonthlyId:g[o.uW.PRO],stripeProductId:T[o.uW.PRO]},[o.A5.VERSION_4]:{name:o.uW.PRO,features:a,version:o.A5.VERSION_4,stripePriceId:y[o.uW.PRO],stripePriceMonthlyId:g[o.uW.PRO],stripeProductId:T[o.uW.PRO]},[o.A5.VERSION_5]:{name:o.uW.PRO,features:a,version:o.A5.VERSION_5,stripePriceId:m[o.uW.PRO],stripePriceMonthlyId:C[o.uW.PRO],stripeProductId:O[o.uW.PRO]},[o.A5.VERSION_6]:{name:o.uW.PRO,features:a,version:o.A5.VERSION_6,stripePriceId:K[o.uW.PRO],stripePriceMonthlyId:W[o.uW.PRO],stripeProductId:H[o.uW.PRO]}},[o.uW.PRO_TRIAL]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.PRO_TRIAL,features:a,version:o.A5.USAGE_BASED_BILLING},[o.A5.VERSION_3]:{name:o.uW.PRO_TRIAL,features:a,version:o.A5.VERSION_3},[o.A5.VERSION_4]:{name:o.uW.PRO_TRIAL,features:a,version:o.A5.VERSION_4},[o.A5.VERSION_5]:{name:o.uW.PRO_TRIAL,features:a,version:o.A5.VERSION_5},[o.A5.VERSION_6]:{name:o.uW.PRO_TRIAL,features:a,version:o.A5.VERSION_6}},[o.uW.HW_SUBSCRIPTION]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.HW_SUBSCRIPTION,features:[o.cn.PAID_HARDWARE],version:o.A5.USAGE_BASED_BILLING},[o.A5.VERSION_3]:{name:o.uW.HW_SUBSCRIPTION,features:[o.cn.PAID_HARDWARE],version:o.A5.VERSION_3},[o.A5.VERSION_4]:{name:o.uW.HW_SUBSCRIPTION,features:[o.cn.PAID_HARDWARE],version:o.A5.VERSION_4},[o.A5.VERSION_5]:{name:o.uW.HW_SUBSCRIPTION,features:[o.cn.PAID_HARDWARE],version:o.A5.VERSION_5},[o.A5.VERSION_6]:{name:o.uW.HW_SUBSCRIPTION,features:[o.cn.PAID_HARDWARE],version:o.A5.VERSION_6}},[o.uW.PERSONAL]:{[o.A5.USAGE_BASED_BILLING]:{name:o.uW.PERSONAL,features:n,version:o.A5.USAGE_BASED_BILLING,stripePriceId:K[o.uW.PERSONAL],stripePriceMonthlyId:W[o.uW.PERSONAL],stripeProductId:H[o.uW.PERSONAL]},[o.A5.VERSION_3]:{name:o.uW.PERSONAL,features:n,version:o.A5.VERSION_3,stripePriceId:K[o.uW.PERSONAL],stripePriceMonthlyId:W[o.uW.PERSONAL],stripeProductId:H[o.uW.PERSONAL]},[o.A5.VERSION_4]:{name:o.uW.PERSONAL,features:n,version:o.A5.VERSION_4,stripePriceId:K[o.uW.PERSONAL],stripePriceMonthlyId:W[o.uW.PERSONAL],stripeProductId:H[o.uW.PERSONAL]},[o.A5.VERSION_5]:{name:o.uW.PERSONAL,features:n,version:o.A5.VERSION_5,stripePriceId:K[o.uW.PERSONAL],stripePriceMonthlyId:W[o.uW.PERSONAL],stripeProductId:H[o.uW.PERSONAL]},[o.A5.VERSION_6]:{name:o.uW.PERSONAL,features:n,version:o.A5.VERSION_6,stripePriceId:K[o.uW.PERSONAL],stripePriceMonthlyId:W[o.uW.PERSONAL],stripeProductId:H[o.uW.PERSONAL]}}},k=(x,ne)=>{const M=w[x]?.[ne];if(!M)throw new Error(`Plan ${x} version: ${ne} does not exist`);return M},F=(x,ne,M=o.A5.USAGE_BASED_BILLING)=>ne.flatMap(b=>{const q=L(b);return k(q,M).features}).includes(x),X=x=>x.find(M=>L(M)===BillingPlanName.HW_SUBSCRIPTION),z=x=>x.find(M=>L(M)!==BillingPlanName.HW_SUBSCRIPTION),B=x=>{switch(x){case BillingPlanName.STANDARD:case BillingPlanName.PRO:case BillingPlanName.PRO_TRIAL:case BillingPlanName.ACADEMIA:case BillingPlanName.AI_ADDON:case BillingPlanName.PERSONAL:return!0;case BillingPlanName.ENTERPRISE:case BillingPlanName.ENTERPRISE_TRIAL:case BillingPlanName.HW_SUBSCRIPTION:return!1;default:assertNever(x)}},U=[o.uW.PRO,o.uW.AI_ADDON,o.uW.ENTERPRISE,o.uW.ACADEMIA],G=x=>U.includes(x),f=x=>{switch(x){case o.uW.PRO_TRIAL:case o.uW.ENTERPRISE_TRIAL:return!0;case o.uW.STANDARD:case o.uW.PRO:case o.uW.ACADEMIA:case o.uW.ENTERPRISE:case o.uW.HW_SUBSCRIPTION:case o.uW.AI_ADDON:case o.uW.PERSONAL:return!1;default:(0,c.x)(x)}},I=x=>{switch(x){case o.uW.PRO_TRIAL:case o.uW.ENTERPRISE_TRIAL:case o.uW.STANDARD:case o.uW.ACADEMIA:case o.uW.HW_SUBSCRIPTION:return!1;case o.uW.PRO:case o.uW.AI_ADDON:case o.uW.ENTERPRISE:case o.uW.PERSONAL:return!0;default:return!1}},E=x=>{if(x.length===0)return r;const ne=x[0];return typeof ne.plan_version=="number"?ne.plan_version:ne.version},D=x=>x.name===o.uW.AI_ADDON?"Unlimited AI":x.name===o.uW.PERSONAL?"Pro":x.name===o.uW.STANDARD?x.version===o.A5.VERSION_2?"Standard":"Free":x.name===o.uW.PRO||x.name===o.uW.PRO_TRIAL?x.version===o.A5.VERSION_2?"Pro":"Team":x.name===o.uW.ENTERPRISE||x.name===o.uW.ENTERPRISE_TRIAL?"Enterprise":x.name===o.uW.ACADEMIA?"Education":x.name===o.uW.HW_SUBSCRIPTION?"Hardware Subscription":"Standard",R=x=>{const ne=D(x);return f(x.name)?`${ne}-trial`:ne},L=x=>typeof x=="object"?typeof x.plan_name<"u"?x.plan_name:x.name:x},50664:($,_,t)=>{"use strict";t.d(_,{y:()=>K});var e=t(14651);const{AWS_ACCOUNT_ID:o,ENV:c,STRIPE_PUBLIC_KEY:l,RECAPTCHA_SITE_KEY:r,HCAPTCHA_SITE_KEY:d,SECOND_RECAPTCHA_SITE_KEY:s,TOP_MESSAGE_COLOR_HEX_WITHOUT_HASH:a,TOP_MESSAGE_STRING:n,IS_SINGLE_TENANCY:i,SINGLE_TENANT_TUNNELING_DOMAIN:p,SINGLE_TENANT_OUTPUT_DOMAIN:u,SINGLE_TENANT_NAME:g,SPRIG_ENVIRONMENT_ID:y,FB_APP_ID:T,NAT_GATEWAY_IPS:C,SENTRY_TRACES_SAMPLE_RATE:m}={},O=C?C.replace(/\n|\r/g,"").split(","):[],W=(0,e.S)()?c:window.__env,K={buildTimeConfig:{PERF_HIGHLIGHTER_ENABLED:{}.PERF_HIGHLIGHTER_ENABLED==="true",REACT_STRICT_MODE_ENABLED:{}.REACT_STRICT_MODE_ENABLED==="true",NODE_ENV:"production",AMPLITUDE_EXPERIMENT_SERVER_KEY:{}.AMPLITUDE_EXPERIMENT_SERVER_KEY},runtimeConfig:{AWS_ACCOUNT_ID:(0,e.S)()?o:window.__AWS_ACCOUNT_ID,ENV:W,FLAGS:(0,e.S)()?{}:window.__flags,DEEPNOTE_ENV:W,TOP_MESSAGE_STRING:(0,e.S)()?n:window.__preloadedState?.experimentalMessage?.message,TOP_MESSAGE_COLOR_HEX_WITHOUT_HASH:(0,e.S)()?a:window.__preloadedState?.experimentalMessage?.color,STRIPE_PUBLIC_KEY:(0,e.S)()?l:window.__STRIPE_PUBLIC_KEY,RECAPTCHA_SITE_KEY:(0,e.S)()?r:window.__RECAPTCHA_SITE_KEY,HCAPTCHA_SITE_KEY:(0,e.S)()?d:window.__HCAPTCHA_SITE_KEY,SECOND_RECAPTCHA_SITE_KEY:(0,e.S)()?s:window.__SECOND_RECAPTCHA_SITE_KEY,IS_SINGLE_TENANCY:(0,e.S)()?i==="true":window.__IS_SINGLE_TENANCY,SINGLE_TENANT_TUNNELING_DOMAIN:(0,e.S)()?p:window.__SINGLE_TENANT_TUNNELING_DOMAIN,SPRIG_ENVIRONMENT_ID:(0,e.S)()?y:window.__SPRIG_ENVIRONMENT_ID,SINGLE_TENANT_OUTPUT_DOMAIN:(0,e.S)()?u:window.__SINGLE_TENANT_OUTPUT_DOMAIN,WEBAPP_CLIENT_SENTRY_DSN:"https://3d44749c87fa4eb59efb1b35811b8216@sentry.io/1320338",SENTRY_TRACES_SAMPLE_RATE:(0,e.S)()?m:window.__SENTRY_TRACES_SAMPLE_RATE,SINGLE_TENANT_NAME:(0,e.S)()?g:window.__SINGLE_TENANT_NAME,PRELOADED_STATE:(0,e.S)()?void 0:window.__preloadedState,NONCE:(0,e.S)()?void 0:window.__nonce,IS_EMBEDDED:(0,e.S)()?!1:!!window.__isEmbedded,FB_APP_ID:(0,e.S)()?T:window.__FB_APP_ID,NAT_GATEWAY_IPS:(0,e.S)()?O:window.__NAT_GATEWAY_IPS}}},74250:($,_,t)=>{"use strict";t.d(_,{y:()=>o.a});var e=t(65799),o=t.n(e),c=t(67584),l=t.n(c),r=t(21268),d=t.n(r);o().extend(d()),o().extend(l())},50384:($,_,t)=>{"use strict";t.r(_),t.d(_,{aboutYouNextButton:()=>e,addBlockButton:()=>o,addBlockCode:()=>c,addBlockSql:()=>l,addBlockTextCellP:()=>r,addBlockVisualization:()=>d,addCardDetailsBtn:()=>s,addComment:()=>a,addNewIntegration:()=>n,anonymousWorkspaceSwitcherTrigger:()=>i,appBuilderPublishButton:()=>p,applyInput:()=>u,articleLayoutButton:()=>g,athenaRegionInput:()=>y,authorizeGdriveBtn:()=>T,availableIntegrationsList:()=>C,bigNumber:()=>m,bigqueryClientIdInput:()=>O,bigqueryClientSecretInput:()=>W,blockAdder:()=>K,breadcrumbs:()=>H,buttonBlock:()=>N,buttonBlockOptions_colorSelect:()=>k,buttonBlockOptions_popover:()=>X,buttonBlockOptions_titleInput:()=>w,buttonBlockOptions_variableName:()=>F,buttonDropdown:()=>z,cardOwnerNameInput:()=>D,cell:()=>R,cellAppAdder:()=>L,cellUnderTest:()=>la,closeTerminal:()=>x,code:()=>ne,codeCellLayout:()=>A,codeCellOutput:()=>b,codeCellStatusIconSuccess:()=>q,collaboratorsModal:()=>fe,comment:()=>ce,commentInput:()=>oe,commentSignifier:()=>ve,commentThreadCopyLink:()=>Le,commentThreadOpenMenu:()=>Me,commentsViewEmptyText:()=>ie,confirmDuplication:()=>h,copyableCodeContent:()=>We,createAppButton:()=>da,createNewIntegration:()=>Ge,createNewNotebook:()=>$e,createNewProject:()=>Qe,createNewProjectBlank:()=>le,createNewProjectTemplate:()=>Ie,createNewWorkspace:()=>P,createTeamAndPayButton:()=>V,createVisualization:()=>Y,csvViewer:()=>te,dashboardLayoutButton:()=>it,dataTable:()=>ke,dataTableBody:()=>qe,dataTableCellContent:()=>at,dataTableColumnHeader:()=>ue,dataTableColumnResizeHandle:()=>Pe,dataTableColumnStats:()=>He,dataTableColumnStatsHistogram:()=>Fe,dataTableHeader:()=>Ne,dataTableNavigation:()=>st,databricksHostInput:()=>mt,databricksHttpPathInput:()=>Et,databricksPortInput:()=>Tt,databricksTokenInput:()=>Q,dataframeFiltersBar:()=>Ae,deleteCell:()=>ht,deleteNotebookItem:()=>pt,deleteTeamBtn:()=>St,dialogCancelButton:()=>Ze,dialogConfirmButton:()=>ct,domainInvitesCheckbox:()=>_t,domainInvitesSwitch:()=>S,dremioHostInput:()=>j,dremioPasswordInput:()=>Ke,dremioPortInput:()=>pe,dremioSchemaInput:()=>et,duplicateNotebookItem:()=>Ee,duplicationModal:()=>de,embedBlockSwitch:()=>be,enterprisePlanButton:()=>we,executeCellAlt:()=>Je,executionControlsDownstream:()=>ot,exportNotebookItem:()=>lt,exportNotebookItemPdf:()=>At,fallbackPage:()=>bt,fileEditor:()=>ut,fileExplorer:()=>yt,fileExplorer_addFile:()=>Dt,fileExplorer_addFolder:()=>kt,fileExplorer_connectAmazonS3:()=>vt,fileExplorer_connectGithub:()=>Rt,fileExplorer_connectGithub_package:()=>Mt,fileExplorer_connectGoogleCloudStorage:()=>Oe,fileExplorer_connectGoogleDrive:()=>_e,fileExplorer_uploadDroparea:()=>me,fileExplorer_uploadFile:()=>se,fileExplorer_uploadFolder:()=>Se,fileExplorer_uploadFromUrl:()=>Te,fileItemRename:()=>xe,githubUrlInput:()=>ee,githubUrlUpload:()=>ae,inputBlockOptions_inputLabel:()=>G,inputBlockOptions_popover:()=>f,inputBlockOptions_variableInput:()=>U,inputBlock_variableNameInput:()=>E,inputBlock_variableNameLabel:()=>I,inputCell:()=>v,inputDate:()=>Z,inputFile:()=>Re,inputSelect:()=>re,inputSlider:()=>ge,inputText:()=>he,inputTextarea:()=>ye,integrationCard:()=>Ve,integrationCreateButton:()=>Xe,integrationNameInput:()=>tt,integrationOptions:()=>gt,integrationSshEnabled:()=>rt,integrationSshHost:()=>Ye,integrationSshPort:()=>Ce,integrationSshUser:()=>De,integrationsCaFile:()=>ft,integrationsTable:()=>ha,inviteMembersAddButton:()=>Be,inviteMembersInput:()=>Ue,joinSelectedWorkspaceButton:()=>ze,joinWorkspaceCheckbox:()=>je,launchWorkspaceSelectorSubmit:()=>nt,manageCollaborators:()=>xt,markdown:()=>Bt,markdownPreview:()=>Ut,menuCardEdit:()=>jt,menuCardText:()=>Wt,modal:()=>Ft,modalClose:()=>Ht,modalCustomerForm_sendButton:()=>Xt,modalHeader:()=>Gt,moduleList:()=>$t,monacoEditor:()=>Kt,mongoDbnameInput:()=>Vt,mongoHostInput:()=>zt,mongoOptionsTextarea:()=>Jt,mongoPasswordInput:()=>Yt,mongoPortInput:()=>Qt,mongoUsernameInput:()=>Zt,newFolderModal_nameInput:()=>qt,newFolderModal_submit:()=>eo,notebookBlockDropArea:()=>to,notebookEmptyStateWrapper:()=>oo,notebookLastBlockDropArea:()=>no,notebookSkeleton:()=>Ta,notebooks_uploadDroparea:()=>ro,onboardingAboutWorkOption:()=>co,onboardingBookDemoContinueButton:()=>uo,onboardingFirstNameInput:()=>ao,onboardingLastNameInput:()=>so,onboardingUsageSelect:()=>io,onboardingUseCase:()=>lo,openAppAndNotebookAnalytics:()=>ma,openAppBuilderButton:()=>po,openEnvironmentModelButton:()=>_a,openExecutionControls:()=>_o,outputIframe:()=>go,pageTitle:()=>fo,permissionDropdownButton:()=>ho,personalPlanButton:()=>Er,planCompareDetails:()=>To,planCompareSimple:()=>yo,popoverTriggerText:()=>Io,postgresAccessKeyIdInput:()=>So,postgresDatabaseNameInput:()=>bo,postgresHostInput:()=>Ao,postgresPortInput:()=>Co,postgresPswdInput:()=>Oo,postgresS3OutputPathInput:()=>Po,postgresSecretAccessKeyInput:()=>vo,postgresUserInput:()=>Do,privateImageAccountIdInput:()=>ko,privateImageHostInput:()=>Ro,privateImagePasswordInput:()=>Mo,privateImageRegionInput:()=>No,privateImageUsernameInput:()=>Lo,privateWorkspaceSidebarActions:()=>wo,proPlanButton:()=>rn,profile:()=>xo,project:()=>Bo,projectList:()=>Uo,projectNameColumn:()=>jo,projectSidebar:()=>Wo,projectSidebarAddNewIntegration:()=>In,projectSidebarEnvironmentSection:()=>Sn,projectSidebarFileExplorer:()=>bn,projectSidebarTableOfContents:()=>An,projectSidebarTerminalSection:()=>Cn,projectSidebarVariableExplorer:()=>On,projectSidebar_addFile:()=>Fo,projectSidebar_newTerminal:()=>Ho,projectStatusIndicator:()=>Go,projectTopbarMenuCommandPalette:()=>zo,projectTopbarMenuCopy:()=>Jo,projectTopbarMenuDelete:()=>Qo,projectTopbarMenuDownload:()=>Zo,projectTopbarMenuDuplicate:()=>Xo,projectTopbarMenuMove:()=>Yo,projectTopbarMenuRedo:()=>qo,projectTopbarMenuReset:()=>en,projectTopbarMenuToggleUi:()=>tn,projectTopbarMenuUndo:()=>on,projectTopbarMenuVersionHistory:()=>nn,projectTopbarToggleComments:()=>Ko,projectTopbarTogglePrefix:()=>Nt,projectTopbarToggleVersions:()=>Vo,projectTopbar_menuTrigger:()=>$o,publishAnywayButton:()=>an,publishButton:()=>sn,publishedAccessDropdown:()=>cn,publishedAccessDropdownCollaborators:()=>ln,publishedAccessDropdownLink:()=>un,publishedAccessDropdownOff:()=>dn,publishedAccessDropdownPublic:()=>pn,publishedAppUrl:()=>ua,publishedChartBlock:()=>_n,publishedCodeCell:()=>mn,publishingEditorClose:()=>En,reLockNotebook:()=>Pn,referralNextButton:()=>Eo,removeCardBtn:()=>gn,removeMemberButton:()=>fn,renameNotebookItem:()=>hn,renamePopoverInput:()=>Tn,resolveThread:()=>pa,revokeGdriveBtn:()=>yn,runNotebook:()=>vn,s3KeyidInput:()=>Dn,s3NameInput:()=>kn,s3SecretkeyInput:()=>Rn,selectHardwareBtn:()=>Nn,selectIndustry:()=>Ln,selectNotebookSolution:()=>wn,selectProgrammingLanguage:()=>xn,selectRoleTitle:()=>Bn,selectTeamSize:()=>Un,separatorBlock:()=>Mn,shareButton:()=>jn,sharedDatasetUploadDroparea:()=>Wn,sharingModal:()=>Fn,sidebarProjectListItem:()=>Hn,sidebarWorkspaceHeadingPrivate:()=>Gn,sidebarWorkspaceHeadingProjects:()=>$n,sidebarWorkspaceHeadingShared:()=>Kn,signIn:()=>Vn,signInButtonEmail:()=>zn,signInButtonNewUserDev:()=>Jn,signInEmailInput:()=>Yn,signInEmailSubmit:()=>Qn,signInModal:()=>Zn,signInPage:()=>Xn,skipAndCreateWorkspaceButton:()=>qn,snowflakeAccountNameInput:()=>er,snowflakeAuthorizationServerInput:()=>tr,snowflakeClientIdInput:()=>or,snowflakeClientResourceInput:()=>nr,snowflakeClientSecretInput:()=>rr,snowflakeClientTenantInput:()=>ar,snowflakeDatabaseInput:()=>sr,snowflakeIdentityProviderInput:()=>ir,snowflakeOktaSubdomainInput:()=>cr,snowflakePasswordInput:()=>lr,snowflakeRoleInput:()=>ur,snowflakeUsernameInput:()=>dr,snowflakeWarehouseInput:()=>pr,sql:()=>M,ssoEmail:()=>_r,standardPlanButton:()=>mr,teamNameInput:()=>gr,teamSettingsContinueBtn:()=>fr,terminal:()=>hr,terminalOptions:()=>Tr,terminalSidebarItem:()=>yr,termsAndPrivacyModal:()=>Ir,testConnectionError:()=>Sr,textCellH1:()=>br,textCellH2:()=>Ar,textCellH3:()=>Cr,textCellP:()=>Or,themeSettingsSelectTrigger:()=>fa,toggleBlockOptions:()=>B,toggleNotebookLock:()=>Pr,toggleProjectTemplate:()=>vr,trialAcknowledgement:()=>Dr,unlockNotebook:()=>Hr,updateTermsAndPrivacyAgreedButton:()=>kr,uploadDropAreaContainer:()=>Mr,uploadDroparea:()=>Rr,uploadErrorClose:()=>wr,uploadedSuccessfully:()=>Nr,uploadedUnsuccessfully:()=>Lr,urlInput:()=>xr,urlUpload:()=>Br,urlUploadModal:()=>Ur,usageNextButton:()=>jr,usageTilePersonal:()=>Wr,usageTileWork:()=>Fr,useCaseNextButton:()=>mo,versionsViewHistorySection:()=>J,visualization:()=>Gr,workDirNotebookItem:()=>$r,workspaceAdminPermissions:()=>Kr,workspaceBreadcrumbButton:()=>Vr,workspaceGettingStarted:()=>zr,workspaceIntegrations:()=>Jr,workspaceInviteNextButton:()=>Yr,workspaceMemberPermissions:()=>Qr,workspaceNameInput:()=>Zr,workspaceNameNextButton:()=>Xr,workspacePageTitle:()=>qr,workspaceSelectorDropdownButton:()=>ea,workspaceSelectorDropdownMenu:()=>ta,workspaceSettings:()=>oa,workspaceSidebar:()=>na,workspaceSidebarActions:()=>It,workspaceSidebarActionsProjectList:()=>wt,workspaceSidebarActions_newEmptyProject:()=>Ot,workspaceSidebarActions_newFolder:()=>Ct,workspaceSidebarActions_newProject:()=>dt,workspaceSidebarActions_newProjectFromTemplate:()=>Pt,workspaceSidebarActions_project:()=>Lt,workspaceSwitcherMenu:()=>ra,workspaceSwitcherMenuBackToWorkspace:()=>aa,workspaceSwitcherTrigger:()=>sa,workspaceTemplateCard:()=>Ea,workspaceTemplateCard_setAsDefault:()=>ga,workspaceUserPermissions:()=>ia,workspaceViewerPermissions:()=>ca});const e="about-you-next-button",o="add-block-button",c="add-block-code",l="add-block-sql",r="add-block-text-cell-p",d="add-block-visualization",s="add-card-details-btn",a="add-comment",n="add-new-integration",i="anonymous-workspace-switcher-trigger",p="app-builder-publish-button",u="apply-input",g="article-layout-button",y="athena-region-input",T="authorize-gdrive-btn",C="available-integrations-list",m="big-number",O="bigquery-client-id-input",W="bigquery-client-secret-input",K="block-adder",H="breadcrumbs",N="button",w="button-block-options_title-input",k="button-block-options_color-select",F="button-block-options_variable-name",X="button-block-options_popover",z="button-dropdown",B="toggle-block-options",U="input-block-options_variable-input",G="input-block-options_input-label",f="input-block-options_popover",I="input-block_variable-name-label",E="input-block_variable-name-input",D="card-owner-name-input",R="cell",L="cell-app-adder",x="close-terminal",ne="code",M="sql",A="code-cell-layout",b="code-cell-output",q="code-cell-status-icon-success",fe="collaborators-modal",oe="comment-input",ie="comments-view-empty-text",h="confirm-duplication",ce="comment",ve="comment-signifier",Me="comment-thread-open-menu",Le="comment-thread-copy-link",We="copyable-code-content",Ge="create-new-integration",$e="create-new-notebook",Qe="create-new-project",le="create-new-project-blank",Ie="create-new-project-template",P="create-new-workspace",V="create-team-and-pay-btn",Y="create-visualization",te="csv-viewer",Ae="dataframe-filters-bar",ke="datatable",Ne="datatable-header",ue="datatable-column-header",Pe="datatable-column-resize-handle",He="datatable-column-stats",Fe="datatable-column-stats-histogram",qe="datatable-body",at="datatable-cell-content",st="datatable-navigation",it="dashboard-layout-button",ht="delete-cell",pt="delete-notebook-item",St="delete-team-btn",Ze="dialog-cancel-button",ct="dialog-confirm-button",_t="domain-invites-checkbox",S="domain-invites-switch",j="dremio-host-input",pe="dremio-port-input",Ke="dremio-pswd-input",et="dremio-schema-input",mt="databricks-host-input",Tt="databricks-port-input",Et="databricks-http-path-input",Q="databricks-token-input",Ee="duplicate-notebook-item",de="duplication-modal",be="embed-block-switch",we="enterprise-plan-button",Je="execute-cell-default-mode",ot="execution-controls-downstream",lt="export-notebook-item",At="export-notebook-item-pdf",bt="fallback-page",ut="file-editor",yt="file-explorer",Dt="file-explorer_add-file",kt="file-explorer_add-folder",vt="file-explorer_connect-amazon-s3",Rt="file-explorer_connect-github",Mt="file-explorer_connect-github_package",Oe="file-explorer_connect-google-cloud-storage",_e="file-explorer_connect-google-drive",me="file-explorer_upload-droparea",se="file-explorer_upload-file",Se="file-explorer_upload-folder",Te="file-explorer_upload-from-url",xe="file-item-rename",ee="github-url-input",ae="github-url-upload",J="versions-view-history-section",v="input-cell",Z="input-date",re="input-select",ge="input-slider",he="input-text",ye="input-textarea",Re="input-file",Ve="integration-card",Xe="integration-create-button",tt="integration-name-input",gt="integration-options",ft="integrations-ca-file",rt="integration-ssh-enabled",Ye="integration-ssh-host",Ce="integration-ssh-port",De="integration-ssh-user",Be="invite-members-add-button",Ue="invite-members-input",ze="join-selected-workspace-button",je="join-workspace-checkbox",nt="launch-workspace-selector-submit",It="workspace-sidebar-actions",Ct="workspace-sidebar-actions_new-folder",dt="workspace-sidebar-actions_new-project",Ot="workspace-sidebar-actions_new-empty-project",Pt="workspace-sidebar-actions_new-project-from-template",Lt="workspace-sidebar-actions_project",wt="workspace-sidebar-actions_project_list",xt="manage-collaborators",Bt="markdown",Ut="markdown-preview",jt="menu-card-edit",Wt="menu-card-text",Ft="modal",Ht="modal-close",Gt="modal-header",$t="module-list",Kt="monaco-editor",Vt="mongo-dbname-input",zt="mongo-host-input",Jt="mongo-options-textarea",Yt="mongo-password-input",Qt="mongo-port-input",Zt="mongo-username-input",Xt="modal-customer-form_send-button",qt="new-folder-modal_name-input",eo="new-folder-modal_submit",to="notebook-block-droparea",oo="notebook-empty-state-wrapper",no="notebook-last-block-droparea",ro="notebooks_upload-droparea",ao="onboarding-first-name-input",so="onboarding-last-name-input",io="onboarding-usage-select",co="onboarding-about-work-option",lo="onboarding-use-case-Advanced Visualizations",uo="onboarding-book-demo-continue-button",po="open-app-editor-button",_o="open-execution-controls",mo="use-case-next-button",Eo="referral-next-button",go="output-iframe",fo="page-title",ho="permission-dropdown-button",To="plan-compare-details",yo="plan-compare-simple",Io="popover-trigger-Text",So="postgres-access-key-id-input",bo="postgres-dbname-input",Ao="postgres-host-input",Co="postgres-port-input",Oo="postgres-pswd-input",Po="postgres-s3-output-path-input",vo="postgres-secret-access-key-input",Do="postgres-user-input",ko="private-image-account-id-input",Ro="private-image-host-input",Mo="private-image-password-input",No="private-image-region-input",Lo="private-image-username-input",wo="private-workspace-sidebar-actions",xo="profile",Bo="project",Uo="project-list",jo="project-name-column",Wo="project-sidebar",Fo="project-sidebar_add-file",Ho="project-sidebar_new-terminal",Go="project-status-indicator",$o="project-topbar_menu-trigger",Nt="project-topbar-toggle-",Ko=`${Nt}comments`,Vo=`${Nt}versions`,zo="project-topbar-menu-command-palette",Jo="project-topbar-menu-copy",Yo="project-topbar-menu-move",Qo="project-topbar-menu-delete",Zo="project-topbar-menu-download",Xo="project-topbar-menu-duplicate",qo="project-topbar-menu-redo",en="project-topbar-menu-reset",tn="project-topbar-menu-toggle-ui",on="project-topbar-menu-undo",nn="project-topbar-menu-version-history",rn="pro-plan-button",an="publish-anyway-button",sn="publish-button",cn="published-access-dropdown",ln="published-access-dropdown-collaborators",un="published-access-dropdown-link",dn="published-access-dropdown-off",pn="published-access-dropdown-public",_n="published-chart-block",mn="published-code-cell",En="publishing-editor_close",gn="remove-card-btn",fn="remove-member-button",hn="rename-notebook-item",Tn="rename-popover-input",yn="revoke-gdrive-btn",In="project-sidebar-add-new-integration",Sn="project-sidebar-environment-section",bn="project-sidebar-file-explorer",An="project-sidebar-table-of-contents",Cn="project-sidebar-terminal-section",On="project-sidebar-variable-explorer",Pn="re-lock-notebook",vn="run-notebook",Dn="s3-keyid-input",kn="s3-name-input",Rn="s3-secretkey-input",Mn="separator",Nn="select-hardware-btn",Ln="select-industry",wn="select-notebookSolution",xn="select-programmingLanguage",Bn="select-roleTitle",Un="select-teamSize",jn="share-button",Wn="shared-dataset-upload-droparea",Fn="sharing-modal",Hn="sidebar-project-list-item",Gn="sidebar-workspace-heading-private",$n="sidebar-workspace-heading-projects",Kn="sidebar-workspace-heading-shared",Vn="sign-in",zn="sign-in-button-email",Jn="sign-in-button-new-user-dev",Yn="sign-in-email-input",Qn="sign-in-email-submit",Zn="sign-in-modal",Xn="sign-in-page",qn="skip-and-create-workspace-button",er="snowflake-account-name-input",tr="snowflake-authorization-server-input",or="snowflake-client-id-input",nr="snowflake-client-resource-input",rr="snowflake-client-secret-input",ar="snowflake-client-tenant-input",sr="snowflake-database-input",ir="snowflake-identity-provider-input",cr="snowflake-okta-subdomain-input",lr="snowflake-password-input",ur="snowflake-role-input",dr="snowflake-username-input",pr="snowflake-warehouse-input",_r="sso-email",mr="standard-plan-button",Er="personal-plan-button",gr="team-name-input",fr="team-settings-continue-btn",hr="terminal",Tr="terminal-options",yr="terminal-sidebar-item",Ir="terms-and-privacy-modal",Sr="test-connection-error",br="text-cell-h1",Ar="text-cell-h2",Cr="text-cell-h3",Or="text-cell-p",Pr="toggle-notebook-lock",vr="toggle-project-template",Dr="trial-acknowledgement",kr="update-terms-and-privacy-agreed-button",Rr="upload-droparea",Mr="upload-droparea-container",Nr="uploaded-successfully",Lr="uploaded-unsuccessfully",wr="upload-error-close",xr="url-input",Br="url-upload",Ur="url-upload-modal",jr="usage-next-button",Wr="usage-tile-personal",Fr="usage-tile-work",Hr="unlock-notebook",Gr="visualization",$r="work-dir-notebook-item",Kr="workspace-admin-permissions",Vr="workspace-breadcrumb-button",zr="workspace-getting-started",Jr="workspace-integrations",Yr="workspace-invite-next-button",Qr="workspace-member-permissions",Zr="workspace-name-input",Xr="workspace-name-next-button",qr="workspace-page-title",ea="workspace-selector-dropdown-button",ta="workspace-selector-dropdown-menu",oa="workspace-settings",na="workspace-sidebar",ra="workspace-switcher-menu",aa="workspace-switcher-menu-back-to-workspace",sa="workspace-switcher-trigger",ia="workspace-user-permissions",ca="workspace-viewer-permissions",la="cell-under-test",ua="published-app-url",da="create-app-button",pa="resolve-thread",_a="open-environment-modal-button",ma="open-app-and-notebook-analytics",Ea="workspace-template-card",ga="workspace-template-card_set-as-default",fa="theme-settings-select-trigger",ha="integrations-table",Ta="notebook-skeleton"},76417:($,_,t)=>{"use strict";t.d(_,{LA:()=>d,py:()=>s});var e=t(45470),o=t(63998),c=t(51881);const l=async n=>{const i=await fetch("/api/flags",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({context:n})});if(i.ok)return i.json();{const p=new Error(`Failed to get flags: ${i.status}`);return(0,c.H)(p,"error",{workspaceId:n.workspaceId}),{}}},r={},d=(0,o.createContext)({flags:r});d.displayName="FlaggingContext";function s({initialValue:n={},children:i,workspaceId:p}){const[u,g]=(0,o.useState)(n);return(0,o.useEffect)(()=>{(async()=>{const T=await l({workspaceId:p});g(T)})()},[p]),(0,e.jsx)(d.Provider,{value:{flags:u},children:i})}function a({children:n,flags:i=r}){const p={flags:{...r,...i}};return jsx(d.Provider,{value:p,children:n})}},64472:($,_,t)=>{"use strict";t.d(_,{n:()=>c});var e=t(63998),o=t(76417);function c(l){const{flags:r}=(0,e.useContext)(o.LA);return r?!!r[l]:!1}},42172:($,_,t)=>{"use strict";t.d(_,{I:()=>r});var e=t(45470),o=t(91234),c=t(59593),l=t(82023);const r=(0,o.R)((d,s)=>{const{size:a,colorScheme:n,color:i,__css:p,...u}=d,g=(0,c.Vl)("DeepnoteIcon",{size:a,colorScheme:n,color:i});return(0,e.jsx)(l.I,{ref:s,__css:{...g,...p},...u})});r.displayName="Icon",l.I.displayName="ChakraIcon"},97679:($,_,t)=>{"use strict";t.d(_,{I:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"DeepnoteIcon",viewBox:"0 0 14 14",path:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5625 13.9999H6.1747L9.33156 12.7883L8.14774 8.03198L4.50858 8.43582L0.5625 13.9999Z",fill:"#0265B4"}),(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.17467 13.9997C6.17467 13.9997 7.94885 13.0417 8.2772 11.3444C8.60554 9.64719 6.98502 8.43567 4.50854 8.43567C4.50854 8.3908 6.68265 5.29468 6.68265 5.29468L11.9622 5.45165L10.7913 11.7794L8.60554 13.527L6.17467 13.9997Z",fill:"#002868"}),(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5625 6.64106C2.27477 4.04761 3.23476 2.59356 4.94703 0.000114565C4.94703 0.000114565 5.05453 0.0011663 5.29779 0.000109549C7.01654 -0.00735698 13.9792 0.341272 13.9792 6.60286C13.9792 13.7507 6.1747 13.9999 6.1747 13.9999C6.1747 13.9999 9.43377 13.3613 9.43377 10.1919C9.43377 7.02253 6.49032 6.64106 4.59627 6.64106C2.70222 6.64106 0.5625 6.64106 0.5625 6.64106Z",fill:"#3793EF"})]})})},96737:($,_,t)=>{"use strict";t.d(_,{S:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"AlertCircleLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M12 8V12M12 16H12.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},25305:($,_,t)=>{"use strict";t.d(_,{D:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"ChevronDownLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},27777:($,_,t)=>{"use strict";t.d(_,{B:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"ChevronRightLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},51368:($,_,t)=>{"use strict";t.d(_,{A:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"DnFilterNumLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M15.1429 14V6H12.4286M2 5V16C2 19.3137 4.68629 22 8 22H19.5M10.2667 18H17.7333C19.2268 18 19.9735 18 20.544 17.7094C21.0457 17.4537 21.4537 17.0457 21.7094 16.544C22 15.9735 22 15.2268 22 13.7333V6.26667C22 4.77319 22 4.02646 21.7094 3.45603C21.4537 2.95426 21.0457 2.54631 20.544 2.29065C19.9735 2 19.2268 2 17.7333 2H10.2667C8.77319 2 8.02646 2 7.45603 2.29065C6.95426 2.54631 6.54631 2.95426 6.29065 3.45603C6 4.02646 6 4.77319 6 6.26667V13.7333C6 15.2268 6 15.9735 6.29065 16.544C6.54631 17.0457 6.95426 17.4537 7.45603 17.7094C8.02646 18 8.77319 18 10.2667 18Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},8014:($,_,t)=>{"use strict";t.d(_,{V:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"CpuChip01LineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M9 2V4M15 2V4M9 20V22M15 20V22M20 9H22M20 14H22M2 9H4M2 14H4M8.8 20H15.2C16.8802 20 17.7202 20 18.362 19.673C18.9265 19.3854 19.3854 18.9265 19.673 18.362C20 17.7202 20 16.8802 20 15.2V8.8C20 7.11984 20 6.27976 19.673 5.63803C19.3854 5.07354 18.9265 4.6146 18.362 4.32698C17.7202 4 16.8802 4 15.2 4H8.8C7.11984 4 6.27976 4 5.63803 4.32698C5.07354 4.6146 4.6146 5.07354 4.32698 5.63803C4 6.27976 4 7.11984 4 8.8V15.2C4 16.8802 4 17.7202 4.32698 18.362C4.6146 18.9265 5.07354 19.3854 5.63803 19.673C6.27976 20 7.11984 20 8.8 20ZM10.6 15H13.4C13.9601 15 14.2401 15 14.454 14.891C14.6422 14.7951 14.7951 14.6422 14.891 14.454C15 14.2401 15 13.9601 15 13.4V10.6C15 10.0399 15 9.75992 14.891 9.54601C14.7951 9.35785 14.6422 9.20487 14.454 9.10899C14.2401 9 13.9601 9 13.4 9H10.6C10.0399 9 9.75992 9 9.54601 9.10899C9.35785 9.20487 9.20487 9.35785 9.10899 9.54601C9 9.75992 9 10.0399 9 10.6V13.4C9 13.9601 9 14.2401 9.10899 14.454C9.20487 14.6422 9.35785 14.7951 9.54601 14.891C9.75992 15 10.0399 15 10.6 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},634:($,_,t)=>{"use strict";t.d(_,{$:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"TypeSquareLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M8 7H16M12 7V17M7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},48811:($,_,t)=>{"use strict";t.d(_,{q:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"File02LineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M14 11H8M10 15H8M16 7H8M20 6.8V17.2C20 18.8802 20 19.7202 19.673 20.362C19.3854 20.9265 18.9265 21.3854 18.362 21.673C17.7202 22 16.8802 22 15.2 22H8.8C7.11984 22 6.27976 22 5.63803 21.673C5.07354 21.3854 4.6146 20.9265 4.32698 20.362C4 19.7202 4 18.8802 4 17.2V6.8C4 5.11984 4 4.27976 4.32698 3.63803C4.6146 3.07354 5.07354 2.6146 5.63803 2.32698C6.27976 2 7.11984 2 8.8 2H15.2C16.8802 2 17.7202 2 18.362 2.32698C18.9265 2.6146 19.3854 3.07354 19.673 3.63803C20 4.27976 20 5.11984 20 6.8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},21210:($,_,t)=>{"use strict";t.d(_,{x:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"File07LineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M14 2.26953V6.40007C14 6.96012 14 7.24015 14.109 7.45406C14.2049 7.64222 14.3578 7.7952 14.546 7.89108C14.7599 8.00007 15.0399 8.00007 15.6 8.00007H19.7305M8 15V18M16 13V18M12 10.5V18M20 9.98822V17.2C20 18.8802 20 19.7202 19.673 20.362C19.3854 20.9265 18.9265 21.3854 18.362 21.673C17.7202 22 16.8802 22 15.2 22H8.8C7.11984 22 6.27976 22 5.63803 21.673C5.07354 21.3854 4.6146 20.9265 4.32698 20.362C4 19.7202 4 18.8802 4 17.2V6.8C4 5.11984 4 4.27976 4.32698 3.63803C4.6146 3.07354 5.07354 2.6146 5.63803 2.32698C6.27976 2 7.11984 2 8.8 2H12.0118C12.7455 2 13.1124 2 13.4577 2.08289C13.7638 2.15638 14.0564 2.27759 14.3249 2.44208C14.6276 2.6276 14.887 2.88703 15.4059 3.40589L18.5941 6.59411C19.113 7.11297 19.3724 7.3724 19.5579 7.67515C19.7224 7.94356 19.8436 8.2362 19.9171 8.5423C20 8.88757 20 9.25445 20 9.98822Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},83587:($,_,t)=>{"use strict";t.d(_,{e:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"FolderLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M13 7L11.8845 4.76892C11.5634 4.1268 11.4029 3.80573 11.1634 3.57116C10.9516 3.36373 10.6963 3.20597 10.4161 3.10931C10.0992 3 9.74021 3 9.02229 3H5.2C4.0799 3 3.51984 3 3.09202 3.21799C2.71569 3.40973 2.40973 3.71569 2.21799 4.09202C2 4.51984 2 5.0799 2 6.2V7M2 7H17.2C18.8802 7 19.7202 7 20.362 7.32698C20.9265 7.6146 21.3854 8.07354 21.673 8.63803C22 9.27976 22 10.1198 22 11.8V16.2C22 17.8802 22 18.7202 21.673 19.362C21.3854 19.9265 20.9265 20.3854 20.362 20.673C19.7202 21 18.8802 21 17.2 21H6.8C5.11984 21 4.27976 21 3.63803 20.673C3.07354 20.3854 2.6146 19.9265 2.32698 19.362C2 18.7202 2 17.8802 2 16.2V7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},54660:($,_,t)=>{"use strict";t.d(_,{i:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"CheckCircleLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M7.5 12L10.5 15L16.5 9M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},40812:($,_,t)=>{"use strict";t.d(_,{C:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"CheckLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M20 6L9 17L4 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},80929:($,_,t)=>{"use strict";t.d(_,{t:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"Copy02LineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M16 8V5.2C16 4.0799 16 3.51984 15.782 3.09202C15.5903 2.71569 15.2843 2.40973 14.908 2.21799C14.4802 2 13.9201 2 12.8 2H5.2C4.0799 2 3.51984 2 3.09202 2.21799C2.71569 2.40973 2.40973 2.71569 2.21799 3.09202C2 3.51984 2 4.0799 2 5.2V12.8C2 13.9201 2 14.4802 2.21799 14.908C2.40973 15.2843 2.71569 15.5903 3.09202 15.782C3.51984 16 4.0799 16 5.2 16H8M11.2 22H18.8C19.9201 22 20.4802 22 20.908 21.782C21.2843 21.5903 21.5903 21.2843 21.782 20.908C22 20.4802 22 19.9201 22 18.8V11.2C22 10.0799 22 9.51984 21.782 9.09202C21.5903 8.71569 21.2843 8.40973 20.908 8.21799C20.4802 8 19.9201 8 18.8 8H11.2C10.0799 8 9.51984 8 9.09202 8.21799C8.71569 8.40973 8.40973 8.71569 8.21799 9.09202C8 9.51984 8 10.0799 8 11.2V18.8C8 19.9201 8 20.4802 8.21799 20.908C8.40973 21.2843 8.71569 21.5903 9.09202 21.782C9.51984 22 10.0799 22 11.2 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},50214:($,_,t)=>{"use strict";t.d(_,{G:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"EyeOffLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M10.7429 5.09232C11.1494 5.03223 11.5686 5 12.0004 5C17.1054 5 20.4553 9.50484 21.5807 11.2868C21.7169 11.5025 21.785 11.6103 21.8231 11.7767C21.8518 11.9016 21.8517 12.0987 21.8231 12.2236C21.7849 12.3899 21.7164 12.4985 21.5792 12.7156C21.2793 13.1901 20.8222 13.8571 20.2165 14.5805M6.72432 6.71504C4.56225 8.1817 3.09445 10.2194 2.42111 11.2853C2.28428 11.5019 2.21587 11.6102 2.17774 11.7765C2.1491 11.9014 2.14909 12.0984 2.17771 12.2234C2.21583 12.3897 2.28393 12.4975 2.42013 12.7132C3.54554 14.4952 6.89541 19 12.0004 19C14.0588 19 15.8319 18.2676 17.2888 17.2766M3.00042 3L21.0004 21M9.8791 9.87868C9.3362 10.4216 9.00042 11.1716 9.00042 12C9.00042 13.6569 10.3436 15 12.0004 15C12.8288 15 13.5788 14.6642 14.1217 14.1213",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},78836:($,_,t)=>{"use strict";t.d(_,{C:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"InfoCircleLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M12 16V12M12 8H12.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},99920:($,_,t)=>{"use strict";t.d(_,{Q:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"PlusLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M12 5V19M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},5787:($,_,t)=>{"use strict";t.d(_,{R:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"SearchMdLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},83883:($,_,t)=>{"use strict";t.d(_,{V:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"Trash01LineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M16 6V5.2C16 4.0799 16 3.51984 15.782 3.09202C15.5903 2.71569 15.2843 2.40973 14.908 2.21799C14.4802 2 13.9201 2 12.8 2H11.2C10.0799 2 9.51984 2 9.09202 2.21799C8.71569 2.40973 8.40973 2.71569 8.21799 3.09202C8 3.51984 8 4.0799 8 5.2V6M10 11.5V16.5M14 11.5V16.5M3 6H21M19 6V17.2C19 18.8802 19 19.7202 18.673 20.362C18.3854 20.9265 17.9265 21.3854 17.362 21.673C16.7202 22 15.8802 22 14.2 22H9.8C8.11984 22 7.27976 22 6.63803 21.673C6.07354 21.3854 5.6146 20.9265 5.32698 20.362C5 19.7202 5 18.8802 5 17.2V6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},60904:($,_,t)=>{"use strict";t.d(_,{C:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"XCircleLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M15 9L9 15M9 9L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},59148:($,_,t)=>{"use strict";t.d(_,{a:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"XCloseLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},63376:($,_,t)=>{"use strict";t.d(_,{e:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"TableLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M3 9L21 9M9 3L9 21M7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},75152:($,_,t)=>{"use strict";t.d(_,{e:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"PlayCircleLineIcon",viewBox:"0 0 24 24",path:(0,e.jsxs)("g",{fill:"none",children:[(0,e.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)("path",{d:"M9.5 8.96533C9.5 8.48805 9.5 8.24941 9.59974 8.11618C9.68666 8.00007 9.81971 7.92744 9.96438 7.9171C10.1304 7.90525 10.3311 8.03429 10.7326 8.29239L15.4532 11.3271C15.8016 11.551 15.9758 11.663 16.0359 11.8054C16.0885 11.9298 16.0885 12.0702 16.0359 12.1946C15.9758 12.337 15.8016 12.449 15.4532 12.6729L10.7326 15.7076C10.3311 15.9657 10.1304 16.0948 9.96438 16.0829C9.81971 16.0726 9.68666 15.9999 9.59974 15.8838C9.5 15.7506 9.5 15.512 9.5 15.0347V8.96533Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})},98262:($,_,t)=>{"use strict";t.d(_,{U:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"StopCircleLineIcon",viewBox:"0 0 24 24",path:(0,e.jsxs)("g",{fill:"none",children:[(0,e.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)("path",{d:"M8 9.6C8 9.03995 8 8.75992 8.10899 8.54601C8.20487 8.35785 8.35785 8.20487 8.54601 8.10899C8.75992 8 9.03995 8 9.6 8H14.4C14.9601 8 15.2401 8 15.454 8.10899C15.6422 8.20487 15.7951 8.35785 15.891 8.54601C16 8.75992 16 9.03995 16 9.6V14.4C16 14.9601 16 15.2401 15.891 15.454C15.7951 15.6422 15.6422 15.7951 15.454 15.891C15.2401 16 14.9601 16 14.4 16H9.6C9.03995 16 8.75992 16 8.54601 15.891C8.35785 15.7951 8.20487 15.6422 8.10899 15.454C8 15.2401 8 14.9601 8 14.4V9.6Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})},90706:($,_,t)=>{"use strict";t.d(_,{m:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"Star06LineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M4.5 22V17M4.5 7V2M2 4.5H7M2 19.5H7M13 3L11.2658 7.50886C10.9838 8.24209 10.8428 8.60871 10.6235 8.91709C10.4292 9.1904 10.1904 9.42919 9.91709 9.62353C9.60871 9.84281 9.24209 9.98381 8.50886 10.2658L4 12L8.50886 13.7342C9.24209 14.0162 9.60871 14.1572 9.91709 14.3765C10.1904 14.5708 10.4292 14.8096 10.6235 15.0829C10.8428 15.3913 10.9838 15.7579 11.2658 16.4911L13 21L14.7342 16.4911C15.0162 15.7579 15.1572 15.3913 15.3765 15.0829C15.5708 14.8096 15.8096 14.5708 16.0829 14.3765C16.3913 14.1572 16.7579 14.0162 17.4911 13.7342L22 12L17.4911 10.2658C16.7579 9.98381 16.3913 9.8428 16.0829 9.62353C15.8096 9.42919 15.5708 9.1904 15.3765 8.91709C15.1572 8.60871 15.0162 8.24209 14.7342 7.50886L13 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},27089:($,_,t)=>{"use strict";t.d(_,{O:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"CalendarLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M21 10H3M16 2V6M8 2V6M7.8 22H16.2C17.8802 22 18.7202 22 19.362 21.673C19.9265 21.3854 20.3854 20.9265 20.673 20.362C21 19.7202 21 18.8802 21 17.2V8.8C21 7.11984 21 6.27976 20.673 5.63803C20.3854 5.07354 19.9265 4.6146 19.362 4.32698C18.7202 4 17.8802 4 16.2 4H7.8C6.11984 4 5.27976 4 4.63803 4.32698C4.07354 4.6146 3.6146 5.07354 3.32698 5.63803C3 6.27976 3 7.11984 3 8.8V17.2C3 18.8802 3 19.7202 3.32698 20.362C3.6146 20.9265 4.07354 21.3854 4.63803 21.673C5.27976 22 6.11984 22 7.8 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},64566:($,_,t)=>{"use strict";t.d(_,{B:()=>c});var e=t(45470),o=t(54507);const c=(0,o.w)({displayName:"ClockRewindLineIcon",viewBox:"0 0 24 24",path:(0,e.jsx)("g",{fill:"none",children:(0,e.jsx)("path",{d:"M22.7 13.5L20.7005 11.5L18.7 13.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C15.3019 3 18.1885 4.77814 19.7545 7.42909M12 7V12L15 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},85134:($,_,t)=>{"use strict";t.d(_,{_m:()=>e});function e(l){return l.cell_type==="code"}function o(l){return l.cell_type==="markdown"}function c(l){return l.cell_type==="raw"}},36987:($,_,t)=>{"use strict";t.d(_,{bk:()=>e,h6:()=>c,jy:()=>d,n3:()=>r,x6:()=>o});const e=s=>typeof s=="object"&&s.type==="new-output"&&"data"in s&&"metadata"in s&&"cellId"in s&&"outputIndex"in s,o=s=>typeof s=="object"&&s.type==="output-dimension"&&"outputIndex"in s&&"cellId"in s&&"offsetY"in s,c=s=>typeof s=="object"&&s.type==="output-initialized"&&s.payload&&["one-iframe-canvas","fill-iframe"].includes(s.payload.type),l=s=>typeof s=="object"&&s.type==="init-output"&&"cellId"in s&&"outputIndex"in s,r=s=>typeof s=="object"&&s.type==="layout-updated"&&"height"in s&&"cellId"in s&&"outputIndex"in s,d=s=>e(s)||c(s)||l(s)||r(s)||o(s)},38435:($,_,t)=>{"use strict";t.d(_,{Ix:()=>r,JZ:()=>a});function e(n){if(!n)return"";const{source:i,sourceFeature:p,sourceRole:u}=n;if(!i&&!p&&!u)return"";let g="?";return i&&(g+=`source=${i}`),p&&(g+=i?"&":"",g+=`sourceFeature=${p}`),u&&(g+=i||p?"&":"",g+=`sourceRole=${u}`),encodeURI(g)}var o=t(78627);const c="-vs-",l="index",r="rename",d=n=>{const i=n.split(".");return i.length>2?i.slice(-2).join("."):n},s=()=>typeof window>"u"?"":`${window.location.protocol}//${d(window.location.hostname)}`,a={project:n=>`/project/${n}`,explore:()=>"/explore",exploreStudy:n=>`/explore/${n}`,manifesto:()=>"/manifesto",exploreSection:n=>`/explore#${n}`,anaconda:()=>"/anaconda",anacondaStartTemplateProject:()=>"/launch?template=anaconda-3.9",launch:n=>`/launch?templateId=${n}`,onboarding:n=>n?.redirectTo?`/onboarding?redirectTo=${n.redirectTo}`:n?.duplicateProjectId?`/onboarding?duplicateProject=${n.duplicateProjectId}`:n?.launchedProjectId&&n?.workspaceId?`/onboarding?launchedProject=${n.launchedProjectId}&workspace=${n.workspaceId}`:"/onboarding",onboardingWithTeamTrialParam:(n,i)=>`${n}?is-team-trial=${i}`,createFirstWorkspace:()=>"/onboarding?createWorkspace=true",joinWorkspace:()=>"/join-workspace",workspaceRoot:()=>"/workspace",workspaceRootAfterSignup:()=>"/workspace?welcome",createNewWorkspacePath:n=>`/workspace/${n}/create-new-workspace`,createNewWorkspace:(n,i)=>a.createNewWorkspacePath((0,o.g)(n,i)),workspacePath:n=>`/workspace/${n}`,workspace:(n,i)=>a.workspacePath((0,o.g)(n,i)),welcomeToEduWorkspacePath:n=>`/workspace/${n}?welcome-to-edu-plan=true`,welcomeToEduWorkspace:(n,i)=>a.welcomeToEduWorkspacePath((0,o.g)(n,i)),workspaceCategoryPath:(n,i)=>`/workspace/${n}/projects/${i}`,workspaceCategory:(n,i,p)=>a.workspaceCategoryPath((0,o.g)(n,i),p),workspaceProjectPath:(n,i)=>`/workspace/${n}/project/${i}`,workspaceProject:(n,i,p,u)=>`${a.workspaceProjectPath((0,o.g)(n,i),p)}${u?`?action=${u}`:""}`,workspaceProjectOptIn:(n,i,p)=>`/workspace/${(0,o.g)(n,i)}/project/${p}?enable_workspaces=true`,workspaceProjectNotebookPath:(n,i,p)=>`/workspace/${n}/project/${i}/notebook/${p}`,workspaceProjectNotebook:(n,i,p,u)=>a.workspaceProjectNotebookPath((0,o.g)(n,i),p,u),privateProjectsPath:n=>`/workspace/${n}/private`,privateProjects:(n,i)=>a.privateProjectsPath((0,o.g)(n,i)),recentProjectsPath:n=>`/workspace/${n}/recents`,recentProjects:(n,i)=>a.recentProjectsPath((0,o.g)(n,i)),publishedModulesPath:n=>`/workspace/${n}/modules`,publishedModules:(n,i)=>a.publishedModulesPath((0,o.g)(n,i)),streamlitAppPath:n=>`/streamlit-apps/${n}`,streamlitApp:n=>a.streamlitAppPath(n),publishedAppsPath:n=>`/workspace/${n}/published`,publishedApps:(n,i)=>a.publishedAppsPath((0,o.g)(n,i)),publishedAppPath:(n,i)=>`/app/${n}/${i}`,publishedApp:(n,i)=>a.publishedAppPath(n,i),publishedStreamlitAppPath:n=>`/streamlit-apps/${n}`,publishedStreamlitApp:n=>a.publishedStreamlitAppPath(n),scheduledProjectsPath:n=>`/workspace/${n}/scheduled`,scheduledProjects:(n,i)=>a.scheduledProjectsPath((0,o.g)(n,i)),favoritesProjectsPath:n=>`/workspace/${n}/favorites`,favoritesProjects:(n,i)=>a.favoritesProjectsPath((0,o.g)(n,i)),sharedWithMePath:n=>`/workspace/${n}/shared-with-me`,sharedWithMe:(n,i)=>a.sharedWithMePath((0,o.g)(n,i)),workspaceIntegrationsPath:n=>`/workspace/${n}/integrations`,workspaceIntegrations:(n,i)=>a.workspaceIntegrationsPath((0,o.g)(n,i)),gettingStarted:(n,i)=>`/workspace/${(0,o.g)(n,i)}/getting-started`,gettingStartedPath:n=>`/workspace/${n}/getting-started`,workspaceSettingsPath:(n,i,p)=>i?`/workspace/${n}/settings/${i}${p?`?source=${p}`:""}`:`/workspace/${n}/settings`,workspaceSettings:(n,i,p,u)=>a.workspaceSettingsPath((0,o.g)(n,i),p,u),workspaceSettingsGeneralPath:n=>`/workspace/${n}/settings/general`,workspaceSettingsGeneral:(n,i)=>`/workspace/${(0,o.g)(n,i)}/settings/general`,workspaceSettingsPublicProfilePath:n=>`/workspace/${n}/settings/public-profile`,workspaceSettingsPublicProfile:(n,i)=>`/workspace/${(0,o.g)(n,i)}/settings/public-profile`,workspaceSettingsMembersPath:n=>`/workspace/${n}/settings/members`,workspaceSettingsMembers:(n,i)=>`/workspace/${(0,o.g)(n,i)}/settings/members`,workspaceSettingsProjectSettingsPath:n=>`/workspace/${n}/settings/project-settings`,workspaceSettingsProjectSettings:(n,i)=>`/workspace/${(0,o.g)(n,i)}/settings/project-settings`,workspaceSettingsBillingPath:n=>`/workspace/${n}/settings/billing`,workspaceSettingsBilling:(n,i)=>`/workspace/${(0,o.g)(n,i)}/settings/billing`,workspaceSettingsBillingAfterCheckout:(n,i)=>`/workspace/${(0,o.g)(n,i)}/settings/billing?checkout=true`,workspaceSettingsUpgradePath:n=>`/workspace/${n}/settings/upgrade`,workspaceSettingsUpgrade:(n,i,p)=>`/workspace/${(0,o.g)(n,i)}/settings/upgrade${e(p)}`,accountSettingsPathWithoutWorkspace:()=>"/workspace/account-settings",accountSettingsPath:n=>`/workspace/${n}/account-settings`,accountSettings:(n,i)=>a.accountSettingsPath((0,o.g)(n,i)),createNewProjectInWorkspace:n=>`/new/${n}`,signIn:()=>"/sign-in",signUp:()=>"/sign-up",logOut:()=>"/auth/logout",root:()=>"/",home:()=>"/home",terms:()=>"/terms",privacy:()=>"/privacy",termsObsolete:()=>"/terms-10-29-2020",privacyObsolete:()=>"/privacy-10-29-2020",customers:()=>"/customers",customerCaseStudy:n=>`/customers/${n}`,blog:({page:n}={})=>`/blog${n?`/page/${n}`:""}`,blogPost:n=>`/blog/${n}`,category:n=>`/blog/category/${n}`,integrations:()=>"/integrations",integrationsCategory:n=>`/integrations/${n}`,integrationDetail:n=>`/integration/${n}`,security:()=>"https://security.deepnote.com",joinUs:()=>"/join-us",ai:()=>"/ai",pricing:()=>"/pricing",appDownload:()=>"/app-download",createNewWorkspacePathWithoutWorkspace:()=>"/workspace/create-new-workspace",changelog:({page:n}={})=>`/changelog${n?`/page/${n}`:""}`,changelogDetail:n=>`/changelog/${n}`,docs:()=>s()+"/docs",guidesPost:n=>`/guides/${n}`,guides:()=>"/guides",author:n=>`/author/${n}`,solutions:n=>`/solutions/${n}`,docsPageUnsafe:n=>s()+(n===l?"/docs":`/docs/${n}`),docsPage:n=>a.docsPageUnsafe(n),compare:()=>"/compare",alternatives:n=>`/compare/alternatives/${n}`,compareTools:(n,i)=>`/compare/${n}${c}${i}`,compareVersionControl:()=>"/guides/jupyter/versioning",compareScheduleNotebooks:()=>"/guides/jupyter/scheduling",compareOnlineNotebooks:()=>"/guides/jupyter/run-in-the-cloud",compareRealtimeCollab:()=>"/guides/jupyter/real-time-collaboration",compareComments:()=>"/guides/jupyter/comments",authSlack:n=>`/auth/slack?workspaceId=${n}`}},78627:($,_,t)=>{"use strict";t.d(_,{g:()=>e});function e(o,c){return`${c}-${o}`}},414:($,_,t)=>{"use strict";t.d(_,{C0:()=>u,SC:()=>p,Tq:()=>n,ii:()=>g,k9:()=>i,u4:()=>a,zL:()=>y});var e=t(48486),o=t.n(e),c=t(31976),l=t(11555),r=t(51881);const d=[],s=async(T,C)=>{const m=!!window.Sprig&&typeof window.Sprig.track=="function";if(!m&&window.__userId&&window.__userEmail&&d.push({event:T,eventProperties:C}),m&&window.__userId&&window.__userEmail){d.splice(0).forEach(async({event:W,eventProperties:K})=>{try{await window.Sprig.track(W,K)}catch(H){(0,r.H)(H,"warning")}});try{await window.Sprig.track(T,C)}catch(W){(0,r.H)(W,"warning")}}},a=(T,C,m={})=>{(0,l.S$)()||(window.__SYNC_DATA_TO_SPRIG==="true"&&s(T,C),window.dataLayer&&(window.__userId||window.__anonymousUserId)&&window.dataLayer.push({event:T,userId:window.__userId||window.__anonymousUserId,...C}),!C.workspaceId&&!m.allowNullWorkspaceId&&(0,r.H)(new Error(`Event tracked without workspaceId (${T})`),"warning",{eventName:T}),o()("/api/action",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({event:T,properties:C,tracking_source:c.$z.FRONTEND,trackOptions:{allowNullWorkspaceId:m.allowNullWorkspaceId??!1}})}).then(()=>{m.callback&&m.callback()}).catch(O=>{(0,r.H)(O,"warning")}))},n=(T,C={})=>{if(!(0,l.S$)())try{o()("/api/action/group",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({workspaceId:T,properties:C})})}catch(m){(0,r.H)(m,"warning")}},i=T=>{if(!(0,l.S$)())try{o()("/api/action/identify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({workspaceId:T.workspaceId,properties:T})})}catch(C){(0,r.H)(C,"warning")}},p=(T,C,m,O)=>{try{o()("/api/action/long-task",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({longTasks:T,pageName:O,pathName:C,route:m})})}catch(W){(0,r.H)(W,"warning")}},u=(T,C)=>{try{o()("/api/action/project-load-time",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({projectLoadTime:T,pathName:C})})}catch(m){(0,r.H)(m,"warning")}},g=T=>{try{o()("/api/action/notebook-load-time",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(T)})}catch(C){(0,r.H)(C,"warning")}},y=(T,C)=>{try{o()("/api/action/web-vitals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:C,metricName:T.name,metricId:T.id,value:T.value,delta:"delta"in T?T.delta:null,attribution:"attribution"in T?T.attribution:null,rating:"rating"in T?T.rating:null,navigationType:"navigationType"in T?T.navigationType:null,startTime:"startTime"in T?T.startTime??Date.now():Date.now(),url:window?.location?.href})})}catch(m){(0,r.H)(m,"warning")}}},44358:($,_,t)=>{"use strict";t.d(_,{dy:()=>l,nC:()=>r});var e=t(51881);const o=(d,s)=>{const a=d.searchParams.get("ref"),n=d.searchParams.get("gclid")??d.searchParams.get("gclId"),i=d.searchParams.get("utm_source"),p=d.searchParams.get("utm_campaign"),u=d.searchParams.get("utm_medium");return a||(i||p||u?`${i||"unknownSource"}-${p||"unknownCampaign"}-${u||"unknownMedium"}`:n?"google-ads":s?.hostname&&!s.hostname.endsWith("deepnote.com")?s.hostname:null)},c=(d,s)=>{const a=d.searchParams.get("utm_source")??"",n=o(d,s);return{referrer:s?.href??null,referrerDomain:s?.hostname??null,url:d.href,urlPath:d.pathname,timestamp:new Date,utmSource:a,utmCampaign:d.searchParams.get("utm_campaign"),utmMedium:d.searchParams.get("utm_medium"),utmAgid:d.searchParams.get("utm_agid"),utmTerm:d.searchParams.get("utm_term"),computedAttribution:n||"direct"}},l=()=>{try{const d=document.referrer?new URL(document.referrer):null,s=new URL(document.location.href),a=window.localStorage.getItem("attributionData"),n=a?JSON.parse(a):[],i=c(s,d);if(!i)return;n.push(i),window.localStorage.setItem("attributionData",JSON.stringify(n))}catch{(0,e.H)(new Error("Failed to record attribution data"),"warning")}},r=()=>{try{const d=window.localStorage.getItem("attributionData"),s=d?JSON.parse(d):[];if(s.length===0)return{};const a=s[0],n=s[s.length-1];return{...Object.keys(a).map(g=>({[`attribution_sum_${g}`]:s.map(y=>y[g]).filter(Boolean)})).reduce((g,y)=>({...g,...y}),{}),attribution_firstTouch_referrer:a.referrer,attribution_firstTouch_referrerDomain:a.referrerDomain,attribution_firstTouch_url:a.url,attribution_firstTouch_urlPath:a.urlPath,attribution_firstTouch_timestamp:a.timestamp,attribution_firstTouch_utmSource:a.utmSource,attribution_firstTouch_utmCampaign:a.utmCampaign,attribution_firstTouch_utmMedium:a.utmMedium,attribution_firstTouch_utmAgid:a.utmAgid,attribution_firstTouch_utmTerm:a.utmTerm,attribution_firstTouch_computedAttribution:a.computedAttribution,attribution_lastTouch_referrer:n.referrer,attribution_lastTouch_referrerDomain:n.referrerDomain,attribution_lastTouch_url:n.url,attribution_lastTouch_urlPath:n.urlPath,attribution_lastTouch_timestamp:n.timestamp,attribution_lastTouch_utmSource:n.utmSource,attribution_lastTouch_utmCampaign:n.utmCampaign,attribution_lastTouch_utmMedium:n.utmMedium,attribution_lastTouch_utmAgid:n.utmAgid,attribution_lastTouch_utmTerm:n.utmTerm,attribution_lastTouch_computedAttribution:n.computedAttribution,attribution_touchesBeforeSignup:s.length}}catch{(0,e.H)(new Error("Failed to extract attribution data"),"warning")}return{}}},8847:($,_,t)=>{"use strict";t.d(_,{v:()=>o});var e=t(17897);function o(l){const{metadata:r,state:d}=c(l.metadata),s={...d,execution_count:l.execution_count,outputs_reference:l.outputs_reference};return{blockType:l.block_type,metadata:r,state:s}}function c(l){const{output_cleared:r,execution_start:d,execution_millis:s,source_hash:a,execution_context_id:n,deepnote_to_be_reexecuted:i,deepnote_table_state:p,deepnote_table_loading:u,deepnote_table_invalid:g,last_executed_function_notebook_id:y,last_function_run_started_at:T,function_notebook_export_states:C,cell_id:m,...O}=l,W=(0,e.fN)({output_cleared:r,execution_start:d,execution_millis:s,source_hash:a,execution_context_id:n,deepnote_to_be_reexecuted:i,deepnote_table_state:p,deepnote_table_loading:u,deepnote_table_invalid:g,last_executed_function_notebook_id:y,last_function_run_started_at:T,function_notebook_export_states:C},K=>typeof K<"u");return{metadata:O,state:W}}},89494:($,_,t)=>{"use strict";t.d(_,{al:()=>r,yY:()=>c});var e=t(17897);const o={"is-equal":"is_equal","is-not-equal":"is_not_equal","is-one-of":"is_one_of","is-not-one-of":"is_not_one_of","is-not-null":"is_not_null","is-null":"is_null","text-contains":"text_contains","text-does-not-contain":"text_does_not_contain","greater-than":"greater_than","greater-than-or-equal":"greater_than_or_equal","less-than":"less_than","less-than-or-equal":"less_than_or_equal",between:"between","outside-of":"outside_of","is-relative-today":"is_relative_today","is-after":"is_after","is-before":"is_before","is-on":"is_on"},c={is_equal:"is-equal",is_not_equal:"is-not-equal",is_one_of:"is-one-of",is_not_one_of:"is-not-one-of",is_not_null:"is-not-null",is_null:"is-null",text_contains:"text-contains",text_does_not_contain:"text-does-not-contain",greater_than:"greater-than",greater_than_or_equal:"greater-than-or-equal",less_than:"less-than",less_than_or_equal:"less-than-or-equal",between:"between",outside_of:"outside-of",is_relative_today:"is-relative-today",is_after:"is-after",is_before:"is-before",is_on:"is-on"};function l(d){return pickNonEmpty({...d,sortBy:d.sortBy?.map(s=>({id:s.column_name,type:s.type})),filters:d.filters?.flatMap(s=>s.contains?[{type:"contains",id:s.contains.column_name,value:s.contains.value}]:[]),conditionalFilters:d.conditionalFilters?.flatMap(s=>({...s,operator:c[s.operator]})),cellFormattingRules:d.cellFormattingRules?.map(s=>s.singleColor?{...s.singleColor,type:"singleColor",operator:c[s.singleColor.operator],columnNames:s.singleColor.columnNames??null}:s.colorScale?{...s.colorScale,type:"colorScale",columnNames:s.colorScale.columnNames??null,pointMin:{...s.colorScale.pointMin,value:s.colorScale.pointMin.value??null,customColor:s.colorScale.pointMin.customColor??null},pointMid:{...s.colorScale.pointMid,value:s.colorScale.pointMid.value??null,customColor:s.colorScale.pointMid.customColor??null},pointMax:{...s.colorScale.pointMax,value:s.colorScale.pointMax.value??null,customColor:s.colorScale.pointMax.customColor??null}}:null).filter(Boolean)})}function r(d){return{...d,sortBy:d.sortBy?.map(s=>({column_name:s.id,type:s.type})),filters:d.filters?.flatMap(s=>s.type==="contains"?[{contains:{column_name:s.id,value:s.value}}]:[]),conditionalFilters:d.conditionalFilters?.map(s=>({...s,operator:o[s.operator]})),cellFormattingRules:d.cellFormattingRules?.map(s=>{const a={};if(s.type==="singleColor"){const{columnNames:n,columnSelectionMode:i,comparativeValues:p,styleName:u,type:g}=s,y={columnNames:n,columnSelectionMode:i,comparativeValues:p,styleName:u,type:g,operator:o[s.operator]};a.singleColor=y}if(s.type==="colorScale"){const{columnNames:n,columnSelectionMode:i,pointMin:p,pointMid:u,pointMax:g,scaleName:y,type:T}=s,C={columnNames:n,columnSelectionMode:i,pointMin:{customColor:p.customColor,value:p.value,valueType:p.valueType},pointMid:{customColor:u.customColor,value:u.value,valueType:u.valueType},pointMax:{customColor:g.customColor,value:g.value,valueType:g.valueType},scaleName:y,type:T};a.colorScale=C}return a})}}},16530:($,_,t)=>{"use strict";t.d(_,{Km:()=>Le,kS:()=>We,Tc:()=>A,I1:()=>ie,Tx:()=>h,vH:()=>Fe,NW:()=>$e,mY:()=>Ae,$l:()=>P,Ff:()=>Y,wS:()=>_t,HU:()=>He,xS:()=>ht,PY:()=>pt,_c:()=>Ne,sF:()=>ue,KI:()=>qe,X8:()=>ke,en:()=>at,A0:()=>Qe,xB:()=>ct,p_:()=>O});var e=t(1578),o=t(8847),c=t(47628),l=t(85134),r=t(87698),d=t(34501);const s={createJupyterSource(S){return d.A.executeBigNumber(S.metadata?.deepnote_big_number_title??"",S.metadata?.deepnote_big_number_value??"",S.metadata?.deepnote_big_number_comparison_title,S.metadata?.deepnote_big_number_comparison_value)},parseJupyterSource(S,j){const pe={cell_type:"big-number",metadata:j.metadata,source:j.source,outputs:j.outputs,outputs_reference:(0,l._m)(j)?j.outputs_reference??null:null,execution_count:(0,l._m)(j)?j.execution_count:null,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const j={cell_type:"big-number",source:S.source??"",metadata:S.metadata??{deepnote_big_number_title:"",deepnote_big_number_value:"",deepnote_big_number_format:"number",deepnote_big_number_comparison_enabled:!1,deepnote_big_number_comparison_title:"",deepnote_big_number_comparison_value:"",deepnote_big_number_comparison_type:"",deepnote_big_number_comparison_format:""},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)()};return{cellId:S.id,...j}}};var a=t(17897);const n={createJupyterSource(S,j){if(S.metadata.deepnote_button_behavior==="set_variable"&&S.metadata.deepnote_variable_name){const pe=(0,a.T8)(S.metadata.deepnote_variable_name);return j?.variableContext?.includes(pe)?d.A.setVariableContextValue(pe,!0):d.A.setVariableContextValue(pe,!1)}return""},parseJupyterSource(S,j){const pe={cell_type:"button",source:"",metadata:j.metadata,outputs:[],outputs_reference:(0,l._m)(j)?j.outputs_reference??null:null,execution_count:(0,l._m)(j)?j.execution_count:null,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const j=S.existingCellCounts.button??0,pe={cell_type:"button",source:"",metadata:S.metadata??{deepnote_button_title:"Run",deepnote_button_color_scheme:"blue",deepnote_button_behavior:"set_variable",deepnote_variable_name:`button_${j+1}`},block_group:(0,r.NF)(),outputs:[],outputs_reference:null,execution_count:null};return{cellId:S.id,...pe}}},i={createJupyterSource(S){return S.source},wrapJupyterSource(S,{metadata:j}){if(!j.deepnote_table_state)return S;const pe=j.deepnote_table_state??{},Ke=JSON.stringify(pe);return d.A.codeCellWrapper(S,Ke)},parseJupyterSource(S,j){const pe={cell_type:"code",metadata:j.metadata,source:j.source,outputs:j.outputs,outputs_reference:(0,l._m)(j)?j.outputs_reference??null:null,execution_count:(0,l._m)(j)?j.execution_count:null,block_group:j.block_group??S,content_dependencies:null};return{cellId:S,...pe}},createNewCell(S){const j={cell_type:"code",source:S.source??"",metadata:S.metadata??{},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)(),content_dependencies:null};return{cellId:S.id,...j}}},p={createJupyterSource(S){const j=S.metadata.deepnote_img_src??"",pe=S.metadata.deepnote_img_width??"",Ke=S.metadata.deepnote_img_alignment??"";return`<img src="${j}" width="${pe}" align="${Ke}" />`},parseJupyterSource(S,j){const pe={cell_type:"image",source:"",metadata:j.metadata,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const j={cell_type:"image",source:"",metadata:S.metadata??{},block_group:(0,r.NF)()};return{cellId:S.id,...j}}};var u=t(74250);function g(S){return(S["input-date"]??0)+(S["input-select"]??0)+(S["input-slider"]??0)+(S["input-text"]??0)+(S["input-textarea"]??0)+(S["input-file"]??0)}const y={createJupyterSource(S){const j=(0,a.T8)(S.metadata.deepnote_variable_name),pe=(0,a.N2)(S.metadata.deepnote_variable_value);return S.metadata.deepnote_variable_value?S.metadata.deepnote_input_date_version===2?`
from dateutil.parser import parse as _deepnote_parse
${j} = _deepnote_parse(${pe}).date()
`:`
from datetime import datetime as _deepnote_datetime
${j} = _deepnote_datetime.strptime(${pe}, "%Y-%m-%dT%H:%M:%S.%fZ")
`:`
${j} = None
`},parseJupyterSource(S,j){if(!(0,l._m)(j))throw new Error("Can only create an input cell from a jupyter code cell");const pe={cell_type:"input-date",metadata:{...j.metadata,deepnote_variable_name:j.metadata.deepnote_variable_name?.toString()??"",deepnote_variable_value:j.metadata.deepnote_variable_value?.toString()??""},source:j.source,outputs:j.outputs,outputs_reference:j.outputs_reference??null,execution_count:j.execution_count,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const pe={cell_type:"input-date",source:"",metadata:{deepnote_input_date_version:2,deepnote_variable_name:`input_${g(S.existingCellCounts)+1}`,deepnote_variable_value:(0,u.y)().utc().startOf("day").toISOString(),...S.metadata},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)()};return{cellId:S.id,...pe}}},T={createJupyterSource(S){return`${(0,a.T8)(S.metadata.deepnote_variable_name)} = ${(0,a.N2)(S.metadata.deepnote_variable_value)}`},parseJupyterSource(S,j){if(!(0,l._m)(j))throw new Error("Can only create an input cell from a jupyter code cell");const pe={cell_type:"input-file",metadata:{...j.metadata,deepnote_variable_name:j.metadata.deepnote_variable_name?.toString()??"",deepnote_variable_value:j.metadata.deepnote_variable_value?.toString()??""},source:j.source,outputs:j.outputs,outputs_reference:j.outputs_reference??null,execution_count:j.execution_count,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const pe={cell_type:"input-file",source:"",metadata:{deepnote_variable_name:`input_${g(S.existingCellCounts)+1}`,deepnote_variable_value:"",...S.metadata},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)()};return{cellId:S.id,...pe}}};var C=t(31976);const m={createJupyterSource(S){const j=(0,a.T8)(S.metadata.deepnote_variable_name);if(S.metadata.deepnote_allow_multiple_values||Array.isArray(S.metadata.deepnote_variable_value)){const pe=Array.isArray(S.metadata.deepnote_variable_value)?S.metadata.deepnote_variable_value:[S.metadata.deepnote_variable_value];return`${j} = [${pe.map(Ke=>(0,a.N2)(Ke))}]`}return`${j} = ${(0,a.N2)(S.metadata.deepnote_variable_value??"")}`},parseJupyterSource(S,j){if(!(0,l._m)(j))throw new Error("Can only create an input cell from a jupyter code cell");const Ke={cell_type:"input-select",metadata:{...j.metadata,deepnote_variable_name:j.metadata.deepnote_variable_name?.toString()??"",deepnote_variable_value:Array.isArray(j.metadata.deepnote_variable_value)?j.metadata.deepnote_variable_value.map(et=>String(et)):j.metadata.deepnote_variable_value?.toString()??"",deepnote_variable_options:Array.isArray(j.metadata.deepnote_variable_options)?j.metadata.deepnote_variable_options.map(et=>String(et)):[],deepnote_variable_custom_options:Array.isArray(j.metadata.deepnote_variable_custom_options)?j.metadata.deepnote_variable_custom_options.map(et=>String(et)):Array.isArray(j.metadata.deepnote_variable_options)?j.metadata.deepnote_variable_options.map(et=>String(et)):[],deepnote_variable_selected_variable:j.metadata.deepnote_variable_selected_variable?.toString()??"",deepnote_variable_select_type:j.metadata.deepnote_variable_select_type&&j.metadata.deepnote_variable_select_type===c.m.FROM_VARIABLE?c.m.FROM_VARIABLE:c.m.FROM_OPTIONS},source:j.source,outputs:j.outputs,outputs_reference:j.outputs_reference??null,execution_count:j.execution_count,block_group:j.block_group??S};return{cellId:S,...Ke}},createNewCell(S){const j=g(S.existingCellCounts),pe=["Option 1","Option 2"],Ke={cell_type:"input-select",source:"",metadata:{deepnote_variable_name:`input_${j+1}`,deepnote_variable_value:pe[0],deepnote_variable_options:[...pe],deepnote_variable_custom_options:[...pe],deepnote_variable_selected_variable:"",deepnote_variable_select_type:c.m.FROM_OPTIONS,...S.metadata},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)()};return{cellId:S.id,...Ke}}};function O(S){return C.ob.includes(S.varType)?S.numElements&&S.numElements>C.U$||S.varElements&&S.varElements.length>C.U$?{valid:!1,elements:[],warning:{message:`Selected variable has too many items (maximum is ${C.U$}), please try a different variable.`,level:"info"}}:S.varElements===null?{valid:!1,elements:[],warning:{message:`Selected variable total characters exceed ${C.Kl}, please shorten it, or try a different variable.`,level:"info"}}:{valid:!0,elements:S.varElements,warning:null}:{valid:!1,elements:[],warning:{message:"Unsupported variable type, please try a different variable.",level:"error"}}}const W={createJupyterSource(S){return`${(0,a.T8)(S.metadata.deepnote_variable_name)} = ${S.metadata.deepnote_variable_value}`},parseJupyterSource(S,j){if(!(0,l._m)(j))throw new Error("Can only create an input cell from a jupyter code cell");const pe={cell_type:"input-slider",metadata:{...j.metadata,deepnote_variable_name:j.metadata.deepnote_variable_name?.toString()??"",deepnote_variable_value:j.metadata.deepnote_variable_value?.toString()??"5",deepnote_slider_min_value:Number(j.metadata.deepnote_slider_min_value?.toString()??"0"),deepnote_slider_max_value:Number(j.metadata.deepnote_slider_max_value?.toString()??"10"),deepnote_slider_step:Number(j.metadata.deepnote_slider_step?.toString()??"1")},source:j.source,outputs:j.outputs,outputs_reference:j.outputs_reference??null,execution_count:j.execution_count,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const pe={cell_type:"input-slider",source:"",metadata:{deepnote_variable_name:`input_${g(S.existingCellCounts)+1}`,deepnote_variable_value:"5",deepnote_slider_min_value:0,deepnote_slider_max_value:10,deepnote_slider_step:1,...S.metadata},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)()};return{cellId:S.id,...pe}}},K={createJupyterSource(S){return`${(0,a.T8)(S.metadata.deepnote_variable_name)} = ${(0,a.N2)(S.metadata.deepnote_variable_value)}`},parseJupyterSource(S,j){if(!(0,l._m)(j))throw new Error("Can only create an input cell from a jupyter code cell");const pe={cell_type:"input-text",metadata:{...j.metadata,deepnote_variable_name:j.metadata.deepnote_variable_name?.toString()??"",deepnote_variable_value:j.metadata.deepnote_variable_value?.toString()??""},source:j.source,outputs:j.outputs,outputs_reference:j.outputs_reference??null,execution_count:j.execution_count,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const pe={cell_type:"input-text",source:"",metadata:{deepnote_variable_name:`input_${g(S.existingCellCounts)+1}`,deepnote_variable_value:"",...S.metadata},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)()};return{cellId:S.id,...pe}}},H={createJupyterSource(S){return`${(0,a.T8)(S.metadata.deepnote_variable_name)} = ${(0,a.N2)(S.metadata.deepnote_variable_value)}`},parseJupyterSource(S,j){if(!(0,l._m)(j))throw new Error("Can only create an input cell from a jupyter code cell");const pe={cell_type:"input-textarea",metadata:{...j.metadata,deepnote_variable_name:j.metadata.deepnote_variable_name?.toString()??"",deepnote_variable_value:j.metadata.deepnote_variable_value?.toString()??""},source:j.source,outputs:j.outputs,outputs_reference:j.outputs_reference??null,execution_count:j.execution_count,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const pe={cell_type:"input-textarea",source:"",metadata:{deepnote_variable_name:`input_${g(S.existingCellCounts)+1}`,deepnote_variable_value:"",...S.metadata},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)()};return{cellId:S.id,...pe}}},N={createJupyterSource(S){return S.source},parseJupyterSource(S,j){const pe={cell_type:"markdown",source:j.source,metadata:j.metadata,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const j={cell_type:"markdown",source:S.source??"",metadata:S.metadata??{},block_group:(0,r.NF)()};return{cellId:S.id,...j}}};var w=t(51937),k=t(42218),F=t(93724),X=t(32928);const z={createJupyterSource(S,j){const pe=S.metadata.function_notebook_id;if(!pe||!(0,r.HD)(pe))return"";const Ke=S.metadata.function_notebook_inputs??{},mt=(0,X.rG)(Ke).map(([de,be])=>{if(be?.variable_name!=null)return`${(0,a.N2)(de)}: sanitize_function_input_value(globals()[${(0,a.N2)((0,a.T8)(be.variable_name))}])`;if(be?.custom_value==null)return null;const{data:we,error:Je}=k.z.union([k.z.string(),k.z.array(k.z.string())]).safeParse(be.custom_value);return Je?null:`${(0,a.N2)(de)}: ${JSON.stringify(we)}`}).filter(Boolean),Tt=S.metadata.function_notebook_export_mappings??{},Et=(0,X.rG)(Tt),Q=Et.map(([de,be])=>be.enabled?`${(0,a.N2)(de)}: ${(0,a.N2)((0,a.T8)(be.variable_name??de))}`:null).filter(Boolean),Ee=Et.map(([de,be])=>`${(0,a.N2)(de)}: {${[`'enabled': ${be.enabled?"True":"False"}`,`'variable_name': ${(0,a.N2)((0,a.T8)(be.variable_name??de))}`].join(",")}}`).filter(Boolean);return(0,w.A)(`
      def _deepnote_run_notebook_function(export_table_states_json):
        globals()['_deepnote_run_notebook_function'] = None
        debug = False

        def sanitize_function_input_value(value):
          if type(value).__name__ == 'DataFrame':
            return [str(cell) for cell in value.to_numpy().flatten()]
          if isinstance(value, list):
            return [str(item) for item in value]
          return str(value)

        # Make the initial POST request
        try:
          body = {
            "inputs": {${mt.join(", ")}}
          }
        except (TypeError, ValueError, KeyError) as e:
          class MissingInputVariable(Exception):
            pass

          raise MissingInputVariable(f"Missing input variable: {e}")

        if debug:
          print(body)

        import requests
        import pandas as pd
        import time

        headers = {
          "Accept": "application/json",
          "Content-Type": "application/json",
          ${j?.notebookFunctionApiToken?`"Authorization": ${(0,a.N2)(`Bearer ${j.notebookFunctionApiToken}`)},`:""}
        }

        url = _dntk.get_webapp_url.get_absolute_notebook_functions_api_url("${pe}")
        response = requests.post(url, headers=headers, json=body)
        response.raise_for_status()
        run_submission_data = response.json()
        if debug:
          print(run_submission_data)

        run_id = run_submission_data.get('notebook_function_run_id')
        if run_id is None:
          raise Exception("Failed to start the notebook function")

        # Extract the polling URL
        polling_url = _dntk.get_webapp_url.get_absolute_notebook_functions_api_url("${pe}/" + run_id)

        # Start polling until status is 'done'
        while True:
          poll_response = requests.get(polling_url, headers=headers)
          if poll_response.status_code == 200:
            poll_data = poll_response.json()
            if debug:
              print(poll_data)

            if poll_data.get("status") == "done":
              break

          time.sleep(1)  # Wait for 1 second before polling again

        export_mappings = {${Q.join(",")}}
        if debug:
          print(export_mappings)

        _dntk.ipython_utils.output_display_data({
          '${F.V1}': {
            'notebook_function_run_id': run_id,
            'executed_notebook_id': run_submission_data.get('notebook_id'),
            'executed_notebook_name': run_submission_data.get('notebook_name'),
            'executed_notebook_inputs': { key: { "value": value } for key, value in body['inputs'].items() },
            'executed_notebook_imports': {${Ee.join(", ")}},
            'executed_notebook_errors': [
              {
                'error_output': error_info['output'],
                'error_block_id': error_info['block_id'],
                'error_block_export_name': error_info['block_export_name'],
              } for error_info in poll_data['errors'] if 'errors' in poll_data
            ],
          }
        })

        for export_name, variable_name in export_mappings.items():
          globals()[variable_name] = None

        cursors = {}

        if 'exports' in poll_data:
          import json

          export_table_states = json.loads(export_table_states_json)

          for export_info in poll_data['exports']:
            variable_name = export_mappings.get(export_info['export_name'])
            if variable_name is None:
              continue

            try:
              if export_info['format'] == 'json':
                export_data = requests.get(export_info['download_url']).json()
              elif export_info['format'] == 'dill':
                import dill
                export_data = dill.loads(requests.get(export_info['download_url']).content)
              else:
                export_data = None
            except Exception:
              export_data = None

            _dntk.ipython_utils.output_display_data({
              '${F.Pu}': {
                'export_name': export_info['export_name'],
                'export_data_type': export_info['data_type'],
                'export_table_state': export_info.get('table_state'),
                'variable_name': variable_name,
              }
            })

            table_state = export_table_states.get(export_info['export_name'], export_info.get('table_state', None))
            if isinstance(export_data, pd.DataFrame) and table_state is not None:
              _dntk.browse_dataframe(export_data, json.dumps(table_state))

            globals()[variable_name] = export_data
            cursors[variable_name] = export_data
            display(export_data)

        if 'errors' in poll_data and poll_data['errors']:
          raise Exception("Notebook function run failed")

        return {
          "cursors": cursors,
        }
    `)},wrapJupyterSource(S,{metadata:j}){const pe=Object.fromEntries(Object.entries(j.function_notebook_export_states??{}).map(([Ke,et])=>[Ke,et.table_state]));return(0,w.A)`
      ${S}

      _deepnote_run_notebook_function(export_table_states_json=${(0,a.N2)(JSON.stringify(pe))})
    `},createInterruptJupyterSource(S,j){const pe=S.metadata.function_notebook_id;return!pe||!(0,r.HD)(pe)?"":(0,w.A)`
      def _deepnote_cancel_notebook_function():
        globals()['_deepnote_cancel_notebook_function'] = None

        import requests
        from deepnote_utils import get_absolute_notebook_functions_api_url

        headers = {
          "Accept": "application/json",
          "Content-Type": "application/json",
          ${j?.notebookFunctionApiToken?`"Authorization": ${(0,a.N2)(`Bearer ${j.notebookFunctionApiToken}`)},`:""}
        }

        url = get_absolute_notebook_functions_api_url("${pe}")
        response = requests.delete(url, headers=headers)
        response.raise_for_status()
        return

      _deepnote_cancel_notebook_function()
    `},parseJupyterSource(S,j){if(!(0,l._m)(j))throw new Error("Can only create a notebook function cell from a jupyter code cell");const pe={cell_type:"notebook-function",metadata:{function_notebook_id:null,...j.metadata},source:"",outputs:j.outputs,outputs_reference:j.outputs_reference??null,execution_count:j.execution_count,block_group:j.block_group??S,content_dependencies:null};return{cellId:S,...pe}},createNewCell(S){const j={cell_type:"notebook-function",source:"",metadata:{function_notebook_id:null,...S.metadata},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)(),content_dependencies:null};return{cellId:S.id,...j}}},B={createJupyterSource(){return"<hr>"},parseJupyterSource(S,j){const pe={cell_type:"separator",source:"",metadata:j.metadata,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const j={cell_type:"separator",source:"",metadata:S.metadata??{},block_group:(0,r.NF)()};return{cellId:S.id,...j}}};var U=t(48338);const G={parseJupyterSource(S,j){const pe=j.source.slice(0,2)==="# "?j.source.slice(2):j.source;return{cellId:S,cell_type:"text-cell-h1",source:pe??"",metadata:{formattedRanges:[],...j.metadata},block_group:j.block_group??S}},createJupyterSource(S){return"# "+S.source},createNewCell(S){return{cellId:S.id,cell_type:"text-cell-h1",source:S.source??"",metadata:{formattedRanges:[],...S.metadata},block_group:(0,r.NF)()}}},f={parseJupyterSource(S,j){const pe=j.source.slice(0,3)==="## "?j.source.slice(3):j.source;return{cellId:S,cell_type:"text-cell-h2",source:pe??"",metadata:{formattedRanges:[],...j.metadata},block_group:j.block_group??S}},createJupyterSource(S){return"## "+S.source},createNewCell(S){return{cellId:S.id,cell_type:"text-cell-h2",source:S.source??"",metadata:{formattedRanges:[],...S.metadata},block_group:(0,r.NF)()}}},I={parseJupyterSource(S,j){const pe=j.source.slice(0,4)==="### "?j.source.slice(4):j.source;return{cellId:S,cell_type:"text-cell-h3",source:pe??"",metadata:{formattedRanges:[],...j.metadata},block_group:j.block_group??S}},createJupyterSource(S){return"### "+S.source},createNewCell(S){return{cellId:S.id,cell_type:"text-cell-h3",source:S.source??"",metadata:{formattedRanges:[],...S.metadata},block_group:(0,r.NF)()}}},E={parseJupyterSource(S,j){const pe=j.source.slice(0,2)==="- "?j.source.slice(2):j.source;return{cellId:S,cell_type:"text-cell-bullet",source:pe??"",metadata:{formattedRanges:[],...j.metadata},block_group:j.block_group??S}},createJupyterSource(S){return"- "+S.source},createNewCell(S){return{cellId:S.id,cell_type:"text-cell-bullet",source:S.source??"",metadata:{formattedRanges:[],...S.metadata},block_group:(0,r.NF)()}}},D={parseJupyterSource(S,j){const pe=j.source.replace(/^- \[[x ]?\] /,"");return{cellId:S,cell_type:"text-cell-todo",source:pe??"",metadata:{formattedRanges:[],...j.metadata},block_group:j.block_group??S}},createJupyterSource(S){return`- [${S.metadata.checked?"x":" "}] ${S.source}`},createNewCell(S){return{cellId:S.id,cell_type:"text-cell-todo",source:S.source??"",metadata:{formattedRanges:[],...S.metadata},block_group:(0,r.NF)()}}},R={parseJupyterSource(S,j){const pe=j.source.slice(0,2)==="> "?j.source.slice(2):j.source;return{cellId:S,cell_type:"text-cell-callout",source:pe??"",metadata:{formattedRanges:[],...j.metadata},block_group:j.block_group??S}},createJupyterSource(S){return"> "+S.source},createNewCell(S){return{cellId:S.id,cell_type:"text-cell-callout",source:S.source??"",metadata:{formattedRanges:[],...S.metadata},block_group:(0,r.NF)()}}},L={parseJupyterSource(S,j){return{cellId:S,cell_type:"text-cell-p",source:j.source??"",metadata:{formattedRanges:[],...j.metadata},block_group:j.block_group??S}},createJupyterSource(S){return S.source},createNewCell(S){return{cellId:S.id,cell_type:"text-cell-p",source:S.source??"",metadata:{formattedRanges:[],...S.metadata},block_group:(0,r.NF)()}}},x="\\\\",ne={createJupyterSource(S){const j=S.metadata.deepnote_variable_name,pe=S.metadata.deepnote_visualization_spec;if(!j||!pe)return"";const Ke=JSON.stringify(pe).replace(/\\/g,`${x}${x}${x}`).replace(/'/g,`${x}${x}'`);return d.A.executeVisualization(j,Ke)},cleanJupyterOutputs(S){return S.forEach(j=>{const pe=j?.data??null;pe!==null&&(j.data=JSON.parse(JSON.stringify(pe)?.replaceAll(`${x}${x}${x}`,x)))}),S},parseJupyterSource(S,j){if(!(0,l._m)(j))throw new Error("Can only create a visualization cell from a jupyter code cell");const pe={cell_type:"visualization",source:"",metadata:j.metadata,outputs:j.outputs,execution_count:j.execution_count,outputs_reference:j.outputs_reference??null,block_group:j.block_group??S};return{cellId:S,...pe}},createNewCell(S){const j={cell_type:"visualization",source:"",metadata:S.metadata??{},outputs:[],execution_count:null,outputs_reference:null,block_group:(0,r.NF)()};return{cellId:S.id,...j}}},M={"big-number":s,sql:U.Id,code:i,markdown:N,"notebook-function":z,"input-text":K,"input-textarea":H,"input-file":T,"input-select":m,"input-date":y,"input-slider":W,"text-cell-h1":G,"text-cell-h2":f,"text-cell-h3":I,"text-cell-p":L,"text-cell-bullet":E,"text-cell-todo":D,"text-cell-callout":R,visualization:ne,image:p,button:n,separator:B};function A(S,j){return M[S.type].createJupyterSource(S,j)}function b(S,j,pe){const Ke=M[j.type];return Ke.wrapJupyterSource?Ke.wrapJupyterSource(S,j,pe):S}function q(S,j){return M[S.type].createInterruptJupyterSource?.(S,j)??null}function fe(S,j){const pe=M[j];return pe.cleanJupyterOutputs?pe.cleanJupyterOutputs(S):S}function oe(S,j,pe){return M[S].parseJupyterSource(j,pe)}function ie(S,j){return M[S].createNewCell(j)}function h(S){return{type:S.cell_type,source:S.source,metadata:P(S)?(0,o.v)({block_type:S.cell_type,metadata:S.metadata,execution_count:S.execution_count,outputs_reference:S.outputs_reference}).metadata:S.metadata,block_group:S.block_group}}const ce=null,ve=null;function Me(S){return _countBy(Object.values(S),j=>j.cell_type)}function Le(S){return Ae(S)||ke(S)}function We(S){return Ae(S)||ke(S)||ue(S)}function Ge(S){return Ae(S)||ke(S)}function $e(S){return S in M}function Qe(S){return c.Dr.includes(S)}function le(S){return P({cell_type:S})}function Ie(S){return V({cell_type:S})}function P(S){return Ae(S)||ke(S)||ue(S)||He(S)||ct(S)||(0,c.i)(S)||Fe(S)}function V(S){return Ae(S)||ke(S)}function Y(S){return S==="code"||S==="sql"}function te(S){return Ae(S)||ke(S)||ct(S)||ue(S)}function Ae(S){return S?.cell_type==="code"}function ke(S){return S?.cell_type==="sql"}function Ne(S){return S?.cell_type==="markdown"}function ue(S){return S?.cell_type==="notebook-function"}function Pe(S){return INPUT_CELL_TYPES.includes(S)}function He(S){return st(S)||it(S)||pt(S)||Ze(S)||St(S)||ht(S)}function Fe(S){return S?.cell_type==="button"}function qe(S){return S?.cell_type==="separator"}function at(S){return!!S?.cell_type&&Qe(S.cell_type)}function st(S){return S?.cell_type==="input-text"}function it(S){return S?.cell_type==="input-textarea"}function ht(S){return S?.cell_type==="input-file"}function pt(S){return S?.cell_type==="input-select"}function St(S){return S?.cell_type==="input-slider"}function Ze(S){return S?.cell_type==="input-date"}function ct(S){return S?.cell_type==="visualization"}function _t(S){return S?.cell_type==="image"}},31158:($,_,t)=>{"use strict";t.d(_,{kU:()=>W});var e=t(42218),o=t(98084);const c=e.z.enum(["stacked","stacked-normalized","side-by-side"]),l=o.YP.exclude(["ordinal"]),r=o.dj.or(e.z.literal("histogram")),d=e.z.object({size:e.z.number().nullable().optional(),amount:e.z.number().nullable().optional()}),s=e.z.object({value:e.z.string()}),a=e.z.object({order:o.aI,channel:o.wT.nullable()}),n=e.z.object({type:o.l9,decimals:e.z.number().nullable()}),i=e.z.object({min:e.z.number().nullable(),max:e.z.number().nullable()}),p=e.z.object({column:e.z.string().nullable(),encodingType:l.nullable(),aggregation:o.vk.nullable(),bin:d.nullable(),timeUnit:o.J6.nullable(),sorting:a.nullable(),scale:o.kE,formatType:e.z.string(),format:n,range:i}),u=p.extend({name:e.z.string().nullable(),visible:e.z.boolean(),valueLabelsEnabled:e.z.boolean()}),g=p.extend({label:s.nullable(),scheme:e.z.object({color:e.z.string().nullable(),scale:e.z.string().nullable()})}),y=p,T=e.z.enum(["area","bar","trail","circle","arc","histogram"]),C=e.z.enum(["value","percent"]),m=e.z.object({type:T,axes:e.z.object({x:u,y:u}),colors:g,sizes:y,stacking:c.nullable(),labelPositionType:o.hq,centerGap:o.l_,valueFormat:C}),O=e.z.object({gridDisabled:e.z.boolean(),tooltips:e.z.boolean(),legendDisabled:e.z.boolean(),tooltipColumns:e.z.array(e.z.object({name:e.z.string(),type:l})),tooltipDefaultMode:e.z.boolean(),legendPosition:e.z.enum(["left","right","top","bottom"]),dualAxisEnabled:e.z.boolean(),title:e.z.string()}),W=e.z.object({display:O,layers:e.z.array(m)})},34501:($,_,t)=>{"use strict";t.d(_,{A:()=>c});var e=t(51937),o=t(17897);const c={listVariables:"print(_dntk.get_var_list())",setVariableContextValue:(l,r)=>`${(0,o.T8)(l)} = ${r?"True":"False"}`,executeBigNumber:(l,r,d="",s="")=>{const a=r?`f"{${r}}"`:'""',n=s?`f"{${s}}"`:'""';return`
def __deepnote_big_number__():
    import json
    import jinja2
    from jinja2 import meta

    def render_template(template):
        parsed_content = jinja2.Environment().parse(template)

        required_variables = meta.find_undeclared_variables(parsed_content)

        context = {
            variable_name: globals().get(variable_name)
            for variable_name in required_variables
        }

        result = jinja2.Environment().from_string(template).render(context)

        return result

    rendered_title = render_template("${l}")
    rendered_comparison_title = render_template("${d}")

    return json.dumps({
        "comparisonTitle": rendered_comparison_title,
        "comparisonValue": ${n},
        "title": rendered_title,
        "value": ${a}
    })

__deepnote_big_number__()
`},executeSqlQuery:({query:l,auditComment:r="",connectionEnvVarName:d,pythonVariableName:s,sqlCacheMode:a})=>{const n=d??"",i=(0,o.N2)(l),p=(0,o.N2)(r),u=(0,e.A)`_dntk.execute_sql(
      ${i},
      '${n}',
      audit_sql_comment=${p},
      sql_cache_mode='${a}'
    )`;return s===void 0?u:(0,e.A)`
        ${s} = ${u}
        ${s}
      `},executeSqlQueryWithConnectionJson:({query:l,auditComment:r="",connectionJson:d,pythonVariableName:s,sqlCacheMode:a})=>{const n=(0,o.N2)(l),i=(0,o.N2)(r),p=(0,e.A)`_dntk.execute_sql_with_connection_json(
      ${n},
      '${d}',
      audit_sql_comment=${i},
      sql_cache_mode='${a}'
    )`;return s===void 0?p:(0,e.A)`
        ${s} = ${p}
        ${s}
      `},executeVisualization:(l,r)=>`_dntk.DeepnoteChart(${l}, """${r}""")`,executeVisualizationWithSpecDict:(l,r)=>`_dntk.DeepnoteChart(${l}, spec_dict=${r})`,persistSession:l=>`_dntk.persist_notebook_session(${(0,o.N2)(l)})`,restoreSession:l=>`_dntk.restore_notebook_session(${(0,o.N2)(l)})`,paginateDataframe:(l,r)=>(0,e.A)`
      if Out.get(${l}) is None:
        raise ValueError('The block does not have a result to iterate')
      _dntk.browse_dataframe(Out.get(${l}), ${(0,o.N2)(r)})
    `,paginateNotebookFunctionImportDataframe:(l,r,d)=>(0,e.A)`
      if Out.get(${l}, {}).get('cursors', {}).get(${(0,o.N2)(r)}) is None:
        raise ValueError('The block does not have a result to iterate')
      _dntk.browse_dataframe(Out.get(${l}, {}).get('cursors', {}).get(${(0,o.N2)(r)}), ${(0,o.N2)(d)})
    `,exportDataframe:(l,r,d)=>`
      if Out.get(${l}) is None:
        raise ValueError('The block does not have a result to iterate')
      _dntk.deepnote_export_df(Out.get(${l}), ${(0,o.N2)(r)}, ${(0,o.N2)(d)})
    `,getDataframeColumnDistinctValues:(l,r)=>(0,e.A)`
  def _deepnote_get_dataframe_column_distinct_values_once(df_var, column_name):
    import json
    vars_dict = get_ipython().kernel.shell.user_ns
    if df_var not in vars_dict:
      return json.dumps([])

    df_var = vars_dict[df_var]
    return json.dumps(df_var[column_name].dropna().unique().tolist()[:1000], default=str)

  print(_deepnote_get_dataframe_column_distinct_values_once(${(0,o.N2)(l)}, ${(0,o.N2)(r)}))
  `,codeCellWrapper:(l,r)=>(0,e.A)`
if '_dntk' in globals():
  _dntk.dataframe_utils.configure_dataframe_formatter(${(0,o.N2)(r)})
else:
  _deepnote_current_table_attrs = ${(0,o.N2)(r)}

${l}
`,setIntegrationVariables:()=>"_dntk.set_integration_env()",executePostStartHooks:()=>"_dntk.execute_post_start_hooks()",exportLastBlockResult:(l,r)=>(0,e.A)`
    def _deepnote_export_last_block_result_once():
      from IPython import get_ipython
      from IPython.display import JSON
      import requests

      ipython = get_ipython()
      execution_count = ipython.execution_count - 1
      result = Out[execution_count] if execution_count in Out else None

      result_data_type = type(result).__name__ if result is not None else None

      format = ${(0,o.N2)(r)}
      if result is None:
        export_data = None
      else:
        if format == 'json':
          try:
            export_data = result.to_json()
          except Exception:
            import json
            export_data = json.dumps(result, default=str)
          export_data_content_type = 'application/json'
        elif format == 'dill':
          try:
            import dill
            export_data = dill.dumps(result)
            export_data_content_type = 'application/octet-stream'
          except Exception:
            export_data = None
        else:
          export_data = None

      if export_data is None:
        exported_format = None
      else:
        response = requests.put(
          ${(0,o.N2)(l)},
          headers={ "Content-Type": export_data_content_type },
          data=export_data
        )
        response.raise_for_status()
        exported_format = format

      JSON({
        "exported_data_type": result_data_type,
        "exported_data_format": exported_format,
      })
      return

    _deepnote_export_last_block_result_once()
  `}},78881:($,_,t)=>{"use strict";t.d(_,{$:()=>c});var e=t(24081),o=t.n(e);function c(l){return(0,e.h32)(l,43981).toString(16)}},48338:($,_,t)=>{"use strict";t.d(_,{Id:()=>n});var e=t(85134),o=t(38435),c=t(17897);function l(i){return i.replace(/[^A-Za-z0-9\.+@]/gi,"")}var r=t(87698),d=t(34501);function s(i){return i.map(p=>{const u=p.evalue;return!nbformat.isError(p)||typeof u!="string"?p:{...p,evalue:u.replace(/\n\/\* {"app":"deepnote".*} \*\//,"")}})}function a(i){return`
/* ${JSON.stringify({app:"deepnote",submitted_by:i.submittedBy,user_email:i.user?.email?l(i.user?.email):void 0,workspace_id:i.workspaceId,project_id:i.projectId,notebook_id:i.notebookId,project_url:(i.tenantDomain??"https://deepnote.com")+o.JZ.project(i.projectId)})} */`}const n={createJupyterSource(i,p){const u=i.metadata.deepnote_variable_name,g=u&&(0,c.T8)(u),y=p?a(p):"";if(p?.federatedIntegrationConnectionString)return d.A.executeSqlQueryWithConnectionJson({query:i.source,auditComment:y,connectionJson:p.federatedIntegrationConnectionString,pythonVariableName:g,sqlCacheMode:"cache_disabled"});{const T=i.metadata.sql_integration_id,C=T?(0,c.Xp)((0,c.av)(T)):"SQL_ALCHEMY_JSON_ENV_VAR";return d.A.executeSqlQuery({query:i.source,auditComment:y,connectionEnvVarName:C,pythonVariableName:g,sqlCacheMode:p?.sqlCacheMode??"cache_disabled"})}},wrapJupyterSource(i,{metadata:p}){const u=p.deepnote_table_state??{},g=JSON.stringify(u);return d.A.codeCellWrapper(i,g)},parseJupyterSource(i,p){if(!(0,e._m)(p))throw new Error("Can only create a SQL cell from a jupyter code cell");const{deepnote_sql_source:u,...g}=p.metadata,y=typeof u=="string"?u:p.source,T={cell_type:"sql",metadata:g,source:y,outputs:p.outputs,outputs_reference:p.outputs_reference??null,execution_count:p.execution_count,block_group:p.block_group??i,content_dependencies:null};return{cellId:i,...T}},createNewCell(i){const p=i.existingCellCounts.sql??0,u={cell_type:"sql",source:i.source??"",metadata:{deepnote_variable_name:`df_${p+1}`,...i.metadata},outputs:[],outputs_reference:null,execution_count:null,block_group:(0,r.NF)(),content_dependencies:null};return{cellId:i.id,...u}}}},38244:($,_,t)=>{"use strict";t.d(_,{u:()=>c});var e=t(76474),o=t.n(e);function c(l){o()(l)}},6536:($,_,t)=>{"use strict";t.d(_,{T:()=>r});var e=t(95e3),o=t.n(e),c=t(14651);let l=!0;(0,c.S)()||(l=!!o().getParser(window.navigator.userAgent).satisfies({ie:">12",edge:">16",firefox:">55",chrome:">58",safari:">12.1",opera:">45",Electron:">8",Chromium:">64.0.3282","Yandex Browser":">20"}));const r={isSupportedBrowser:l,commentsNotificationPreferences:{preference:"my_threads",isSetByUser:!1},lastSearchQuery:""}},31976:($,_,t)=>{"use strict";t.d(_,{$s:()=>Ne,$z:()=>Me,A2:()=>V,DL:()=>ke,E4:()=>Le,Hs:()=>te,Iy:()=>Y,Kl:()=>h,LS:()=>at,O:()=>a,St:()=>p,U$:()=>ce,X8:()=>Ge,YO:()=>Fe,_F:()=>$e,et:()=>u,i:()=>c,jH:()=>ue,kt:()=>r,ll:()=>x,ob:()=>ve,qe:()=>We,tw:()=>q,uX:()=>o,vJ:()=>Ae,xq:()=>oe,yy:()=>M});var e=t(38435);const o="terminal:",c="FROM deepnote/python:3.9",l=[{title:"R kernel",content:"This environment example allow you to run R notebooks. ",url:e.JZ.docsPage("running-your-own-kernel"),image:"/static/environment-templates/ir-kernel.png"},{title:"Bash kernel",content:"This environment example allow you to run Bash notebooks. ",url:e.JZ.docsPage("running-your-own-kernel"),image:"/static/environment-templates/ibash-kernel.png"},{title:"Julia kernel",content:"This environment example allow you to run Julia notebooks. ",url:e.JZ.docsPage("running-your-own-kernel"),image:"/static/environment-templates/ijulia-kernel.png"},{title:"Tensorflow example",content:"Tensorflow ready to use when you start your project.",url:e.JZ.docsPage("running-your-own-kernel"),image:"/static/environment-templates/tensorflow.png"}],r="/work",d=5,s=!0,a=3,n=10,i=14,p="application/vnd.deepnote.dataframe.v3+json",u="application/vnd.deepnote.sql-output-metadata+json",g={cells:[{cell_type:"code",execution_count:null,metadata:{},outputs:[],outputs_reference:null,source:""}],metadata:{},nbformat:4,nbformat_minor:2},y={...g,cells:[{cell_type:"markdown",source:`## Initialization Notebook
This is your initialization notebook.

**What's this for?**

You can put custom code you want us to run every time we setup your environment in here. 

**Awesome! Anything I should not put in here?**

Please don't install \`jupyter\` or \`jedi\` packages, they would break your Deepnote environment. Also, no need to put \`!pip install\`s here, we already save those automatically!

**I want to learn more!**

Great! Just [head over to our docs](https://deepnote.com/docs/custom-initialization).`,metadata:{}},{...g.cells[0],cell_type:"code",metadata:{},source:`%%bash
# If your project has a 'requirements.txt' file, we'll install it here.
if test -f requirements.txt
  then
    pip install -r ./requirements.txt
  else echo "There's no requirements.txt, so nothing to install."
fi`}]},T={python:g,init:y},X=["e46bbe49-09fb-4689-b32f-fecf864d9ed6","4c92143c-8b42-47e5-a462-1388c944e01c","8a1f0501-e090-4368-a144-caa24d54de1c","5874c65f-62a9-4555-8b1a-848e339f0e4a","fffb05c0-9b87-49ea-8279-affbeed41285","7a363174-a5ac-4d40-82d9-cfbdddb14946","917d2cf1-3bf9-43ca-86f9-1aaa0f527bec","c8106e42-b674-4545-aeab-f89fee1f5fc1","2169ecad-3ef1-486b-b62d-8532c65fa551","72e248b5-6681-4e54-9984-884f4fb12f03"],z="dfdb9f81-180d-4fa9-b20d-b8d44e98f22f",B="12b7e0a9-f91b-44da-9c93-08bd9f5ea307",U="638ee43a-421f-4faf-8344-13981f6a798a",G="28e602b3-104b-42b9-9b2d-14254bbb1e71",f="13b536c6-e421-4365-b40b-a54587b77b1f",I="1defa136-9e89-486c-8602-605cca9a85c6",E=[U,G],D=[f,I],R="deepnote.com/runtime-uuid",L="deleted.user@deepnote.com",x="X_MAGIC_LINK_BROWSER_IDENTIFIER",ne=.8,M="deepnote-dataframe-sql",A="anonymousId",b="technicalUser",q="Init",fe=900,oe=["wenjing.yang@dazn.com"],ie=3,h=1e4,ce=1e3,ve=["list","ndarray","DataFrame","Series"],Me={BACKEND:"backend",FRONTEND:"frontend"},Le=[{label:"1 hour",timeInSeconds:1*60*60,isDefault:!0},{label:"12 hours",timeInSeconds:12*60*60,isDefault:!1},{label:"1 day",timeInSeconds:24*60*60,isDefault:!1},{label:"1 week",timeInSeconds:7*24*60*60,isDefault:!1}],We="project-sidebar",Ge="secondary-sidebar",$e="integrationId",Qe="deepnoteworkspace-dev.com",le="deepnoteworkspace-staging.com",Ie="deepnoteworkspace.com",P=30,V="https://landing-assets.deepnote.com/deepnote_demo2.webm",Y="https://landing-assets.deepnote.com/deepnote_demo2.mp4",te="https://landing-assets.deepnote.com/AI-Copilot-Demo.webm",Ae="https://landing-assets.deepnote.com/AI-Copilot-Demo.mp4",ke="https://landing-assets.deepnote.com/Published-apps-and-public-profiles.webm",Ne="https://landing-assets.deepnote.com/Published-apps-and-public-profiles.mp4",ue=3,Pe={"paid-machines-forbidden":"paid machines forbidden","pay-as-you-go-disabled":"pay-as-you-go machines disabled","parallel-running-limit-exceeded":"parallel running limit exceeded"},He={"paid-machines-forbidden":"You have run out of free machine quota for this month, or paid machines are not available for this workspace. Open billing settings for more information.","pay-as-you-go-disabled":"Pay-as-you-go machines have been disabled. Your workspace admin can enable them in the billing settings.","parallel-running-limit-exceeded":"Your plan quota for parallel running projects has been exceeded. Please stop one of your running projects."},Fe=1e3,qe="My workspace",at=3e3},3054:($,_,t)=>{"use strict";t.d(_,{F1:()=>c,Sv:()=>a,k:()=>H});var e=t(42218);const o=e.z.string(),c=["default","defaultBold","positive","positiveBold","positiveProminentBold","attention","attentionBold","attentionProminentBold","critical","criticalBold","criticalProminentBold"],l=e.z.enum(["all","allExcept","only"]),r=["is-equal","is-not-equal","is-one-of","is-not-one-of","is-not-null","is-null","text-contains","text-does-not-contain","greater-than","greater-than-or-equal","less-than","less-than-or-equal","between","outside-of","is-relative-today","is-after","is-before","is-on"],d=e.z.enum(r),s=e.z.object({type:e.z.literal("singleColor"),columnSelectionMode:l,columnNames:e.z.array(o).nullable(),operator:d,comparativeValues:e.z.array(e.z.string()),styleName:e.z.enum(c)}),a=["defaultToPositive","defaultToAttention","defaultToCritical","positiveToDefault","attentionToDefault","criticalToDefault","criticalToDefaultToPositive","criticalToAttentionToPositive","positiveToDefaultToCritical","positiveToAttentionToCritical"],n=e.z.object({valueType:e.z.enum(["autoAllColumns","number","percentage"]),value:e.z.number().nullable(),customColor:e.z.string().nullable()}),i=e.z.object({type:e.z.literal("colorScale"),columnSelectionMode:l,columnNames:e.z.array(o).nullable(),pointMin:n,pointMid:n,pointMax:n,scaleName:e.z.enum(a)}),p=e.z.object({quantitative:e.z.object({min:e.z.number(),mid:e.z.number(),max:e.z.number()}).nullable(),temporal:e.z.object({min:e.z.date(),mid:e.z.date(),max:e.z.date()}).nullable()}),u=i.extend({resolvedValue:p}),g=e.z.union([s,i]),y=e.z.union([s,u]),T=e.z.object({min:e.z.string(),mid:e.z.string().optional(),max:e.z.string()}),C=e.z.object({column:o,operator:d,comparativeValues:e.z.array(e.z.string())}),m=e.z.object({id:o,type:e.z.enum(["asc","desc"])}),W=e.z.object({id:o,value:e.z.string(),type:e.z.literal("contains")}),K=e.z.object({columnName:o,displayName:e.z.string()}),H=e.z.object({pageSize:e.z.number().optional(),pageIndex:e.z.number().optional(),filters:e.z.array(W).optional(),conditionalFilters:e.z.array(C).optional(),sortBy:e.z.array(m).optional(),cellFormattingRules:e.z.array(g).optional(),wrappedTextColumnIds:e.z.array(o).optional(),hiddenColumnIds:e.z.array(o).optional(),columnOrder:e.z.array(o).optional(),columnDisplayNames:e.z.array(K).optional()})},53694:($,_,t)=>{"use strict";t.d(_,{x:()=>o});function e(r,d={}){const s={},a=[],n=new Set,i=u=>{if(d.strict)throw u;console.error(u)},p=new Proxy(s,{get(u,g){if(typeof g!="string")return i(new Error(`[DI] Invalid (non-string) service key: ${String(g)}`)),null;if(!(g in r))return i(new Error(`[DI] Unknown service: ${g}`)),null;const y=g,T=s[y];if(T!=null)return T;if(n.has(y))return i(new Error(`[DI] The factory for the service "${y}" failed previously, not trying again`)),null;if(a.includes(y))return i(new Error(`[DI] Circular dependency detected: ${a.join(" -> ")} -> ${y}`)),null;a.push(y);try{const C=r[y],m=c(y,C,p);return s[y]=m,m}catch(C){return n.add(y),i(C),null}finally{a.pop()}}});return p}function o(r,d,s={}){const a=e({...d,...r},s),n={},i=u=>{if(s.strict)console.error(u);else throw u};return new Proxy(n,{get(u,g){return typeof g!="string"||g==="$$typeof"?u[g]:g in r?a[g]:g in d?(i(new Error(`[DI] Internal service: ${g}`)),null):(i(new Error(`[DI] Unknown service: ${g}`)),null)}})}function c(r,d,s){if(typeof d!="function")return d;const a=d;try{return Reflect.construct(a,[s])}catch(n){const{message:i}=n instanceof Error?n:{message:"err.message not available"};if(i.includes("Circular dependency detected"))throw n;if(i.match(/constructor/i))try{return a(s)??null}catch(p){const{message:u}=p instanceof Error?p:{message:"subErr.message not available"};throw u.includes("Circular dependency detected")?p:new Error(`[DI] Failed to instantiate service "${r}":
${l(u,"  ")}`)}throw new Error(`[DI] Failed to instantiate service "${r}":
${l(i,"  ")}`)}}function l(r,d){return r.replace(/^/gm,d)}},30749:($,_,t)=>{"use strict";t.d(_,{O:()=>r});var e=t(66827),o=t.n(e),c=t(30365),l=t.n(c);const r=d=>{const a=(0,e.parse)(d,{includeComments:!1}).map(n=>n.raw).join("");return(0,c.sha224)(a)}},4546:($,_,t)=>{"use strict";t.d(_,{Z:()=>e});function e(o){return o instanceof HTMLElement&&o.offsetWidth<o.scrollWidth}},11555:($,_,t)=>{"use strict";t.d(_,{A_:()=>c.A_,S$:()=>e.S});var e=t(14651),o=t(57892),c=t(95059)},95059:($,_,t)=>{"use strict";t.d(_,{A_:()=>o,KV:()=>s,YG:()=>d,gX:()=>c,xZ:()=>l});var e=t(14651);function o(a){return((0,e.S)()?{}.ENV:window.__env)===a}const c=()=>o("development")||o("staging"),l=()=>o("development")||o("test"),r=()=>o("development"),d=()=>o("staging"),s=()=>!["development","staging","test"].some(a=>o(a))},14651:($,_,t)=>{"use strict";t.d(_,{S:()=>e});const e=()=>typeof window>"u"||!window.document||!window.document.createElement},57892:($,_,t)=>{"use strict";t.d(_,{V:()=>l});var e=t(95059),o=t(14651);const c=(0,o.S)()?"deepnote.com":window.location.hostname,l=(0,e.xZ)()?"http://dev.deepnote.org:3002":`https://${c}`},67723:($,_,t)=>{"use strict";t.d(_,{w:()=>e});const e={SNOWFLAKE_SCHEMA_ERROR:"SNOWFLAKE_SCHEMA_ERROR",BIGQUERY_SCHEMA_ERROR:"BIGQUERY_SCHEMA_ERROR",SQLSERVER_SCHEMA_ERROR:"SQLSERVER_SCHEMA_ERROR",REDSHIFT_SCHEMA_ERROR:"REDSHIFT_SCHEMA_ERROR",POSTGRES_SCHEMA_ERROR:"POSTGRES_SCHEMA_ERROR",MYSQL_SCHEMA_ERROR:"MYSQL_SCHEMA_ERROR",TRINO_SCHEMA_ERROR:"TRINO_SCHEMA_ERROR",DREMIO_SCHEMA_ERROR:"DREMIO_SCHEMA_ERROR",ATHENA_SCHEMA_ERROR:"ATHENA_SCHEMA_ERROR",CLICKHOUSE_SCHEMA_ERROR:"CLICKHOUSE_SCHEMA_ERROR",DATABRICKS_SCHEMA_ERROR:"DATABRICKS_SCHEMA_ERROR",SUBSCRIPTION_UNSUFFICIENT_PERMISSIONS_ERROR:"SUBSCRIPTION_UNSUFFICIENT_PERMISSIONS_ERROR",USER_SUSPENDED:"USER_SUSPENDED",WRONG_AUTH_PROVIDER:"WRONG_AUTH_PROVIDER",GIT_EXPORT_ERROR:"GIT_EXPORT_ERROR",PROJECT_NOT_FOUND:"PROJECT_NOT_FOUND",INVALID_PERMISSION:"INVALID_PERMISSION",DAG_INVALID_SYNTAX:"DAG_INVALID_SYNTAX",NOTEBOOK_INSUFFICIENT_PERMISSIONS_ERROR:"NOTEBOOK_INSUFFICIENT_PERMISSIONS_ERROR"}},26875:($,_,t)=>{"use strict";t.d(_,{Cf:()=>o,rj:()=>K});const e={message:"message",name:"name",description:"description",number:"number",fileName:"fileName",lineNumber:"lineNumber",columnNumber:"columnNumber",captureStackTrace:"captureStackTrace"};class o extends Error{cause;shouldLogError=!0;httpStatus=500;constructor(N,w={}){super(N),this.name=this.constructor.name,Object.entries(w).forEach(([k,F])=>{k in e||(this[k]=F)}),Object.setPrototypeOf&&Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const c=(H,N)=>({[H]:{message:H,status:N}}),l={...c("NAME_ALREADY_EXISTS",409),...c("INVALID_S3_ACCESS",400)};class r extends null{}class d extends null{}class s extends null{}class a extends null{}class n extends null{}class i extends null{}class p extends null{}class u extends null{shouldLogError=!1;httpStatus=401}class g extends o{integrationId;constructor(N){super(void 0,N),this.integrationId=N.integrationId}}class y extends null{}class T extends null{shouldLogError=!1;httpStatus=401}class C extends null{shouldLogError=!1;httpStatus=401}class m extends null{shouldLogError=!1;httpStatus=400}class O extends null{shouldLogError=!0;httpStatus=400}function W(H){return{shouldLogError:H.shouldLogError,httpStatus:H.httpStatus??500,message:H.message,errorCode:H.name}}function K(H){switch(H){case"InsufficientProjectPermissionError":case"InsufficientTeamRoleError":case"IntegrationSchemaNotSupportedError":case"IntegrationNotFoundError":return!1;default:return!0}}},82326:($,_,t)=>{"use strict";t.d(_,{c:()=>e});function e(o){if(o instanceof Error)return o;if(typeof o=="object"&&o!==null)try{return new Error(JSON.stringify(o))}catch(c){return new Error(`Stringify error: ${c}`)}return new Error(String(o))}},39916:($,_,t)=>{"use strict";t.d(_,{M:()=>e});function e(o){if(!o)return"undefined";if(o.name||o.message)return`[Error ${o.name} (${o.message}) at ${o.stack}].`;try{return JSON.stringify(o)}catch(c){return c instanceof Error?`Failed to stringifyError - ${c}`:"Failed to stringifyError"}}},24232:($,_,t)=>{"use strict";t.d(_,{f:()=>o,w:()=>e});function e(c){return!!c&&c.type==="directory"}function o(c){return!!c&&c.type==="file"}},30598:($,_,t)=>{"use strict";t.d(_,{D:()=>o,h:()=>e});const e=["snowflake","s3","sql-server","big-query","mysql","athena","pgsql","redshift","google-drive","mongodb"],o={GET_INTRODUCED:"GET_INTRODUCED",GET_INTRODUCED_SUBSTEP_PRODUCT_DEMO:"GET_INTRODUCED_SUBSTEP_PRODUCT_DEMO",GET_INTRODUCED_SUBSTEP_PRODUCT_DEMO_2:"GET_INTRODUCED_SUBSTEP_PRODUCT_DEMO_2",GET_INTRODUCED_SUBSTEP_PRODUCT_DEMO_3:"GET_INTRODUCED_SUBSTEP_PRODUCT_DEMO_3",DATA_CONNECTION_SUBSTEP_CSV_UPLOADED:"DATA_CONNECTION_SUBSTEP_CSV_UPLOADED",DATA_CONNECTION:"DATA_CONNECTION",CREATE_FIRST_PROJECT:"CREATE_FIRST_PROJECT",INVITE_COLLABORATORS:"INVITE_COLLABORATORS",APP:"APP",AI_USAGE:"AI_USAGE"}},42191:($,_,t)=>{"use strict";t.d(_,{rR:()=>o});var e=t(42218);const o={LAKE:"lake",FJORD:"fjord",OCEAN:"ocean",OCEAN_10:"ocean_10",OCEAN_20:"ocean_20",GULF:"gulf",SEA:"sea",SUPER_SEA:"super_sea",EOCH_GROUP:"eoch_group",EOCH_DENALI:"eoch_denali",EOCH_ELIAS:"eoch_elias"},c=r=>{const d=[o.EOCH_GROUP,o.EOCH_DENALI,o.EOCH_ELIAS];return Object.values(o).filter(n=>!d.includes(n)).includes(r)},l=e.z.enum([o.LAKE,o.FJORD,o.OCEAN,o.OCEAN_10,o.OCEAN_20,o.GULF,o.SEA,o.SUPER_SEA,o.EOCH_GROUP,o.EOCH_DENALI,o.EOCH_ELIAS])},51396:($,_,t)=>{"use strict";t.d(_,{$:()=>r,j:()=>l});var e=t(30365),o=t.n(e),c=t(65878);function l(d,s){const a=`${d}-${s}`;return(0,e.sha256)(a)}function r(){const d=(0,c.A)();return(0,e.sha256)(d)}},86527:($,_,t)=>{"use strict";t.d(_,{S:()=>o});var e=t(60022);const o={pgsql:c=>{const l=(0,e.Xp)(c.name),r=`engine_${l.toLowerCase()}_${c.type}`;return[`# SETTING UP POSTGRES CONNECTION:
# After this block has run, the "${r}" variable will be available
# in the next blocks to interact with the database.
from sqlalchemy import create_engine
from sqlalchemy.engine.url import URL
import os
${r} = create_engine(URL.create(
  "postgresql+psycopg2",
  username=os.environ["${l}_USER"],
  password=os.environ["${l}_PASSWORD"],
  host=os.environ["${l}_HOST"],
  port=os.environ["${l}_PORT"],
  database=os.environ["${l}_DATABASE"],
))`,`# Example block to query the database and load
# the results into a pandas DataFrame
import pandas as pd

query = """
SELECT *
FROM users
"""
df = pd.io.sql.read_sql_query(query, ${r})
df`]},mysql:c=>{const l=(0,e.Xp)(c.name),r=`engine_${l.toLowerCase()}_${c.type}`;return[`# SETTING UP MYSQL CONNECTION:
# After this block has run, the "${r}" variable will be available
# in the next blocks to interact with the database.
from sqlalchemy import create_engine
from sqlalchemy.engine.url import URL
import os
connect_args = {'ssl':{'fake_flag_to_enable_tls': True if os.environ["${l}_SSLENABLED"] == 'true' else False}}
${r} = create_engine(URL.create(
  "mysql+pymysql",
  username=os.environ["${l}_USER"],
  password=os.environ["${l}_PASSWORD"],
  host=os.environ["${l}_HOST"],
  port=os.environ["${l}_PORT"],
  database=os.environ["${l}_DATABASE"]
), connect_args=connect_args)`,`# Example block to query the database and load
# the results into a pandas DataFrame
import pandas as pd

query = """
SELECT *
FROM users
"""
df = pd.io.sql.read_sql_query(query, ${r})
df`]}}},80092:($,_,t)=>{"use strict";t.d(_,{$J:()=>c,Ir:()=>r,_7:()=>l,fV:()=>o});var e=t(42218);const o={PASSWORD:"password",OKTA:"okta",NATIVE_SNOWFLAKE:"snowflake",AZURE_AD:"azure"},c={SERVICE_ACCOUNT:"service-account",GOOGLE_OAUTH:"google-oauth"},l={AccessKeys:"access-keys",IamRole:"iam-role"},r={UsernameAndPassword:"username-and-password",IndividualCredentials:"individual-credentials"},d=e.Ay.union([e.Ay.object({accountName:e.Ay.string(),authMethod:e.Ay.literal(o.PASSWORD),username:e.Ay.string(),password:e.Ay.string()}),e.Ay.object({accountName:e.Ay.string(),authMethod:e.Ay.literal(o.OKTA),clientId:e.Ay.string(),clientSecret:e.Ay.string(),oktaSubdomain:e.Ay.string(),identityProvider:e.Ay.string(),authorizationServer:e.Ay.string()}),e.Ay.object({accountName:e.Ay.string(),authMethod:e.Ay.literal(o.NATIVE_SNOWFLAKE),clientId:e.Ay.string(),clientSecret:e.Ay.string()}),e.Ay.object({accountName:e.Ay.string(),authMethod:e.Ay.literal(o.AZURE_AD),clientId:e.Ay.string(),clientSecret:e.Ay.string(),resource:e.Ay.string(),tenant:e.Ay.string()})]),s=e.Ay.union([e.Ay.object({service_account:e.Ay.string(),authMethod:e.Ay.literal(c.SERVICE_ACCOUNT)}),e.Ay.object({project:e.Ay.string(),clientId:e.Ay.string(),clientSecret:e.Ay.string(),authMethod:e.Ay.literal(c.GOOGLE_OAUTH)})]),a=e.Ay.object({host:e.Ay.string(),port:e.Ay.string(),token:e.Ay.string()}),n=e.Ay.object({owner:e.Ay.string(),repositoryName:e.Ay.string(),repositoryFullName:e.Ay.string(),branch:e.Ay.string().transform(u=>u===""?null:u)}),i=e.Ay.object({sshUser:e.Ay.string(),sshHost:e.Ay.string(),sshPort:e.Ay.number(),remoteHost:e.Ay.string(),remotePort:e.Ay.number(),localPort:e.Ay.number().optional().nullable().transform(()=>null)}),p=e.Ay.object({host:e.Ay.string(),httpPath:e.Ay.string(),token:e.Ay.string(),port:e.Ay.string()})},41843:($,_,t)=>{"use strict";t.d(_,{i1:()=>o,wG:()=>c});const e=null;function o(r){switch(r){case"big-query":case"mysql":return"`";case"snowflake":case"athena":case"pgsql":case"redshift":return'"';default:return"`"}}function c(r,d){if(!l(r,d))return r;const s=o(d);return`${s}${r}${s}`}function l(r,d){const s=/[!@#$%^&*(),.?":{}|<>-]/;return d==="snowflake"?!/^[_A-Z]*$/.test(r):d==="athena"||d==="big-query"?r.includes(" ")||s.test(r):r.toLowerCase()!==r||r.includes(" ")||s.test(r)}},24467:($,_,t)=>{"use strict";t.d(_,{$G:()=>l,JF:()=>U,VX:()=>s,Wz:()=>a,YZ:()=>C,ZX:()=>T,fQ:()=>K,n4:()=>i,pU:()=>r,py:()=>z,xb:()=>B,yV:()=>y});var e=t(80092);const c=[...["mongodb","pgsql","athena","gitlab","env","google-drive","s3","local","big-query","snowflake","mysql","mindsdb","pandas-dataframe","gcs","redshift","dropbox","slack","gcr","ecr","dockerhub","ssh-key","sql-server","spark","clickhouse","notion","airtable","telegram","supabase","influxdb","onedrive","azure-blob-storage","deepnote-api","snowflake-snowpark","great-expectations","weights-and-biases","comet","neptune_ai","mariadb","trino","presto","dynamodb","dremio","google-sheets","box","ssh_tunnel","alloydb","cloud-sql","spanner","github_package","materialize","dataproc","databricks"],"dbt","arize","wandb","python","rlang","julia","javascript","pytorch","tensorflow","plotly","pandas"],l={CONNECTED:"connected",ALWAYS_ON:"always_on",AVAILABLE:"available",MOUNT_ERROR:"mount_error",CONNECTING:"connecting",DISCONNECTING:"disconnecting",REFRESHING:"refreshing"},r=[l.CONNECTED,l.DISCONNECTING,l.MOUNT_ERROR,l.CONNECTING,l.REFRESHING],d=null,s=[e.fV.OKTA,e.fV.NATIVE_SNOWFLAKE,e.fV.AZURE_AD,e.$J.GOOGLE_OAUTH,e.Ir.IndividualCredentials],a={[e.fV.OKTA]:"Okta",[e.fV.NATIVE_SNOWFLAKE]:"Snowflake OAuth",[e.fV.AZURE_AD]:"AzureAD",[e.$J.GOOGLE_OAUTH]:"Google OAuth",[e.Ir.IndividualCredentials]:"Individual credentials"};function n(G){return G.authMethod===AwsAuthMethods.IamRole}const i=["dockerhub","ecr","gcr"],p=null,u=null,g=null,y=["pgsql","clickhouse","redshift","athena","big-query","snowflake","sql-server","mysql","mariadb","mindsdb","pandas-dataframe","trino","dremio","alloydb","spanner","materialize","databricks"],T=["pgsql","mysql","big-query","snowflake","sql-server","redshift","trino","athena","clickhouse","dremio","materialize","databricks"],C=["pgsql","redshift","big-query","snowflake"],m=null,O=null,W=["github_package"];function K(G){return W.includes(G)}const H=null,N=["UNKNOWN_ERROR"],w=["SSH_TUNNEL_ERROR","SSH_TUNNEL_TIMEOUT"],k=["PATH_EXISTS","GITHUB_AUTHENTICATION_ERROR"],F=["GDRIVE_MISSING_REFRESH_TOKEN"],X=[...N,...w,...k,...F],z={SSH_TUNNEL_TIMEOUT:"We failed to establish an SSH connection to your server within 10 seconds. Please check the credentials and try again.",SSH_TUNNEL_ERROR:"The SSH tunnel failed to start. Please try again or contact our support.",UNKNOWN_ERROR:"The integration failed to mount. Please check the credentials and try again.",PATH_EXISTS:"To connect the GitHub package integration, please remove the existing directory and try again.",GITHUB_AUTHENTICATION_ERROR:"Failed to authenticate with GitHub. Please check if the app has access to the repository.",GDRIVE_MISSING_REFRESH_TOKEN:"The refresh token has expired. Open the integration settings and grant permissions to Deepnote to access your Google Drive."},B=["pgsql","mysql","mindsdb","mariadb","mongodb","trino","dremio"],U=[...B,"redshift"]},56093:($,_,t)=>{"use strict";t.d(_,{I:()=>o});var e=t(38435);const o={mongodb:{name:"MongoDB",link:e.JZ.docsPage("mongodb"),description:"Use a connection string or your credentials to connect to a MongoDB instance.",howToTitle:"Learn more about connecting to MongoDB"},pgsql:{name:"PostgreSQL",link:e.JZ.docsPage("postgresql"),description:"Connect to a Postgres instance and use SQL directly from notebooks.",howToTitle:"Learn more about connecting to PostgreSQL"},clickhouse:{name:"ClickHouse",link:e.JZ.docsPage("clickhouse"),description:"Connect to a ClickHouse instance and use SQL directly from notebooks.",howToTitle:"Learn more about connecting to ClickHouse"},redshift:{name:"Amazon Redshift",link:e.JZ.docsPage("redshift"),description:"Connect to your Redshift warehouse using your credentials. Access data through Deepnote-native Redshift blocks.",howToTitle:"Learn more about connecting to Redshift"},athena:{name:"Amazon Athena",link:e.JZ.docsPage("amazon-athena"),description:"Connect to Amazon Athena and use SQL directly from notebooks.",howToTitle:"Learn more about connecting to Athena"},github_package:{name:"GitHub",link:e.JZ.docsPage("github"),description:"Integrate Deepnote with your GitHub repositories.",howToTitle:"Learn more about GitHub integration",modalDescriptionTitle:"Github files",modalDescription:"Use this integration to import your files, modules or packages from GitHub. When connected, the repository will show up in your project filesystem. To version your notebooks, use GitHub sync."},gitlab:{name:"GitLab",link:e.JZ.docsPage("gitlab"),description:"Integrate Deepnote with your GitLab repositories.",howToTitle:""},env:{name:"Environment variables",link:e.JZ.docsPage("environment-variables"),description:"Store configuration options or credentials in environment variables.",howToTitle:"Learn more about environment variables"},"google-drive":{name:"Google Drive",link:e.JZ.docsPage("google-drive"),description:"Mount a Google Drive into the filesystem and use it for both reading data or writing to it.",howToTitle:"Learn more about connecting to Google Drive"},local:{notHipaaCompliant:!0,name:"Upload large files or datasets",link:e.JZ.docsPage("deepnote-shared-datasets"),description:"Upload a larger dataset and share it with the rest of the team.",howToTitle:"Learn more about connecting to a Shared Dataset"},s3:{name:"Amazon S3",link:e.JZ.docsPage("amazon-s3"),description:"Mount an S3 bucket into the filesystem and use it for both reading data or writing to it.",howToTitle:"Learn more about connecting to S3 bucket"},mysql:{name:"MySQL",link:e.JZ.docsPage("mysql"),description:"Use your credentials to connect to your MySQL database.",howToTitle:"Learn more about connecting to MySQL"},mariadb:{name:"MariaDB",link:e.JZ.docsPage("mysql"),description:"Use your credentials to connect to your MariaDB database.",howToTitle:"Learn more about connecting to MariaDB"},mindsdb:{name:"MindsDB",link:e.JZ.docsPage("mindsdb"),description:"Use your credentials to connect to your MindsDB database.",howToTitle:"Learn more about connecting to MindsDB"},"big-query":{name:"Google BigQuery",link:e.JZ.docsPage("google-bigquery"),description:"Connect to your BigQuery warehouse via generated service account. Query your data using Deepnote SQL blocks.",howToTitle:"Use BigQuery DataFrames with BigQuery"},gcs:{name:"Google Cloud Storage",link:e.JZ.docsPage("google-cloud-storage"),description:"Mount a Google bucket into the filesystem and use it for both reading data or writing to it",howToTitle:"Learn more about connecting to Google Cloud Storage"},snowflake:{name:"Snowflake",link:e.JZ.docsPage("snowflake"),description:"Use your credentials to connect to your Snowflake warehouse.",howToTitle:"Learn more about connecting to Snowflake"},dremio:{name:"Dremio",link:e.JZ.docsPage("dremio"),description:"Connect to your Dremio data lakehouse using your credentials. Access data through Deepnote-native Dremio blocks.",howToTitle:"Learn more about connecting to Dremio"},databricks:{name:"Databricks",link:e.JZ.docsPage("databricks"),description:"",howToTitle:"Learn more about connecting to Databricks"},trino:{name:"Trino",link:e.JZ.docsPage("trino"),description:"",howToTitle:"Learn more about connecting to Trino"},presto:{name:"Presto",link:e.JZ.docsPage("trino"),description:"",howToTitle:"Learn more about connecting to Presto"},dynamodb:{name:"Amazon DynamoDB",link:e.JZ.docsPage("trino"),description:"",howToTitle:"Learn more about connecting to Presto"},"snowflake-snowpark":{name:"Snowpark",link:e.JZ.docsPage("snowpark"),description:"",howToTitle:""},dropbox:{name:"Dropbox",link:e.JZ.docsPage("dropbox"),description:"",howToTitle:""},slack:{name:"Slack",link:e.JZ.docsPage("slack"),description:"",howToTitle:""},"sql-server":{name:"Microsoft SQL Server",link:e.JZ.docsPage("sql-server"),description:"Use your credentials to connect to your SQL Server.",howToTitle:"How to connect to SQL Server"},spark:{name:"Apache Spark",link:e.JZ.docsPage("spark"),description:"",howToTitle:""},dataproc:{name:"Google Dataproc",link:e.JZ.docsPage("spark"),description:"",howToTitle:""},ecr:{name:"Amazon ECR",link:e.JZ.docsPage("amazon-ecr"),description:"Add credentials to use private Docker images from ECR",howToTitle:"How to use Elastic Container Registry credentials"},gcr:{name:"Google Container Registry",link:e.JZ.docsPage("google-container-registry"),description:"Add credentials to use private Docker images from GCR",howToTitle:"How to use Google Container Registry credentials"},dockerhub:{name:"Docker Hub",link:e.JZ.docsPage("docker-hub"),description:"Add credentials to use private Docker images from Docker Hub",howToTitle:"How to use Docker Hub credentials"},"pandas-dataframe":{name:"Dataframe SQL",link:e.JZ.docsPage("sql-cells"),description:"Query pandas DataFrames using SQL",howToTitle:""},"ssh-key":{name:"SSH Key",link:e.JZ.docsPage("ssh-key"),description:"Create an SSH key to connect to remote machine or database",howToTitle:"How to use SSH Keys"},notion:{name:"Notion",link:e.JZ.docsPage("notion"),description:"",howToTitle:""},airtable:{name:"Airtable",link:e.JZ.docsPage("airtable"),description:"",howToTitle:""},telegram:{name:"Telegram",link:e.JZ.docsPage("telegram"),description:"",howToTitle:""},supabase:{name:"Supabase",link:e.JZ.docsPage("supabase"),description:"",howToTitle:""},influxdb:{name:"InfluxDB",link:e.JZ.docsPage("influxdb"),description:"",howToTitle:""},onedrive:{name:"Microsoft OneDrive",link:e.JZ.docsPage("onedrive"),description:"",howToTitle:""},"azure-blob-storage":{name:"Microsoft Azure Blob Storage",link:e.JZ.docsPage("azure-blob-storage"),description:"",howToTitle:""},"deepnote-api":{name:"Deepnote API",link:e.JZ.docsPage("deepnote-api"),description:"",howToTitle:""},"great-expectations":{name:"Great Expectations",link:e.JZ.docsPage("great-expectations"),description:"",howToTitle:""},"weights-and-biases":{name:"Weights & Biases",link:e.JZ.docsPage("weights-and-biases"),description:"",howToTitle:""},comet:{name:"Comet",link:e.JZ.docsPage("cometml"),description:"",howToTitle:""},neptune_ai:{name:"Neptune.AI",link:e.JZ.docsPage("neptuneai"),description:"",howToTitle:""},"google-sheets":{name:"Google Sheets",link:"https://deepnote.com/workspace/Edison-Insights-3e79b326-0cf6-4bff-8b41-99d9feb9b992/project/Read-from-public-Google-Sheet-25da9f7e-82e2-416c-827a-514b802bb1a1",description:"",howToTitle:""},box:{name:"Box",link:"https://deepnote.com/workspace/edison-insights-3e79b326-0cf6-4bff-8b41-99d9feb9b992/project/Box-connector-7e918b3c-37a7-4c76-9bad-770e5bdb1d35",description:"",howToTitle:""},ssh_tunnel:{name:"SSH Tunnel",link:`${e.JZ.docsPage("securing-connections")}#ssh-tunnel-integration`,description:"",howToTitle:"How to use SSH tunnels"},alloydb:{name:"Google AlloyDB",link:e.JZ.docsPage("google-alloydb"),description:"",howToTitle:"Learn more about connecting to Google AlloyDB"},"cloud-sql":{name:"Google Cloud SQL",link:e.JZ.docsPage("google-cloud-sql"),description:"",howToTitle:"Learn more about connecting to Google Cloud SQL"},spanner:{name:"Google Spanner",link:e.JZ.docsPage("google-spanner"),description:"",howToTitle:"Learn more about connecting to Google Spanner"},materialize:{name:"Materialize",link:e.JZ.docsPage("materialize"),description:"",howToTitle:"Learn more about connecting to Materialize"}}},10524:($,_,t)=>{"use strict";t.d(_,{XW:()=>i,an:()=>s,uP:()=>n});var e=t(32371),o=t.n(e),c=t(24467);function l(p){return includes(CONTAINER_REGISTRY_INTEGRATIONS,p)}function r(p){return includes(FILE_BASED_INTEGRATIONS,p)}const d=p=>s(p.type),s=p=>c.ZX.includes(p),a=p=>n(p.type),n=p=>c.YZ.includes(p);function i(p){return o()(c.yV,p)}},74762:($,_,t)=>{"use strict";t.d(_,{U:()=>o});var e=t(11555);function o(){(0,e.S$)()||(window.Intercom?window.Intercom("show",null):window.open("mailto:help@deepnote.com"))}},31558:($,_,t)=>{"use strict";t.d(_,{EE:()=>r,GZ:()=>s,s5:()=>a});var e=t(38807),o=t.n(e),c=t(79562),l=t.n(c);const r=n=>!n.startsWith("https://")&&!n.startsWith("http://")&&!n.startsWith("data:"),d=["https://","http://","#","mailto:"],s=n=>!d.some(i=>n.toLowerCase().startsWith(i)),a=(n,i)=>{let p=!1;if(n.value&&n.value.toLowerCase().includes("<img")){const u=o()().parse(n.value);l()(u,g=>{const y=g.properties?.src;g.tagName==="img"&&y&&r(y)&&(g.properties.src=i(y),p=!0)}),p&&(n.value=o()().stringify(u))}return p}},31548:($,_,t)=>{"use strict";t.d(_,{d_:()=>e,HM:()=>o,tD:()=>c,f4:()=>l});const e={CLOSE_MODAL:"CLOSE_MODAL",OPEN_MODAL:"OPEN_MODAL"},o={NO_MODAL:"",SEARCH_MODAL:"SearchModal",SIGN_IN_MODAL:"SignInModal",SIGN_IN_HARDWARE_MODAL:"SignInModalHardware",SELECT_HARDWARE_MODAL:"SelectHardwareModal",SELECT_ENVIRONMENT_MODAL:"SelectEnvironmentModal",INDIVIDUAL_CREDENTIALS_MODAL:"IndividualCredentialsModalContainer",INTEGRATION_HOW_TO_MODAL:"IntegrationHowToModal",FILE_UPLOAD_MODAL:"FileUploadModal",REFRESH_MODAL:"RefreshModal",MD_CHEAT_SHEET_MODAL:"MdCheatSheetModal",SHORTCUTS_CHEAT_SHEETS_MODAL:"ShortcutsCheatSheetModal",COMMAND_PALETTE_MODAL:"CommandPaletteModal",CELL_EMBED_MODAL:"CellEmbedModal",ADD_ENVIRONMENT_MODAL:"AddEnvironmentModal",EDIT_ENVIRONMENT_MODAL:"EditEnvironmentModal",ADD_PROJECT_VERSION_MODAL:"AddProjectVersionModal",PUBLISH_MODAL:"PublishModal",SCHEDULING_MODAL:"SchedulingModal",PROMPT_FEDERATED_AUTH_SIGNIN:"PromptFederatedAuthSignIn",DAG_MODAL:"DagModal"},c={openedModal:o.NO_MODAL},l=(r=c,d)=>d.type===e.CLOSE_MODAL?{openedModal:o.NO_MODAL}:d.type===e.OPEN_MODAL?d.payload.newModal===o.FILE_UPLOAD_MODAL?{openedModal:d.payload.newModal,uploadFolderPath:d.payload.uploadFolderPath,uploadType:d.payload.uploadType,onFileUpload:d.payload.onFileUpload}:d.payload.newModal===o.INTEGRATION_HOW_TO_MODAL?{openedModal:d.payload.newModal,integration:d.payload.integration}:d.payload.newModal===o.CELL_EMBED_MODAL?{openedModal:d.payload.newModal,cellId:d.payload.cellId}:d.payload.newModal===o.SIGN_IN_MODAL?{openedModal:d.payload.newModal,title:d.payload.title,redirectTo:d.payload.redirectTo}:d.payload.newModal===o.EDIT_ENVIRONMENT_MODAL?{openedModal:d.payload.newModal,id:d.payload.id,name:d.payload.name,link:d.payload.link}:d.payload.newModal===o.REFRESH_MODAL?{openedModal:d.payload.newModal,title:d.payload.title,message:d.payload.message}:d.payload.newModal===o.PROMPT_FEDERATED_AUTH_SIGNIN?{openedModal:d.payload.newModal,federatedAuthMethod:d.payload.federatedAuthMethod,integrationId:d.payload.integrationId,integrationName:d.payload.integrationName,integrationType:d.payload.integrationType}:d.payload.newModal===o.INDIVIDUAL_CREDENTIALS_MODAL?{openedModal:o.INDIVIDUAL_CREDENTIALS_MODAL,integrationId:d.payload.integrationId}:d.payload.newModal===o.COMMAND_PALETTE_MODAL?{openedModal:d.payload.newModal,defaultValue:d.payload.defaultValue}:d.payload.newModal===o.PUBLISH_MODAL?{openedModal:d.payload.newModal,oldName:d.payload.oldName,newName:d.payload.newName,onPublish:d.payload.onPublish}:d.payload.newModal===o.DAG_MODAL?{openedModal:d.payload.newModal}:{openedModal:d.payload.newModal}:r},25395:($,_,t)=>{"use strict";t.d(_,{IM:()=>c,QH:()=>l,Xx:()=>r});var e=t(17897);function o(d){const s=d.substring(d.length-UNIQUE_ID_LENGTH,d.length),a=d.substring(0,d.length-UNIQUE_ID_LENGTH-1);return{id:s,name:a}}function c(d,s){return s===null?d:`${(0,e.Yv)(s)}-${d}`}function l(d,s){return!d.find(a=>a.name===s)}function r(d,s,a={}){const n=a?.separator??"-";let i=a.startingNumber===void 0?1:a.startingNumber,p=s+(a.startWithNumber?n+i:""),u=l(d,p);for(;!u;)i+=1,p=s+n+i,u=l(d,p);return p}},93724:($,_,t)=>{"use strict";t.d(_,{Pu:()=>a,V1:()=>s,MU:()=>i,gc:()=>n});var e=t(42218),o=t(3054);const c=e.z.object({type:e.z.literal("export"),export_name:e.z.string(),export_download_url:e.z.string(),export_format:e.z.enum(["dill","json"]),export_data_type:e.z.string().nullable(),export_table_state:o.k.nullable().optional()}),l=e.z.object({type:e.z.literal("error"),error_output:e.z.object({output_type:e.z.literal("error"),ename:e.z.string(),evalue:e.z.string(),traceback:e.z.array(e.z.string())}),error_block_id:e.z.string().nullable(),error_block_export_name:e.z.string().nullable()}),r=e.z.union([c,l]);function d(p){return`notebook-function-results:${p.runId}`}const s="application/vnd.deepnote.notebook-function-run-metadata+json",a="application/vnd.deepnote.notebook-function-import-metadata+json",n=e.z.object({notebook_function_run_id:e.z.string(),executed_notebook_id:e.z.string(),executed_notebook_name:e.z.string(),executed_notebook_inputs:e.z.record(e.z.object({value:e.z.union([e.z.string(),e.z.array(e.z.string())])})),executed_notebook_imports:e.z.record(e.z.object({enabled:e.z.boolean(),variable_name:e.z.string()})).optional(),executed_notebook_errors:e.z.array(l.omit({type:!0})).optional()}),i=e.z.object({export_name:e.z.string(),export_data_type:e.z.string().nullable(),export_table_state:o.k.nullable().optional(),variable_name:e.z.string()})},83222:($,_,t)=>{"use strict";t.d(_,{W3:()=>T,Yh:()=>n,h7:()=>p,t$:()=>s,wC:()=>d});var e=t(33243),o=t(65878),c=t(31976),l=t(17897),r=t(93724);function d(C){return e.jj(C)||e.hc(C)}function s(C){return d(C)&&!!C.data[c.St]}const a=[c.et,r.V1,r.Pu];function n(C){return d(C)?!Object.keys(C.data).every(O=>a.includes(O)):!0}function i(C){return d(C)&&!!C.data[DEEPNOTE_SQL_METADATA_MIME_TYPE]}function p(C){return d(C)&&C.data[c.et]?C.data[c.et]:null}function u(C){return C.map(m=>{if(nbformat.isError(m))return`${m.ename}: ${m.evalue}`;if(nbformat.isStream(m))return maybeJoin(m.text,`
`);if(!n(m))return null;if(d(m)){if("text/plain"in m.data)return m.data["text/plain"];const O=Object.keys(m.data);if(O.length>0)return`<${O[0]} output>`}return null}).filter(Boolean)}function g(C,m){if(m)return C.includes(m);const O=C.includes("deepnoteworkspace-dev.com:3002"),W=C.includes("deepnoteworkspace-staging.com"),K=C.includes("deepnoteworkspace.com");return O||W||K}const y=(0,o.A)(),T=(C,m)=>{if(m)return m;if(C.match(/.*chromatic.com/))return"deepnoteworkspace.com";const O=y;if(C.includes("deepnote-staging.com"))return`${O}.outputs.deepnoteworkspace-staging.com`;if(C.includes("deepnote.com"))return`${O}.outputs.deepnoteworkspace.com`;if(C.includes("dev.deepnote.org"))return"uuidv4.outputs.deepnoteworkspace-dev.com:3002";throw new Error(`Running on unexpected host: ${C}. Cannot determine the outputs domain.`)}},94751:($,_,t)=>{"use strict";t.d(_,{Xo:()=>p,lv:()=>n});var e=t(78627),o=t(25395),c=t(64688),l=t(17897);function r(u,g){return`${(0,l.Yv)(g)}-${u}`}function d(u){return u?`app/${u.slug}`:"app/anon"}function s(u){return`${u.protocol}://${u.get("Host")}`}const a=(u,g,y,T)=>{const C=new URLSearchParams;return g&&C.set("utm_source",g),y&&C.set("utm_medium",y),T&&C.set("utm_campaign",T),C.set("utm_content",u),C.toString()};function n({serverUrl:u,project:g,streamlitAppId:y,author:T,source:C,medium:m,campaign:O}){const W=a(g.id,C,m,O);if(y){const K=`/streamlit-apps/${y}`;return{publishedProjectPath:K,publishedProjectUrl:`${u}${K}?${W}`}}else{const K=r(g.id,g.name),N=`/${d(T)}/${K}`,w=`${u}${N}?${W}`;return{publishedProjectPath:N,publishedProjectUrl:w}}}function i(u){return u?`/workspace/${(0,e.g)(u.id,u.name)}/project`:`${(typeof window<"u"?window.location.pathname:"/").match(/^\/workspace\/([^/]+)/)?.[0]??null??""}/project`}function p({serverUrl:u,project:g,workspace:y,filePath:T,urlHash:C,notebook:m,source:O,medium:W,campaign:K}){const H=i(y),N=r(g.id,g.name),w=`${H}/${N}`,k=`${u}${w}`,F=a(g.id,O,W,K),X=F?`?${F}`:"",z=C?`#${C}`:"";if(m){const f=`/notebook/${(0,o.IM)(m.id,m.name)}${z}`,I=w+f+X,E=k+f+X;return{projectSlug:N,projectUrl:w+X,fullProjectUrl:k+X,relativeUrlWithFile:I,fullUrlWithFile:E}}const B=T?`/${encodeURIComponent(T)}`:"",U=w+B+X+z,G=k+B+X+z;return{projectSlug:N,projectUrl:w+X,fullProjectUrl:k+X,relativeUrlWithFile:U,fullUrlWithFile:G}}},11272:($,_,t)=>{"use strict";t.d(_,{AG:()=>i,K3:()=>n,Kv:()=>l,XH:()=>p,eG:()=>s,eg:()=>r,i:()=>d,lg:()=>a,up:()=>c});var e=t(37697),o=t.n(e);const c={HOURLY:"Hourly",DAILY:"Daily",WEEKLY:"Weekly",MONTHLY:"Monthly",CRON:"Cron (custom)"};function l(u){return u?`00:${u.padStart(2,"0")}`:""}function r(u,g,y,T){if(u===c.CRON)return g;const C=parseInt(String(g.split(":")[0]),10),m=parseInt(String(g.split(":")[1]),10);if(u===c.HOURLY)return`${m} * * * *`;if(u===c.MONTHLY)return`${m} ${C} ${T} * *`;let O=u===c.DAILY?"*":y.join(",");return O===""&&(O="*"),`${m} ${C} * * ${O}`}function d(u){if(u.length===0)return 0;const g=u.split(":")[1];return Number(g)||0}function s(u){const g=u.trim().split(" "),y=`${(g[1]??"0").padStart(2,"0")}:${(g[0]??"0").padStart(2,"0")}`,T=g[1]==="*"&&g[2]==="*"&&g[3]==="*"&&g[4]==="*",C=g[2]==="*"?"":g[2];if(T)return{frequency:c.HOURLY,time:l(g[0]),minute:g[0],weeklyDayFrequency:[],dayOfTheMonth:C};const m=g[2]!=="*"?c.MONTHLY:g[4]==="*"?c.DAILY:c.WEEKLY,O=g[4]&&g[4]!=="*"?g[4].split(","):[];return{frequency:m,time:y,minute:g[0],weeklyDayFrequency:O,dayOfTheMonth:C}}function a(u){if(!u||u.length>999)return!1;try{return o().parseExpression(u),!0}catch{return!1}}function n(u,g){if(g===c.CRON)return`at ${u}`;const{time:y,minute:T,weeklyDayFrequency:C,dayOfTheMonth:m}=s(u);if(g===c.HOURLY){const O=parseInt(T??"",10);return O===0||!Number.isFinite(O)?"every hour":`every hour ${T?`at ${i(parseInt(T,10))} minute`:""}`}return g===c.MONTHLY?`monthly on the ${i(parseInt(m,10))} at ${y}`:g===c.WEEKLY?`weekly on ${C.map(O=>p.find(W=>W.value===O)?.label??O).join(", ")} at ${y}`:`daily at ${y}`}function i(u){return u.toString()+(["st","nd","rd"][((u+90)%100-10)%10-1]??"th")}const p=[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"2",label:"Tuesday"},{value:"3",label:"Wednesday"},{value:"4",label:"Thursday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}]},51881:($,_,t)=>{"use strict";t.d(_,{H:()=>r});var e=t(69446),o=t(60213),c=t(11555),l=t(39916);function r(d,s="error",a={}){const n=d instanceof Error&&d.stack?d:new Error((0,l.M)(d));((0,c.A_)("staging")||(0,c.A_)("development"))&&(s==="warning"?console.warn(n,a):console.error(n,a));try{(0,e.v4)(i=>{i.setExtras(a),i.setLevel(s),(0,o.Cp)(n)})}catch{try{(0,o.Cp)(n)}catch{console.error(n)}}}},64688:($,_,t)=>{"use strict";t.d(_,{$:()=>d,d:()=>s});var e=t(97406),o=t(62077);const c=22,l=36,r=l-4;function d(n){if(n[n.length-l-1]!=="-")return{id:null,slug:n};const[p,u]=n.match(/-?([a-f0-9]{32}|[a-f0-9-]{36})$/i)??[],g=u&&(0,o.A)(u)?u:null,y=p?n.substring(0,n.length-p.length):n;return{id:g,slug:y}}function s(n){const i=/(?:^|-)([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,p=/(?:^|-)([0-9a-fA-F]{32})$/,[u,g]=n.match(i)??[],[y,T]=n.match(p)??[],C=g??T,m=u??y,O=C&&((0,o.A)(C)||C.length===r)?C:null;if(O){const N=m?n.substring(0,n.length-m.length):void 0;return{id:O,name:N&&N.length>0?N:void 0}}const W=n.substring(n.length-c,n.length),K=n.substring(0,n.length-c-1),H=a(W);return H===null||!(0,o.A)(H)?null:{id:H,name:K.length>0?K:void 0}}function a(n){try{return e.decode(n)}catch{return null}}},47628:($,_,t)=>{"use strict";t.d(_,{A5:()=>U,BD:()=>n,Dr:()=>W,Gc:()=>C,Qq:()=>E,Ts:()=>f,bm:()=>F,cn:()=>s,eJ:()=>y,i:()=>N,ll:()=>u,m:()=>I,pH:()=>p,pr:()=>L,sJ:()=>z,sm:()=>w,uW:()=>a,uc:()=>R,wz:()=>X,zd:()=>T});var e=t(42218),o=t(31976),c=t(3054),l=t(24467),r=t(10524);const d=null;var s=(h=>(h[h.PAID_HARDWARE=0]="PAID_HARDWARE",h[h.USE_TEAM=1]="USE_TEAM",h[h.UNLIMITED_COLLABORATORS=2]="UNLIMITED_COLLABORATORS",h[h.SET_INACTIVITY_GRACE_PERIOD=3]="SET_INACTIVITY_GRACE_PERIOD",h))(s||{}),a=(h=>(h.STANDARD="standard",h.PRO="pro",h.PERSONAL="personal",h.ACADEMIA="academia",h.ENTERPRISE="enterprise",h.PRO_TRIAL="pro-trial",h.ENTERPRISE_TRIAL="enterprise-trial",h.AI_ADDON="ai-addon",h.HW_SUBSCRIPTION="hw-subscription",h))(a||{}),n=(h=>(h.ADMIN="admin",h.EDIT="edit",h.EXECUTE="execute",h.COMMENT="comment",h.VIEW="view",h.APP_USER="app_user",h.NONE="none",h))(n||{});const i=e.z.nativeEnum(n),p=["app_user","view","comment","execute","edit"],u={OFF:"off",LINK_ONLY:"link_only",COLLABORATORS:"collaborators",PUBLIC:"public"},g=e.z.enum([u.OFF,u.LINK_ONLY,u.COLLABORATORS,u.PUBLIC]);var y=(h=>(h[h.VIEW_INTEGRATIONS=0]="VIEW_INTEGRATIONS",h[h.EDIT_INTEGRATIONS=1]="EDIT_INTEGRATIONS",h[h.CONNECT_INTEGRATIONS=2]="CONNECT_INTEGRATIONS",h[h.VIEW_PROJECTS=3]="VIEW_PROJECTS",h[h.VIEW_GUEST_PROJECTS=4]="VIEW_GUEST_PROJECTS",h[h.VIEW_PRIVATE_PROJECTS=5]="VIEW_PRIVATE_PROJECTS",h[h.CREATE_PROJECT=6]="CREATE_PROJECT",h[h.CREATE_PRIVATE_PROJECT=7]="CREATE_PRIVATE_PROJECT",h[h.DUPLICATE_PROJECT=8]="DUPLICATE_PROJECT",h[h.ACCESS_TEAM_SETTINGS=9]="ACCESS_TEAM_SETTINGS",h[h.EDIT_TEAM_SETTINGS=10]="EDIT_TEAM_SETTINGS",h[h.EDIT_DOMAIN_INVITES_EMAIL=11]="EDIT_DOMAIN_INVITES_EMAIL",h[h.UPDATE_PROJECT_SETTINGS=12]="UPDATE_PROJECT_SETTINGS",h[h.VIEW_LEFT_SIDEBAR=13]="VIEW_LEFT_SIDEBAR",h[h.VIEW_SETTINGS=14]="VIEW_SETTINGS",h[h.VIEW_PROJECTS_PROJECT_SIDEBAR=15]="VIEW_PROJECTS_PROJECT_SIDEBAR",h[h.VIEW_MEMBERS=16]="VIEW_MEMBERS",h[h.VIEW_GUEST_SETTINGS=17]="VIEW_GUEST_SETTINGS",h[h.VIEW_USER_GROUPS=18]="VIEW_USER_GROUPS",h[h.MANAGE_MEMBERS=19]="MANAGE_MEMBERS",h[h.MANAGE_USER_GROUPS=20]="MANAGE_USER_GROUPS",h[h.VIEW_CATEGORIES=21]="VIEW_CATEGORIES",h[h.VIEW_TEAM=22]="VIEW_TEAM",h[h.SET_ENFORCED_AUTH_PROVIDER=23]="SET_ENFORCED_AUTH_PROVIDER",h[h.TOGGLE_PAY_AS_YOU_GO_MACHINES=24]="TOGGLE_PAY_AS_YOU_GO_MACHINES",h[h.MODIFY_CATEGORIES=25]="MODIFY_CATEGORIES",h[h.MANAGE_ENVIRONMENT=26]="MANAGE_ENVIRONMENT",h[h.MIGRATE_NOTEBOOKS=27]="MIGRATE_NOTEBOOKS",h[h.MANAGE_TEMPLATES=28]="MANAGE_TEMPLATES",h[h.MANAGE_FAVORITE_PROJECTS=29]="MANAGE_FAVORITE_PROJECTS",h[h.EXPORT_AUDIT_LOGS=30]="EXPORT_AUDIT_LOGS",h[h.VIEW_GITHUB_REPOSITORIES=31]="VIEW_GITHUB_REPOSITORIES",h[h.EDIT_GITHUB_REPOSITORIES=32]="EDIT_GITHUB_REPOSITORIES",h[h.SET_DEFAULT_TEMPLATE=33]="SET_DEFAULT_TEMPLATE",h[h.VIEW_SSH_KEYS=34]="VIEW_SSH_KEYS",h))(y||{}),T=(h=>(h[h.EXECUTE_CELL=0]="EXECUTE_CELL",h[h.EDIT_INPUT_CELL_VALUE=1]="EDIT_INPUT_CELL_VALUE",h[h.MANIPULATE_CELLS=2]="MANIPULATE_CELLS",h[h.VIEW_NOTEBOOK_VARIABLES=3]="VIEW_NOTEBOOK_VARIABLES",h[h.MANIPULATE_FILES=4]="MANIPULATE_FILES",h[h.RUN_TERMINAL=5]="RUN_TERMINAL",h[h.ADD_COMMENT=6]="ADD_COMMENT",h[h.VIEW_COMMENTS=7]="VIEW_COMMENTS",h[h.SET_COMMENT_NOTIFICATION_PREFERENCE=8]="SET_COMMENT_NOTIFICATION_PREFERENCE",h[h.RESOLVE_COMMENT_THREAD=9]="RESOLVE_COMMENT_THREAD",h[h.DUPLICATE_PROJECT=10]="DUPLICATE_PROJECT",h[h.LOAD_FILES=11]="LOAD_FILES",h[h.REQUEST_VARIABLE_DETAILS=12]="REQUEST_VARIABLE_DETAILS",h[h.REFETCH_PROJECT=13]="REFETCH_PROJECT",h[h.AUTOCOMPLETE=14]="AUTOCOMPLETE",h[h.VIEW_PACKAGES=15]="VIEW_PACKAGES",h[h.DOWNLOAD_FILES=16]="DOWNLOAD_FILES",h[h.PUBLISH_NOTEBOOK=17]="PUBLISH_NOTEBOOK",h[h.SCHEDULE_NOTEBOOK=18]="SCHEDULE_NOTEBOOK",h[h.LEAVE_PROJECT=19]="LEAVE_PROJECT",h[h.MANAGE_COLLABORATORS=20]="MANAGE_COLLABORATORS",h[h.MANAGE_HARDWARE=21]="MANAGE_HARDWARE",h[h.MANAGE_HARDWARE_LIFECYCLE=22]="MANAGE_HARDWARE_LIFECYCLE",h[h.RENAME_PROJECT=23]="RENAME_PROJECT",h[h.INSTALL_PACKAGES=24]="INSTALL_PACKAGES",h[h.PROJECT_INFO=25]="PROJECT_INFO",h[h.VIEW_INTEGRATIONS=26]="VIEW_INTEGRATIONS",h[h.SET_INACTIVITY_GRACE_PERIOD=27]="SET_INACTIVITY_GRACE_PERIOD",h[h.MANAGE_VERSIONS=28]="MANAGE_VERSIONS",h[h.RESTORE_VERSION=29]="RESTORE_VERSION",h[h.USE_JUPYTER_WIDGETS=30]="USE_JUPYTER_WIDGETS",h[h.MANAGE_GIT_REPO=31]="MANAGE_GIT_REPO",h[h.DELETE_PROJECT=32]="DELETE_PROJECT",h[h.CHANGE_PROJECT_OWNER=33]="CHANGE_PROJECT_OWNER",h[h.UPDATE_PROJECT_SETTINGS=34]="UPDATE_PROJECT_SETTINGS",h[h.VIEW_HISTORY=35]="VIEW_HISTORY",h[h.MANAGE_ENVIRONMENT=36]="MANAGE_ENVIRONMENT",h[h.VIEW_PROJECT=37]="VIEW_PROJECT",h[h.VIEW_PUBLISHED_PROJECT=38]="VIEW_PUBLISHED_PROJECT",h[h.USE_FEDERATED_AUTH=39]="USE_FEDERATED_AUTH",h[h.MANAGE_GIT_EXPORT=40]="MANAGE_GIT_EXPORT",h[h.USE_CONNECTED_GIT_REPOSITORY=41]="USE_CONNECTED_GIT_REPOSITORY",h[h.VIEW_GIT_BRANCH_STATUS=42]="VIEW_GIT_BRANCH_STATUS",h[h.VIEW_ANALYTICS=43]="VIEW_ANALYTICS",h[h.MANAGE_SQL_QUERY_CACHING=44]="MANAGE_SQL_QUERY_CACHING",h[h.RUN_AI=45]="RUN_AI",h[h.READ_AI_JOB_STATUS=46]="READ_AI_JOB_STATUS",h[h.MANAGE_APP=47]="MANAGE_APP",h[h.EDIT_APP=48]="EDIT_APP",h))(T||{});const C={GUEST:"guest",VIEWER:"viewer",EDITOR:"editor",ADMIN:"admin"},m=e.z.union([e.z.literal(C.GUEST),e.z.literal(C.VIEWER),e.z.literal(C.EDITOR),e.z.literal(C.ADMIN)]),O=null,W=["text-cell-h1","text-cell-h2","text-cell-h3","text-cell-p","text-cell-bullet","text-cell-todo","text-cell-callout"],H=["code","sql","markdown","notebook-function",...["input-text","input-textarea","input-select","input-date","input-slider","input-file"],...W,"visualization","image","button","separator","big-number"];function N(h){return h?h.cell_type==="big-number":!1}const w={GOOGLE:"google",GITHUB:"github",OKTA:"okta",EMAIL:"email",MICROSOFT:"microsoft",WORKOS:"workos"},k=[w.WORKOS,w.OKTA],F=[w.GOOGLE,w.OKTA,w.MICROSOFT,w.WORKOS],X={[w.GOOGLE]:"Google",[w.OKTA]:"Okta",[w.GITHUB]:"Github",[w.EMAIL]:"Email",[w.MICROSOFT]:"Microsoft",[w.WORKOS]:"SSO"},z={PREEMPTED_FREE:"PREEMPTED_FREE",PREEMPTED_PAID:"PREEMPTED_PAID",QUOTA:"QUOTA",SPOT_INTERRUPT:"SPOT_INTERRUPT",INACTIVE:"INACTIVE",CANNOT_USE_HARDWARE:"CANNOT_USE_HARDWARE",PAY_AS_YOU_GO_DISABLED:"PAY_AS_YOU_GO_DISABLED",ABUSE:"ABUSE",DOWNGRADE:"DOWNGRADE"},B={[z.SPOT_INTERRUPT]:"hardware_preemption",[z.PREEMPTED_FREE]:"hardware_preemption_free",[z.PREEMPTED_PAID]:"hardware_preemption_paid",[z.QUOTA]:"hardware_out_of_quota",[z.CANNOT_USE_HARDWARE]:"hardware_preemption",[z.INACTIVE]:"hardware_shutdown_inactivity",[z.PAY_AS_YOU_GO_DISABLED]:"pay_as_you_go_disabled",[z.ABUSE]:"pay_as_you_go_disabled",[z.DOWNGRADE]:"hardware_out_of_quota"};var U=(h=>(h[h.USAGE_BASED_BILLING=1]="USAGE_BASED_BILLING",h[h.VERSION_2=1]="VERSION_2",h[h.VERSION_3=3]="VERSION_3",h[h.VERSION_4=4]="VERSION_4",h[h.VERSION_5=5]="VERSION_5",h[h.VERSION_6=6]="VERSION_6",h))(U||{});const G={GOOGLE_DRIVE:"google-drive"},f={ADD_BIG_NUMBER_CELL_ABOVE:"add-big-number-cell-above",ADD_BIG_NUMBER_CELL_BELOW:"add-big-number-cell-below",ADD_BUTTON_CELL_ABOVE:"add-button-cell-above",ADD_BUTTON_CELL_BELOW:"add-button-cell-below",ADD_CHART_CELL_ABOVE:"add-chart-cell-above",ADD_CHART_CELL_BELOW:"add-chart-cell-below",ADD_CODE_CELL_ABOVE:"add-code-cell-above",ADD_CODE_CELL_BELOW:"add-code-cell-below",ADD_CODE_CELL_BELOW_LEGACY:"add-code-cell-below-legacy",ADD_COMMENT:"add-comment",ADD_DATAFRAME_SQL_CELL_ABOVE:"add-dataframe-sql-cell-above",ADD_DATAFRAME_SQL_CELL_BELOW:"add-dataframe-sql-cell-below",ADD_DATE_INPUT_CELL_ABOVE:"add-date-input-cell-above",ADD_DATE_INPUT_CELL_BELOW:"add-date-input-cell-below",ADD_FILE_INPUT_CELL_ABOVE:"add-file-input-cell-above",ADD_FILE_INPUT_CELL_BELOW:"add-file-input-cell-below",ADD_HEADING_1_CELL_ABOVE:"add-heading-1-cell-above",ADD_HEADING_1_CELL_BELOW:"add-heading-1-cell-below",ADD_HEADING_2_CELL_ABOVE:"add-heading-2-cell-above",ADD_HEADING_2_CELL_BELOW:"add-heading-2-cell-below",ADD_HEADING_3_CELL_ABOVE:"add-heading-3-cell-above",ADD_HEADING_3_CELL_BELOW:"add-heading-3-cell-below",ADD_MD_CELL_ABOVE:"add-md-cell-above",ADD_MD_CELL_BELOW:"add-md-cell-below",ADD_NOTEBOOK_FUNCTION_CELL_ABOVE:"add-notebook-function-cell-above",ADD_NOTEBOOK_FUNCTION_CELL_BELOW:"add-notebook-function-cell-below",ADD_PARAGRAPH_CELL_ABOVE:"add-paragraph-cell-above",ADD_PARAGRAPH_CELL_BELOW:"add-paragraph-cell-below",ADD_SEPARATOR_CELL_ABOVE:"add-separator-cell-above",ADD_SEPARATOR_CELL_BELOW:"add-separator-cell-below",ADD_SELECT_CELL_ABOVE:"add-select-cell-above",ADD_SELECT_CELL_BELOW:"add-select-cell-below",ADD_SLIDER_CELL_ABOVE:"add-slider-cell-above",ADD_SLIDER_CELL_BELOW:"add-slider-cell-below",ADD_TEXT_INPUT_CELL_ABOVE:"add-text-input-cell-above",ADD_TEXT_INPUT_CELL_BELOW:"add-text-input-cell-below",ADD_TEXTAREA_INPUT_CELL_ABOVE:"add-textarea-input-cell-above",ADD_TEXTAREA_INPUT_CELL_BELOW:"add-textarea-input-cell-below",ALIGN_IMAGE_CELL_CENTER:"align-image-cell-center",ALIGN_IMAGE_CELL_LEFT:"align-image-cell-left",ALIGN_IMAGE_CELL_RIGHT:"align-image-cell-right",ALL_CODE_VISIBILITY_TOGGLE:"all-code-visibility-toggle",ALL_OUTPUT_VISIBILITY_TOGGLE:"all-output-visibility-toggle",CELL_COMMANDS_DROPDOWN_TOGGLE:"cell-commands-dropdown-toggle",CLEAR_ALL_OUTPUTS:"clear-all-outputs",CLEAR_OUTPUT:"clear-output",CLOSE_COMMENT_EDITOR:"close-comment-editor",CLOSE_MONACO_FIND_WIDGET:"close-monaco-find-widget",CODE_VISIBILITY_TOGGLE:"code-visibility-toggle",COMMAND_PALETTE:"command-palette",CONVERT_CELL_TO_BULLET_LIST:"convert-cell-to-bullet-list",CONVERT_CELL_TO_CALLOUT:"convert-cell-to-callout",CONVERT_CELL_TO_CODE:"convert-cell-to-code",CONVERT_CELL_TO_SQL:"convert-cell-to-sql",CONVERT_CELL_TO_H1:"convert-cell-to-h1",CONVERT_CELL_TO_H2:"convert-cell-to-h2",CONVERT_CELL_TO_H3:"convert-cell-to-h3",CONVERT_CELL_TO_MD:"convert-cell-to-md",CONVERT_CELL_TO_P:"convert-cell-to-p",CONVERT_CELL_TO_TODO_LIST:"convert-cell-to-todo-list",COPY_CELL_LINK:"copy-cell-link",CREATE_FILE:"create-file",CREATE_FOLDER:"create-folder",CREATE_NOTEBOOK:"create-notebook",CREATE_TERMINAL:"create-terminal",FOLD_ALL_MONACO_REGIONS:"fold-all-monaco",UNFOLD_ALL_MONACO_REGIONS:"unfold-all-monaco",SINGLE_BLOCK_AI_CANCEL:"single-block-ai-cancel",SINGLE_BLOCK_AI_EDIT:"single-block-ai-edit",SINGLE_BLOCK_AI_EXPLAIN:"single-block-ai-explain",MULTI_BLOCK_AI_OPEN_IN_NOTEBOOK_FOOTER:"multi-block-ai-open-in-notebook-footer",MULTI_BLOCK_AI_REVIEW_ACCEPT:"multi-block-ai-review-accept",MULTI_BLOCK_AI_REVIEW_DISCARD:"multi-block-ai-review-discard",MULTI_BLOCK_AI_REVIEW_GO_BACK_TO_EDIT_PROMPT:"multi-block-ai-review-go-back-to-edit-prompt",DELETE_CELL:"delete-cell",DUPLICATE_CELL:"duplicate-cell",DUPLICATE_VISUALIZATION_AS_CODE:"duplicate-visualization-as-code",EXECUTE_ABOVE:"execute-above",EXECUTE_ALL:"execute-all",EXECUTE_CELL:"execute-cell",EXECUTE_CELL_DEFAULT_MODE:"execute-cell-default-mode",EXECUTE_CELL_DOWNSTREAM:"execute-cell-downstream",EXECUTE_CELL_ONLY:"execute-cell-only",EXECUTE_CELL_AND_BELOW:"execute-cell-and-below",EXECUTE_CELL_CREATE_NEXT:"execute-cell-create-next",EXECUTE_CELL_WITHOUT_CACHE:"execute-cell-without-cache",EXPORT_FILTERED_CHART_AS_CODE:"export-filtered-chart-as-code",FOCUS_NEXT_BLOCK:"focus-next-block",FORMAT_CELL:"format-cell",HISTORY_BACK:"history-back",HISTORY_FORWARD:"history-forward",INSERT_NEW_LINE:"insert-new-line",LIMIT_OUTPUT_HEIGHT_TOGGLE:"limit-output-height-toggle",MD_CHEAT_SHEET:"md-cheat-sheet",MD_RENDER:"md-render",MOVE_CELL_DOWN:"move-cell-down",MOVE_CELL_UP:"move-cell-up",MULTI_CELL_COMMANDS_DROPDOWN_TOGGLE:"multi-cell-commands-dropdown-toggle",MULTI_DELETE_CELL:"delete-cells",MULTI_DUPLICATE_CELL:"duplicate-cells",MULTI_EXECUTE_CELL:"execute-cells",MULTI_EXECUTE_CELL_ALT:"execute-cells-alt",MULTI_EXECUTE_CELL_WITHOUT_CACHE:"execute-cells-without-cache",MULTI_MOVE_CELL_DOWN:"move-cells-down",MULTI_MOVE_CELL_UP:"move-cells-up",MULTI_SELECT_EXPAND_TO_PREVIOUS_BLOCK:"multi-select-expand-to-previous-block",MULTI_SELECT_EXPAND_TO_NEXT_BLOCK:"multi-select-expand-to-next-block",MULTI_SELECT_SELECT_PREVIOUS_BLOCK:"multi-select-select-previous-block",MULTI_SELECT_SELECT_NEXT_BLOCK:"multi-select-select-next-block",MULTI_SELECT_TOGGLE:"multi-select-toggle",OPEN_DAG:"open-dag",OPEN_DOCUMENTATION:"open-documentation",OPEN_CHARTS_DOCUMENTATION:"open-charts-documentation",OPEN_NOTEBOOK_FUNCTION_SETTINGS:"open-notebook-function-settings",OPEN_SEARCH:"open-search",OPERATION_REDO:"operation-redo",OPERATION_UNDO:"operation-undo",OUTPUT_VISIBILITY_TOGGLE:"output-visibility-toggle",RESTART_AND_CLEAR_ALL:"restart-and-clear-all",RESTART_AND_EXECUTE_ALL:"restart-and-execute-all",RESTART_HARDWARE:"restart-hardware",RESTART_KERNEL:"restart-kernel",SAVE_CHANGES_NOOP:"save-changes-noop",SET_CELL_COLOR_BLUE:"set-cell-color-blue",SET_CELL_COLOR_GREEN:"set-cell-color-green",SET_CELL_COLOR_RED:"set-cell-color-red",SET_CELL_COLOR_YELLOW:"set-cell-color-yellow",SET_IMAGE_CELL_WIDTH_100:"set-image-cell-width-100",SET_IMAGE_CELL_WIDTH_50:"set-image-cell-width-50",SET_IMAGE_CELL_WIDTH_75:"set-image-cell-width-75",SET_IMAGE_CELL_WIDTH_ACTUAL:"set-image-cell-width-actual",EMBED_BLOCK:"embed-block",SHORTCUTS_CHEAT_SHEET:"shortcuts-cheat-sheet",SPLIT_CELL:"split-cell",STOP_EXECUTION:"stop-execution",TOGGLE_COLOR_THEME:"toggle-color-theme",TOGGLE_PROJECT_SIDEBAR:"toggle-project-sidebar",TOGGLE_UI:"toggle-ui",UPLOAD_FILES:"upload-files",TOGGLE_BLOCK_OPTIONS:"toggle-block-options"},I={FROM_OPTIONS:"from-options",FROM_VARIABLE:"from-variable"},E={SIGN_IN:0,SIGN_UP:1,SSO:2,EMAIL:3,EMAIL_SENT:4},D={TOKEN_MISSING:"token_missing",MAGIC_LINK_DATA_MISSING:"magic_link_data_missing",LINK_INVALIDATED:"link_invalidated",LINK_USED:"link_used",LINK_EXPIRED:"link_expired",BROWSER_IDENTIFIER_INVALID:"invalid_browser_identifier",SUCCESS:"success"},R={type:"pandas-dataframe",id:o.yy,name:"DataFrame SQL",state:l.$G.ALWAYS_ON,is_public:!1,duplicated_from:null};function L(h){return(0,r.XW)(h.type)}const x=e.z.record(e.z.object({deepnote_variable_value:e.z.union([e.z.string(),e.z.string().array()]).optional(),deepnote_table_state:c.k.optional()})),ne=e.z.object({mode:e.z.literal("all")}),M=e.z.object({mode:e.z.literal("block"),blockId:e.z.string()}),A=e.z.object({mode:e.z.literal("downstream"),variableContext:e.z.array(e.z.string()).optional(),blockIds:e.z.array(e.z.string())}),b=e.z.union([ne,M,A]),q=e.z.object({projectId:e.z.string(),cellParams:x,sessionId:e.z.string(),runId:e.z.string().optional(),executionModeParams:b}),fe=null,ie=["public-profile","published-app","public-project","launch-project","okta",null,...["landing-page","workspace-invite","project-access-denied"]]},748:($,_,t)=>{"use strict";t.d(_,{H:()=>e,e:()=>o});const e={LOCAL:"LOCAL",URL:"URL"},o={STARTED:0,DONE:1,ERROR:2}},66699:($,_,t)=>{"use strict";t.d(_,{_:()=>s,r:()=>a});var e=t(16530),o=t(34501),c=t(98084),l=t(78881),r=t(48338),d=t(31158);function s(n){return!!n.metadata?.deepnote_app_block_visible}function a(n){return(0,e.kS)(n)?{...n,metadata:{...n.metadata,is_output_hidden:!!n.metadata.deepnote_app_is_output_hidden,is_code_hidden:!!n.metadata.deepnote_app_is_code_hidden}}:n}},52126:($,_,t)=>{"use strict";t.d(_,{Aj:()=>r,EK:()=>l,M2:()=>c});var e=t(48424),o=t.n(e);function c(d,s){const a=[];let n=d;for(;n.length>0;){const i=s(n[0]),p=o()(n.slice(1),g=>s(g)===i),u=[n[0],...p];a.push(u),n=n.slice(u.length)}return a}function l(d,...s){return s.includes(d)}function r(d,s){const a=Math.ceil(d.length/s);return Array.from({length:a},(n,i)=>d.slice(i*s,(i+1)*s))}},19550:($,_,t)=>{"use strict";t.d(_,{d:()=>e,x:()=>o});const e=c=>c;function o(c){throw new Error(`Unexpected value ${c}. Should have been never.`)}},53150:($,_,t)=>{"use strict";t.d(_,{o:()=>l});var e=t(45399),o=t.n(e),c=t(11555);function l(r){return!(0,c.S$)()&&typeof window.structuredClone=="function"?window.structuredClone(r):o()(r)}},92626:($,_,t)=>{"use strict";t.d(_,{p8:()=>p,dt:()=>g,re:()=>n});var e=t(10524),o=t(56093),c=t(24467),l=t(80092),r=t(51396),d=t(86527);function s(y){return c.VX.includes(y)}function a(y){return INTEGRATIONS_WITH_FEDERATED_AUTH.includes(y)}function n(y){return y.federated_auth_method&&s(y.federated_auth_method)?y.federated_auth_status??null:null}const i=y=>y.filter(T=>T.state===c.$G.CONNECTED&&T.federated_auth_method&&s(T.federated_auth_method)),p=(y,T={})=>{const{integrationId:C}=T;return i(y).find(O=>!C||O.id===C)??null},u=y=>i(y).find(C=>C.federated_auth_status==="not_ready"),g=(y,T={})=>{const C=p(y,T);if(!C)throw new Error("Could not find integration for InvalidFederatedOAuthCredentials exception");const m=C.federated_auth_method;if(!m)throw new Error("Could not find federated auth method for InvalidFederatedOAuthCredentials exception");return{id:C.id,name:C.name,type:C.type,federatedAuthMethod:m}}},17897:($,_,t)=>{"use strict";t.d(_,{Xp:()=>e.Xp,N2:()=>e.N2,av:()=>e.av,fN:()=>d.fN,T8:()=>e.T8,Yv:()=>e.Yv});var e=t(60022),o=t(43445);const c=async(p,u,g,y)=>{let T;const C=async()=>{for(let m=0;m<u/g+1;m++){try{if(await p())return}catch(O){T=normalizeError(O)}await sleep(g)}throw new TimeoutError(`Timeout. < ${y} >`)};try{await timeout(C(),u)}catch(m){throw m instanceof TimeoutError&&T?T:m instanceof TimeoutError?m:new Error(`${normalizeError(m).message} < ${y} >`)}};var l=t(53150),r=t(92626),d=t(32928),s=t(12041);function a(p){return p.replace(ansiRegex(),"")}var n=t(89213),i=t(52126)},32928:($,_,t)=>{"use strict";t.d(_,{dX:()=>r,fN:()=>c,oF:()=>l,rG:()=>s});var e=t(29828),o=t.n(e);function c(a,n){return Object.fromEntries(Object.entries(a).filter(([i,p])=>n(p)))}function l(a){return c(a,n=>n!=null)}function r(a,n){const i={},p=new Set([...Object.keys(a),...Object.keys(n)]);for(const u of p)o()(a[u],n[u])||(i[u]=n[u]);return Object.keys(i).length>0?i:null}function d(a){return Object.fromEntries(Object.entries(a).map(([n,i])=>[n,i??void 0]))}function s(a){return Object.entries(a).sort(([n],[i])=>n.localeCompare(i))}},89213:($,_,t)=>{"use strict";t.d(_,{Fl:()=>s,Zq:()=>l,qg:()=>c});var e=t(47628),o=t(19550);const c=a=>{switch(a){case e.BD.ADMIN:return 5;case e.BD.EDIT:return 4;case e.BD.EXECUTE:return 3;case e.BD.COMMENT:return 2;case e.BD.VIEW:return 1;case e.BD.APP_USER:return 0;case e.BD.NONE:return-1;default:throw Error(`No implementation of numerizing access type '${a}'.`)}};function l(a){return a===e.BD.NONE}const r=a=>{const n=a.map(g=>c(g)),i=Math.max(...n),p=n.indexOf(i);return(p>-1?a[p]:null)??AccessType.NONE},d=a=>{const n=a.map(g=>c(g)),i=Math.min(...n),p=n.indexOf(i);return(p>-1?a[p]:null)??AccessType.NONE};function s(a){return a===e.Gc.ADMIN||a===e.Gc.EDITOR?e.BD.ADMIN:a===e.Gc.VIEWER?e.BD.EXECUTE:a===e.Gc.GUEST?e.BD.NONE:(0,o.d)(a)}},38038:($,_,t)=>{"use strict";t.d(_,{Iq:()=>C,Jn:()=>u,W7:()=>y,Xe:()=>m,rR:()=>p,zX:()=>T});var e=t(18770),o=t.n(e),c=t(44809),l=t.n(c),r=t(47472),d=t.n(r),s=t(49088),a=t.n(s);const n=O=>O>=1e3&&O<1e6?+(O/1e3).toFixed(1)+"K":O>=1e6&&O<1e9?+(O/1e6).toFixed(1)+"M":O>=1e9&&O<1e12?+(O/1e9).toFixed(1)+"B":O>=1e12?+(O/1e12).toFixed(1)+"T":O.toString(),i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function p(O,W=1,K){if(O===0)return"0 Bytes";const H=1024,N=W<0?0:W,w=Math.floor(Math.log(O)/Math.log(H)),k=K?Math.max(i.indexOf(K),w):w;return parseFloat((O/Math.pow(H,k)).toFixed(N))+" "+i[k]}const u=O=>O.replace(/^\n+|\n+$/g,"");function g(O){return O.replace(/^[\n]+/,"")}function y(O,W,K){return O.replace(W,K)}function T(O){return a()(d()(O).toLowerCase())}function C(O){const W=Number.parseFloat(O);return l()(W)&&O.trim()===W.toString()}function m(O){const W=new Date(O);return o()(W)&&!Number.isNaN(W.getTime())&&W.toISOString()===O}},74822:($,_,t)=>{"use strict";t.d(_,{BZ:()=>g,E7:()=>C,MG:()=>K,OU:()=>O,St:()=>W,dM:()=>n,kX:()=>m,ok:()=>H,td:()=>i});var e=t(63998),o=t(23773),c=t(31976),l=t(14651),r=t(64688);const d=(N,w)=>(0,o.B6)(N,w),s=()=>{if(isServer())return;const N=decodeURIComponent(window.location.hash.slice(1));return N&&N!==""?N:void 0},a=()=>{if(isServer())return;const N=new URLSearchParams(window.location.search).get("cellId"),w=s(),k=w&&!w.startsWith(TERMINAL_HASH)?w:null;return N??k},n=N=>{if(!N)return encodeURI(window.location.pathname);const w=`?${c.X8}=${N}`;return encodeURI(window.location.pathname+w)},i=()=>{if((0,l.S)())return null;let N=d(window.location.pathname,{path:"/project/:projectSlug"});return N?.params.projectSlug||(N=d(window.location.pathname,{path:"/workspace/:teamSlug/project/:projectSlug"})),N?.params.projectSlug?(0,r.d)(N.params.projectSlug):null},p=()=>{if(isServer())return null;const N=d(window.location.pathname,{path:"/workspace/:teamSlug/project/:projectSlug/notebook/:notebookName"});return N?.params.notebookName?decodeURIComponent(N?.params.notebookName):null},u=()=>{if(isServer())return null;let N=d(window.location.pathname,{path:"/project/:projectSlug/:fileName"});return N?.params.fileName||(N=d(window.location.pathname,{path:"/workspace/:teamSlug/project/:projectSlug/:fileName"})),N?.params.fileName?decodeURIComponent(N?.params.fileName):null};function g(N){const w=new URLSearchParams(window.location.search);w.delete(N);const k=window.location.pathname+(w.toString().length>0?`?${w.toString()}`:"")+window.location.hash;window.history.replaceState({},document.title,k)}function y(N){const w=new URLSearchParams(window.location.search),k=window.location.pathname+(w.toString().length>0?`?${w.toString()}`:"")+`#${encodeURIComponent(N)}`;window.history.replaceState({},document.title,k)}function T(N,w){const k=window.location.pathname.match(/^\/workspace\/([^/]+)\/project\/([^/]+)/)?.[0]??window.location.pathname.match(/^\/project\/([^/]+)/)?.[0]??null;if(!k)return;const F=!!window.location.pathname.match(/^\/workspace\/([^/]+)\/project\/([^/]+)\/notebook\/([^/]+)/),X=w?`#${w}`:window.location.hash,z=new URLSearchParams(window.location.search),B=z.toString().length>0?`?${z.toString()}`:"",U=F?`${k}/notebook/${N}/${B}${X}`:`${k}/${encodeURIComponent(N)}/${B}${X}`;window.history.replaceState({},document.title,U)}function C(N){window.history.replaceState({},document.title,`#${N}`)}function m(N,w){const{pathname:k,search:F,hash:X}=N,z=new URLSearchParams(F);return Object.entries(w).forEach(([U,G])=>{z.set(U,G)}),`${k}?${z.toString()}${X}`}function O(N,...w){const{pathname:k,search:F,hash:X}=N,z=new URLSearchParams(F);return w.forEach(U=>{z.delete(U)}),`${k}?${z.toString()}${X}`}function W(N,...w){const{search:k}=N,F=new URLSearchParams(k),X=w.map(z=>F.get(z));return X.length===1?X[0]:X}function K(N){const w=d(N,{path:"/workspace/:workspaceSlugWithId"});if(!w)return{workspaceId:null,workspaceSlug:null};const{id:k,slug:F}=(0,r.$)(w.params.workspaceSlugWithId);return{workspaceId:k,workspaceSlug:F}}const H=()=>{const{search:N}=(0,o.zy)();return(0,e.useMemo)(()=>new URLSearchParams(N),[N])}},60022:($,_,t)=>{"use strict";t.d(_,{$K:()=>C,BU:()=>h,DN:()=>Me,KF:()=>I,N2:()=>D,N3:()=>Le,Oy:()=>W,Rq:()=>w,T8:()=>E,Tf:()=>A,XO:()=>K,Xp:()=>g,Yv:()=>L,ZH:()=>G,a_:()=>f,av:()=>R,fz:()=>ve,sE:()=>N,xb:()=>X,yy:()=>H,z2:()=>n});var e=t(42111),o=t.n(e),c=t(96373),l=t.n(c),r=t(47628),d=t(19550),s=t(89213);const a=()=>({notebookId:"",cellId:"",source:"",prompt:"",parentHeader:null});function n(P){return P!=null}const i=P=>{if(P.cell_type==="code")delete P.language,delete P.collapsed,P.source=P.input,delete P.input,P.execution_count=Number.isInteger(P.prompt_number)?P.prompt_number:null,delete P.prompt_number,P.outputs=[];else if(P.cell_type==="heading"){P.cell_type="markdown";const V=P.level??1;delete P.level,P.source=["#".repeat(V)+P.source].join(`
`)}else P.cell_type==="html"&&(P.cell_type="markdown");return P};function p(P){return{cells:P.cells,cellOrder:P.cellOrder,nbformat:4,nbformat_minor:0,metadata:P.metadata,version:0}}function u(P){return P.replace(/\r\n/gm,`
`).replace(/\r/gm,`
`)}function g(P){return(/^\d/.test(P)?`_${P}`:P).toUpperCase().replace(/[^\w]/gm,"_")}const y=P=>{for(const[V,Y]of Object.entries(P))if(Array.isArray(Y)&&!(V.startsWith("application")&&V.endsWith("json"))){let te=!0;if(Y.forEach(Ae=>{typeof Ae!="string"&&(te=!1)}),!te)continue;P[V]=Y.join("")}};function T(P){switch(P){case"big-number":return"code";case"code":return"code";case"sql":return"code";case"notebook-function":return"code";case"markdown":return"markdown";case"text-cell-h1":case"text-cell-h3":case"text-cell-h2":case"text-cell-p":case"text-cell-bullet":case"text-cell-todo":case"text-cell-callout":case"image":case"button":case"separator":return"markdown";case"input-text":case"input-textarea":case"input-file":case"input-select":case"input-date":case"input-slider":return"code";case"visualization":return"code";default:throw assertUnreachable(P),new Error(`Invalid cell type ${P}`)}}function C(P){switch(P){case"text-cell-h1":return"h1";case"text-cell-h2":return"h2";case"text-cell-h3":return"h3";case"text-cell-p":case"text-cell-bullet":case"text-cell-todo":case"text-cell-callout":return"p";default:(0,d.x)(P)}}const m=(P,V)=>{const Y=P.lastIndexOf(".");return Y===-1?P+V:P.substring(0,Y)+V+P.substring(Y)},O=P=>P.split(/\r\n|\r|\n/),W=P=>!!P.match(/^\s*!/),K=(P,V)=>typeof P=="string"?P:P.join(V),H=P=>new Promise(V=>{const Y=setTimeout(()=>(clearTimeout(Y),V()),P)}),N=(P,V,Y=!1)=>{const te=(0,s.qg)(P);switch(V){case r.zd.EDIT_INPUT_CELL_VALUE:return te>=(0,s.qg)(r.BD.EXECUTE);case r.zd.EXECUTE_CELL:return te>=(0,s.qg)(r.BD.EXECUTE);case r.zd.VIEW_NOTEBOOK_VARIABLES:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.MANIPULATE_CELLS:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.MANIPULATE_FILES:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.INSTALL_PACKAGES:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.RUN_TERMINAL:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.LEAVE_PROJECT:return te>=(0,s.qg)(r.BD.VIEW)&&!Y;case r.zd.MANAGE_COLLABORATORS:return te>=(0,s.qg)(r.BD.ADMIN)&&!Y;case r.zd.MANAGE_HARDWARE:return te>=(0,s.qg)(r.BD.ADMIN)&&!Y;case r.zd.MANAGE_ENVIRONMENT:return te>=(0,s.qg)(r.BD.ADMIN)&&!Y;case r.zd.MANAGE_HARDWARE_LIFECYCLE:return te>=(0,s.qg)(r.BD.EXECUTE)&&!Y;case r.zd.RENAME_PROJECT:return te>=(0,s.qg)(r.BD.ADMIN);case r.zd.ADD_COMMENT:return te>=(0,s.qg)(r.BD.COMMENT);case r.zd.VIEW_COMMENTS:return te>=(0,s.qg)(r.BD.COMMENT);case r.zd.SET_COMMENT_NOTIFICATION_PREFERENCE:return te>=(0,s.qg)(r.BD.COMMENT);case r.zd.RESOLVE_COMMENT_THREAD:return te>=(0,s.qg)(r.BD.COMMENT);case r.zd.DUPLICATE_PROJECT:return te>=(0,s.qg)(r.BD.VIEW);case r.zd.LOAD_FILES:return te>=(0,s.qg)(r.BD.VIEW);case r.zd.DOWNLOAD_FILES:return te>=(0,s.qg)(r.BD.VIEW);case r.zd.REQUEST_VARIABLE_DETAILS:return te>=(0,s.qg)(r.BD.EXECUTE);case r.zd.REFETCH_PROJECT:return te>=(0,s.qg)(r.BD.EXECUTE);case r.zd.AUTOCOMPLETE:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.VIEW_PACKAGES:return te>=(0,s.qg)(r.BD.VIEW);case r.zd.PUBLISH_NOTEBOOK:return te>=(0,s.qg)(r.BD.EDIT)&&!Y;case r.zd.PROJECT_INFO:return te>=(0,s.qg)(r.BD.VIEW);case r.zd.VIEW_INTEGRATIONS:return te>=(0,s.qg)(r.BD.ADMIN);case r.zd.SET_INACTIVITY_GRACE_PERIOD:return te>=(0,s.qg)(r.BD.ADMIN);case r.zd.MANAGE_VERSIONS:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.MANAGE_GIT_EXPORT:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.RESTORE_VERSION:return te>=(0,s.qg)(r.BD.ADMIN);case r.zd.USE_JUPYTER_WIDGETS:return te>=(0,s.qg)(r.BD.EXECUTE);case r.zd.MANAGE_GIT_REPO:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.DELETE_PROJECT:return te>=(0,s.qg)(r.BD.ADMIN);case r.zd.CHANGE_PROJECT_OWNER:return te>=(0,s.qg)(r.BD.ADMIN);case r.zd.UPDATE_PROJECT_SETTINGS:return te>=(0,s.qg)(r.BD.ADMIN);case r.zd.VIEW_HISTORY:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.SCHEDULE_NOTEBOOK:return te>=(0,s.qg)(r.BD.EXECUTE)&&!Y;case r.zd.VIEW_PUBLISHED_PROJECT:return te>=(0,s.qg)(r.BD.APP_USER);case r.zd.VIEW_PROJECT:return te>=(0,s.qg)(r.BD.VIEW);case r.zd.USE_FEDERATED_AUTH:return te>=(0,s.qg)(r.BD.EXECUTE);case r.zd.USE_CONNECTED_GIT_REPOSITORY:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.VIEW_GIT_BRANCH_STATUS:return te>=(0,s.qg)(r.BD.VIEW);case r.zd.MANAGE_SQL_QUERY_CACHING:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.RUN_AI:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.READ_AI_JOB_STATUS:return te>=(0,s.qg)(r.BD.VIEW);case r.zd.MANAGE_APP:return te>=(0,s.qg)(r.BD.ADMIN);case r.zd.EDIT_APP:return te>=(0,s.qg)(r.BD.EDIT);case r.zd.VIEW_ANALYTICS:return te>=(0,s.qg)(r.BD.EDIT);default:return(0,d.d)(V)}},w=(P,V)=>{switch(V){case r.eJ.VIEW_PROJECTS:return h(P,r.Gc.VIEWER);case r.eJ.VIEW_GUEST_PROJECTS:return h(P,r.Gc.GUEST);case r.eJ.VIEW_INTEGRATIONS:return h(P,r.Gc.VIEWER);case r.eJ.CREATE_PROJECT:return h(P,r.Gc.EDITOR);case r.eJ.DUPLICATE_PROJECT:return h(P,r.Gc.EDITOR);case r.eJ.CONNECT_INTEGRATIONS:return h(P,r.Gc.EDITOR);case r.eJ.EDIT_INTEGRATIONS:return h(P,r.Gc.ADMIN);case r.eJ.VIEW_PRIVATE_PROJECTS:return h(P,r.Gc.VIEWER);case r.eJ.CREATE_PRIVATE_PROJECT:return h(P,r.Gc.EDITOR);case r.eJ.VIEW_LEFT_SIDEBAR:return h(P,r.Gc.GUEST);case r.eJ.VIEW_SETTINGS:return h(P,r.Gc.GUEST);case r.eJ.VIEW_PROJECTS_PROJECT_SIDEBAR:return h(P,r.Gc.VIEWER);case r.eJ.VIEW_MEMBERS:return h(P,r.Gc.VIEWER);case r.eJ.VIEW_USER_GROUPS:return h(P,r.Gc.VIEWER);case r.eJ.VIEW_GUEST_SETTINGS:return h(P,r.Gc.GUEST);case r.eJ.MANAGE_MEMBERS:return h(P,r.Gc.ADMIN);case r.eJ.MANAGE_USER_GROUPS:return h(P,r.Gc.ADMIN);case r.eJ.ACCESS_TEAM_SETTINGS:return h(P,r.Gc.ADMIN);case r.eJ.EDIT_TEAM_SETTINGS:return h(P,r.Gc.ADMIN);case r.eJ.EDIT_DOMAIN_INVITES_EMAIL:return h(P,r.Gc.ADMIN);case r.eJ.UPDATE_PROJECT_SETTINGS:return h(P,r.Gc.ADMIN);case r.eJ.VIEW_CATEGORIES:return h(P,r.Gc.VIEWER);case r.eJ.VIEW_TEAM:return h(P,r.Gc.VIEWER);case r.eJ.MODIFY_CATEGORIES:return h(P,r.Gc.EDITOR);case r.eJ.MANAGE_ENVIRONMENT:return h(P,r.Gc.EDITOR);case r.eJ.MIGRATE_NOTEBOOKS:return h(P,r.Gc.EDITOR);case r.eJ.MANAGE_FAVORITE_PROJECTS:return h(P,r.Gc.VIEWER);case r.eJ.MANAGE_TEMPLATES:return h(P,r.Gc.EDITOR);case r.eJ.SET_ENFORCED_AUTH_PROVIDER:return h(P,r.Gc.ADMIN);case r.eJ.TOGGLE_PAY_AS_YOU_GO_MACHINES:return h(P,r.Gc.ADMIN);case r.eJ.EXPORT_AUDIT_LOGS:return h(P,r.Gc.ADMIN);case r.eJ.VIEW_SSH_KEYS:return h(P,r.Gc.ADMIN);case r.eJ.VIEW_GITHUB_REPOSITORIES:return h(P,r.Gc.EDITOR);case r.eJ.EDIT_GITHUB_REPOSITORIES:return h(P,r.Gc.ADMIN);case r.eJ.SET_DEFAULT_TEMPLATE:return h(P,r.Gc.EDITOR);default:return(0,d.d)(V)}},k=P=>P?.session?.impersonated??!1,F="/static/impersonated-avatar.png",X="3f338557-4b96-47be-8520-606cd8922ae1",z=function(P){return P?.sharing_link_on};function B(P){switch(P){case teamRole.ADMIN:case teamRole.EDITOR:case teamRole.VIEWER:case teamRole.GUEST:return!0;default:return!1}}const U=P=>{const{jupyter_token:V,...Y}=P;return Y},G=P=>P.charAt(0).toUpperCase()+P.slice(1),f=P=>P.charAt(0).toLowerCase()+P.slice(1);async function I(P){const V=await P;if(V==null)throw new Error("Promise resolved into null or undefined");return V}const E=(P,V={})=>{let Y=P.replace(/\s+/g,"_").replace(/[^0-9a-zA-Z_]/g,"").replace(/^[^a-zA-Z_]+/g,"");return Y===""&&!V.disableEmptyFallback&&(Y="input_1"),Y},D=P=>`'${P.replaceAll("\\","\\\\").replaceAll("'","\\'").replaceAll(`
`,"\\n")}'`;function R(P){return`SQL_${P}`}l().extend({"/":"-"});function L(P,V){return l()(P,{...V,strict:!0})}function x(P){return typeof P=="object"&&"cells"in P}function ne(P){return typeof P=="object"&&"executionQueue"in P}function M(P){return JSON.parse(P)}function A(P){if(P===0)return"0ms";const V=b(P);return q(V,([Y])=>Y===0).slice(0,2).filter(([Y])=>Y>0).map(([Y,te])=>`${Y}${te}`).join(" ")}function b(P){const V=P%36e5,Y=V%6e4;return[[Math.floor(P/36e5),"hr"],[Math.floor(V/6e4),"min"],[Math.floor(Y/1e3),"s"],[P%1e3,"ms"]]}function q(P,V){return P.reduce((Y,te)=>Y.length===0&&V(te)?Y:[...Y,te],[])}function fe(P,V=!0){return P?P.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/{/g,"&#x7B;").replace(/}/g,"&#x7D;").replace(/\./g,V?". ":".").replace(/https?:\/\//g,""):""}const oe=P=>{switch(P){case r.Gc.ADMIN:return 4;case r.Gc.EDITOR:return 3;case r.Gc.VIEWER:return 2;case r.Gc.GUEST:return 0;default:(0,d.x)(P)}},ie=P=>Object.values(teamRole).filter(V=>oe(V)>=oe(P)),h=(P,V)=>oe(P)>=oe(V),ce=(P,V)=>oe(P)<=oe(V),ve=P=>P.filter(V=>h(V.user_role,r.Gc.EDITOR)).length,Me=(P,V)=>ce(P,r.Gc.VIEWER)&&h(V,r.Gc.EDITOR)?"increment":h(P,r.Gc.EDITOR)&&ce(V,r.Gc.VIEWER)?"decrement":"no-change",Le=(P,V)=>{const Y=[...P];function te(Pe){const He=Math.sin(Pe+1)*1e4;return He-Math.floor(He)}let Ae=V,ke=Y.length,Ne,ue;for(;ke;)ue=Math.floor(te(Ae)*ke--),Ne=Y[ke],Y[ke]=Y[ue],Y[ue]=Ne,Ae++;return Y},We=P=>_pick(P,["name","slug","description","link","avatar","github_url","twitter_handle","location"]);function Ge(P,V,Y){return P.map((te,Ae)=>Ae===Y?V:te)}const $e=P=>/^[A-Za-z0-9_]+$/.test(P)&&P.length<256;function Qe(P,V){return Math.round(Math.abs(Number(V)-Number(P))/864e5)}function le(P,V){return V.some(Y=>P?.message?.includes(Y)||P?.cause?.message?.includes(Y))}function Ie(P,V=0){return isNaN(P)?V:P}},87698:($,_,t)=>{"use strict";t.d(_,{HD:()=>l,NF:()=>c});var e=t(65878);const o=s=>s.replace(/-/g,""),c=()=>o((0,e.A)()),l=s=>s.length===r,r=32,d=()=>uuid().replace(/-/g,"").slice(0,15)},99695:($,_,t)=>{"use strict";t.d(_,{GA:()=>u,Gp:()=>a,M3:()=>l,Mi:()=>p,O$:()=>g,b$:()=>d,qU:()=>r,v1:()=>n,x0:()=>i});var e=t(38435),o=t(14651),c=t(414);const l=()=>(0,o.S)()?e.JZ.workspaceRoot():window.location.pathname,r=T=>T.workspaceId&&!T.project?"workspace-access-denied":T.isApp?"app-access-denied":T.invite?"workspace-invite":T.project?"project-access-denied":T.path===e.JZ.signIn()||T.path===e.JZ.signUp()?"default":null,d=T=>T==="default"?"landing-page":T==="workspace-invite"||T==="project-access-denied"?T:null,s=()=>window.__bodyComponentName==="public-profile"?"public-profile":window.__bodyComponentName==="AppContainer"?"published-app":window.__bodyComponentName==="workspace"?"workspace":null,a=T=>{const C=s();return C==="workspace"?T?"launch-project":"public-project":C},n=(T,C)=>{const m=r(T);return m==="workspace-access-denied"?T.workspaceName?`Welcome to ${T.workspaceName} on Deepnote.`:"Login or sign up to see this workspace.":m==="app-access-denied"?"Login or sign up to see this app.":m==="project-access-denied"?T.workspaceName?`Welcome to ${T.workspaceName} on Deepnote.`:"Login or sign up to see this project.":m==="workspace-invite"&&T.invite?`You have been invited to join the ${T.invite?.teamName} workspace.`:m==="default"&&C?"Sign in to Deepnote":"Create your Deepnote account"},i=(T,C)=>C?C===T:!0,p=T=>{g(T),window.location.href=e.JZ.signIn()},u=T=>{y(T),window.location.href=e.JZ.signUp()},g=T=>{(0,c.u4)("Sign in page opened",{origin:T,workspaceId:null},{allowNullWorkspaceId:!0})},y=T=>{(0,c.u4)("Sign up page opened",{origin:T,workspaceId:null},{allowNullWorkspaceId:!0})}},74231:($,_,t)=>{"use strict";t.d(_,{M:()=>c});var e=t(63998),o=t(55502);function c(l,r,d=!1){const[s,a]=(0,e.useState)(()=>{let u;return typeof window<"u"&&(u=(0,o.IC)(l)),u??r}),n=(0,e.useRef)(s);n.current=s;const i=(0,e.useCallback)(u=>{if(!(typeof window>"u"))try{const g=u instanceof Function?u(n.current):u;a(g),d&&g===r?(0,o.jQ)(l):(0,o.sg)(l,g)}catch(g){console.log(g)}},[r,l,d,n]);return(0,e.useMemo)(()=>[s,i],[s,i])}},4189:($,_,t)=>{"use strict";t.d(_,{w:()=>o});var e=t(63998);const o=(c,l)=>{(0,e.useEffect)(()=>{if(!window.ResizeObserver||!c.current)return;const r=new ResizeObserver(()=>{c.current&&l(c.current)});r.observe(c.current);const d=c.current;return()=>{r.unobserve(d)}},[c,l])}},2984:($,_,t)=>{"use strict";t.d(_,{F:()=>p,X:()=>u});var e=t(45470),o=t(50237),c=t(99163),l=t(33343),r=t(37189),d=t(78836),s=t(54660),a=t(96737);const n={info:{border:"border.accentOne.primary",text:"fg.neutral.primary",icon:"fg.accentOne.primary"},success:{border:"border.positive.primary",text:"fg.neutral.primary",icon:"fg.positive.primary"},error:{border:"border.critical.primary",text:"fg.neutral.primary",icon:"fg.critical.primary"},warning:{border:"border.attention.primary",text:"fg.neutral.primary",icon:"fg.attention.primary"},neutral:{border:"border.neutral.primary",text:"fg.neutral.primary",icon:"fg.neutral.secondary"}},i={info:d.C,success:s.i,error:a.S,warning:a.S,neutral:d.C};function p(g){const{children:y,status:T="info",hasIcon:C=!1,...m}=g;return(0,e.jsxs)(o.F,{status:T==="neutral"?"info":T,p:2,borderRadius:"sm",borderWidth:"1px",borderColor:n[T].border,bgColor:"transparent",color:n[T].text,fontSize:"ui.sm",display:"flex",flexDirection:C?"row":"column",alignItems:"flex-start",...m,children:[C&&(0,e.jsx)(c._,{color:n[T].icon,as:i[T],boxSize:4,m:0,mt:"1px",p:0}),(0,e.jsx)(l.az,{ml:C?2:0,children:(0,e.jsx)(r.E,{textStyle:"ui.xs.regular",children:y})})]})}function u(g){const{children:y,...T}=g;return(0,e.jsx)(r.E,{textStyle:"ui.sm.semibold",pb:1,...T,children:y})}},52187:($,_,t)=>{"use strict";t.d(_,{$:()=>n,R:()=>d});var e=t(45470),o=t(91234),c=t(58809),l=t(42172),r=t(63998);const d={xxs:"sm",xs:"md",sm:"md",md:"md",lg:"lg"},s={xxs:1.5,xs:1.5,sm:2,md:2,lg:3},a=i=>r.isValidElement(i)&&i.type===l.I,n=(0,o.R)(function(p,u){const g=p.colorScheme==="neutral",y=p.isDisabled,T={color:g?y?"fg.neutral.tertiary":"fg.neutral.secondary":void 0,size:typeof p.size=="string"?d[p.size||"md"]:"md",_groupHover:{color:g?y?"fg.neutral.tertiary":"fg.neutral.secondaryHover":void 0}};let C;p.leftIcon&&a(p.leftIcon)?C=r.cloneElement(p.leftIcon,{...T,...p.leftIcon.props}):C=p.leftIcon;let m;return p.rightIcon&&a(p.rightIcon)?m=r.cloneElement(p.rightIcon,T):m=p.rightIcon,(0,e.jsx)(c.$,{iconSpacing:p.iconSpacing??(typeof p.size=="string"?s[p.size??"sm"]:void 0),...p,leftIcon:C,role:"group",rightIcon:m,ref:u})})},7536:($,_,t)=>{"use strict";t.d(_,{K:()=>d});var e=t(45470),o=t(91234),c=t(15070),l=t(63998),r=t(52187);const d=(0,o.R)(function(a,n){let i;return a.icon?i=l.cloneElement(a.icon,{color:a.icon.props.color?a.icon.props.color:a.colorScheme==="neutral"?a.isDisabled?"fg.neutral.tertiary":"fg.neutral.secondary":void 0,size:typeof a.size=="string"?r.R[a.size??"md"]:"md",_groupHover:a.icon.props._groupHover?a.icon.props._groupHover:{color:a.colorScheme==="neutral"?a.isDisabled?"fg.neutral.tertiary":"fg.neutral.secondaryHover":void 0}}):i=a.icon,(0,e.jsx)(c.K,{...a,icon:i,role:"group",ref:n})})},4615:($,_,t)=>{"use strict";t.d(_,{p:()=>a});var e=t(45470),o=t(37189),c=t(4546),l=t(11950),r=t(63998),d=t(4189),s=t(64592);function a(n){const[i,p]=(0,r.useState)(!1),u=(0,r.useRef)(null),g=(0,r.useCallback)(O=>{O&&(u.current=O,y())},[]),y=(0,r.useCallback)((0,l.A)(()=>{u.current?p((0,c.Z)(u.current)):p(!1)}),[g]);(0,d.w)(u,y);const{tooltip:T,tooltipProps:C,...m}=n;return(0,e.jsx)(s.m,{isDisabled:!i,label:T,...C,children:(0,e.jsx)(o.E,{as:"span",ref:g,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",...m,children:n.children})})}},6769:($,_,t)=>{"use strict";t.d(_,{q:()=>e});var e=(o=>(o.ProjectCard="PROJECT_CARD",o.Cell="CELL",o.File="FILE",o.TreeItem="TREE_ITEM",o.ProjectCategory="PROJECT_CATEGORY",o.DataTableColumn="DATA_TABLE_COLUMN",o.AppBlock="APP_BLOCK",o))(e||{})},29893:($,_,t)=>{"use strict";t.d(_,{qJ:()=>z,_8:()=>X,l6:()=>X,YC:()=>k});var e=t(45470),o=t(27435),c=t(30616),l=t(98851),r=t(92231),d=t(59593),s=t(42971),a=t(82e3),n=t(15070),i=t(33343),p=t(78294),u=t(44421),g=t(6945),y=t(37189),T=t(42172),C=t(59148),m=t(25305),O=t(71825),W=t(80315),K=t(91234);const H=(0,K.R)((B,U)=>{const G=(0,a.UE)(),f=G.closeButton?.width,I=G.closeButton?.height;return(0,e.jsx)(a.TV,{ref:U,...B,children:(0,e.jsx)(T.I,{as:C.a,width:Number.isFinite(f)?f:3,height:Number.isFinite(I)?I:3})})}),N={container:B=>({...B,pointerEvents:"auto"}),input:(B,{selectProps:{autoWidth:U}})=>({...B,color:"inherit",lineHeight:1,...U?{position:"absolute"}:{}}),menu:B=>({...B,boxShadow:"none"}),menuPortal:B=>({...B,zIndex:99999}),singleValue:(B,{selectProps:{autoWidth:U}})=>({...B,color:"inherit",position:U?"static":"absolute",transform:"none",top:"auto",marginLeft:"4px",...U?{maxWidth:"100%"}:{}}),valueContainer:(B,{selectProps:{autoWidth:U}})=>{const G={...B};return G.padding&&(G.padding="0"),{...B,gap:"4px",padding:"0 !important",...U?{minWidth:"80px",position:U?"static":"absolute",transform:"none"}:{}}},multiValueRemove:(B,{isFocused:U,selectProps:{multiValueRemoveFocusStyle:G}})=>U?G:{},control:()=>({}),menuList:()=>({}),option:()=>({}),multiValue:()=>({}),multiValueLabel:()=>({}),group:()=>({}),placeholder:B=>({...B,marginLeft:"4px"})},w={Control:({children:B,innerRef:U,innerProps:G,isDisabled:f,isFocused:I,selectProps:{size:E,variant:D,isInvalid:R,value:L}})=>{const x=(0,d.o5)("Input",{size:E,variant:D});x?.field&&(x.field.height="auto");const M={xxs:6,xs:8,sm:9,md:10}[E]??6,A=L&&Array.isArray(L)?L.length>0:!!L;return(0,e.jsx)(s.s,{ref:U,sx:{...x.field,height:"auto",overflow:"hidden",minH:M,paddingX:1,paddingY:!A&&E==="xxs"?0:1},...G,"data-focus":I?!0:void 0,"data-invalid":R?!0:void 0,"data-disabled":f?!0:void 0,children:B})},Input:B=>(0,e.jsx)(s.s,{paddingLeft:.5,children:(0,e.jsx)(O.c.Input,{...B})}),MultiValueContainer:({children:B,innerRef:U,innerProps:G,data:f,selectProps:I})=>(0,e.jsx)(a.vw,{ref:U,...G,marginRight:0,marginY:0,colorScheme:"neutral",size:"sm",children:B}),MultiValueLabel:({children:B,innerRef:U,innerProps:G})=>(0,e.jsx)(a.d1,{ref:U,...G,children:B}),MultiValueRemove:({innerRef:B,innerProps:U,data:{isFixed:G}})=>G?null:(0,e.jsx)(H,{ref:B,...U,tabIndex:-1}),IndicatorSeparator:()=>null,ClearIndicator:({innerProps:B,selectProps:{size:U}})=>(0,e.jsx)(n.K,{width:6,height:6,minWidth:6,colorScheme:"neutral",variant:"ghost",size:U==="xs"?"sm":U,icon:(0,e.jsx)(T.I,{as:C.a,boxSize:4,color:"fg.neutral.secondary"}),...B}),DropdownIndicator:({innerProps:B,selectProps:{size:U,hideMenu:G}})=>G?(0,e.jsx)(i.az,{width:2}):(0,e.jsx)(p.o,{...B,sx:{pr:1,pl:1,h:"100%",borderRadius:0,borderWidth:0,cursor:"pointer"},children:(0,e.jsx)(T.I,{as:m.D,color:"fg.neutral.secondary",size:"sm"})}),MenuPortal:({children:B,...U})=>(0,e.jsx)(O.c.MenuPortal,{...U,children:B}),Menu:({children:B,...U})=>{const G=(0,d.o5)("Menu",U);return U.selectProps.hideMenu?null:(0,e.jsx)(O.c.Menu,{...U,children:(0,e.jsx)(u.W$,{value:G,children:B})})},MenuList:({innerRef:B,children:U,maxHeight:G,selectProps:{size:f}})=>{const{list:I}=(0,u.IS)(),E=(0,g.D)();return(0,e.jsx)(i.az,{sx:{...I,maxH:`${G}px`,overflowY:"auto",borderRadius:E.radii.md,boxShadow:"sm"},ref:B,children:U})},GroupHeading:({innerProps:B,children:U})=>{const{groupTitle:G}=(0,u.IS)();return(0,e.jsx)(i.az,{sx:G,...B,children:U})},Option:({innerProps:B,children:U,isFocused:G,isSelected:f,isDisabled:I})=>typeof U=="string"?(0,e.jsx)(W.B,{isSelected:f,isActive:G,isDisabled:I,...B,children:(0,e.jsx)(y.E,{as:"span",overflow:"hidden",textOverflow:"ellipsis",title:U,whiteSpace:"nowrap",children:U})}):(console.log("Only string labels are supported in ReactSelect"),(0,e.jsx)(e.Fragment,{})),NoOptionsMessage:(B,U)=>{const G=B.selectProps.noOptionsMessage?B.selectProps.noOptionsMessage?.({inputValue:B.selectProps.inputValue??""}):"No results";return(0,e.jsx)(s.s,{marginLeft:1.5,marginY:2.5,children:(0,e.jsx)(y.E,{fontSize:B.selectProps.size??"xs",children:G})})}},k=N,F=({size:B="xs",colorScheme:U="gray",isDisabled:G=!1,isInvalid:f=!1,hideMenu:I=!1,variant:E="outline",autoWidth:D=!1,components:R={},styles:L={},...x})=>{const ne=(0,r.DP)(),M=(0,o.t)({isDisabled:G,isInvalid:f}),A={background:"rgba(0, 0, 0, 0.14)",boxShadow:"outline"},b=["xxs","xs","sm","xs"].find(q=>q===B)??"xs";return{components:{...w,...R},styles:{...N,...L,menu:q=>({...q,background:"unset",boxShadow:"0 0 0 0 hsla(0, 0%, 0%, 0.1),0 4px 11px hsla(0, 0%, 0%, 0.1)"})},theme:q=>({...q,colors:{...q.colors,neutral50:ne.colors.gray[400],neutral40:ne.colors.gray[400]},spacing:q.spacing}),colorScheme:U,size:b,multiValueRemoveFocusStyle:A,menuPortalTarget:typeof window>"u"?void 0:document.body,isDisabled:M.disabled,isInvalid:!!M["aria-invalid"],menuPosition:"fixed",hideMenu:I,variant:E,autoWidth:D,...x}},X=B=>{const U=F(B);return(0,e.jsx)(c.Ay,{ref:B.innerRef,...U})},z=B=>{const U=F(B);return(0,e.jsx)(l.Ay,{ref:B.innerRef,...U})}},21305:($,_,t)=>{"use strict";t.d(_,{D:()=>d});var e=t(45470),o=t(7569),c=t(414),l=t(63998),r=t(83093);const d=(0,l.forwardRef)(function(a,n){const{label:i,description:p,shortcut:u,isActive:g,isSelected:y,isDanger:T,icon:C,leftAccessory:m,rightAccessory:O,dataCy:W,onClick:K,trackingDetails:H,...N}=a,w=(0,l.useCallback)(k=>{K?.(k),H?.eventName&&(0,c.u4)(H.eventName,{workspaceId:null,...H.properties},{allowNullWorkspaceId:!0})},[K,H]);return(0,e.jsx)(o.D,{ref:n,...(0,r.o)(a),...N,onClick:w,children:(0,e.jsx)(r.T,{...a})})})},80315:($,_,t)=>{"use strict";t.d(_,{B:()=>d});var e=t(45470),o=t(45119),c=t(414),l=t(63998),r=t(83093);const d=(0,l.forwardRef)(function(a,n){const{label:i,description:p,shortcut:u,isActive:g,isSelected:y,isDanger:T,isDisabled:C,icon:m,leftAccessory:O,rightAccessory:W,dataCy:K,onClick:H,trackingDetails:N,...w}=a,k=(0,l.useCallback)(F=>{H?.(F),N?.eventName&&(0,c.u4)(N.eventName,{workspaceId:null,...N.properties},{allowNullWorkspaceId:!0})},[H,N]);return(0,e.jsx)(o.B.button,{...(0,r.o)(a),...w,onClick:k,ref:n,children:(0,e.jsx)(r.T,{...a})})})},83093:($,_,t)=>{"use strict";t.d(_,{T:()=>s,o:()=>d});var e=t(45470),o=t(42971),c=t(37189),l=t(63998),r=t(64592);const d=u=>{const{isDisabled:g,tabIndex:y,dataCy:T,isDanger:C,onClick:m}=u;return{width:"full",paddingX:3,paddingY:1.5,fontSize:"ui.sm",color:i(u),backgroundColor:n(u),disabled:g,tabIndex:y,cursor:g?"not-allowed":"pointer",_focus:{outline:"none"},_focusVisible:{backgroundColor:"bg.neutral.secondary"},_hover:{backgroundColor:a(u),color:C?"fg.critical.primaryHover":"unset"},"data-cy":T,borderRadius:"sm",onClick:m}};function s(u){let g;return u.icon?g=l.cloneElement(u.icon,{color:u.icon.props.color?u.icon.props.color:p(u),boxSize:4}):g=u.icon,(0,e.jsxs)(o.s,{flexDirection:"row",gap:2,alignItems:"center",width:"100%",justifyContent:"flex-start",children:[u.leftAccessory&&(0,e.jsx)(o.s,{opacity:u.isDisabled?.5:1,children:u.leftAccessory}),g&&(0,e.jsx)(o.s,{children:(0,e.jsx)(r.m,{placement:"left",isDisabled:!u.iconTooltip,label:u.iconTooltip,children:g})}),(0,e.jsxs)(o.s,{flexDirection:"column",flexGrow:1,gap:0,minWidth:0,children:[(0,e.jsxs)(o.s,{alignItems:"center",flexDirection:"row",gap:2,children:[(0,e.jsxs)(o.s,{textAlign:"left",flexGrow:1,textStyle:"ui.sm.regular",color:u.isDisabled?"fg.neutral.tertiary":i(u),fontWeight:u.isSelected?"ui.semibold":"ui.regular",minWidth:0,children:[u.children,u.label]}),u.shortcut&&(0,e.jsx)(c.E,{whiteSpace:"nowrap",textStyle:"ui.xs.regular",color:p(u),children:u.shortcut})]}),u.description&&(0,e.jsx)(c.E,{margin:0,marginTop:"2px",textAlign:"left",textStyle:"ui.xs.regular",color:u.isDisabled?"fg.neutral.tertiary":p(u),children:u.description})]}),u.rightAccessory&&(0,e.jsx)(o.s,{children:u.rightAccessory})]})}function a(u){return u.isDanger?"bg.critical.tertiary":u.isSelected?"bg.accentOne.tertiaryHover":"bg.neutral.primaryHover"}function n(u){return u.isSelected&&u.isDanger?"bg.critical.tertiary":u.isSelected?"bg.accentOne.tertiary":u.isActive?"bg.neutral.secondary":"bg.neutral.primary"}function i(u){return u.isDanger?"fg.critical.primary":u.isSelected?"fg.accentOne.primaryActive":u.isActive?"fg.neutral.primaryActive":"fg.neutral.primary"}function p(u){return u.isDanger?"fg.critical.secondary":u.isSelected?"fg.accentOne.secondaryActive":u.isActive?"fg.neutral.secondaryActive":"fg.neutral.secondary"}},32912:($,_,t)=>{"use strict";t.d(_,{i:()=>C});var e=t(45470),o=t(42971),c=t(33343),l=t(15070),r=t(78466),d=t(42172),s=t(59148),a=t(54660),n=t(96737),i=t(78836),p=t(60831);const u=5e3;function g(m){const{children:O,onClose:W,accent:K,icon:H,...N}=m;return(0,e.jsx)(o.s,{children:(0,e.jsxs)(c.az,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",minHeight:10,minWidth:"300px",maxWidth:"100%",borderRadius:"sm",border:"1px solid",backgroundColor:K==="neutral"?"bg.neutral.secondary":`bg.${K}.tertiary`,borderColor:K==="neutral"?"border.neutral.primary":`fg.${K}.primary`,boxShadow:"md",paddingY:2,paddingX:3,paddingRight:10,...N,children:[(0,e.jsx)(c.az,{display:"inline-flex",alignItems:"center",mr:3,mt:"-1px",color:`fg.${K}.primary`,children:H}),(0,e.jsx)(o.s,{direction:"column",textStyle:"ui.sm.regular",color:"fg.neutral.primary",children:O}),(0,e.jsx)(l.K,{"aria-label":"Close",position:"absolute",colorScheme:K,variant:"ghost",size:"xs",right:2,onClick:W,_hover:{backgroundColor:`${K==="neutral"?"bg.neutral.secondaryHover":`bg.${K}.tertiaryHover`} !important`},children:(0,e.jsx)(d.I,{color:`fg.${K}.primary`,as:s.a,size:"md"})})]})})}const y=[];async function T(m,O,W){const K=m.resolveOnClose??!0,H=m.id??(typeof m.message=="string"?m.message.replace(/\s/g,""):`toast_id_${Math.random()}`);if(!(y.length>=3))return y.push({id:H,group:m.group??"default"}),new Promise((N,w)=>{if(H&&p.o.isActive(H))return N(H);try{if((0,p.o)({id:H,render:({onClose:k})=>(0,e.jsx)(g,{onClose:()=>{k(),m.onClose&&m.onClose()},icon:W,accent:O,children:m.message}),status:"success",position:m.position,duration:m.duration===null?null:m.duration?m.duration*1e3:u,isClosable:!0,onCloseComplete:()=>{K&&N(H);const k=y.findIndex(F=>F.id===H);k!==-1&&y.splice(k,1)}}),!K)return N(H)}catch(k){w(k)}})}const C={success:m=>T(m,"positive",(0,e.jsx)(d.I,{as:a.i,size:"md"})),error:m=>T(m,"critical",(0,e.jsx)(d.I,{as:n.S,size:"md"})),info:m=>T(m,"accentOne",(0,e.jsx)(d.I,{as:i.C,size:"md"})),warning:m=>T(m,"attention",(0,e.jsx)(d.I,{as:i.C,size:"md"})),loading:m=>T(m,"neutral",(0,e.jsx)(r.y,{})),closeAll:(m={group:"default"})=>{y.forEach(({id:O,group:W})=>W===m.group&&p.o.close(O))},close:m=>p.o.close(m)}},91340:($,_,t)=>{"use strict";t.d(_,{a:()=>c});var e=t(45470),o=t(76938);function c(l){const{children:r,...d}=l;return(0,e.jsx)(o.aF,{scrollBehavior:"inside",isCentered:!0,...d,children:r})}},52889:($,_,t)=>{"use strict";t.d(_,{$:()=>c});var e=t(45470),o=t(54938);function c(l){const{children:r,...d}=l;return(0,e.jsx)(o.$,{boxShadow:"ui.lg",...d,children:r})}},67483:($,_,t)=>{"use strict";t.d(_,{r:()=>l});var e=t(45470),o=t(13509),c=t(42473);function l(r){const{children:d,...s}=r,a=(0,c.U)("Modal");return(0,e.jsx)(o.r,{"data-cy":"modal-header","data-testid":"modal-header",__css:a.header,...s,children:d})}},73126:($,_,t)=>{"use strict";t.d(_,{m:()=>c});var e=t(45470),o=t(6348);function c(l){const{children:r,...d}=l;return(0,e.jsx)(o.m,{backgroundColor:"effects.modalOverlay",...d,children:r})}},7245:($,_,t)=>{"use strict";t.d(_,{x:()=>c});var e=t(45470),o=t(37189);function c(l){const{children:r,...d}=l;return(0,e.jsx)(o.E,{color:"fg.neutral.primary",fontSize:"ui.sm",...d,children:r})}},30926:($,_,t)=>{"use strict";t.d(_,{Y:()=>r});var e=t(45470),o=t(91234),c=t(7536),l=t(64592);const r=(0,o.R)(function({tooltipProps:s,tooltipRef:a,...n},i){return(0,e.jsx)(l.m,{placement:"top",ref:a,...s,children:(0,e.jsx)(c.K,{ref:i,...n})})})},92231:($,_,t)=>{"use strict";t.d(_,{NP:()=>ke,Kp:()=>Y,w4:()=>te,DP:()=>Ae});var e=t(45470),o=t(88768),c=t(93046),l=t(99868),r=t(40272),d=t(6945),s=t(97737),a=t(33124),n=t(63998),i=t(84698);const p={expires:365,path:"/",httpOnly:!1};function u(ue){i.A.set("theme",ue,p)}function g(){return i.A.get("theme")}var y=t(11373);const T=()=>typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",C=()=>{const[ue,Pe]=(0,n.useState)(T);return(0,n.useEffect)(()=>{if(typeof window<"u"&&window.matchMedia){const He=window.matchMedia("(prefers-color-scheme: dark)"),Fe=qe=>{Pe(qe.matches?"dark":"light")};return He.addEventListener("change",Fe),()=>{He.removeEventListener("change",Fe)}}return()=>{}},[]),ue},m=({children:ue,ssrTheme:Pe})=>{const He=C(),Fe=()=>{const it=g();return it||Pe||"light"},[qe,at]=(0,n.useState)(Fe);(0,n.useEffect)(()=>{u(qe)},[qe]);const st=(0,n.useMemo)(()=>qe==="system"?He:qe,[qe,He]);return(0,e.jsx)(y.I.Provider,{value:{colorMode:qe,resolvedColorMode:st,setColorMode:at},children:ue})};var O=t(99121),W=t(13692),K=t(933),H=t(80132),N=t(62235),w=t(60508);const{definePartsStyle:k,defineMultiStyleConfig:F}=(0,w.YU)(N.aH.keys),X=k({root:{fontSize:"ui.sm"},container:{border:"none"},button:{fontWeight:"ui.semibold",fontSize:"ui.sm",color:"fg.neutral.primary",paddingX:4,paddingY:2,gap:2},panel:{color:"fg.neutral.secondary",paddingLeft:9,paddingY:0,display:"flex",flexDirection:"column",gap:2}}),z=F({baseStyle:X});var B=t(31315),U=t(18670);const G=(0,B.Dt)({baseStyle:{borderRadius:"xs",textTransform:"default",display:"flex",gap:1,alignItems:"center"},defaultProps:{size:"sm",variant:"solid"},sizes:{xs:{height:4,fontSize:"ui.xs",fontWeight:600},sm:{height:5,fontSize:"ui.sm",fontWeight:600,paddingX:1},md:{height:6,fontSize:"ui.md",fontWeight:600,paddingX:2}},variants:{solid:ue=>{const Pe=(0,U.h)(ue.colorScheme);return{backgroundColor:Pe==="neutral"?"bg.neutral.secondary":`bg.${Pe}.tertiary`,border:"1px solid",borderColor:Pe==="neutral"?"border.neutral.secondary":`border.${Pe}.tertiary`,color:Pe==="neutral"?"fg.neutral.secondary":`fg.${Pe}.primary`}}}});var f=t(84712);const I=["container","textLabel","buttonsContainer"],D=(0,B.YU)(I).defineMultiStyleConfig({baseStyle:{container:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:2},textLabel:{color:"fg.neutral.tertiary",fontSize:"ui.xs",lineHeight:"ui.xs"},buttonsContainer:{display:"flex",gap:0}},variants:{subtle:{}},defaultProps:{variant:"subtle"}});function R(ue){return{neutral:"fg.neutral.secondary",accentOne:"fg.accentOne.primary",accentTwo:"fg.accentTwo.primary",positive:"fg.positive.primary",attention:"fg.attention.primary",critical:"fg.critical.primary",onAccentPrimary:"fg.onAccentPrimary.primary"}[ue]}const L=(0,B.Dt)({baseStyle:ue=>{const Pe=ue.colorScheme?(0,U.h)(ue.colorScheme):null,He={};return Pe&&(He.color=R(Pe)),ue.color&&(He.color=ue.color),He},sizes:{sm:{width:"12px",height:"12px"},md:{width:"16px",height:"16px"},lg:{width:"24px",height:"24px"},xl:{width:"32px",height:"32px"}}}),x=["container","input","highlighter"],ne=(0,B.YU)(x),M={maxHeight:"160px",border:"none !important"},A=ne.defineMultiStyleConfig({baseStyle:{container:{fontSize:"ui.sm",lineHeight:"ui.sm"},input:{outline:"none",overflow:"auto !important",...M},highlighter:{pointerEvents:"none",overflow:"hidden !important",lineHeight:"ui.sm",zIndex:1,...M}}}),{definePartsStyle:b,defineMultiStyleConfig:q}=(0,w.YU)(N.Zt.keys),fe=6,oe=b({header:{paddingX:fe,paddingInlineEnd:12,paddingY:6,fontSize:"ui.lg",fontWeight:"ui.semibold",display:"flex",alignItems:"center"},body:{paddingX:fe,paddingTop:0,paddingBottom:6,fontSize:"ui.sm"},footer:{paddingX:fe,paddingY:6,gap:3},dialog:{backgroundColor:"bg.neutral.primary"},overlay:{backgroundColor:"rgba(24, 36, 49, 0.5)"},closeButton:{top:"4",insetEnd:4}}),ie=q({baseStyle:oe}),h=(0,B.Dt)({baseStyle:{fontSize:"ui.sm",lineHeight:"ui.sm",display:"flex",flexDirection:"column"},variants:{withVerticalPadding:{paddingY:4},noVerticalPadding:{},menuSection:{padding:1}},defaultProps:{variant:"withVerticalPadding"}}),ce=(0,B.Dt)({baseStyle:{fontSize:"ui.sm",lineHeight:"ui.sm",fontWeight:"ui.semibold",display:"flex",justifyContent:"space-between",alignItems:"center"},variants:{withPadding:{paddingX:4},fullWidth:{}},defaultProps:{variant:"withPadding"}}),ve=(0,B.Dt)({baseStyle:{fontSize:"ui.xs",lineHeight:"ui.xs"},variants:{withPadding:{paddingX:4},fullWidth:{}},defaultProps:{variant:"withPadding"}}),{definePartsStyle:Me,defineMultiStyleConfig:Le}=(0,B.YU)(N.j_.keys),We=Le({baseStyle:Me(ue=>({filledTrack:{backgroundColor:`fg.${(0,U.h)(ue.colorScheme)}.primary`},track:{backgroundColor:"bg.neutral.tertiary"}}))}),{definePartsStyle:Ge,defineMultiStyleConfig:$e}=(0,B.YU)(N.Vg.keys),Qe=$e({baseStyle:Ge(ue=>{const Pe=(0,U.h)(ue.colorScheme);return{control:{borderColor:"fg.neutral.tertiary",_checked:{color:"fg.primary.inverse",borderColor:`bg.${Pe}.primary`,backgroundColor:`bg.${Pe}.primary`,_hover:{color:"fg.primary.inverse",borderColor:`bg.${Pe}.primaryHover`,backgroundColor:`bg.${Pe}.primaryHover`},_disabled:{color:"fg.neutral.tertiary",borderColor:"bg.neutral.disabled",backgroundColor:"bg.neutral.disabled"}},_disabled:{color:"fg.neutral.tertiary",borderColor:"bg.neutral.disabled",backgroundColor:"bg.neutral.disabled"},_invalid:{borderColor:"border.critical.primary"}},label:{_disabled:{opacity:1,color:"fg.neutral.tertiary"}}}})});var le=t(99572),Ie=t(58142),P=t(23984);const V=(0,o.oY)((0,c.W)({colorScheme:"blue"}),(0,l.r)({size:"sm"}),{...P.I,transition:Ie.kY,styles:{global:{a:{color:"fg.accentOne.primary",_hover:{color:"fg.accentOne.primaryHover",textDecoration:"none !important"}},img:{maxWidth:"none"},body:{color:"fg.neutral.primary"}}},breakpoints:{...r.w4.breakpoints},semanticTokens:{colors:{"chakra-placeholder-color":"var(--chakra-colors-fg-neutral-secondary)","chakra-border-color":"var(--chakra-colors-border-neutral-secondary)","chakra-body-bg":"var(--chakra-colors-bg-neutral-primary)","chakra-inverse-text":"var(--chakra-colors-fg-onAccent-primary)","chakra-subtle-bg":"var(--chakra-colors-bg-neutral-secondary)"}},radii:{xxs:"2px",xs:"4px",sm:"6px",md:"8px",lg:"10px",xl:"12px","2xl":"16px","3xl":"20px","4xl":"24px","5xl":"32px",full:"9999px"},shadows:{outline:"0 0 0 3px var(--chakra-colors-border-accentOne-primary)",ui:{xs:"0 1px 2px var(--chakra-colors-effects-shadow-neutral)",sm:"0 1px 3px var(--chakra-colors-effects-shadow-neutral)",md:"0 5px 10px var(--chakra-colors-effects-shadow-neutral), 0 2px 4px -2px var(--chakra-colors-effects-shadow-neutral)",lg:"0 12px 16px -4px var(--chakra-colors-effects-shadow-neutral), 0 4px 6px -2px var(--chakra-colors-effects-shadow-neutral)"},boxShadow:{sm:"0px 1px 3px 0px rgba(16, 24, 40, 0.07)",md:"0px 0px 1px 0px rgba(1, 36, 71, 0.56);  0px 1px 2px 0px rgba(1, 36, 71, 0.08)",lg:"0px 0px 1px 0px rgba(1, 36, 71, 0.72);  0px 3px 6px 0px rgba(1, 36, 71, 0.12)"},blockActive:"0 0 0 2px var(--chakra-colors-shadow-blockActive)",blockError:"0 0 0 2px var(--chakra-colors-shadow-blockError)"},zIndices:{sticky:2,topbar:5,popover:6,overlay:8,modal:10,typeahead:12,dropdown:20},components:{...P.I.components,Card:{baseStyle:{container:{borderRadius:"sm",boxShadow:0,borderColor:"border.neutral.primary",backgroundColor:"bg.neutral.primary",borderWidth:1},body:{padding:4}}},Text:{baseStyle:ue=>({letterSpacing:ue.fontSize==="xxs"?"0.05px":ue.fontSize==="xs"?"0.01px":ue.fontSize==="sm"?"-0.09px":ue.fontSize==="md"?"-0.18px":ue.fontSize==="lg"?"-0.26px":"inherit",...ue.fontSize==="xxs"?{lineHeight:"1.3"}:{}}),variants:{paragraph:{marginBottom:"1em"},debug:{fontSize:"8px",lineHeight:"9px",fontWeight:600,textTransform:"uppercase",color:"#7E7E7E",fontFamily:"system-ui"}}},Skeleton:{baseStyle:{borderRadius:"sm",opacity:.9}},Accordion:z,Drawer:{parts:["dialog","overlay"],sizes:{xs:{dialog:{maxW:"256px"}}},baseStyle:{dialog:{maxW:"256px"},overlay:{backgroundColor:"rgba(91, 118, 143, 0.2)"}}},Alert:{parts:["container","icon","description","title"],baseStyle:ue=>({container:{borderRadius:"sm",border:"1px solid rgba(0, 0, 0, 0.1)",display:"block",fontSize:"xs",color:ue.colorScheme==="red"||ue.colorScheme==="orange"||ue.colorScheme==="green"||ue.colorScheme==="blue"?"fg.neutral.primary":"inherit"}}),variants:{subtle:{title:{fontSize:"xs"},description:{fontSize:"xs"}},regular:ue=>({container:{display:"flex",alignItems:"flex-start",gap:2,padding:3,borderRadius:"lg",borderColor:`border.${(0,U.h)(ue.colorScheme)}.tertiary`},icon:{margin:0,width:"auto",height:"auto"},title:{fontSize:"ui.sm",lineHeight:"ui.sm",fontWeight:"ui.semibold",margin:0},description:{fontSize:"ui.xs",lineHeight:"ui.xs"}})}},Link:{baseStyle:{fontWeight:"ui.semibold",color:"fg.accentOne.primary",_hover:{textDecoration:"none",color:"fg.accentOne.primaryHover"},_focus:{boxShadow:"none"}},variants:{underline:{fontWeight:"normal",color:"fg.accentOne.primary",_hover:{textDecoration:"underline !important",color:"fg.accentOne.primaryHover"}},gray:{fontWeight:"bold",color:"fg.neutral.secondary",_hover:{color:`${O.T.gray[800]} !important`}},"light-gray":{fontWeight:"bold",color:"fg.neutral.tertiary",_hover:{color:"fg.neutral.tertiaryHover"}},"menu-item":{fontWeight:"unset",color:"unset",_hover:{color:"fg.neutral.secondaryHover"}}}},NumberInput:{variants:{outline:{field:{_focus:{boxShadow:"none"}}}}},Input:{baseStyle:{field:{fontSize:"ui.xs",color:"fg.neutral.primary"}},defaultProps:{size:"xs",variant:"outline"},sizes:{xxs:{field:{height:6,px:2,py:1,fontSize:"ui.xs",lineHeight:"normal",borderRadius:"sm"},addon:{height:6,px:3,py:1,fontSize:"ui.xs",lineHeight:"normal"}},xs:{field:{height:8,px:3,py:2,fontSize:"ui.xs",lineHeight:"normal",borderRadius:"sm"},addon:{height:8,px:3,py:2,fontSize:"ui.xs",lineHeight:"normal"}},sm:{field:{height:9,px:3,py:2,fontSize:"ui.sm",lineHeight:"normal",borderRadius:"sm"},addon:{height:9,px:3,py:2,fontSize:"ui.sm",lineHeight:"normal"}},md:{field:{height:10,px:3,py:2,fontSize:"ui.md",lineHeight:"normal",borderRadius:"sm"},addon:{height:10,px:3,py:2,fontSize:"ui.md",lineHeight:"normal"}}},variants:{outline:{field:{background:"bg.neutral.primary",borderColor:"border.neutral.primary",_focus:{borderColor:"border.accentOne.primary",boxShadow:"none",outline:"none"},_invalid:{borderColor:"border.critical.primary",boxShadow:"none",outline:"none"}},addon:{backgroundColor:"bg.neutral.secondary",borderColor:"border.neutral.primary",color:"fg.neutral.primary"}},variable:ue=>({field:{...r.w4.components.Input.variants?.outline({colorScheme:ue.colorScheme??"blue",colorMode:ue.colorMode,theme:ue.theme}).field,fontFamily:"'Roboto Mono', monospace",_focus:{borderColor:"border.accentOne.primary",boxShadow:"none",outline:"none"},_invalid:{borderColor:"border.critical.primary",boxShadow:"none",outline:"none"}}})}},Textarea:{baseStyle:{maxHeight:"400px"},defaultProps:{size:"xs"},variants:{outline:{background:"bg.neutral.primary",_focusVisible:{borderColor:"border.accentOne.primary",boxShadow:"none"},_invalid:{borderColor:"border.critical.primary",boxShadow:"none"}}}},FormLabel:{baseStyle:{fontWeight:600,color:"fg.neutral.primary"},sizes:{xs:{fontSize:"xs"},sm:{fontSize:"sm"},md:{fontSize:"md"}},defaultProps:{size:"xs"}},FormError:{baseStyle:{text:{color:"fg.critical.primary",fontSize:"xs"}}},Form:{baseStyle:{helperText:{color:"fg.neutral.primary",lineHeight:1.6,marginTop:0},requiredIndicator:{display:"none"}},sizes:{xs:{helperText:{fontSize:"xs"}},sm:{helperText:{fontSize:"sm"}},md:{helperText:{fontSize:"md"}}},defaultProps:{size:"xs",helperText:{size:"xs"}}},CloseButton:{baseStyle:{_hover:{background:"bg.neutral.secondaryHover"},_focus:{outline:"none",boxShadow:"none"}}},Select:{defaultProps:{size:"xs",variant:"outline"},baseStyle:{field:{minWidth:"min-content"},icon:{color:"fg.neutral.secondary"}},sizes:{xxs:{field:{height:6,paddingInlineStart:2,paddingInlineEnd:7,paddingY:1,fontSize:"ui.xs",borderRadius:"sm"},addon:{height:6,paddingX:3,paddingY:1,fontSize:"ui.xs",lineHeight:"ui.xs"},icon:{insetEnd:"1"}},xs:{field:{height:8,paddingInlineStart:3,paddingY:2,fontSize:"ui.xs",lineHeight:"ui.xs",borderRadius:"sm"},addon:{height:8,paddingX:3,paddingY:2,fontSize:"ui.xs",lineHeight:"ui.xs"}},sm:{field:{height:9,paddingInlineStart:3,paddingY:2,fontSize:"ui.sm",lineHeight:"ui.sm",borderRadius:"sm"},addon:{height:9,paddingX:3,paddingY:2,fontSize:"ui.sm",lineHeight:"ui.sm"}},md:{field:{height:10,paddingInlineStart:3,paddingY:2,fontSize:"ui.md",lineHeight:"ui.md",borderRadius:"sm"},addon:{height:10,paddingX:3,paddingY:2,fontSize:"ui.md",lineHeight:"ui.md"}}},variants:{outline:{field:{background:"bg.neutral.primary",borderColor:"border.neutral.primary",_focusVisible:{boxShadow:null,...le.X.default},_invalid:{borderColor:"border.critical.primary",boxShadow:"none"}}}}},Switch:{baseStyle:ue=>({track:{backgroundColor:"bg.neutral.tertiaryActive",_checked:{backgroundColor:`bg.${(0,U.h)(ue.colorScheme)}.primary`},_focus:{boxShadow:"none"}}}),defaultProps:{size:"md",colorScheme:"accentOne"}},Tooltip:{baseStyle:{paddingY:2,paddingX:3,color:"fg.neutral.inverse.primary",background:"bg.neutral.inverse.primary","--tooltip-bg":"var(--chakra-colors-bg-neutral-inverse-primary)",fontSize:"ui.sm",lineHeight:"ui.sm",fontWeight:"ui.regular",borderRadius:"sm"}},Divider:{baseStyle:{borderColor:"border.neutral.secondary",opacity:1}},Checkbox:{parts:["control","icon","label"],baseStyle:ue=>{const Pe=(0,U.h)(ue.colorScheme);return{control:{borderRadius:"xxs",borderColor:"fg.neutral.tertiary",_checked:{color:"fg.primary.inverse",borderColor:`bg.${Pe}.primary`,backgroundColor:`bg.${Pe}.primary`,_hover:{color:"fg.primary.inverse",borderColor:`bg.${Pe}.primaryHover`,backgroundColor:`bg.${Pe}.primaryHover`},_disabled:{color:"fg.neutral.tertiary",borderColor:"bg.neutral.disabled",backgroundColor:"bg.neutral.disabled"}},_disabled:{color:"fg.neutral.tertiary",borderColor:"bg.neutral.disabled",backgroundColor:"bg.neutral.disabled"},_invalid:{borderColor:"border.critical.primary"}},label:{_disabled:{opacity:1,color:"fg.neutral.tertiary"}}}},sizes:{sm:{label:{fontSize:"xs"},icon:{fontSize:"3xs"}},md:{label:{fontSize:"sm"},icon:{fontSize:"3xs"}},lg:{label:{fontSize:"md"},icon:{fontSize:"xs"}}},defaultProps:{size:"sm"}},Popover:{parts:["popper","content"],baseStyle:{popper:{zIndex:1400},content:{background:"bg.neutral.primary",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)",_focus:{boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)"}}},sizes:{fullWidthBlockHeaderPopover:{popper:{width:"calc(100% + 2px)",transform:"translate3d(-1px, 44px, 0) !important"},content:{borderWidth:1,borderColor:"border.neutral.secondary"}},xs:{content:{width:"160px"}},sm:{content:{width:"220px"}},md:{content:{width:"300px"}},lg:{content:{width:"440px"}},auto:{content:{width:"auto"}}},defaultProps:{size:"auto"}},Tag:{parts:["container","closeButton"],baseStyle:{container:{borderRadius:"sm",textTransform:"default",display:"flex",alignItems:"center"},closeButton:{opacity:1,marginLeft:1,marginRight:-1,width:3,height:3}},defaultProps:{variant:"solid",size:"sm"},sizes:{xs:{container:{height:4,fontSize:"ui.xs",fontWeight:600,paddingX:1.5},closeButton:{width:3,height:3}},sm:{container:{height:5,fontSize:"ui.sm",fontWeight:600,paddingX:2},closeButton:{width:3,height:3}},md:{container:{height:6,fontSize:"ui.md",fontWeight:600,paddingX:2},closeButton:{width:4,height:4}}},variants:{solid:ue=>{const Pe=(0,U.h)(ue.colorScheme);return{closeButton:{borderRadius:"xxs",_hover:{backgroundColor:`bg.${Pe}.tertiaryHover`,color:`fg.${Pe}.secondaryHover`}},container:{backgroundColor:Pe==="neutral"?"bg.neutral.secondary":`bg.${Pe}.tertiary`,border:"1px solid",borderColor:Pe==="neutral"?"border.neutral.secondary":`border.${Pe}.tertiary`,color:Pe==="neutral"?"fg.neutral.secondary":`fg.${Pe}.primary`}}}}},Spinner:{baseStyle:{color:"fg.neutral.secondary",display:"flex"},defaultProps:{size:"sm"}},Menu:{parts:["item","list","groupTitle","button","divider"],baseStyle:{item:{fontSize:"ui.sm",color:"fg.neutral.primary",_focus:{outline:"none"},_focusVisible:{backgroundColor:"bg.neutral.secondary"},_hover:{backgroundColor:"bg.neutral.secondary",color:"unset"}},list:{padding:1,overflowY:"auto",maxHeight:"100vh",zIndex:"dropdown",backgroundColor:"bg.neutral.primary"},groupTitle:{margin:0,paddingX:3,paddingY:2,fontSize:"ui.sm",fontWeight:"ui.semibold"},command:{opacity:1,color:"fg.neutral.secondary",fontSize:"xs"},divider:{marginX:-1,marginY:1}}},Tabs:{parts:["tab","tablist"],sizes:{xs:({variant:ue})=>({tab:{fontSize:"ui.xs",height:"26px",px:2,borderRadius:ue==="filled"?"4px":void 0}}),sm:({variant:ue})=>({tab:{fontSize:"ui.sm",height:"32px",px:2,borderRadius:ue==="filled"?"4px":void 0}}),md:({variant:ue})=>({tab:{fontSize:"ui.md",height:"36px",px:3,borderRadius:ue==="filled"?"6px":void 0}}),lg:({variant:ue})=>({tab:{fontSize:"ui.lg",height:"44px",px:4,borderRadius:ue==="filled"?"6px":void 0}})},variants:{line:{tablist:{borderBottomWidth:"1px"},tab:{marginBottom:"-1px",color:"fg.neutral.secondary",fontWeight:"ui.semibold",_active:{backgroundColor:"transparent"},_selected:{borderColor:"border.accentOne.primary",color:"fg.accentOne.primary",_hover:{color:"fg.accentOne.primary"}},_hover:{borderColor:"border.accentOne.primary",color:"fg.neutral.primary"},_focusVisible:{boxShadow:"none",...le.X.default}}},filled:{tab:{_selected:{borderColor:"border.accentOne.primary",color:"fg.accentOne.primaryActive",fontWeight:"ui.semibold",backgroundColor:"bg.accentOne.tertiary",_hover:{backgroundColor:"bg.accentOne.tertiary"}},_hover:{backgroundColor:"bg.neutral.secondaryHover"},_focusVisible:{boxShadow:"none",...le.X.default}}}},defaultProps:{variant:"line"}},Kbd:{defaultProps:{size:"xs"},baseStyle:{color:"fg.neutral.secondary",fontFamily:"sans-serif",px:"2px"},sizes:{xs:{fontSize:"xs"}},variants:{tooltip:{color:"fg.neutral.inverse.secondary",backgroundColor:"bg.neutral.inverse.secondary",border:"none",padding:"3px 4px 1px"}}}}}),Y={PopoverSection:h,PopoverSectionHeader:ce,PopoverSectionItem:ve,FeedbackWidget:D,MentionsInput:A,GradientDivider:{defaultProps:{variant:"fadeBoth"},baseStyle:{borderImageSlice:1,"--divider-color":"var(--chakra-colors-gray-400)"},variants:{fadeLeft:{borderImageSource:"linear-gradient(to left, var(--divider-color), transparent)"},fadeRight:{borderImageSource:"linear-gradient(to right, var(--divider-color), transparent)"},fadeBoth:{borderImageSource:"linear-gradient(to right, transparent, var(--divider-color), transparent)"}}},SelectBox:{baseStyle:ue=>({color:ue.isSelectionEmpty?"fg.neutral.secondary":"fg.neutral.primary"}),variants:{"block-header-variable":ue=>({color:(ue.hasWarning,"fg.neutral.primary")})}},SelectBoxInput:{baseStyle:ue=>({borderWidth:1,borderStyle:"solid",borderColor:"border.neutral.primary",borderRadius:"sm",backgroundColor:ue.isDisabled?"bg.neutral.secondary":"bg.neutral.primary",cursor:ue.isDisabled?"not-allowed":"default",paddingX:2,justifyContent:"space-between",_focusWithin:ue.isDisabled?{}:{borderColor:"border.neutral.primary"},_groupFocusWithin:ue.isDisabled?{}:{borderColor:"border.neutral.primary"}}),variants:{"block-header-variable":ue=>({width:"136px",borderWidth:ue.hasWarning?0:1,borderColor:"border.neutral.secondary",backgroundColor:ue.hasWarning?"bg.attention.tertiary":"bg.neutral.primary",_focusWithin:ue.isDisabled?{}:{borderColor:"border.neutral.primary"},_groupFocusWithin:ue.isDisabled?{}:{borderColor:"border.neutral.primary"}}),composed:{paddingX:0,justifyContent:"flex-start",spacing:0}},defaultProps:{spacing:1}}},te=(0,o.oY)(V,{components:{...Y,Radio:Qe,Progress:We,DeepnoteIcon:L,Button:f.mr,Badge:G,Modal:ie}},(0,a.I)({baseStyle:{"h1, h2, h3, h4, h5, h6":{color:"fg.neutral.primary"},header:{borderTop:"1px solid",borderColor:"border.neutral.primary",mt:24,mb:12,textAlign:"center","h1, h2, h3, h4, h5, h6":{mt:6,mb:3},p:{mt:0,mb:2}},li:{fontSize:"md"},table:{"&, th, td":{border:"1px solid",borderColor:"border.neutral.primary"},th:{verticalAlign:"middle"},td:{verticalAlign:"middle",maxWidth:"300px"}}}})),Ae=()=>(0,d.D)(),ke=({children:ue,ssrTheme:Pe})=>(0,e.jsx)(m,{ssrTheme:Pe,children:(0,e.jsx)(Ne,{children:ue})}),Ne=({children:ue})=>{const Pe=(0,y.J)(),He=(0,n.useMemo)(()=>Pe==="light"?H.BZ:H.Lh,[Pe]),Fe=(0,o.oY)(te,{colors:{...K.e,...He,colorTheme:{...W.l}},semanticTokens:{colors:{"chakra-placeholder-color":"fg.neutral.secondary"}},config:{initialColorMode:Pe,useSystemColorMode:!1}});return(0,e.jsx)(s.s,{theme:Fe,children:ue})}},99121:($,_,t)=>{"use strict";t.d(_,{A:()=>r,T:()=>l});var e=t(13692),o=t(933),c=t(80132);const l={...o.e,...c.ZI,colorTheme:{...e.l}},r={95:"f2",90:"e6",85:"d9",80:"cc",75:"bf",70:"b3",65:"a6",60:"99",55:"8c",50:"80",45:"73",40:"66",35:"59",30:"4d",25:"40",20:"33",15:"26",10:"1a",5:"0d",0:"00"}},13692:($,_,t)=>{"use strict";t.d(_,{l:()=>r});var e=t(933);const r={default:{transparent:e.e.transparent,alphaWhite:e.e.alphaWhite,neutral:e.e.gray,accentOne:e.e.blue,accentTwo:e.e.purple,positive:e.e.green,attention:e.e.yellow,critical:e.e.red}}["default"]},933:($,_,t)=>{"use strict";t.d(_,{e:()=>e});const e={black:"#0B1520",white:"#FFFFFF",transparent:"transparent",alphaWhite:{100:"rgba(255, 255, 255, 0.1)",200:"rgba(255, 255, 255, 0.2)",300:"rgba(255, 255, 255, 0.3)",400:"rgba(255, 255, 255, 0.4)",500:"rgba(255, 255, 255, 0.5)",600:"rgba(255, 255, 255, 0.6)",700:"rgba(255, 255, 255, 0.7)",800:"rgba(255, 255, 255, 0.8)",900:"rgba(255, 255, 255, 0.96)",1e3:"rgba(255, 255, 255, 1.0)"},red:{950:"#440D1C",900:"#881337",800:"#9f1239",700:"#be123c",600:"#e11d48",500:"#f43f5e",400:"#fb7185",300:"#fda4af",200:"#fecdd3",100:"#ffe4e6",50:"#fff1f2"},purple:{950:"#2B0D42",900:"#0E0019",800:"#2B014B",700:"#47027D",600:"#6403B0",500:"#8004E2",400:"#9A1DFB",300:"#B04FFC",200:"#C782FD",100:"#DDB4FE",50:"#F4E6FF"},green:{950:"#022c22",900:"#064e3b",800:"#065f46",700:"#047857",600:"#059669",500:"#10b981",400:"#34d399",300:"#6ee7b7",200:"#a7f3d0",100:"#d1fae5",50:"#ecfdf5"},yellow:{950:"#3A1D0E",900:"#713716",800:"#8A4216",700:"#AA5413",600:"#CC7613",500:"#E69A1A",400:"#F2BB2D",300:"#fcd34d",200:"#fde68a",100:"#fef3c7",50:"#fffbeb"},blue:{950:"#012447",900:"#031A3F",800:"#052D6C",700:"#07419D",600:"#0A56D0",500:"#146EFE",400:"#498FFE",300:"#79ACFE",200:"#A6C8FF",100:"#D3E4FF",50:"#E9F1FF"},gray:{950:"#101219",900:"#141C2F",800:"#1A273D",700:"#334052",600:"#445164",500:"#606F85",400:"#8E9DB4",300:"#C2CDDC",200:"#DDE4EE",100:"#EDF2F7",50:"#F8FAFC",0:"#FFFFFF"},shadow:"rgba(27,50,73,0.1)",blockBorder:{error:"rgba(208,2,27,0.5)",errorActive:"rgba(208,2,27,1)"},status:{red:{default:"#f14d4d"},orange:{default:"rgba(241, 170, 38, 1)",faded:"rgba(241, 170, 38, 0.4)"}},textGray:{300:"rgba(27,50,73,0.7)",200:"rgba(27,50,73,0.8)",100:"rgba(23,50,73,1)"},textSelectionBackground:"#9DD1FF",deepnoteAi:"#C83DE3",deepnoteAiBackground:"#F4DAF9",deepnoteAiBackgroundLighter:"#F8ECFA",blockActiveShadow:"#C3E3FF",blockErrorShadow:"#FBB6B7",blockActiveShadowDark:"rgba(73, 143, 254, 0.5)",blockErrorShadowDark:"rgba(244, 63, 94, 0.5)",modalOverlayDark:"rgba(6, 10, 24, 0.8)",modalOverlayLight:"rgba(200, 211, 233, 0.7)",shadowLight:"rgba(20, 28, 47, 0.08)",shadowDark:"rgba(1, 5, 20, 0.6)"}},80132:($,_,t)=>{"use strict";t.d(_,{BZ:()=>c,Lh:()=>l,ZI:()=>r});var e=t(13692),o=t(933);const c={fg:{neutral:{primary:e.l.neutral[700],primaryHover:e.l.neutral[800],primaryActive:e.l.neutral[900],secondary:e.l.neutral[500],secondaryHover:e.l.neutral[600],secondaryActive:e.l.neutral[700],tertiary:e.l.neutral[400],tertiaryHover:e.l.neutral[500],tertiaryActive:e.l.neutral[600],inverse:{primary:e.l.neutral[100],primaryHover:e.l.neutral[50],primaryActive:e.l.neutral[0],secondary:e.l.neutral[300],secondaryHover:e.l.neutral[200],secondaryActive:e.l.neutral[100],tertiary:e.l.neutral[500],tertiaryHover:e.l.neutral[400],tertiaryActive:e.l.neutral[300]}},accentOne:{primary:e.l.accentOne[500],primaryHover:e.l.accentOne[600],primaryActive:e.l.accentOne[700],secondary:e.l.accentOne[400],secondaryHover:e.l.accentOne[500],secondaryActive:e.l.accentOne[600]},accentTwo:{primary:e.l.accentTwo[500],primaryHover:e.l.accentTwo[600],primaryActive:e.l.accentTwo[700],secondary:e.l.accentTwo[200],secondaryHover:e.l.accentTwo[300],secondaryActive:e.l.accentTwo[400]},positive:{primary:e.l.positive[600],primaryHover:e.l.positive[700],primaryActive:e.l.positive[800],secondary:e.l.positive[500]},attention:{primary:e.l.attention[700],primaryHover:e.l.attention[800],primaryActive:e.l.attention[900],secondary:e.l.attention[500]},critical:{primary:e.l.critical[500],primaryHover:e.l.critical[600],primaryActive:e.l.critical[700],secondary:e.l.critical[400]},onAccentPrimary:{primary:e.l.alphaWhite[900],primaryHover:e.l.alphaWhite[1e3],secondary:e.l.alphaWhite[700],secondaryHover:e.l.alphaWhite[800]}},bg:{neutral:{primary:e.l.neutral[0],primaryHover:e.l.neutral[100],primaryActive:e.l.neutral[200],secondary:e.l.neutral[50],secondaryHover:e.l.neutral[200],secondaryActive:e.l.neutral[300],tertiary:e.l.neutral[200],tertiaryHover:e.l.neutral[300],tertiaryActive:e.l.neutral[400],disabled:e.l.neutral[100],inverse:{primary:e.l.neutral[900],primaryHover:e.l.neutral[800],primaryActive:e.l.neutral[700],secondary:e.l.neutral[800],secondaryHover:e.l.neutral[700],secondaryActive:e.l.neutral[600]}},accentOne:{primary:e.l.accentOne[500],primaryHover:e.l.accentOne[600],primaryActive:e.l.accentOne[700],secondary:e.l.accentOne[200],secondaryHover:e.l.accentOne[300],secondaryActive:e.l.accentOne[400],tertiary:e.l.accentOne[50],tertiaryHover:e.l.accentOne[100],tertiaryActive:e.l.accentOne[200]},accentTwo:{primary:e.l.accentTwo[500],primaryHover:e.l.accentTwo[600],primaryActive:e.l.accentTwo[700],secondary:e.l.accentTwo[200],secondaryHover:e.l.accentTwo[300],secondaryActive:e.l.accentTwo[400],tertiary:e.l.accentTwo[50],tertiaryHover:e.l.accentTwo[100],tertiaryActive:e.l.accentTwo[200]},positive:{primary:e.l.positive[600],primaryHover:e.l.positive[700],primaryActive:e.l.positive[800],secondary:e.l.positive[200],secondaryHover:e.l.positive[300],secondaryActive:e.l.positive[400],tertiary:e.l.positive[50],tertiaryHover:e.l.positive[100],tertiaryActive:e.l.positive[200]},attention:{primary:e.l.attention[300],primaryHover:e.l.attention[400],primaryActive:e.l.attention[500],secondary:e.l.attention[200],secondaryHover:e.l.attention[300],secondaryActive:e.l.attention[400],tertiary:e.l.attention[50],tertiaryHover:e.l.attention[100],tertiaryActive:e.l.attention[200]},critical:{primary:e.l.critical[500],primaryHover:e.l.critical[600],primaryActive:e.l.critical[800],secondary:e.l.critical[300],secondaryHover:e.l.critical[400],secondaryActive:e.l.critical[600],tertiary:e.l.critical[100],tertiaryHover:e.l.critical[200],tertiaryActive:e.l.critical[200]}},border:{neutral:{primary:e.l.neutral[300],primaryHover:e.l.neutral[400],primaryActive:e.l.neutral[500],secondary:e.l.neutral[200],secondaryHover:e.l.neutral[300],secondaryActive:e.l.neutral[400]},accentOne:{primary:e.l.accentOne[500],primaryHover:e.l.accentOne[600],primaryActive:e.l.accentOne[700],secondary:e.l.accentOne[300],secondaryHover:e.l.accentOne[400],secondaryActive:e.l.accentOne[500],tertiary:e.l.accentOne[100],tertiaryHover:e.l.accentOne[200],tertiaryActive:e.l.accentOne[300]},accentTwo:{primary:e.l.accentTwo[500],primaryHover:e.l.accentTwo[600],primaryActive:e.l.accentTwo[700],secondary:e.l.accentTwo[300],secondaryHover:e.l.accentTwo[400],secondaryActive:e.l.accentTwo[500],tertiary:e.l.accentTwo[100],tertiaryHover:e.l.accentTwo[200],tertiaryActive:e.l.accentTwo[300]},positive:{primary:e.l.positive[600],primaryHover:e.l.positive[700],primaryActive:e.l.positive[800],secondary:e.l.positive[300],secondaryHover:e.l.positive[400],secondaryActive:e.l.positive[500],tertiary:e.l.positive[200],tertiaryHover:e.l.positive[300],tertiaryActive:e.l.positive[400]},attention:{primary:e.l.attention[400],primaryHover:e.l.attention[600],primaryActive:e.l.attention[700],secondary:e.l.attention[300],secondaryHover:e.l.attention[400],secondaryActive:e.l.attention[500],tertiary:e.l.attention[200],tertiaryHover:e.l.attention[300],tertiaryActive:e.l.attention[400]},critical:{primary:e.l.critical[500],primaryHover:e.l.critical[600],primaryActive:e.l.critical[700],secondary:e.l.critical[300],secondaryHover:e.l.critical[400],secondaryActive:e.l.critical[500],tertiary:e.l.critical[100],tertiaryHover:e.l.critical[200],tertiaryActive:e.l.critical[300]}},shadow:{blockActive:o.e.blockActiveShadow,blockError:o.e.blockErrorShadow},custom:{skeleton:{start:e.l.neutral[100],end:e.l.neutral[200]},scrollbar:{thumb:e.l.neutral[300],track:e.l.transparent},codeEditor:{comment:e.l.positive[800],string:e.l.critical[700],numeric:e.l.positive[600],keyword:e.l.accentOne[700],operator:e.l.accentOne[400],module:e.l.accentOne[600],storageType:e.l.attention[600],storage:e.l.positive[600],classVariant:e.l.attention[800],function:e.l.critical[800],typeUserDefined:e.l.accentTwo[500],typeClassName:e.l.accentTwo[700]}},effects:{shadow:{neutral:o.e.shadowLight},focusRing:{accentOne:e.l.accentOne[100],accentTwo:e.l.accentTwo[200],critical:e.l.critical[100]},modalOverlay:o.e.modalOverlayLight}},l={fg:{neutral:{primary:e.l.neutral[300],primaryHover:e.l.neutral[200],primaryActive:e.l.neutral[100],secondary:e.l.neutral[400],secondaryHover:e.l.neutral[300],secondaryActive:e.l.neutral[200],tertiary:e.l.neutral[500],tertiaryHover:e.l.neutral[400],tertiaryActive:e.l.neutral[300],inverse:{primary:e.l.neutral[700],primaryHover:e.l.neutral[800],primaryActive:e.l.neutral[900],secondary:e.l.neutral[500],secondaryHover:e.l.neutral[600],secondaryActive:e.l.neutral[700],tertiary:e.l.neutral[400],tertiaryHover:e.l.neutral[600],tertiaryActive:e.l.neutral[500]}},accentOne:{primary:e.l.accentOne[400],primaryHover:e.l.accentOne[300],primaryActive:e.l.accentOne[200],secondary:e.l.accentOne[500],secondaryHover:e.l.accentOne[400],secondaryActive:e.l.accentOne[300]},accentTwo:{primary:e.l.accentTwo[500],primaryHover:e.l.accentTwo[400],primaryActive:e.l.accentTwo[300],secondary:e.l.accentTwo[600],secondaryHover:e.l.accentTwo[500],secondaryActive:e.l.accentTwo[400]},positive:{primary:e.l.positive[500],primaryHover:e.l.positive[400],primaryActive:e.l.positive[300],secondary:e.l.positive[600]},attention:{primary:e.l.attention[500],primaryHover:e.l.attention[400],primaryActive:e.l.attention[300],secondary:e.l.attention[600]},critical:{primary:e.l.critical[500],primaryHover:e.l.critical[400],primaryActive:e.l.critical[300],secondary:e.l.critical[600]},onAccentPrimary:{primary:e.l.alphaWhite[900],primaryHover:e.l.alphaWhite[1e3],secondary:e.l.alphaWhite[700],secondaryHover:e.l.alphaWhite[800]}},bg:{neutral:{primary:e.l.neutral[900],primaryHover:e.l.neutral[800],primaryActive:e.l.neutral[700],secondary:e.l.neutral[800],secondaryHover:e.l.neutral[700],secondaryActive:e.l.neutral[600],tertiary:e.l.neutral[700],tertiaryHover:e.l.neutral[600],tertiaryActive:e.l.neutral[500],disabled:e.l.neutral[800],inverse:{primary:e.l.neutral[0],primaryHover:e.l.neutral[50],primaryActive:e.l.neutral[100],secondary:e.l.neutral[100],secondaryHover:e.l.neutral[200],secondaryActive:e.l.neutral[300]}},accentOne:{primary:e.l.accentOne[500],primaryHover:e.l.accentOne[400],primaryActive:e.l.accentOne[300],secondary:e.l.accentOne[700],secondaryHover:e.l.accentOne[600],secondaryActive:e.l.accentOne[500],tertiary:e.l.accentOne[950],tertiaryHover:e.l.accentOne[900],tertiaryActive:e.l.accentOne[800]},accentTwo:{primary:e.l.accentTwo[500],primaryHover:e.l.accentTwo[400],primaryActive:e.l.accentTwo[300],secondary:e.l.accentTwo[700],secondaryHover:e.l.accentTwo[600],secondaryActive:e.l.accentTwo[500],tertiary:e.l.accentTwo[950],tertiaryHover:e.l.accentTwo[900],tertiaryActive:e.l.accentTwo[800]},positive:{primary:e.l.positive[700],primaryHover:e.l.positive[600],primaryActive:e.l.positive[500],secondary:e.l.positive[600],secondaryHover:e.l.positive[500],secondaryActive:e.l.positive[400],tertiary:e.l.positive[950],tertiaryHover:e.l.positive[900],tertiaryActive:e.l.positive[800]},attention:{primary:e.l.attention[600],primaryHover:e.l.attention[500],primaryActive:e.l.attention[400],secondary:e.l.attention[800],secondaryHover:e.l.attention[700],secondaryActive:e.l.attention[600],tertiary:e.l.attention[950],tertiaryHover:e.l.attention[900],tertiaryActive:e.l.attention[800]},critical:{primary:e.l.critical[700],primaryHover:e.l.critical[600],primaryActive:e.l.critical[500],secondary:e.l.critical[600],secondaryHover:e.l.critical[800],secondaryActive:e.l.critical[900],tertiary:e.l.critical[950],tertiaryHover:e.l.critical[800],tertiaryActive:e.l.critical[900]}},border:{neutral:{primary:e.l.neutral[700],primaryHover:e.l.neutral[600],primaryActive:e.l.neutral[500],secondary:e.l.neutral[700],secondaryHover:e.l.neutral[600],secondaryActive:e.l.neutral[500]},accentOne:{primary:e.l.accentOne[400],primaryHover:e.l.accentOne[300],primaryActive:e.l.accentOne[200],secondary:e.l.accentOne[600],secondaryHover:e.l.accentOne[500],secondaryActive:e.l.accentOne[400],tertiary:e.l.accentOne[700],tertiaryHover:e.l.accentOne[600],tertiaryActive:e.l.accentOne[500]},accentTwo:{primary:e.l.accentTwo[500],primaryHover:e.l.accentTwo[400],primaryActive:e.l.accentTwo[300],secondary:e.l.accentTwo[700],secondaryHover:e.l.accentTwo[600],secondaryActive:e.l.accentTwo[500],tertiary:e.l.accentTwo[800],tertiaryHover:e.l.accentTwo[700],tertiaryActive:e.l.accentTwo[600]},positive:{primary:e.l.positive[500],primaryHover:e.l.positive[400],primaryActive:e.l.positive[300],secondary:e.l.positive[700],secondaryHover:e.l.positive[600],secondaryActive:e.l.positive[500],tertiary:e.l.positive[800],tertiaryHover:e.l.positive[700],tertiaryActive:e.l.positive[600]},attention:{primary:e.l.attention[400],primaryHover:e.l.attention[300],primaryActive:e.l.attention[200],secondary:e.l.attention[600],secondaryHover:e.l.attention[500],secondaryActive:e.l.attention[400],tertiary:e.l.attention[800],tertiaryHover:e.l.attention[700],tertiaryActive:e.l.attention[600]},critical:{primary:e.l.critical[500],primaryHover:e.l.critical[400],primaryActive:e.l.critical[300],secondary:e.l.critical[600],secondaryHover:e.l.critical[500],secondaryActive:e.l.critical[400],tertiary:e.l.critical[800],tertiaryHover:e.l.critical[700],tertiaryActive:e.l.critical[600]}},shadow:{blockActive:o.e.blockActiveShadowDark,blockError:o.e.blockErrorShadowDark},custom:{skeleton:{start:e.l.neutral[800],end:e.l.neutral[700]},scrollbar:{thumb:e.l.neutral[600],track:e.l.transparent},codeEditor:{comment:e.l.positive[600],string:e.l.critical[500],numeric:e.l.accentOne[500],keyword:e.l.accentOne[400],operator:e.l.accentOne[300],module:e.l.accentOne[500],storageType:e.l.attention[600],storage:e.l.positive[600],classVariant:e.l.attention[500],function:e.l.critical[500],typeUserDefined:e.l.accentTwo[300],typeClassName:e.l.accentTwo[400]}},effects:{shadow:{neutral:o.e.shadowDark},focusRing:{accentOne:e.l.accentOne[700],accentTwo:e.l.accentTwo[800],critical:e.l.critical[950]},modalOverlay:o.e.modalOverlayDark}},r=c},84712:($,_,t)=>{"use strict";t.d(_,{id:()=>s,mr:()=>i});var e=t(31315),o=t(99572),c=t(18670);function l(p,u){switch(p){case"solid":return`bg.${u}.primaryHover`;case"outline":case"ghost":case"ghostIcon":return`bg.${u}.${u==="neutral"?"primaryHover":"tertiary"}`}}const r={xxs:6,xs:6,sm:8,md:9},d=4,s={xxs:r.xxs*d,xs:r.xs*d,sm:r.sm*d,md:r.md*d};function a(p){return typeof p=="string"&&p in r}const i=(0,e.Dt)({baseStyle:{boxShadow:"none",fontWeight:"ui.semibold",borderRadius:"sm"},defaultProps:{size:"sm"},sizes:{xxs:{height:r.xxs,px:2,fontSize:"xxs",lineHeight:"16px"},xs:{height:r.xs,px:2,fontSize:"ui.xs",lineHeight:"ui.xs"},sm:{height:r.sm,px:3,fontSize:"ui.sm",lineHeight:"ui.sm"},md:{height:r.md,px:3,fontSize:"ui.md",lineHeight:"ui.md"}},variants:{solid:p=>{const u=(0,c.h)(p.colorScheme);return{boxShadow:"ui.sm",backgroundColor:`bg.${u}.primary`,minWidth:a(p.size)?r[p.size]:"auto",color:{neutral:"fg.neutral.primary",accentOne:"fg.onAccentPrimary.primary",accentTwo:"fg.onAccentPrimary.primary",positive:"fg.onAccentPrimary.primary",attention:"fg.onAccentPrimary.primary",critical:"fg.onAccentPrimary.primary"}[u],_disabled:{opacity:1,backgroundColor:"bg.neutral.disabled",color:"fg.neutral.tertiary"},_hover:{backgroundColor:l("solid",u),_disabled:{backgroundColor:"bg.neutral.disabled",color:"fg.neutral.tertiary"}},_active:{backgroundColor:`bg.${u}.primaryActive`},_focusVisible:{boxShadow:null,...o.X.default}}},outline:p=>{const u=(0,c.h)(p.colorScheme);return{boxShadow:u==="neutral"?"ui.sm":"none",minWidth:a(p.size)?r[p.size]:"auto",color:`fg.${u}.primary`,backgroundColor:u==="neutral"?"bg.neutral.primary":"transparent",borderWidth:"1px",borderColor:`border.${u}.primary`,_hover:{backgroundColor:l("outline",u),borderColor:`border.${u}.primaryHover`,color:`fg.${u}.primaryHover`,_disabled:{backgroundColor:"bg.neutral.primary",borderColor:"border.neutral.secondary"}},_active:{boxShadow:"none",borderColor:`border.${u}.primaryActive`,backgroundColor:`bg.${u}.${u==="neutral"?"primaryActive":"tertiary"}`,color:`fg.${u}.primaryActive`},_focusVisible:{boxShadow:"none",...o.X.default},_disabled:{opacity:1,color:"fg.neutral.tertiary",borderColor:"border.neutral.secondary",_hover:{color:"fg.neutral.tertiary"}}}},ghost:p=>{const u=(0,c.h)(p.colorScheme);return{color:`fg.${u}.primary`,minWidth:a(p.size)?r[p.size]:"auto",backgroundColor:"transparent",_hover:{backgroundColor:l("ghost",u),color:`fg.${u}.primaryHover`,_disabled:{color:"fg.neutral.tertiary"}},_active:{backgroundColor:`bg.${u}.${u==="neutral"?"primaryActive":"tertiary"}`,color:`fg.${u}.primaryActive`},_disabled:{opacity:1,color:"fg.neutral.tertiary"}}},ghostIcon:p=>{const u=(0,c.h)(p.colorScheme);return{minWidth:a(p.size)?r[p.size]:"auto",color:`fg.${u}.${u==="neutral"?"secondary":"primary"}`,_hover:{color:`fg.${u}.${u==="neutral"?"secondary":"primary"}Hover`,backgroundColor:l("ghostIcon",u),_disabled:{opacity:1,color:"fg.neutral.tertiary"},_active:{_disabled:{opacity:1,color:"fg.neutral.tertiaryActive",backgroundColor:`bg.${u}.${u==="neutral"?"primary":"tertiary"}`}}},_active:{color:`fg.${u}.${u==="neutral"?"secondary":"primary"}Active`,backgroundColor:`bg.${u}.${u==="neutral"?"primary":"tertiary"}`,_disabled:{opacity:1,color:"fg.neutral.tertiary"}},_disabled:{opacity:1,color:"fg.neutral.tertiary"}}},tag:p=>{const u=(0,c.h)(p.colorScheme),g={opacity:1,color:"fg.neutral.tertiary",backgroundColor:"bg.neutral.disabled",_hover:{backgroundColor:"bg.neutral.disabled"}};return{_disabled:g,fontSize:"ui.xs",lineHeight:"ui.xs",fontWeight:"ui.semibold",height:"auto",paddingX:2,paddingY:.5,borderRadius:"9999px",color:u==="neutral"?"fg.neutral.secondary":`fg.${u}.primary`,backgroundColor:`bg.${u}.tertiary`,_hover:{_disabled:g,backgroundColor:`bg.${u}.tertiaryHover`},_active:{_disabled:g}}}}})},11373:($,_,t)=>{"use strict";t.d(_,{I:()=>c,J:()=>l});var e=t(63998);const o={resolvedColorMode:"light",colorMode:"light",setColorMode:()=>{}},c=(0,e.createContext)(o);function l(){const{resolvedColorMode:r}=(0,e.useContext)(c);return r}},36664:($,_,t)=>{"use strict";t.d(_,{Zc:()=>o,gx:()=>c,jG:()=>l});var e=t(33359);const o="Roboto Mono",c={fontFamily:{monospaceFontFamily:`'${o}', monospace`,primaryFontFamily:"Inter, sans-serif",systemDefaultFontFamily:"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu",marketingHeaderFontFamily:"Degular, sans-serif"},ui_11_400:(0,e.AH)`
    font-size: 11px;
    line-height: 16px;
    font-weight: 400;
  `,ui_11_500:(0,e.AH)`
    font-size: 11px;
    line-height: 16px;
    font-weight: 500;
  `,ui_12_400:(0,e.AH)`
    font-size: 12px;
    line-height: 16px;
    font-weight: 400;
  `,ui_12_500:(0,e.AH)`
    font-size: 12px;
    line-height: 16px;
    font-weight: 500;
  `,ui_14_400:(0,e.AH)`
    font-size: 14px;
    line-height: 20px;
    font-weight: 400;
  `,ui_14_500:(0,e.AH)`
    font-size: 14px;
    line-height: 20px;
    font-weight: 500;
  `,ui_16_400:(0,e.AH)`
    font-size: 16px;
    line-height: 24px;
    font-weight: 400;
  `,ui_16_500:(0,e.AH)`
    font-size: 16px;
    line-height: 24px;
    font-weight: 500;
  `,ui_18_400:(0,e.AH)`
    font-size: 18px;
    line-height: 24px;
    font-weight: 400;
  `,ui_18_500:(0,e.AH)`
    font-size: 18px;
    line-height: 24px;
    font-weight: 500;
  `,ui_20_400:(0,e.AH)`
    font-size: 20px;
    line-height: 28px;
    font-weight: 400;
  `,ui_20_500:(0,e.AH)`
    font-size: 20px;
    line-height: 28px;
    font-weight: 500;
  `},l={container:(0,e.AH)`
    width: 1280px;
    max-width: 100%;
    padding: 0 20px;
    margin: 0 auto;
  `,global:(0,e.AH)`
    * {
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
      scrollbar-width: thin;
      scrollbar-color: var(--chakra-colors-custom-scrollbar-thumb) var(--chakra-colors-custom-scrollbar-track) !important;
    }

    *::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    *::-webkit-scrollbar-thumb {
      background: var(--chakra-colors-custom-scrollbar-thumb) !important;
      border-radius: 6px;
    }

    *::-webkit-scrollbar-track {
      background: var(--chakra-colors-custom-scrollbar-track);
    }

    html {
      height: 100%;
      width: 100%;
    }
    body {
      font-family: ${c.fontFamily.primaryFontFamily};
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    input,
    textarea {
      font-family: inherit;
    }
    a {
      text-decoration: none;
      color: #1468bc;

      &:hover {
        text-decoration: underline;
      }
    }
    table {
      border-collapse: collapse;
    }
    .grecaptcha-badge {
      visibility: hidden;
    }
    img,
    svg {
      vertical-align: middle;
    }

    /* Applicable for Storybook */
    .dark .sbdocs-wrapper,
    .dark.sb-show-main {
      background: var(--chakra-colors-bg-neutral-primary) !important;
    }

    .dark #storybook-docs .sbdocs.sbdocs-preview .docs-story {
      background: var(--chakra-colors-bg-neutral-primary) !important;
    }

    .dark .sbdocs.sbdocs-preview {
      background: var(--chakra-colors-bg-neutral-primary) !important;
      border-color: var(--chakra-colors-border-neutral-primary);
    }

    .dark .sb-bar {
      background: var(--chakra-colors-bg-neutral-secondary) !important;
    }

    .dark .sbdocs-title,
    .dark h2,
    .dark h3 {
      color: var(--chakra-colors-fg-neutral-primary);
    }
  `}},42473:($,_,t)=>{"use strict";t.d(_,{U:()=>o});var e=t(59593);function o(c,l={}){return(0,e.o5)(c,l)}},99572:($,_,t)=>{"use strict";t.d(_,{X:()=>e});const e={default:{outline:"var(--chakra-colors-border-accentOne-primary, red) solid 3px",outlineOffset:"1px"}}},58142:($,_,t)=>{"use strict";t.d(_,{KP:()=>r,Le:()=>l,_8:()=>c,kY:()=>d});const e=[.4,0,.2,1],o={easeInOut:e,fade:e,ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},c={easeInOut:`cubic-bezier(${e.join(", ")})`,fade:`cubic-bezier(${e.join(", ")})`,ease:`cubic-bezier(${o.ease.join(", ")})`,easeIn:`cubic-bezier(${o.easeIn.join(", ")})`,easeOut:`cubic-bezier(${o.easeOut.join(", ")})`},l={ultraFast:.05,faster:.1,fast:.15,normal:.2,slow:.3,slower:.4,ultraSlow:.5},r={ultraFast:"0.05s",faster:"0.1s",fast:"0.15s",normal:"0.2s",slow:"0.3s",slower:"0.4s",ultraSlow:"0.5s"},d={framerMotionVariants:{enter:{scale:1,opacity:1,transition:{duration:l.fast,ease:o.easeOut}},exit:{opacity:0,scale:.95,transition:{duration:l.faster,ease:o.easeIn}}}}},23984:($,_,t)=>{"use strict";t.d(_,{I:()=>c});const e={lg:{regular:{fontSize:"16px",lineHeight:"24px",fontWeight:400},semibold:{fontSize:"16px",lineHeight:"24px",fontWeight:600}},md:{regular:{fontSize:"14px",lineHeight:"20px",fontWeight:400},semibold:{fontSize:"14px",lineHeight:"20px",fontWeight:600}},sm:{regular:{fontSize:"13px",lineHeight:"18px",fontWeight:400},semibold:{fontSize:"13px",lineHeight:"18px",fontWeight:600}},xs:{regular:{fontSize:"12px",lineHeight:"16px",fontWeight:400},semibold:{fontSize:"12px",lineHeight:"16px",fontWeight:600}}},o={ui:e,"5xl":{fontWeight:600,fontSize:{base:"4.5rem",lg:"5.75rem"},lineHeight:{base:"5rem",lg:"7rem"},letterSpacing:{base:"-0.13375rem",lg:"-0.100625rem"}},"4xl":{fontWeight:600,fontSize:{base:"3.75rem",lg:"4.5rem"},lineHeight:{base:"4.5rem",lg:"5rem"},letterSpacing:{base:"-0.08375rem",lg:"-0.100625rem"}},"3xl":{fontWeight:600,fontSize:{base:"3.5rem",lg:"3.75rem"},lineHeight:{base:"3.5rem",lg:"4.5rem"},letterSpacing:{base:"-0.066875rem",lg:"-0.08375rem"}},"2xl":{fontWeight:600,fontSize:{base:"2.25rem",lg:"2.5rem"},lineHeight:{base:"2.75rem",lg:"3.25rem"},letterSpacing:{base:"-0.049375rem",lg:"-0.055625rem"}},xl:{fontWeight:600,fontSize:{base:"2rem",lg:"2.25rem"},lineHeight:{base:"2.5rem",lg:"2.75rem"},letterSpacing:{base:"-0.043125",lg:"-0.049375rem"}},lg:{fontWeight:600,fontSize:{base:"1.75rem",lg:"2rem"},lineHeight:{base:"2.25rem",lg:"2.5rem"},letterSpacing:{base:"-0.036875rem",lg:"-0.043125rem"}},md:{fontWeight:600,fontSize:{base:"1.5rem",lg:"1.75rem"},lineHeight:{base:"2rem",lg:"2.25rem"},letterSpacing:{base:"-0.029375rem",lg:"-0.036875rem"}},sm:{fontWeight:600,fontSize:{base:"1.25rem",lg:"1.5rem"},lineHeight:{base:"1.75rem",lg:"2rem"},letterSpacing:{base:"-0.020625rem",lg:"-0.029375rem"}},xs:{fontWeight:600,fontSize:{base:"1rem",lg:"1.25rem"},lineHeight:{base:"1.5rem",lg:"1.75rem"},letterSpacing:{base:"-0.01125rem",lg:"-0.020625rem"}},xxs:{fontWeight:600,fontSize:{base:"0.875rem",lg:"1.125rem"},lineHeight:{base:"1.25rem",lg:"1.5rem"},letterSpacing:{base:"-0.005625rem",lg:"-0.01625rem"}},"p-lg":{fontWeight:400,fontSize:"1.125rem",lineHeight:"1.75rem",letterSpacing:"-0.01625rem"},"p-md":{fontWeight:400,fontSize:"1rem",lineHeight:"1.5rem",letterSpacing:"-0.01125rem"},"p-sm":{fontWeight:400,fontSize:"0.875rem",lineHeight:"1.25rem",letterSpacing:"-0.005625rem"},"p-xs":{fontWeight:400,fontSize:"0.75rem",lineHeight:"1rem",letterSpacing:"0.000625rem"}},c={fonts:{body:"'Inter', sans-serif",display:"'Degular', sans-serif",heading:"'Inter', sans-serif",mono:"'Roboto Mono', monospace"},fontSizes:{xxs:"0.6875rem",ui:{lg:e.lg.regular.fontSize,md:e.md.regular.fontSize,sm:e.sm.regular.fontSize,xs:e.xs.regular.fontSize}},fontWeights:{ui:{regular:400,semibold:600}},lineHeights:{ui:{lg:e.lg.regular.lineHeight,md:e.md.regular.lineHeight,sm:e.sm.regular.lineHeight,xs:e.xs.regular.lineHeight}},textStyles:o,components:{Heading:{sizes:{"5xl":{textStyle:"5xl"},"4xl":{textStyle:"4xl"},"3xl":{textStyle:"3xl"},"2xl":{textStyle:"2xl"},xl:{textStyle:"xl"},lg:{textStyle:"lg"},md:{textStyle:"md"},sm:{textStyle:"sm"},xs:{textStyle:"xs"},h1:{textStyle:"lg"},h2:{textStyle:"md"},h3:{textStyle:"sm"},h4:{textStyle:"xs"},h5:{textStyle:"xxs"},h6:{textStyle:"xxs"}}}}}},18670:($,_,t)=>{"use strict";t.d(_,{h:()=>l});const o=["gray","blue","purple","green","yellow","red",...["neutral","accentOne","accentTwo","positive","attention","critical","onAccentPrimary"]];function c(r){return o.includes(r)}function l(r,d="neutral"){return c(r)?{gray:"neutral",blue:"accentOne",purple:"accentTwo",green:"positive",yellow:"attention",red:"critical",neutral:"neutral",accentOne:"accentOne",accentTwo:"accentTwo",positive:"positive",attention:"attention",critical:"critical",onAccentPrimary:"onAccentPrimary"}[r]:d}},60831:($,_,t)=>{"use strict";t.d(_,{N:()=>l,o:()=>c});var e=t(16399),o=t(92231);const{toast:c,ToastContainer:l}=(0,e.J)({theme:o.w4,defaultOptions:{isClosable:!0,position:"top"}})},64592:($,_,t)=>{"use strict";t.d(_,{m:()=>d});var e=t(45470),o=t(42971),c=t(15255),l=t(91234),r=t(21420);const d=(0,l.R)(function({hasArrow:a=!0,placement:n="top",closeOnEsc:i=!1,modifiers:p=[],label:u,subLabel:g,...y},T){const C=g?(0,e.jsxs)(o.s,{flexDirection:"column",alignItems:"center",children:[u,(0,e.jsx)(o.s,{flexDirection:"column",alignItems:"center",textStyle:"ui.xs.regular",color:"fg.neutral.inverse.secondary",children:g})]}):u;return(0,e.jsx)(c.m,{ref:T,hasArrow:a,placement:n,label:C,modifiers:[r.s,...p],closeOnEsc:i,...y})})},21420:($,_,t)=>{"use strict";t.d(_,{s:()=>e});const e={name:"preventOverflow",options:{padding:8}}},55502:($,_,t)=>{"use strict";t.d(_,{IC:()=>d,Kq:()=>r,Vv:()=>c,g3:()=>s,jQ:()=>l,sg:()=>a});var e=t(51881),o=t(82326);const c=(n,i)=>{try{localStorage.setItem(n,i)}catch(p){(0,e.H)(p,"error",{key:n,value:i})}},l=n=>{try{localStorage.removeItem(n)}catch(i){(0,e.H)(i,"error",{key:n})}},r=n=>{try{return window.localStorage.getItem(n)}catch(i){if((0,o.c)(i).name==="SecurityError")return;console.log(i)}return null};function d(n){const i=r(n);return i?JSON.parse(i):null}const s=(n,i)=>{try{window.localStorage.setItem(n,i)}catch(p){if((0,o.c)(p).name==="SecurityError")return;console.log(p)}};function a(n,i){s(n,JSON.stringify(i))}},83668:()=>{},69193:()=>{},73144:()=>{}}]);

//# sourceMappingURL=1781.bundle.6578ce0e.js.map