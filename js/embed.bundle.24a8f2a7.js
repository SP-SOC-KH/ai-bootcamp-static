"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1722],{25328:(F,d,e)=>{e.d(d,{$:()=>m});var t=e(45470),n=e(788),o=e(33343),i=e(63998),a=e(36e3);const m=(0,i.forwardRef)(function(C,u){const g=(0,i.useRef)(null);(0,a.Lh)(g);const s=(0,n.S)(g,u);return(0,t.jsx)(o.az,{...C,ref:s})})},76219:(F,d,e)=>{e.d(d,{A:()=>oe});var t=e(45470),n=e(44358),o=e(92231),i=e(45119),a=e(74381),m=e.n(a),r=e(63998),C=e(85007),u=e(44489),g=e(45806),s=e(36664),l=e(33359);const x=(U,Z)=>(0,l.AH)`
  border: 1px solid ${U.colors.border.neutral.primary};
  border-radius: 3px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-height: 100%;
  ${Z&&"min-height: 100vh;"}
`,O=U=>(0,l.AH)`
  width: 100%;
  height: 1px;
  border-top: solid 1px ${U.colors.border.neutral.primary};
`,z=U=>(0,l.AH)`
  /* overwrite styles from fakeEditorStyles */
  width: 100%;
  background: ${U.colors.bg.neutral.primary};
  border-bottom: 1px solid ${U.colors.border.neutral.primary};
  margin: 0;
  flex: 0 0 auto;
  padding: 12px 14px;
`,I=U=>(0,l.AH)`
  background: ${U.colors.bg.neutral.primary};
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;

  .vega-embed {
    flex: 1;
  }
`,c=U=>(0,l.AH)`
  border-top: 1px solid ${U.colors.border.neutral.primary};
  background: ${U.colors.bg.neutral.primary};
  padding: 8px 15px;
  flex: 0 0 auto;
`,D=U=>(0,l.AH)`
  color: ${U.colors.fg.neutral.primary};
  /* SF Pro in design. Set defaults for other platforms */
  font-family: ${s.gx.fontFamily.systemDefaultFontFamily};
  font-size: 11px;
  line-height: 16px;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  outline: none;
  transition: color 0.3s;

  span {
    font-weight: 600;
  }

  &:hover {
    color: ${U.colors.fg.accentOne.primaryHover};
    text-decoration: none;
  }
`;var P=e(42172),R=e(97679);const k=U=>{const Z=(0,o.DP)(),me=`?utm_source=embed&projectId=${U.projectId}&fileId=${U.fileId}&cellId=${U.cellId}`;return(0,t.jsx)(i.B.div,{css:c(Z),children:(0,t.jsxs)(i.B.a,{css:D(Z),target:"_blank",rel:"noopener noreferrer",href:"https://www.deepnote.com/"+me,children:["Hosted on",(0,t.jsx)(P.I,{boxSize:3,as:R.I,mx:1}),(0,t.jsx)("span",{children:"Deepnote"})]})})};var Q=e(64261),E=e(22364);const M=({input:U})=>{const Z=(0,o.DP)();return(0,t.jsx)(i.B.div,{css:[E.j4(Z),E.i$,E.sT,E.p4(Z.colorMode==="light"?"light":"dark"),E.f9,z(Z)],dangerouslySetInnerHTML:{__html:Q.A.highlight(U,{language:"python"}).value}})},p=U=>{const Z=(0,o.DP)();return(0,t.jsx)(i.B.div,{css:I(Z),children:U.children})},A=[100,250,400,800,1500,3e3,1e4],j=(U,Z)=>{parent.postMessage(JSON.stringify({src:U,context:"iframe.resize",height:Z}),"*")},oe=U=>{const Z=(0,o.DP)(),{input:me,outputs:Ce,projectId:Me,fileId:ae,cellId:ke,cellType:ze,visualisationFilter:ye,workspaceId:Ke,tableState:Ve}=U;if((0,r.useEffect)(()=>{const be=m()(()=>{const le=parseInt(new URLSearchParams(window.location.search).get("height")??"300",10);j(window.location.toString(),le)},200);return A.forEach(le=>setTimeout(be,le)),window.addEventListener("resize",be),()=>window.removeEventListener("resize",be)},[]),(0,r.useEffect)(()=>{(0,n.dy)()}),!(Me&&ae&&ke&&ze))return(0,t.jsx)("div",{children:"There was an error while rendering the cell."});if(ze==="visualization"){const be=Ce?.[0]?(0,C.aX)(Ce?.[0]):null;return(0,t.jsxs)(i.B.div,{css:x(Z,U.stretchMode),children:[me&&(0,t.jsx)(M,{input:me}),(0,t.jsx)(p,{children:be?(0,t.jsx)(u.R,{spec:(0,C.XW)(be,Z),visualisationFilter:ye},0):null}),(0,t.jsx)(k,{projectId:Me,fileId:ae,cellId:ke})]})}return(0,t.jsxs)(i.B.div,{css:x(Z,U.stretchMode),children:[me&&(0,t.jsx)(M,{input:me}),Ce&&(0,t.jsx)(p,{children:Ce.map((be,le,je)=>(0,t.jsxs)(r.Fragment,{children:[(0,t.jsx)(g.k,{isStatic:!0,output:be,outputIndex:le,notebookId:ae,cellId:U.cellId,element:null,cellExecutionCount:null,blockExecutionContextId:null,cellDisplayMode:"embed",heightLimitDisabled:!0,workspaceId:Ke,tableState:Ve,selectedNotebookFunctionExportName:null}),le<je.length-1&&(0,t.jsx)(i.B.div,{css:O(Z)})]},le))}),(0,t.jsx)(k,{projectId:Me,fileId:ae,cellId:ke})]})}},15566:(F,d,e)=>{e.d(d,{B:()=>g});var t=e(45470),n=e(42971),o=e(63998),i=e(42172),a=e(5787),m=e(34980),r=e(65918),C=e(15049);const u=(0,o.memo)(function(l){const{onSearchQueryChangeRequest:x}=l,O=(0,o.useCallback)(I=>{setTimeout(()=>{I?.focus()},0)},[]),z=(0,o.useCallback)(I=>{const c=I.target.value===""?null:I.target.value;x(c)},[x]);return(0,t.jsxs)(m.M,{position:"relative",alignItems:"center",children:[(0,t.jsx)(r.W,{pointerEvents:"none",children:(0,t.jsx)(i.I,{as:a.R,width:4,height:4,color:"fg.neutral.secondary"})}),(0,t.jsx)(C.p,{ref:O,size:"xs",placeholder:l.label??"",value:l.searchQuery??"",tabIndex:0,onChange:z})]})}),g=(0,o.memo)(function(l){return(0,t.jsx)(n.s,{flexDirection:"row",padding:1,children:(0,t.jsx)(u,{label:l.label,searchQuery:l.searchQuery,onSearchQueryChangeRequest:l.onSearchQueryChangeRequest})})})},76726:(F,d,e)=>{e.d(d,{i:()=>k});var t=e(45470),n=e(42172),o=e(25305),i=e(59958),a=e(21410),m=e(69586),r=e(92759),C=e(42971),u=e(37189),g=e(63998),s=e(99453),l=e(40812),x=e(29349),O=e(80315),z=e(76653),I=e(47404),c=e(64592),D=e(53929),P=e.n(D),R=e(15566);const y=(0,g.memo)(function(E){const{onColumnSelectRequest:B,onColumnDeselectRequest:M}=E,[v,p]=(0,g.useState)(null),A=(0,g.useCallback)((V,oe)=>{const U=E.columns.find(Z=>Z.name===V);P()(U),oe?B(U):M(U)},[E.columns,B,M]),j=E.closeOnSelect?x.z:O.B;return(0,t.jsxs)(z.c,{maxHeight:"40vh",display:"flex",flexDirection:"column",maxWidth:256,children:[E.heading&&(0,t.jsx)(I.c,{heading:E.heading,description:E.description}),(0,t.jsx)(R.B,{label:"Search",searchQuery:v,onSearchQueryChangeRequest:p}),E.children,(0,t.jsx)(C.s,{flex:1,flexDirection:"column",overflowY:"auto",paddingTop:1,children:E.columns.map((V,oe)=>{const Z=s.Iq.find(Ce=>Ce.value===(0,i.d3)(V.type))?.icon??null,me=E.selectedColumns.has(V.name);return(!v||V.name.toLowerCase().includes(v.toLowerCase()))&&(0,t.jsx)(j,{icon:Z?(0,t.jsx)(n.I,{as:Z,size:"md"}):void 0,rightAccessory:me?(0,t.jsx)(n.I,{as:l.C,size:"md"}):void 0,isSelected:me,type:"button",onClick:()=>{A?.(V.name,!me)},children:(0,t.jsx)(c.m,{label:V.name,openDelay:1e3,children:(0,t.jsx)(u.E,{as:"span",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:E.columnDisplayNames?.[V.name]??V.name})})},`${V.name}_${oe}`)})})]})}),k=(0,g.memo)(function(E){const B=(0,g.useCallback)(({name:j})=>{E.onColumnsChangeRequest?.(E.selectedColumns.filter(V=>V.name!==j))},[E]),M=(0,g.useCallback)(j=>{const V={name:j.name,type:(0,i.d3)(j.type)};E.onColumnsChangeRequest?.([...E.selectedColumns,V]),E.onColumnSelectRequest?.(V)},[E]),v=(0,g.useMemo)(()=>new Set(E.selectedColumns.map(({name:j})=>j)),[E.selectedColumns]),p=E.selectedColumns[0],A=p?s.Iq.find(j=>j.value===p.type)?.icon:null;return(0,t.jsxs)(a.D,{flex:1,isDisabled:E.isDisabled,children:[(0,t.jsx)(m.T,{flex:1,display:"flex",alignItems:"center",minWidth:0,type:"button",isDisabled:E.isDisabled,children:(0,t.jsxs)(r.a,{flex:1,isDisabled:E.isDisabled,children:[(0,t.jsxs)(C.s,{flex:1,gap:1,minWidth:0,alignItems:"center",children:[E.selectedColumnIcon&&A&&(0,t.jsx)(n.I,{as:A,color:"fg.neutral.secondary",size:"sm"}),(0,t.jsx)(u.E,{color:E.selectedColumns?"fg.neutral.primary":"fg.neutral.secondary",fontSize:"xxs",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:E.selectedColumns.length>0?E.selectedColumns.map(({name:j})=>E.columnDisplayNames?.[j]??j).join(", "):E.placeholder??"Default"})]}),(0,t.jsx)(n.I,{as:o.D,size:"sm",color:"fg.neutral.secondary"})]})}),(0,t.jsx)(y,{closeOnSelect:E.closeOnSelect,columns:E.columns,columnDisplayNames:E.columnDisplayNames,selectedColumns:v,onColumnDeselectRequest:B,onColumnSelectRequest:M,children:E.children??null})]})})},44489:(F,d,e)=>{e.d(d,{R:()=>z});var t=e(45470),n=e(53150),o=e(51881),i=e(11373),a=e(74381),m=e.n(a),r=e(63998),C=e(77638),u=e(19926),g=e(86805),s=e(99453),l=e(85007),x=e(57535),O=e(57008);const z=(0,r.memo)(function(c){const{onNewSelection:D,onChartPopulatedChange:P,renderer:R}=c,y=(0,i.J)(),k=(0,g.YR)(),Q=(0,r.useMemo)(()=>D?m()(D,100,{leading:!0}):null,[D]),E=(0,r.useRef)(null),B=(0,r.useCallback)(p=>{const j=p.data("data_0").length>0;E.current!==j&&(E.current=j,P?.(j))},[P]),M=(0,r.useMemo)(()=>{const p=c.spec.layer?c.spec.layer:[c.spec],A=Q?p.map((V,oe)=>({[(0,l.aC)("size",oe.toString())]:(0,O.hg)("size",Q),[(0,l.aC)("color",oe.toString())]:(0,O.hg)("color",Q)})):[],j=Q?[{interval_selection_tuple:(0,O.c2)(Q)}]:[];return Object.assign({},...A,...j)},[Q,c.spec]);(0,r.useLayoutEffect)(function(){u.eM.expressionFunction("numberFormatFromNumberType")||(u.eM.expressionFunction("numberFormatFromNumberType",(A,j)=>s.aG[j?.type??"default"]?.formatter(A,j?.decimals)),u.eM.scheme("deepnote10",x.UW),u.eM.scheme("deepnote20",x.R0),u.eM.scheme("deepnote_blues",x.eg))},[]);const v=(0,r.useMemo)(()=>{const p=(0,O.hW)(c.visualisationFilter??null,new Date),A=p?(0,O.jb)(c.spec,p):c.spec,j=(0,l.iT)(A);return(0,n.o)(j)},[c.spec,c.visualisationFilter]);return(0,t.jsx)(C.A,{spec:v,renderer:R??(k?"svg":"canvas"),actions:!1,tooltip:{theme:y==="dark"?"dark":"light"},signalListeners:M,style:{height:"100%",width:"100%"},onError:p=>{(0,o.H)(p)},onNewView:B})})},99453:(F,d,e)=>{e.d(d,{Iq:()=>m,MH:()=>a,aG:()=>r});var t=e(634),n=e(51368),o=e(27089),i=e(53590);const a="right",m=[{value:"nominal",label:"Categorical",icon:t.$},{value:"quantitative",label:"Quantitative",icon:n.A},{value:"temporal",label:"Time",icon:o.O}],r={default:{label:"Default",formatter:C=>C?.toString()??null},number:{label:"Number",formatter:(C,u)=>C?(0,i.GP)(`.${u??2}f`)(C):null},scientific:{label:"Scientific",formatter:(C,u)=>C?(0,i.GP)(`.${u??2}e`)(C):null},percent:{label:"Percent",formatter:(C,u)=>C?(0,i.GP)(`.${u??0}%`)(C):null}}},59998:(F,d,e)=>{e.d(d,{B:()=>t});function t(n){return n.kernelStatus!=="notReady"&&n.hardwareStatus==="ready"?"ready":n.hardwareStatus==="stopping"||n.hardwareStatus==="starting"||n.hardwareStatus==="scaling"||n.hardwareStatus==="ready"&&n.kernelStatus==="notReady"?"preparing":"not-ready"}},20850:(F,d,e)=>{e.d(d,{Q:()=>g});var t=e(45470),n=e(42172),o=e(14199),i=e(59958),a=e(52187),m=e(63998),r=e(70935),C=e(63628),u=e(55705);const g=(0,m.memo)(function(l){const x=l.table.$.useStateSlice(D=>D.isDisabled),O=l.column.columnDef.meta?.dataType,z=O?(0,i.d3)(O):null,I=z?r.FS[z]:null,c=I?{operator:I,column:l.column.id,comparativeValues:[]}:void 0;return(0,t.jsx)(u.B,{...l,renderCustomFilterItem:({onCloseRequest:D})=>(0,t.jsx)(C.o,{columns:l.columns,columnDisplayNames:l.columnDisplayNames,filter:c,isDisabled:x,placement:"end-start",shouldRenderInPortal:!1,onSaveRequest:P=>{l.onFilterSaveRequest(P),D()},onColumnValuesRequest:()=>Promise.resolve(null),children:(0,t.jsx)(a.$,{variant:"ghost",colorScheme:"neutral",justifyContent:"flex-start",leftIcon:(0,t.jsx)(n.I,{as:o.F,size:"md"}),iconSpacing:2,fontWeight:"ui.regular",children:"Filter"})})})})},22364:(F,d,e)=>{e.d(d,{Qh:()=>a,WI:()=>m,f9:()=>g,i$:()=>r,j4:()=>i,p4:()=>s,sT:()=>u,t7:()=>C});var t=e(36664),n=e(80132),o=e(33359);const i=l=>(0,o.AH)`
  width: 100%;
  height: auto;
  white-space: pre;
  letter-spacing: 0px;
  color: ${l.colors.fg.neutral.primary};

  .mtk19 {
    font-weight: 500;
  }

  .findOptionsWidget {
    display: none !important;
  }
`,a={fontFamily:t.gx.fontFamily.monospaceFontFamily,fontSize:13,lineHeight:18,lineDecorationsWidth:15},m=5,r=(0,o.AH)({fontFamily:a.fontFamily,fontSize:a.fontSize+"px",lineHeight:a.lineHeight+"px",paddingLeft:a.lineDecorationsWidth+"px",paddingRight:a.lineDecorationsWidth+"px",paddingBottom:m+"px"}),C=(0,o.AH)({overflowX:"hidden"}),u=(0,o.AH)({overflowX:"auto"}),g=(0,o.AH)`
  scrollbar-color: rgba(200, 200, 200, 0.25) rgba(200, 200, 200, 0.07);
  scrollbar-width: thin;

  ::-webkit-scrollbar {
    height: 0.4em;
    width: 0.4em;
    background: rgba(200, 200, 200, 0.07);
  }
  ::-webkit-scrollbar-track {
    border-radius: 3px;
  }
  ::-webkit-scrollbar-thumb {
    border-radius: 3px;
    background-color: rgba(200, 200, 200, 0.25);
  }
`,s=l=>(0,o.AH)`
  /**
   * VS theme adapted to match Monaco editor Deepnote Theme using semantic colors
   */

  code[class*='language-'],
  pre[class*='language-'] {
    color: ${l==="light"?n.BZ.fg.neutral.primary:n.Lh.fg.neutral.primary};
    font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;
    direction: ltr;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    font-size: 0.9em;
    line-height: 1.2em;
    background-color: ${l==="light"?n.BZ.bg.neutral.secondary:n.Lh.bg.neutral.secondary};

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  pre > code[class*='language-'] {
    font-size: 1em;
  }

  /* Selection Background */
  pre[class*='language-']::selection,
  pre[class*='language-'] ::selection,
  code[class*='language-']::selection,
  code[class*='language-'] ::selection {
    background: ${l==="light"?n.BZ.effects.focusRing.accentOne:n.Lh.effects.focusRing.accentOne};
  }

  /* Code blocks */
  pre[class*='language-'] {
    padding: 1em;
    margin: 0.5em 0;
    overflow: auto;
    border: 1px solid
      ${l==="light"?n.BZ.border.neutral.primary:n.Lh.border.neutral.primary};
    background-color: ${l==="light"?n.BZ.bg.neutral.secondary:n.Lh.bg.neutral.secondary};
  }

  /* Inline code */
  :not(pre) > code[class*='language-'] {
    padding: 0.2em;
    padding-top: 1px;
    padding-bottom: 1px;
    background: ${l==="light"?n.BZ.bg.neutral.primaryHover:n.Lh.bg.neutral.primaryHover};
    border: 1px solid
      ${l==="light"?n.BZ.border.neutral.secondary:n.Lh.border.neutral.secondary};
  }

  /* Comments */
  .hljs-comment {
    color: ${l==="light"?n.BZ.custom.codeEditor.comment:n.Lh.custom.codeEditor.comment};
    font-style: italic;
  }

  /* Strings */
  .hljs-string {
    color: ${l==="light"?n.BZ.custom.codeEditor.string:n.Lh.custom.codeEditor.string};
  }

  /* Punctuation and operators */
  .hljs-punctuation,
  .hljs-operator {
    background: transparent;
    color: ${l==="light"?n.BZ.fg.neutral.primary:n.Lh.fg.neutral.primary};
  }

  /* Numbers, booleans, variables */
  .hljs-number,
  .hljs-literal,
  .hljs-variable {
    color: ${l==="light"?n.BZ.custom.codeEditor.numeric:n.Lh.custom.codeEditor.numeric};
  }

  /* Keywords and built-ins */
  .hljs-keyword,
  .hljs-built_in {
    color: ${l==="light"?n.BZ.custom.codeEditor.keyword:n.Lh.custom.codeEditor.keyword};
  }

  /* Functions */
  .hljs-function,
  .hljs-title {
    color: ${l==="light"?n.BZ.custom.codeEditor.function:n.Lh.custom.codeEditor.function};
  }

  /* Deleted and tags */
  .hljs-deletion,
  .language-autohotkey .hljs-tag {
    color: ${l==="light"?n.BZ.custom.codeEditor.storage:n.Lh.custom.codeEditor.storage};
  }

  /* Selectors and important items */
  .hljs-selector,
  .hljs-meta {
    color: ${l==="light"?n.BZ.custom.codeEditor.classVariant:n.Lh.custom.codeEditor.classVariant};
  }

  /* Classes and types */
  .hljs-class,
  .language-json .hljs-property {
    color: ${l==="light"?n.BZ.custom.codeEditor.typeClassName:n.Lh.custom.codeEditor.typeClassName};
  }

  /* Tags and selectors */
  .hljs-tag,
  .hljs-selector {
    color: ${l==="light"?n.BZ.custom.codeEditor.module:n.Lh.custom.codeEditor.module};
  }

  /* Attribute names, properties, regex, entities */
  .hljs-attr,
  .hljs-property,
  .hljs-regexp,
  .hljs-entity {
    color: ${l==="light"?n.BZ.custom.codeEditor.typeUserDefined:n.Lh.custom.codeEditor.typeUserDefined};
  }

  /* Directive tags */
  .hljs-meta .hljs-tag {
    background: ${l==="light"?n.BZ.bg.accentOne.primary:n.Lh.bg.accentOne.primary};
    color: ${l==="light"?n.BZ.fg.neutral.primary:n.Lh.fg.neutral.primary};
  }

  /* Line Numbers Plugin Overrides */
  .line-numbers .line-numbers-rows {
    border-right-color: ${l==="light"?n.BZ.border.neutral.primary:n.Lh.border.neutral.primary};
  }

  .line-numbers-rows > span:before {
    color: ${l==="light"?n.BZ.custom.codeEditor.numeric:n.Lh.custom.codeEditor.numeric};
  }

  /* Line Highlight Plugin Overrides */
  .line-highlight {
    background: ${l==="light"?n.BZ.bg.neutral.primaryHover:n.Lh.bg.neutral.primaryActive};
    background: -webkit-linear-gradient(
      left,
      ${l==="light"?n.BZ.bg.neutral.primaryHover:n.Lh.bg.neutral.primaryActive}
        70%,
      rgba(221, 222, 241, 0)
    );
    background: linear-gradient(
      to right,
      ${l==="light"?n.BZ.bg.neutral.primaryHover:n.Lh.bg.neutral.primaryActive}
        70%,
      rgba(221, 222, 241, 0)
    );
  }

  .hljs-keyword {
    font-weight: 500;
  }
`},45806:(F,d,e)=>{e.d(d,{k:()=>Re});var t=e(45470),n=e(60022),o=e(83222),i=e(31976),a=e(51881),m=e(75595),r=e(56416),C=e(2984),u=e(33243),g=e(69446),s=e(63998),l=e(59332),x=e(66379),O=e(36664),z=e(16927),I=e(70935),c=e(34881),D=e(28756),P=e(15690),R=e(92504),y=e(20485),k=e(47628),Q=e(59958),E=e(32912),B=e(37189),M=e(45302),v=e(33754),p=e(25956),A=e(48286),j=e(42172),V=e(57836),oe=e(93034),U=e(64592),Z=e(52187),me=e(12881),Ce=e(4138),Me=e(99920),ae=e(19550),ke=e(91340),ze=e(73126),ye=e(52889),Ke=e(67483),Ve=e(38320),be=e(7633),le=e(42971),je=e(7536),Qe=e(44366),ce=e(78146),ee=e(29828),h=e.n(ee),$=e(83883),X=e(25305),fe=e(40812),te=e(54507);const Le=(0,te.w)({displayName:"DnBlankCustomIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none"})});var ue=e(3054),Ee=e(21286),ve=e(10841),Je=e(86806),He=e(63377),st=e(37339),ct=e(14821),et=e(31576),qe=e(74111),dt=e(76653),rt=e(79121),vt=e(90933),Ze=e(21305),Fe=e(71878),ht=e(79381),ut=e(49997);const se=(0,te.w)({displayName:"SquareLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M3 7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});var w=e(53429),re=e(21582),xe=e(75019),Ye=e(81443),nt=e(95417);function ft(){const[L,b]=(0,s.useState)(!1),[G,q]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const Ae=()=>q(!0),Be=()=>q(!1);return document.addEventListener("keydown",Ae),document.addEventListener("mousedown",Be),()=>{document.removeEventListener("keydown",Ae),document.removeEventListener("mousedown",Be)}},[]);const J=(0,s.useCallback)(()=>{G&&b(!0)},[G]),ne=(0,s.useCallback)(()=>{b(!1)},[]);return{isKeyboardFocused:L,focusEventHandlers:{onFocus:J,onBlur:ne}}}function mt({columnName:L,columnDisplayName:b,isSelected:G,onColumnNameButtonClick:q,onOnlyButtonClick:J}){const{shouldShowHoverableContent:ne,hoverEventHandlers:Ae}=(0,nt.M)(),{isKeyboardFocused:Be,focusEventHandlers:_e}=ft(),he=ne||Be?{opacity:1,pointerEvents:"auto"}:{opacity:0,pointerEvents:"none"},Pe=(0,s.useCallback)(()=>{q(L)},[L,q]);return(0,t.jsxs)(le.s,{...Ae,..._e,children:[(0,t.jsx)(Z.$,{flex:"auto",leftIcon:(0,t.jsx)(j.I,{as:G?ut.h:se}),variant:"ghost",colorScheme:"neutral",justifyContent:"flex-start",iconSpacing:2,fontWeight:"ui.regular",onClick:Pe,children:b}),(0,t.jsx)(Z.$,{...he,variant:"ghost",colorScheme:"neutral",fontWeight:"ui.regular",onClick:J,children:"Only"})]})}function Ct({columnNames:L,columnDisplayNames:b,selectedColumnNames:G,triggerButtonRef:q,onColumnSelectionUpdateRequest:J}){const ne=L.every(he=>G.includes(he)),Ae=G.length===0,Be=(0,s.useCallback)(he=>{G.includes(he)?J({columnSelectionMode:"only",selectedColumnNames:G.filter(Pe=>Pe!==he)}):J({columnSelectionMode:"only",selectedColumnNames:[...G,he]})},[J,G]),_e=(0,s.useCallback)(()=>{J(ne?{columnSelectionMode:"only",selectedColumnNames:[]}:{columnSelectionMode:"all",selectedColumnNames:L})},[ne,L,J]),Ne=(0,s.useCallback)(he=>{J({columnSelectionMode:"only",selectedColumnNames:[he]})},[J]);return(0,t.jsxs)(ht.A,{isLazy:!0,placement:"bottom-start",gutter:4,children:[(0,t.jsx)(w.W,{children:(0,t.jsx)(Z.$,{ref:q,variant:"outline",colorScheme:"neutral",size:"xs",rightIcon:(0,t.jsx)(j.I,{as:X.D}),color:Ae?"fg.neutral.secondary":"fg.neutral.primary",whiteSpace:"normal",paddingY:"3px",height:"auto",textAlign:"start",children:ne?"All columns":Ae?"Select columns":G.map(he=>b?.[he]??he).join(", ")})}),(0,t.jsx)(qe.Z,{children:(0,t.jsx)(re.h,{minWidth:"200px",maxHeight:"50vh",children:(0,t.jsxs)(Ye.Ay,{returnFocus:!0,persistentFocus:!1,lockProps:{style:{minHeight:"0",display:"flex",flexDirection:"column",overflowY:"auto"}},children:[(0,t.jsx)(xe.r,{variant:"menuSection",children:(0,t.jsx)(Z.$,{variant:"ghost",colorScheme:"neutral",justifyContent:"flex-start",iconSpacing:2,fontWeight:"ui.regular",leftIcon:(0,t.jsx)(j.I,{as:ne?ut.h:se}),onClick:_e,children:"All columns"})}),(0,t.jsx)(r.c,{}),(0,t.jsx)(xe.r,{variant:"menuSection",gap:1,children:L.map(he=>(0,t.jsx)(mt,{isSelected:G.includes(he),columnName:he,columnDisplayName:b?.[he]??he,onColumnNameButtonClick:Be,onOnlyButtonClick:()=>Ne(he)},`column-select-item-${he}`))})]})})})]})}var St=e(25625),xt=e(38038),It=e(72947);function zt(L,b={}){const{direction:G="to right",hasDivider:q=!1,dividerWidth:J=1}=b;if(L.length===0)return"";const ne=100/L.length,Ae=L.map((_e,Ne)=>{const he=(Ne*ne).toFixed(2),Pe=((Ne+1)*ne).toFixed(2);return`${_e} ${he}% ${Pe}%`}).join(", "),Be=`linear-gradient(${G}, ${Ae})`;if(q){const _e=L.slice(1).map((he,Pe)=>{const We=(Pe+1)*ne,gt=`${We}%`,lt=`calc(${We}% + ${J}px)`,Mt=(0,It.A)(he).darken();return`transparent ${gt}, ${Mt} ${gt} ${lt}, transparent ${lt}`}).join(", ");return`${`linear-gradient(${G}, transparent 0%, ${_e}, transparent 100%)`}, ${Be}`}return Be}var Dt=e(47472),Ft=e.n(Dt),bt=e(35811);const Ht=(0,s.memo)(function({value:b}){const G=(0,bt.sB)(b),q=[G.min,G.mid,G.max].filter(Boolean),J=(0,St.rd)("colors",q),Be=It.A.scale(J).colors(5);return(0,t.jsxs)(le.s,{alignItems:"center",gap:2,children:[(0,t.jsx)(le.s,{"aria-label":`Formatting color scale: ${Ft()(b)}`,borderColor:"border.neutral.primary",justifyContent:"center",borderRadius:"xs",borderWidth:"1px",textStyle:"ui.xs.regular",width:"125px",backgroundImage:zt(Be,{hasDivider:!0}),children:"123"}),(0,xt.zX)(b)]})});var $t=e(14809);function kt({ItemComponent:L,value:b,options:G,menuButtonProps:q={},isDisabled:J=!1,onChangeRequest:ne}){return(0,t.jsxs)(ct.W,{children:[(0,t.jsx)(et.I,{as:Z.$,variant:"outline",colorScheme:"neutral",size:"xs",rightIcon:(0,t.jsx)(j.I,{as:X.D}),isDisabled:J,...q,children:(0,t.jsx)(L,{value:b})}),(0,t.jsx)(qe.Z,{children:(0,t.jsx)(dt.c,{minWidth:"0",maxHeight:"45vh",overflowY:"auto",children:(0,t.jsx)(rt.i,{value:b,children:G.map(Ae=>(0,t.jsx)($t.k,{value:Ae,onClick:()=>ne(Ae),icon:(0,t.jsx)(j.I,{as:fe.C,size:"md"}),isDisabled:J,children:(0,t.jsx)(L,{value:Ae})},Ae))})})})]})}const Ut=(0,s.memo)(function({value:b}){return(0,t.jsxs)(le.s,{alignItems:"center",gap:2,children:[(0,t.jsx)(le.s,{"aria-label":`Formatting style: ${Ft()(b)}`,borderColor:"border.neutral.primary",justifyContent:"center",width:10,paddingX:1,borderRadius:"xs",borderWidth:"1px",fontSize:"ui.xs",fontWeight:"ui.regular",...(0,bt.WZ)(b),children:"123"}),(0,xt.zX)(b)]})}),Nt=0,jt=1;function Vt({ruleDraft:L,index:b,columnNames:G,columnDisplayNames:q,columnSelectTriggerButtonRef:J,onUpdateRequest:ne,onDeleteRequest:Ae}){const Be=(0,s.useCallback)(()=>{Ae(b)},[b,Ae]),_e=(0,s.useCallback)(Ge=>{Ge===Nt&&L.type!=="singleColor"&&ne(b,{...L,type:"singleColor"}),Ge===jt&&L.type!=="colorScale"&&ne(b,{...L,type:"colorScale"})},[b,ne,L]),Ne=(0,s.useCallback)(({columnSelectionMode:Ge,selectedColumnNames:at})=>{ne(b,{...L,ruleSingleColor:{...L.ruleSingleColor,columnSelectionMode:Ge,columnNames:at},ruleColorScale:{...L.ruleColorScale,columnSelectionMode:Ge,columnNames:at}})},[b,ne,L]),he=(0,s.useCallback)(Ge=>{const at=p.qp[(0,p.Sn)(L.ruleSingleColor.operator)],Et=p.qp[(0,p.Sn)(Ge)],pt=at!=="temporal"&&Et==="temporal"?[]:at!=="quantitative"&&Et==="quantitative"?[]:L.ruleSingleColor.comparativeValues;ne(b,{...L,ruleSingleColor:{...L.ruleSingleColor,operator:Ge,comparativeValues:pt}})},[b,ne,L]),Pe=(0,s.useCallback)(Ge=>{ne(b,{...L,ruleSingleColor:{...L.ruleSingleColor,comparativeValues:Ge}})},[b,ne,L]),We=(0,s.useCallback)(Ge=>{ne(b,{...L,ruleSingleColor:{...L.ruleSingleColor,styleName:Ge}})},[b,ne,L]),gt=(0,s.useCallback)(Ge=>{ne(b,{...L,ruleColorScale:{...L.ruleColorScale,scaleName:Ge}})},[b,ne,L]),lt=L.ruleSingleColor.columnSelectionMode==="only"&&L.ruleSingleColor.columnNames?.length===0,Mt=p.qp[(0,p.Sn)(L.ruleSingleColor.operator)];return(0,t.jsx)(le.s,{flexDirection:"column",borderRadius:"sm",backgroundColor:"bg.neutral.primary",children:(0,t.jsxs)(Ee.t,{index:L.type==="singleColor"?Nt:jt,onChange:_e,children:[(0,t.jsxs)(ve.w,{paddingX:2,justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(le.s,{children:[(0,t.jsx)(Je.o,{children:"Single color"}),(0,t.jsx)(Je.o,{children:"Color scale"})]}),(0,t.jsx)(je.K,{"aria-label":"Delete rule",variant:"ghost",colorScheme:"neutral",size:"xs",icon:(0,t.jsx)(j.I,{as:$.V}),onClick:Be})]}),(0,t.jsxs)(He.T,{children:[(0,t.jsx)(st.K,{paddingBottom:6,children:(0,t.jsxs)(le.s,{flexDirection:"column",alignItems:"flex-start",gap:4,children:[(0,t.jsxs)(le.s,{flexDirection:"column",alignItems:"flex-start",gap:2,children:[(0,t.jsx)(B.E,{textStyle:"ui.sm.semibold",children:"Apply to columns"}),(0,t.jsx)(Ct,{columnNames:G,columnDisplayNames:q,selectedColumnNames:L.ruleSingleColor.columnNames??[],triggerButtonRef:J,onColumnSelectionUpdateRequest:Ne})]}),(0,t.jsxs)(le.s,{flexDirection:"column",alignItems:"flex-start",gap:2,children:[(0,t.jsx)(B.E,{textStyle:"ui.sm.semibold",children:"Formatting rules"}),(0,t.jsx)(B.E,{textStyle:"ui.xs.regular",children:"Format cell if:"}),(0,t.jsxs)(ct.W,{isLazy:!0,children:[(0,t.jsx)(et.I,{as:Z.$,variant:"outline",colorScheme:"neutral",size:"xs",rightIcon:(0,t.jsx)(j.I,{as:X.D}),isDisabled:lt,children:p.rh[L.ruleSingleColor.operator]}),(0,t.jsx)(qe.Z,{children:(0,t.jsx)(dt.c,{minWidth:"0",maxHeight:"45vh",overflowY:"auto",children:(0,t.jsx)(rt.i,{value:L.ruleSingleColor.operator,children:p.CE.map(Ge=>(0,t.jsx)(vt.r,{title:Ge.groupName,children:Ge.operators.map(at=>(0,t.jsx)(Ze.D,{onClick:()=>he(at),icon:(0,t.jsx)(j.I,{as:at===L.ruleSingleColor.operator?fe.C:Le,size:"md"}),isDisabled:lt,children:p.rh[at]},at))},Ge.groupName))})})})]}),(0,t.jsx)(le.s,{flexDirection:"column",alignSelf:"stretch",minWidth:"200px",children:(0,t.jsx)(Fe.b,{columnEncoding:Mt,operator:L.ruleSingleColor.operator,comparativeValues:L.ruleSingleColor.comparativeValues,isDisabled:lt,shouldRenderInPortal:!0,onComparativeValuesUpdateRequest:Pe})})]}),(0,t.jsxs)(le.s,{flexDirection:"column",alignItems:"flex-start",gap:2,children:[(0,t.jsx)(B.E,{textStyle:"ui.sm.semibold",children:"Formatting style"}),(0,t.jsx)(kt,{ItemComponent:Ut,value:L.ruleSingleColor.styleName,options:ue.F1.filter(Ge=>Ge!=="default"),menuButtonProps:{paddingStart:"3px"},isDisabled:lt,onChangeRequest:We})]})]})}),(0,t.jsx)(st.K,{paddingBottom:6,children:(0,t.jsxs)(le.s,{flexDirection:"column",alignItems:"flex-start",gap:4,children:[(0,t.jsxs)(le.s,{flexDirection:"column",alignItems:"flex-start",gap:2,children:[(0,t.jsx)(B.E,{textStyle:"ui.sm.semibold",children:"Apply to columns"}),(0,t.jsx)(Ct,{columnNames:G,columnDisplayNames:q,selectedColumnNames:L.ruleColorScale.columnNames??[],onColumnSelectionUpdateRequest:Ne})]}),(0,t.jsxs)(le.s,{flexDirection:"column",alignItems:"flex-start",gap:2,children:[(0,t.jsx)(B.E,{textStyle:"ui.sm.semibold",children:"Scale colors"}),(0,t.jsx)(kt,{ItemComponent:Ht,value:L.ruleColorScale.scaleName,options:ue.Sv,menuButtonProps:{paddingStart:"3px"},isDisabled:lt,onChangeRequest:gt})]})]})})]})]})})}const _t=(0,s.memo)(function({columnNames:b,columnDisplayNames:G,formatRules:q,onSaveRulesRequest:J,onFormattingModalCloseRequest:ne}){const{isOpen:Ae,onOpen:Be,onClose:_e}=(0,A.j)({defaultIsOpen:!1}),Ne=(0,s.useRef)(null),he=(0,s.useMemo)(()=>!q||q.length===0?[(0,p.wn)(b)]:q.map(pe=>(0,p.rq)(pe,b)),[b,q]),[Pe,We]=(0,s.useState)(he),gt=(0,s.useMemo)(()=>!h()(Pe,he),[he,Pe]),lt=Pe.some(pe=>pe.type==="colorScale"?pe.ruleColorScale.columnSelectionMode==="only"&&pe.ruleColorScale.columnNames?.length===0:pe.type==="singleColor"?pe.ruleSingleColor.columnSelectionMode==="only"&&pe.ruleSingleColor.columnNames?.length===0:((0,ae.d)(pe.type),!0)),Mt=(0,s.useCallback)(()=>{We(pe=>[...pe,(0,p.wn)(b)])},[b]),Ge=(0,s.useCallback)((pe,Te)=>{We(yt=>yt.map((it,Tt)=>Tt===pe?Te:it))},[]),at=(0,s.useCallback)((pe,Te)=>{const yt=Te==="before"?-1:1;We(it=>{const Tt=pe+yt,Rt=it[pe],Kt=it[Tt];if(!Rt||!Kt)return it;const Bt=[...it];return Bt[pe]=Kt,Bt[Tt]=Rt,Bt})},[]),Et=(0,s.useCallback)(pe=>{pe<=0||pe>=Pe.length||at(pe,"before")},[at,Pe.length]),Lt=(0,s.useCallback)(pe=>{pe>=Pe.length-1||pe<0||at(pe,"after")},[at,Pe.length]),At=(0,s.useCallback)(()=>{_e(),setTimeout(()=>{ne(),We(he)},50)},[he,ne,_e]),pt=(0,s.useCallback)(pe=>{We(Te=>Te.filter((yt,it)=>it!==pe))},[]),Pt=(0,s.useCallback)(()=>{if(gt){Be();return}ne()},[gt,Be,ne]),en=(0,s.useCallback)(()=>{const pe=Pe.map(p.$8);ne(),!h()(pe,q)&&J(pe)},[q,ne,J,Pe]);return(0,t.jsxs)(ke.a,{isCentered:!0,isOpen:!0,closeOnOverlayClick:!gt,closeOnEsc:!gt,scrollBehavior:"inside",size:"lg",initialFocusRef:Ne,onClose:ne,onEsc:Pt,children:[(0,t.jsx)(ze.m,{}),(0,t.jsxs)(ye.$,{height:"85vh",maxHeight:"1000px",children:[(0,t.jsx)(Ke.r,{textStyle:"ui.md.semibold",children:"Edit table cell formatting rules"}),(0,t.jsx)(Ve.c,{paddingLeft:1,paddingRight:8,paddingTop:4,backgroundColor:"bg.neutral.secondary",children:(0,t.jsxs)(be.x,{gridTemplateColumns:"auto 1fr",rowGap:3,columnGap:1,children:[Pe.map((pe,Te)=>(0,t.jsxs)(s.Fragment,{children:[(0,t.jsxs)(le.s,{flexDirection:"column",paddingTop:1,children:[(0,t.jsx)(U.m,{label:"Move rule up",children:(0,t.jsx)(je.K,{"aria-label":"Move rule up",isDisabled:Te===0,variant:"ghostIcon",colorScheme:"neutral",size:"xs",icon:(0,t.jsx)(j.I,{as:me.z}),onClick:()=>Et(Te)})}),(0,t.jsx)(U.m,{label:"Move rule down",children:(0,t.jsx)(je.K,{"aria-label":"Move rule down",isDisabled:Te===Pe.length-1,variant:"ghost",colorScheme:"neutral",size:"xs",icon:(0,t.jsx)(j.I,{as:Ce.W}),onClick:()=>Lt(Te)})})]}),(0,t.jsx)(Vt,{ruleDraft:pe,index:Te,columnNames:b,columnDisplayNames:G,columnSelectTriggerButtonRef:Ne,onUpdateRequest:Ge,onDeleteRequest:pt})]},`rule-draft-list-item-${Te}`)),(0,t.jsx)(Z.$,{gridColumn:"2 / -1",maxWidth:"max-content",alignSelf:"flex-start",variant:"outline",colorScheme:"neutral",size:"xs",leftIcon:(0,t.jsx)(j.I,{as:Me.Q}),onClick:Mt,children:"Add rule"}),(0,t.jsx)(B.E,{textStyle:"ui.xs.regular",color:"fg.neutral.secondary",gridColumn:"2 / -1",children:"Cells will be formatted according to the last matching rule in the list."})]})}),(0,t.jsxs)(Qe.j,{children:[(0,t.jsx)(Z.$,{variant:"ghost",colorScheme:"neutral",onClick:Pt,children:"Cancel"}),Ae&&(0,t.jsx)(ce.u,{isOpen:!0,onClose:ne,onEsc:_e,onKeepEditingRequest:_e,onDiscardChangesRequest:At}),(0,t.jsx)(Z.$,{onClick:en,isDisabled:lt,children:"Done"})]})]})]})});function wt({columnNames:L,columnDisplayNames:b,formatRules:G,isDisabled:q=!1,onSaveRulesRequest:J}){const{isOpen:ne,onOpen:Ae,onClose:Be}=(0,A.j)({defaultIsOpen:!1});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.m,{shouldWrapChildren:!0,label:oe.j,isDisabled:!q,children:(0,t.jsx)(Z.$,{variant:"ghost",colorScheme:"neutral",onClick:Ae,size:"xs",leftIcon:(0,t.jsx)(j.I,{as:V.R}),isDisabled:q,children:"Format"})}),ne&&(0,t.jsx)(_t,{columnNames:L,columnDisplayNames:b,formatRules:G,onSaveRulesRequest:J,onFormattingModalCloseRequest:Be})]})}var Gt=e(6319),Qt=e(81550),Zt=e(29740),Yt=e(58451),Xt=e(10822),Jt=e(91704),qt=e(59998),f=e(20850),S=e(45405),H=e(51004);const W=(0,s.memo)(function(b){const G=(0,v.gf)(),{projectTrack:q}=(0,z.t4)(),J=(0,H.e)({cellExecutionCount:b.cellExecutionCount,blockExecutionContextId:b.blockExecutionContextId}),ne=(0,Yt.c)(k.zd.EXECUTE_CELL),[Ae,Be]=(0,s.useState)(!1),_e=(0,s.useCallback)(async()=>{Be(!0);try{const Te=await G.notebookApi.exportDataframe(b.cellId);return Te?((0,Jt.P)(G.fileApi.getDownloadLink(Te)),await E.i.success({message:"The .csv download will begin shortly. You can find the file saved in your project filesystem."})):void 0}catch(Te){if(Te instanceof Xt._){E.i.error({message:(0,t.jsxs)(B.E,{children:["Could not export the DataFrame into a .csv file.",Te.isUsingDisplay?(0,t.jsxs)(t.Fragment,{children:[" ","Note that data frames must not be presented via"," ",(0,t.jsx)(B.E,{as:"code",fontSize:"xs",fontWeight:"semibold",children:"display()"})," ","to be exportable."]}):null]})});return}(0,a.H)(Te),E.i.error({message:"Could not export the DataFrame into a .csv file"})}finally{Be(!1)}},[G,b.cellId]),Ne=(0,Zt.f)(b.data.columns),he=(0,s.useRef)(Ne);(0,s.useEffect)(()=>{he.current=Ne},[Ne]);const Pe=(0,s.useCallback)(async(Te,yt=!0)=>{const it=(0,I.vQ)(Te,he.current);b.selectedNotebookFunctionExportName?await G.notebookApi.editNotebookFunctionCellImportTableState(b.notebookId,b.cellId,b.selectedNotebookFunctionExportName,it,yt):await G.notebookApi.editCellTableState(b.notebookId,b.cellId,it,yt)},[b.notebookId,b.cellId,b.selectedNotebookFunctionExportName,G.notebookApi]),We=b.tableState??x.dq,gt=We.conditionalFilters??[],{hardwareStatus:lt,kernelStatus:Mt}=(0,Qt.p)(),at=(0,qt.B)({hardwareStatus:lt,kernelStatus:Mt})!=="ready",Et=(0,s.useMemo)(()=>(0,S.$)(Ne),[Ne]),Lt=(0,s.useCallback)(Te=>{Pe({...We,conditionalFilters:[...We.conditionalFilters??[],Te]}),q.track("DataFrame filter added",{workspaceId:b.workspaceId,blockId:b.cellId,operator:Te.operator,source:"data-table-column-header",mode:"notebook"})},[q,b.cellId,b.workspaceId,Pe,We]),At=(0,s.useCallback)(Te=>{const yt=(0,p.oe)(Et.map(Ot=>Ot.name),We.cellFormattingRules),it=(0,p.oe)(Et.map(Ot=>Ot.name),Te),Tt=it.some(Ot=>!yt.includes(Ot))&&it.some(Ot=>{const Wt=Ne.find(an=>an.name===Ot);if(!Wt)return!1;const nn=Wt?.dtype?(0,Q.d3)(Wt.dtype):null;return nn!=="quantitative"&&nn!=="temporal"?!1:!Wt.stats?.min||!Wt.stats?.max});Pe({...We,cellFormattingRules:Te},Tt);const Rt=We.cellFormattingRules??[],Kt=Rt.length===0&&Te.length>0,Bt=Rt.length>0&&Te.length>0,on=Rt.length>0&&Te.length===0,tn=Kt?"Data table cell format rules first added":Bt?"Data table cell format rules updated":on?"Data table cell format rules deleted":null;tn&&q.track(tn,{blockId:b.cellId,rulesCount:Te.length,ruleTypes:Te.map(Ot=>Ot.type)})},[Et,q,b.cellId,Ne,Pe,We]),pt=(0,s.useMemo)(()=>Et.map(Te=>Te.name),[Et]),Pt=(0,s.useMemo)(()=>(0,y.iK)(We.columnDisplayNames),[We.columnDisplayNames]),en=(0,s.useMemo)(()=>(0,M.p)(f.Q,{columns:Et,columnDisplayNames:Pt,onFilterSaveRequest:Lt}),[Et,Pt,Lt]),pe=(0,s.useMemo)(()=>(0,t.jsx)(wt,{columnNames:pt,columnDisplayNames:Pt,formatRules:We.cellFormattingRules,isDisabled:J,onSaveRulesRequest:At}),[pt,Pt,We.cellFormattingRules,J,At]);return(0,t.jsxs)(m.T,{alignItems:"stretch",spacing:0,divider:(0,t.jsx)(r.c,{}),fontFamily:O.gx.fontFamily.primaryFontFamily,children:[gt.length>0&&(0,t.jsx)(Gt.L,{workspaceId:b.workspaceId,blockId:b.cellId,columnDescriptions:Ne,tableState:We,isMachineOffline:at,isDisabled:J,mode:"notebook",onTableStateUpdateRequest:Pe}),(0,t.jsx)(D.b,{...b.tableProps,isDisabled:J,isLoading:b.isLoading||Ae,sharedState:We,onSharedStateUpdateRequest:Pe,onExportRequest:_e,displayNavigationRow:ne,cellFormattingButton:pe,columnHeader:en})]})}),T=(0,s.lazy)(()=>Promise.all([e.e(8217),e.e(4321)]).then(e.bind(e,44321))),N=(0,s.memo)(function(b){const{columns:G,rows:q}=b.data,{normalizedColumns:J,repairedRows:ne}=(0,s.useMemo)(()=>{const gt=(0,y.h6)(q),[lt,Mt]=(0,R.$)(G,gt);return{normalizedColumns:(0,P.H)(lt),repairedRows:Mt}},[q,G]),[Ae,Be]=(0,H.n)([b.cellDisplayMode,b.cellId]),{projectTrack:_e}=(0,z.t4)(),Ne=(0,S.$)(G),he=(0,I.vQ)(b.tableState??x.dq,G),Pe=(0,s.useMemo)(()=>(0,y.iK)(he.columnDisplayNames),[he.columnDisplayNames]),We={columns:J,columnCount:b.data.column_count,rows:ne,totalRows:b.data.row_count,isStatic:b.isStatic,sharedState:he,localState:Ae,onLocalStateUpdateRequest:Be,onTrackRequest:_e?.track};return b.isStatic?(0,t.jsxs)(m.T,{alignItems:"stretch",spacing:0,divider:(0,t.jsx)(r.c,{}),fontFamily:O.gx.fontFamily.primaryFontFamily,children:[he.conditionalFilters?.length!==0&&(0,t.jsx)(c._,{filters:he.conditionalFilters??[],columns:Ne,columnDisplayNames:Pe,isMachineOffline:!1,mode:"readonly"}),(0,t.jsx)(D.b,{...We})]}):b.cellDisplayMode==="app"?(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(t.Fragment,{}),children:(0,t.jsx)(T,{...b,tableProps:We})}):(0,t.jsx)(W,{...b,tableProps:We,cellExecutionCount:b.cellExecutionCount})});var _=e(81723),K=e(40177),Y=e(85007),de=e(44489),ie=e(51089);const Se=(0,s.memo)(function(){const{projectTrack:b}=(0,z.t4)();return(0,s.useEffect)(()=>{b.track("Ipywidget output displayed")},[]),null});var ge=e(11565),Ie=e(92231),Xe=e(45119),$e=e(33359),we=e(90811),Ue=e.n(we),tt=e(18320);const ot=L=>(0,$e.AH)`
  font-family: ${O.gx.fontFamily.monospaceFontFamily};
  font-size: 12px;
  margin: 0;
  color: ${L.colors.fg.neutral.primary};
  line-height: 1.6;
  padding: 12px 14px;

  .output {
    overflow: auto;
  }
  .output * {
    overflow-anchor: none;
    -webkit-font-smoothing: auto;
  }
  .output_raw {
    white-space: pre;
  }
  .output::-webkit-scrollbar {
    height: 0.4em;
    width: 0.4em;
  }
  .output::-webkit-scrollbar-thumb {
    background: #828282;
    border-radius: 10px;
  }
  .output::-webkit-scrollbar-track {
    border-radius: 10px;
    background: #f6f6f6;
  }
  .output_anchor {
    overflow-anchor: auto;
    height: 1px;
  }
  div {
    white-space: normal;
  }
  pre {
    margin: 0;
    overflow: visible;
  }
  pre,
  pre code,
  table {
    font-family: inherit;
  }
  table {
    background: #fff;
    border: 1px solid #dfe5eb;
    border-radius: 5px;
    opacity: 0.8;
    font-size: 12px;
    color: #171616;
    line-height: 18px;
    text-align: left;
  }
  table tr {
    border: 1px solid #dfe5eb;
  }
  table tr:nth-of-type(2n) {
    background: #f4f6f8;
  }
  table td,
  table th {
    padding: 5px 5px 5px 25px;
    border: 0;
    overflow: hidden;
    text-align: left;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  img {
    max-width: 100%;
  }
`,De=({heightLimitDisabled:L,source:b})=>{const G=(0,s.useRef)(null),q=(0,s.useRef)(null),J=(0,s.useRef)(0),ne=(0,Ie.DP)();return(0,s.useEffect)(()=>{const Ae=J.current??0,Be=q.current?.clientHeight??0,_e=G.current?.clientHeight??0;Ae<=_e&&Be>=_e&&G.current?.scrollBy(0,G.current.scrollHeight),J.current=Be},[b]),(0,t.jsx)(Xe.B.div,{css:ot(ne),maxHeight:L?"none":"610px",overflowY:"auto",background:"bg.neutral.primary",children:(0,t.jsxs)("div",{className:"output",ref:G,children:[(0,t.jsx)("div",{className:"output_raw",ref:q,dangerouslySetInnerHTML:{__html:(0,tt.A)((0,t.jsx)(Ue(),{linkify:!1,children:b}))}}),(0,t.jsx)("div",{className:"output_anchor"})]})})},Oe=(0,s.memo)(De),Re=(0,s.memo)(function(b){const{output:G,outputIndex:q,...J}=b;if(u.rL(G)){const ne=(0,n.XO)(G.text,`
`);return G.name,(0,t.jsx)(Oe,{source:ne,heightLimitDisabled:J.heightLimitDisabled})}if(u.bJ(G))return(0,t.jsx)(ie.o,{errorOutput:G,workspaceId:J.workspaceId,blockId:J.cellId,block:b.element,outputIndex:q,cellDisplayMode:J.cellDisplayMode});if((0,o.wC)(G)){const{"application/vnd.jupyter.widget-view+json":ne,...Ae}=G.data;if(ne!==void 0)return(0,t.jsxs)(m.T,{spacing:0,divider:(0,t.jsx)(r.c,{borderColor:"border.neutral.primary"}),alignItems:"stretch",children:[(0,t.jsx)(Se,{}),(0,t.jsx)(ge.A,{data:Ae,metadata:G.metadata,cellId:J.cellId,outputIndex:q,shouldScroll:!0,cellDisplayMode:J.cellDisplayMode,heightLimitDisabled:J.heightLimitDisabled})]});if(G.data[i.St]){const _e=G.data[i.St],Ne=_e.error;if(Ne)return(0,g.v4)(Pe=>{Pe.setFingerprint([Ne]),(0,a.H)(new Error("Interactive dataframe error"),"warning",{dataframeError:Ne})}),(0,t.jsx)(ge.A,{data:G.data,metadata:G.metadata,cellId:J.cellId,outputIndex:q,shouldScroll:!0,cellDisplayMode:J.cellDisplayMode,heightLimitDisabled:J.heightLimitDisabled});const he=b.element&&(0,K.xY)(b.element)?b.element.state:null;return(0,t.jsx)(l.ErrorBoundary,{onError:Pe=>{(0,a.H)(Pe,"error",{errorBoundary:"DataframeTable"})},FallbackComponent:()=>(0,t.jsxs)(C.F,{m:3,status:"error",children:["Failed to display data frame. Try reloading the page or",(0,t.jsx)(_.t,{source:"error-boundary"}),"."]}),children:(0,t.jsx)(N,{cellDisplayMode:J.cellDisplayMode,isStatic:b.isStatic,workspaceId:b.workspaceId,notebookId:b.notebookId,cellId:J.cellId,tableState:b.tableState??he?.deepnote_table_state??null,isLoading:b.isTableLoading??he?.deepnote_table_loading===!0,cellExecutionCount:b.cellExecutionCount,blockExecutionContextId:b.blockExecutionContextId,data:_e,selectedNotebookFunctionExportName:b.selectedNotebookFunctionExportName})})}const Be=G?(0,Y.aX)(G):null;return Be?(0,t.jsx)(de.R,{spec:Be}):(0,t.jsx)(ge.A,{data:G.data,metadata:G.metadata,cellId:J.cellId??"",outputIndex:q,shouldScroll:!0,cellDisplayMode:J.cellDisplayMode,placeholderHeight:J.placeholderHeight??0,heightLimitDisabled:J.heightLimitDisabled})}return(0,t.jsxs)("p",{children:["Unsupported output type: ",G.output_type]})})},45405:(F,d,e)=>{e.d(d,{$:()=>n});var t=e(66379);function n(o){return o.filter(({name:i})=>i!==t.RJ&&i!=="").map(({name:i,dtype:a})=>({name:String(i),type:a}))}},31112:(F,d,e)=>{e.d(d,{P:()=>z,w:()=>O});var t=e(45470),n=e(42172),o=e(7723),i=e(59749),a=e(414),m=e(52187),r=e(63998),C=e(11796),u=e(81727),g=e(17829),s=e(59589),l=e(88844),x=e(79269);function O(I){return`${I.ename}: ${I.evalue}`}const z=(0,r.memo)(function(c){const D=(0,C.hS)(),{hasAiUsageLimitBeenHit:P,isAiUiShown:R}=(0,g.du)(c.workspaceId||""),y=(0,s.U)(c.block.type),{status:k,onStartGeneratingFixRequest:Q}=(0,l.Z1)(),E=(0,r.useCallback)(()=>{(0,a.u4)("Error searched on Stack Overflow",{workspaceId:c.workspaceId??null},{allowNullWorkspaceId:!0}),window.open(`https://google.com/search?q=site:stackoverflow.com ${O(c.errorOutput)}`)},[c.errorOutput,c.workspaceId]),B=(0,r.useCallback)(()=>{D(M=>(0,t.jsx)(x.C,{workspaceId:c.workspaceId??"",type:"deepnote-ai-usage",onModalClose:M}))},[D,c.workspaceId]);return y?(0,t.jsxs)(t.Fragment,{children:[R&&!P&&(0,t.jsx)(u.h,{workspaceId:c.workspaceId??"",fallback:(0,t.jsx)(m.$,{size:"xxs",variant:"outline",colorScheme:"gray",fontWeight:"normal",fontFamily:"body",leftIcon:(0,t.jsx)(n.I,{as:o.P}),onClick:E,children:"Search on Stack Overflow"}),children:(0,t.jsx)(m.$,{isDisabled:k==="active.streaming"||k==="active.error",size:"xxs",leftIcon:(0,t.jsx)(n.I,{as:i._,size:"md"}),onClick:Q,children:"Fix with Deepnote AI"})}),P&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.$,{variant:"solid",colorScheme:"blue",size:"xxs",leftIcon:(0,t.jsx)(n.I,{as:i._,boxSize:4}),onClick:B,children:"Fix with Deepnote AI"}),(0,t.jsx)(m.$,{size:"xxs",variant:"outline",colorScheme:"gray",fontWeight:"normal",fontFamily:"body",leftIcon:(0,t.jsx)(n.I,{as:o.P}),onClick:E,children:"Search on Stack Overflow"})]})]}):null})},51089:(F,d,e)=>{e.d(d,{o:()=>R});var t=e(45470),n=e(96737),o=e(414),i=e(74231),a=e(33343),m=e(61250),r=e(36664),C=e(52187),u=e(90811),g=e.n(u),s=e(63998),l=e(56474),x=e(42172),O=e(75595),z=e(37189);const I=y=>(0,t.jsxs)(m.z,{alignItems:"flex-start",paddingX:3,paddingTop:3,paddingBottom:1,spacing:3,children:[(0,t.jsx)(x.I,{as:y.icon,color:y.iconColor,width:4,height:4,margin:"1px"}),(0,t.jsxs)(O.T,{alignItems:"flex-start",flex:1,children:[(0,t.jsx)(z.E,{fontFamily:r.gx.fontFamily.primaryFontFamily,fontSize:"xs",fontWeight:600,children:y.title}),y.children]})]});var c=e(31112),D=e(19594),P=e(11565);function R(y){const[k,Q]=(0,i.M)(`isTracebackVisible-${y.blockId}`,!1),E=(0,s.useCallback)(()=>{(0,o.u4)(k?"Error details closed":"Error details opened",{workspaceId:y.workspaceId??null},{allowNullWorkspaceId:!0}),Q(!k)},[Q,k,y.workspaceId]),B=y.errorOutput.ename,M=y.errorOutput.evalue,v=y.errorOutput.traceback,A=!k&&M.length>1e3?M.substring(0,1e3)+"...":M;return(0,t.jsx)(a.az,{paddingBottom:2,children:(0,t.jsxs)(I,{title:"Execution error",icon:n.S,iconColor:"fg.critical.primary",children:[(0,t.jsx)(D.l,{errorName:B,truncatedErrorValue:A}),k&&v&&(0,t.jsx)(a.az,{width:"100%",children:(0,t.jsx)(P.A,{data:{"text/html":l.renderToString((0,t.jsx)("pre",{children:(0,t.jsx)(g(),{linkify:!1,children:v.join(`
`)})}))},metadata:{},cellId:y.blockId,outputIndex:y.outputIndex,shouldScroll:!0,cellDisplayMode:y.cellDisplayMode})}),(0,t.jsxs)(m.z,{fontFamily:r.gx.fontFamily.primaryFontFamily,children:[y.cellDisplayMode==="notebook"&&y.block&&(0,t.jsx)(c.P,{blockId:y.blockId,block:y.block,errorOutput:y.errorOutput,workspaceId:y.workspaceId}),(0,t.jsx)(C.$,{variant:"outline",colorScheme:"gray",size:"xxs",onClick:E,children:k?"Hide error details":"Show error details"})]})]})})}},19594:(F,d,e)=>{e.d(d,{l:()=>r});var t=e(45470),n=e(61250),o=e(33343),i=e(36664),a=e(37189),m=e(63998);const r=(0,m.memo)(function(u){return(0,t.jsx)(n.z,{alignItems:"baseline",children:(0,t.jsxs)(o.az,{whiteSpace:"pre-wrap",fontSize:"xs",fontFamily:i.gx.fontFamily.monospaceFontFamily,paddingBottom:1,children:[(0,t.jsx)(a.E,{as:"span",color:"fg.critical.primary",children:u.errorName}),": ",u.truncatedErrorValue]})})})},11565:(F,d,e)=>{e.d(d,{A:()=>I});var t=e(45470),n=e(50664),o=e(50384),i=e(36987),a=e(83222),m=e(11373),r=e(45119),C=e(33359),u=e(74381),g=e.n(u),s=e(63998),l=e(31464);const x=500,O=(c=!1)=>(0,C.AH)`
  width: 100%;
  height: ${c?"90%":"0"};
  border: none;
  display: block;
`,I=c=>{const D=(0,s.useRef)(null),[P,R]=(0,s.useState)(c.placeholderHeight??0),[y,k]=(0,s.useState)(),Q=(0,m.J)()==="dark",E=(0,s.useCallback)(v=>{D.current?.contentWindow?.postMessage({...v,cellId:c.cellId,outputIndex:c.outputIndex},y??"*")},[y,c.cellId,c.outputIndex]),B=(0,s.useCallback)(g()(v=>{R(v)},x),[R]);if((0,s.useEffect)(()=>{const v=p=>{if(p.origin!==y)return;const A=p.data;(0,i.h6)(A)?A.payload.type==="fill-iframe"&&A.payload.cellId===c.cellId&&A.payload.outputIndex===c.outputIndex&&E({type:"new-output",data:c.data,metadata:c.metadata,cellId:c.cellId,outputIndex:c.outputIndex}):(0,i.n3)(A)&&c.cellId===A.cellId&&c.outputIndex===A.outputIndex&&(p.data.height>P&&R(p.data.height),B(p.data.height))};return window.addEventListener("message",v),()=>window.removeEventListener("message",v)},[y,P,c.cellId,c.data,c.metadata,c.outputIndex,E,B]),(0,s.useEffect)(()=>{E({type:"new-output",data:c.data,metadata:c.metadata,cellId:c.cellId,outputIndex:c.outputIndex})},[c.data,c.metadata,c.cellId,c.outputIndex,E]),(0,s.useEffect)(()=>{const v=window.location.host,p=(0,a.W3)(v,n.y.runtimeConfig.SINGLE_TENANT_OUTPUT_DOMAIN),A=`${window.location.protocol}//${p}`;k(A)},[]),!y)return(0,t.jsx)(r.B.div,{css:O(c.cellDisplayMode==="embed"),style:{height:P},...c.wrapperProps});const M=`${y}/index.html?isDarkMode=${Q}&cache=true#${c.cellId}:${c.outputIndex}`;return(0,t.jsx)(r.B.div,{style:c.noPad?{}:{padding:`${l.MH}px`},...c.wrapperProps,children:(0,t.jsx)(r.B.iframe,{src:M,"data-cy":o.outputIframe,style:{height:P,maxHeight:c.heightLimitDisabled?"none":"610px",overflowY:"auto"},ref:D,sandbox:"allow-same-origin allow-scripts allow-downloads allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox",css:O(c.cellDisplayMode==="embed"),title:"Cell output"})})}},51004:(F,d,e)=>{e.d(d,{e:()=>s,n:()=>g});var t=e(66379),n=e(47628),o=e(74231),i=e(50779),a=e(81550),m=e(98342),r=e(58451),C=e(20485);const{FL:u}=t;function g(l){return(0,o.M)((0,C.up)(l),u)}function s(l){const x=(0,r.c)(n.zd.EXECUTE_CELL),O=(0,m.n)(),z=(0,i.g)().kernelState?.executionContextId??null,{isSomethingExecuting:I}=(0,a.p)();return!x||!O||I||!z||z!==l.blockExecutionContextId}},28756:(F,d,e)=>{e.d(d,{b:()=>qt});var t=e(45470),n=e(42971),o=e(33343),i=e(37189),a=e(63998),m=e(29740),r=e(47433),C=e(53697),u=e(50384),g=e(42172),s=e(54507);const l=(0,s.w)({displayName:"ChevronLeftDoubleLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M18 17L13 12L18 7M11 17L6 12L11 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});var x=e(7270),O=e(27777),z=e(7934),I=e(60898),c=e(93034),D=e(66379),P=e(64592),R=e(7536),y=e(15049),k=e(78466),Q=e(74381),E=e.n(Q),B=e(70481),M=e.n(B),v=e(39060);function p(f,S){return{variant:"ghost",colorScheme:"neutral",size:"xs",icon:(0,t.jsx)(g.I,{as:f,size:"md",colorScheme:S?void 0:"neutral"})}}const A=(0,a.memo)(function({onExportRequest:S,cellFormattingButton:H,isDisabled:W=!1,isLoading:T=!1,totalRows:N,columnCount:_,pageSize:K,pageIndex:Y,pageCount:de,isPreviousPageDisabled:ie,isNextPageDisabled:Se,pageOptions:ge,onPageSizeChangeRequest:Ie,onGotoPreviousPageRequest:Xe,onGotoNextPageRequest:$e,onGotoFirstPageRequest:we,onGotoLastPageRequest:Ue,onGotoPageRequest:tt}){const[ot,De]=(0,a.useState)(Y),[Oe,Re]=(0,a.useState)(String(Y+1)),[L,b]=(0,a.useState)(!1),G=(0,a.useMemo)(()=>E()(q=>{ge.includes(q)?(b(!1),tt(q)):b(!0)},500),[ge,b,tt]);return Y!==ot&&(Re(String(Y+1)),De(Y)),(0,t.jsxs)(n.s,{flexWrap:"wrap",borderTop:"1px solid",borderTopColor:"border.neutral.primary","data-cy":u.dataTableNavigation,color:W?"fg.neutral.tertiary":"fg.neutral.primary",textStyle:"ui.xs.regular",whiteSpace:"nowrap",paddingY:1,paddingX:2,justifyContent:"flex-start",rowGap:1,children:[(0,t.jsxs)(n.s,{flex:"1 0 0",alignItems:"center",gap:2,children:[`${N} ${M()("row",N)}, ${_} ${M()("col",_)}`,(0,t.jsx)(P.m,{shouldWrapChildren:!0,label:c.j,isDisabled:!W,children:(0,t.jsx)(C.l,{"aria-label":v.R1,title:v.R1,value:K,isDisabled:W,onChange:(0,a.useCallback)(q=>Ie(Number(q.target.value)),[Ie]),size:"xxs",children:D.hI.map(q=>(0,t.jsx)("option",{value:q,"aria-label":`${q} rows per page`,children:q},q))})}),"/ page"]}),(0,t.jsxs)(n.s,{alignItems:"center",gap:1,children:[(0,t.jsx)(P.m,{shouldWrapChildren:!0,label:c.j,isDisabled:!W,children:(0,t.jsx)(R.K,{...p(l,ie),"aria-label":v.mL,title:v.mL,isDisabled:ie,onClick:we})}),(0,t.jsx)(P.m,{shouldWrapChildren:!0,label:c.j,isDisabled:!W,children:(0,t.jsx)(R.K,{...p(x.M,ie),"aria-label":v.RI,title:v.RI,isDisabled:ie,onClick:Xe})}),(0,t.jsxs)(n.s,{alignItems:"center",gap:2,children:["Page",(0,t.jsx)(P.m,{shouldWrapChildren:!0,label:c.j,isDisabled:!W,children:(0,t.jsx)(y.p,{size:"xxs",width:"44px","aria-label":v.ri,title:v.ri,value:Oe,isDisabled:W,isInvalid:L,onChange:(0,a.useCallback)(q=>{const J=q.target.value;Re(J);const ne=Number(J)-1;G(ne)},[G])})}),"of ",de]}),(0,t.jsx)(P.m,{shouldWrapChildren:!0,label:c.j,isDisabled:!W,children:(0,t.jsx)(R.K,{...p(O.B,Se),"aria-label":v.Nc,title:v.Nc,isDisabled:Se,onClick:$e})}),(0,t.jsx)(P.m,{shouldWrapChildren:!0,label:c.j,isDisabled:!W,children:(0,t.jsx)(R.K,{...p(z.S,Se),"aria-label":v.aW,title:v.aW,isDisabled:Se,onClick:Ue})})]}),(0,t.jsxs)(n.s,{flex:"1 0 0",alignItems:"center",justifyContent:"flex-end",gap:1,children:[T&&(0,t.jsx)(k.y,{label:"Loading",size:"xs"}),H,S&&(0,t.jsx)(P.m,{shouldWrapChildren:!0,label:c.j,isDisabled:!W,children:(0,t.jsx)(R.K,{...p(I.U,W),"aria-label":v.o7,title:v.o7,isDisabled:W,onClick:S})})]})]})}),j=(0,a.memo)(function({onExportRequest:S,cellFormattingButton:H,isLoading:W=!1}){const{table:T,track:N}=(0,r.u)(),_=T.$.useRowCount(),K=T.$.usePageCount(),Y=T.$.usePageOptions(),de=T.$.useCanPreviousPage(),ie=T.$.useCanNextPage(),Se=T.$.useStateSlice(L=>L.columnCount),ge=T.$.useStateSlice(L=>L.isDisabled),Ie=T.$.useStateSlice(L=>L.pagination.pageSize),Xe=T.$.useStateSlice(L=>L.pagination.pageIndex),$e=!de||ge,we=!ie||ge,Ue=(0,a.useCallback)(L=>{T.setPageIndex(L),N("DataFrame page opened",{page:"by-index"})},[N,T]),tt=(0,a.useCallback)(L=>{T.setPageSize(L),N("DataFrame page size changed",{value:L})},[N,T]),ot=(0,a.useCallback)(()=>{T.setPageIndex(L=>L-1),N("DataFrame page opened",{page:"previous"})},[T,N]),De=(0,a.useCallback)(()=>{T.setPageIndex(L=>L+1),N("DataFrame page opened",{page:"next"})},[T,N]),Oe=(0,a.useCallback)(()=>{T.setPageIndex(0),N("DataFrame page opened",{page:"first"})},[T,N]),Re=(0,a.useCallback)(()=>{T.setPageIndex(K-1),N("DataFrame page opened",{page:"last"})},[T,N,K]);return(0,t.jsx)(A,{totalRows:_,columnCount:Se,pageSize:Ie,pageOptions:Y,pageIndex:Xe,pageCount:K,isPreviousPageDisabled:$e,isNextPageDisabled:we,isDisabled:ge,isLoading:W,cellFormattingButton:H,onExportRequest:S,onGotoPageRequest:Ue,onPageSizeChangeRequest:tt,onGotoPreviousPageRequest:ot,onGotoNextPageRequest:De,onGotoFirstPageRequest:Oe,onGotoLastPageRequest:Re})});var V=e(92231),oe=e(55142),U=e(96998),Z=e(29828),me=e.n(Z),Ce=e(16262),Me=e(55705),ae=e(20485),ke=e(59958),ze=e(19550),ye=e(35811),Ke=e(25956);function Ve(f,S){if(f.type!=="colorScale")return f;const H=S.reduce((De,Oe)=>(De[Oe.name]=Oe,De),{}),W=S.map(De=>String(De.name)),T=(0,Ke.oe)(W,[f]);function N(De,Oe){const Re=H[De];return Re?(0,ke.d3)(Re.dtype)===Oe:!1}const K=T.filter(De=>N(De,"quantitative")).map(De=>H[De]?.stats).filter(Boolean),Y=K.map(De=>Number(De.min)).filter(De=>!Number.isNaN(De)),de=Y.length>0?Math.min(...Y):null,ie=K.map(De=>Number(De.max)).filter(De=>!Number.isNaN(De)),Se=ie.length>0?Math.max(...ie):null,ge=de!==null&&Se!==null?{min:de,mid:(de+Se)/2,max:Se}:null,Xe=T.filter(De=>N(De,"temporal")).map(De=>H[De]?.stats).filter(Boolean),$e=Xe.map(De=>typeof De.min=="string"?new Date(De.min).getTime():null).filter(Boolean),we=$e.length>0?Math.min(...$e):null,Ue=Xe.map(De=>typeof De.max=="string"?new Date(De.max).getTime():null).filter(Boolean),tt=Ue.length>0?Math.max(...Ue):null,ot=we!==null&&tt!==null?{min:new Date(we),mid:new Date((we+tt)/2),max:new Date(tt)}:null;return{...f,resolvedValue:{quantitative:ge,temporal:ot}}}function be(f,S){const H=["nan","NaN","NaT","None"],{operator:W,comparativeValues:T}=S,N=(0,Ke.dh)(W,T);switch(N){case"is-equal":return T.includes(f);case"is-not-equal":return!T.includes(f);case"is-one-of":return T.some(_=>f.includes(_));case"is-not-one-of":return!T.some(_=>f.includes(_));case"is-not-null":return!H.includes(f);case"is-null":return H.includes(f);case"text-contains":return T.some(_=>f.toLowerCase().includes(_.toLowerCase()));case"text-does-not-contain":return!T.some(_=>f.toLowerCase().includes(_.toLowerCase()));case"greater-than":return parseFloat(f)>parseFloat(T[0]??"");case"greater-than-or-equal":return parseFloat(f)>=parseFloat(T[0]??"");case"less-than":return parseFloat(f)<parseFloat(T[0]??"");case"less-than-or-equal":return parseFloat(f)<=parseFloat(T[0]??"");case"between-numbers":return parseFloat(f)>=parseFloat(T[0]??"")&&parseFloat(f)<=parseFloat(T[1]??"");case"between-dates":return new Date(f)>=new Date(T[0]??"")&&new Date(f)<=new Date(T[1]??"");case"outside-of":return parseFloat(f)<parseFloat(T[0]??"")||parseFloat(f)>parseFloat(T[1]??"");case"is-after":return new Date(f)>new Date(T[0]??"");case"is-before":return new Date(f)<new Date(T[0]??"");case"is-on":return new Date(f).toDateString()===new Date(T[0]??"").toDateString();case"is-relative-today":{const _=new Date,K=new Date(f);switch(T[0]){case"today":return K.toDateString()===_.toDateString();case"yesterday":{const Y=new Date(_);return Y.setDate(_.getDate()-1),K.toDateString()===Y.toDateString()}case"week-ago":{const Y=new Date(_);return Y.setDate(_.getDate()-7),K>=Y}case"month-ago":{const Y=new Date(_);return Y.setMonth(_.getMonth()-1),K>=Y}case"quarter-ago":{const Y=new Date(_);return Y.setMonth(_.getMonth()-3),K>=Y}case"half-year-ago":{const Y=new Date(_);return Y.setMonth(_.getMonth()-6),K>=Y}case"year-ago":{const Y=new Date(_);return Y.setFullYear(_.getFullYear()-1),K>=Y}default:return!1}}default:return(0,ze.d)(N),!1}}const le=[],je={createTable(f){f.getResolvedCellFormattingRules=(0,U.ph)(()=>[f.getState().cellFormattingRules,f.options.columns],(S,H)=>{const W=H.map(N=>({name:N.id??"",dtype:N.meta?.dataType??"",stats:N.meta?.dataStats}));return S?.map(N=>Ve(N,W))??le},{key:"getResolvedCellFormattingRules"})},createCell(f,S,H,W){f.getFormattingRule=(0,U.ph)(()=>[W.getResolvedCellFormattingRules(),f.getNormalizedValue(),f.column.id,f.column.columnDef.meta?.dataType],(T,N,_,K)=>{const Y=K?(0,ke.Ie)(K):null;if(_===D.RJ||!T)return null;const de=T.filter(ie=>ie.columnSelectionMode==="only"&&!ie.columnNames?.includes(_)||ie.columnSelectionMode==="allExcept"&&ie.columnNames?.includes(_)?!1:ie.type==="singleColor"?be(N,ie):ie.type==="colorScale"?Y!==null&&["quantitative","temporal","bool"].includes(Y):((0,ze.x)(ie),!1));return de[de.length-1]??null},{key:"getFormattingRule"}),f.getFormattingRuleAndStyle=(0,U.ph)(()=>[f.getFormattingRule(),W.options.theme,f.getNormalizedValue(),f.column.columnDef.meta?.dataType],(T,N,_,K)=>{const Y=K?(0,ke.Ie)(K):null;return!T||!Y?{formatRule:null,formatStyle:{}}:{formatStyle:T.type==="singleColor"?(0,ye.WZ)(T.styleName):(0,ye.Q3)(T,N,_,Y),formatRule:T}},{key:"getFormattingRuleAndStyle"})}};var Qe=e(48154);const ce={getInitialState:f=>({columnDisplayNames:{},...f}),createColumn:(f,S)=>{f.getName=()=>S.getState().columnDisplayNames[f.id]??f.id,f.getIsCustomName=()=>!!S.getState().columnDisplayNames[f.id],f.resetName=()=>{S.setState(H=>(0,Qe.Ay)(H,W=>{delete W.columnDisplayNames[f.id]}))},f.setName=H=>S.setState(W=>(0,Qe.Ay)(W,T=>{T.columnDisplayNames[f.id]=typeof H=="function"?H(f.getName()):H}))}};function ee(f,S){const H={...f};return Object.entries(S).forEach(([W,T])=>{me()(H[W],T)||(H[W]=T)}),H}function h(f,S){return f>Math.pow(10,S)?Math.round(f):Number(f.toPrecision(S))}function $(f){return typeof f=="number"&&!Number.isInteger(f)?String(h(f,10)):String(f)}const X={createCell(f){f.getNormalizedValue=(0,U.ph)(()=>[f.getValue()],S=>$(S),{key:"getNormalizedValue"})}},fe=()=>{const f=(0,a.useRef)(new Set),S=(0,a.useCallback)(()=>f.current.forEach(W=>{try{W()}catch(T){console.error(T)}}),[]),H=(0,a.useCallback)(W=>(f.current.add(W),()=>f.current.delete(W)),[]);return(0,a.useMemo)(()=>({subscribe:H,notifyListeners:S}),[H,S])},te=(f,S)=>{if(!f)throw new Error("reactive table API can be used only when `notifier` provided with table options");return(0,a.useSyncExternalStore)(f.subscribe,()=>S(),()=>S())},Le=(f,S,H)=>new Proxy({...H},{get(W,T,N){if(typeof T!="string"||!T.startsWith("use")){["$$typeof","constructor"].includes(T)||console.warn(`You tried accessing ${String(T)}, but reactive objects contain only hooks. Use regular object to access other API`);return}if(Reflect.has(W,T))return Reflect.get(W,T,N);const _="get"+T.slice(3);if(Reflect.has(f,_)){const K=(...Y)=>te(S,()=>f[_](...Y));return Reflect.set(W,T,K,N),K}else throw new Error(`unknown hook ${T}, object doesn't have ${_} method`)}}),ue="$",Ee={createCell:(f,S,H,W)=>{f[ue]=Le(f,W.options.notifier)},createColumn:(f,S)=>{f[ue]=Le(f,S.options.notifier)},createHeader:(f,S)=>{f[ue]=Le(f,S.options.notifier)},createRow:(f,S)=>{f[ue]=Le(f,S.options.notifier)},createTable:f=>{const S=f.options.notifier,H=Le(f,f.options.notifier,{useStateSlice:W=>te(S,()=>W(f.getState())),useReactive:W=>te(S,W)});f[ue]=H}},ve={getInitialState:f=>({wrappedTextColumnIds:[],...f}),createColumn:(f,S)=>{f.getIsTextWrapEnabled=()=>S.getState().wrappedTextColumnIds.includes(f.id),f.setIsTextWrapEnabled=H=>S.setState(W=>(0,Qe.Ay)(W,T=>{const N=T.wrappedTextColumnIds.includes(f.id),_=typeof H=="function"?H(N):H;N!==_&&(_&&T.wrappedTextColumnIds.push(f.id),_||T.wrappedTextColumnIds.splice(T.wrappedTextColumnIds.indexOf(f.id),1))}))}},Je=()=>{},He={accessorKey:D.D1,id:D.D1,minSize:20,size:20,maxSize:20,header:()=>null,cell:()=>null},st={columnCount:0,isDisabled:!1,isStatic:!1,pagination:{pageSize:D.yQ,pageIndex:D.fs},wrappedTextColumnIds:[],cellFormattingRules:[],columnHeaderComponent:Me.B,columnDisplayNames:{},columnVisibility:{},columnOrder:[],columnPinning:{},rowPinning:{},columnFilters:[],globalFilter:{},sorting:[],expanded:{},grouping:[],columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},rowSelection:{}},ct=f=>{const S=f.isDisabled??!1,H=f.isStatic??!1,W=f.sharedState??D.dq,T=f.setSharedState??Je,N=f.localState??D.FL,_=f.setLocalState??Je,[K,Y]=(0,Ce.L)({incomingValue:W,applyIncomingValue:(0,a.useCallback)(Oe=>Oe,[])}),de=(0,a.useRef)(""),ie=(0,a.useMemo)(()=>f.columns.map(Oe=>Oe.id),[f.columns]),Se=ae.$_(f.totalRows,K.pageSize),[ge,Ie]=(0,a.useState)(st),Xe=(0,a.useMemo)(()=>{const Oe=ie.filter(L=>L!==D.RJ),Re=K.columnOrder&&K.columnOrder.length===Oe.length&&K.columnOrder.every(L=>Oe.includes(L));return ae.k6(Re&&K.columnOrder?K.columnOrder:Oe)},[ie,K.columnOrder]),$e=(0,a.useMemo)(()=>{const Oe={pageSize:ae.IQ(K.pageSize),pageIndex:ae.jV(K.pageIndex,Se)},Re=ae.pY(K.sortBy),L={...ge.columnSizing,...ge.columnSizingInfo?.isResizingColumn?{}:ae.Rw(N.columnWidths??{},ie)},b=K.cellFormattingRules??[],G=ae.Rw(K.wrappedTextColumnIds??[],ie),q=ae.Rw(ae.yI(K.hiddenColumnIds),ie),J=ae.Rw(ae.iK(K.columnDisplayNames),ie);return ee({...ge,columnCount:f.columnCount,isDisabled:S,isStatic:H},{columnHeaderComponent:f.columnHeader??Me.B,pagination:Oe,sorting:Re,columnSizing:L,wrappedTextColumnIds:G,cellFormattingRules:b,columnVisibility:q,columnOrder:Xe,columnDisplayNames:J})},[ge,f.columnCount,f.columnHeader,K,S,H,N.columnWidths,Se,ie,Xe]),we=Oe=>{const Re=typeof Oe=="function"?Oe($e):Oe;Ie(Re);const L={pageSize:ae.jK(Re.pagination.pageSize),pageIndex:ae.c4(Re.pagination.pageIndex),filters:K.filters,conditionalFilters:K.conditionalFilters,sortBy:ae.cR(Re.sorting),cellFormattingRules:Re.cellFormattingRules,wrappedTextColumnIds:Re.wrappedTextColumnIds,hiddenColumnIds:ae.km(Re.columnVisibility),columnOrder:ae.NW(Re.columnOrder),columnDisplayNames:ae.F6(Re.columnDisplayNames)};(L.pageSize!==K.pageSize&&K.pageSize!==void 0||K.sortBy!==void 0&&!me()(L.sortBy,K.sortBy))&&(L.pageIndex=D.fs),me()(K,L)||(0,a.startTransition)(()=>{const b=T(L);if(b instanceof Promise){const G=Math.random().toString();de.current=G,Y(L),b.catch(()=>{de.current===G&&Y(W)})}})},Ue=(0,a.useMemo)(()=>f.columns.concat([He]),[f.columns]),tt=(0,V.DP)(),ot=fe(),De=(0,oe.N4)({notifier:ot,theme:tt,columns:Ue,defaultColumn:{header:D.y$,size:D.mv,minSize:D.Zw,maxSize:D.rG},data:f.rows,rowCount:f.totalRows,state:$e,onStateChange:we,_features:[X,ve,ce,je,Ee],getCoreRowModel:(0,U.HT)(),columnResizeMode:"onChange",onColumnSizingChange:Oe=>{const Re=typeof Oe=="function"?Oe($e.columnSizing):Oe;Ie(L=>({...L,columnSizing:Re}))},onColumnSizingInfoChange:Oe=>{const Re=typeof Oe=="function"?Oe($e.columnSizingInfo):Oe;Ie(G=>({...G,columnSizingInfo:Re}));const L=Re.isResizingColumn&&!$e.columnSizingInfo.isResizingColumn,b=!Re.isResizingColumn&&$e.columnSizingInfo.isResizingColumn;L&&(Ie(G=>({...G,columnSizing:$e.columnSizing})),f.onColumnResizeStart?.(Re.isResizingColumn)),b&&(_({columnWidths:$e.columnSizing}),f.onColumnResizeEnd?.($e.columnSizingInfo.isResizingColumn))},enableFilters:!1,getSortedRowModel:(0,U.h5)(),manualSorting:!0,enableSorting:!S&&!H,enableMultiSort:!1,getPaginationRowModel:(0,U.kW)(),pageCount:Se,manualPagination:!0,autoResetPageIndex:!1});return(0,a.useLayoutEffect)(()=>{(0,a.startTransition)(()=>ot.notifyListeners())},[$e,f.rows,ot]),De};var et=e(36664),qe=e(61430),dt=e.n(qe),rt=e(80588),vt=e(31464),Ze=e(25328),Fe=e(32912);const ht=(f,S)=>({transform:`translateX(${f}px)`,minWidth:`${S-f}px`});var ut=e(45302);const se=(0,ut.p)(o.az,{role:"rowgroup","data-cy":u.dataTableBody}),w=(0,ut.p)(o.az,{border:"none",borderRightColor:"border.neutral.primary",borderRightWidth:"1px",borderRightStyle:"solid",flexShrink:0,_last:{borderRight:"none"}});var re=e(55549);function xe(f){const S=f.trim().toLowerCase();return S.startsWith("http://")||S.startsWith("https://")}const Ye=(0,a.memo)(function({textAlign:S,isNumeric:H=!1,isTextWrapEnabled:W=!1,isSelected:T=!1,formatRule:N,cellFormatRuleStyle:_,value:K,onClick:Y}){if(K===null)return(0,t.jsx)(o.az,{padding:1,"data-cy":u.dataTableCellContent});const de=N!==null?`${N.type}:${N.type==="singleColor"?N.styleName:N.scaleName}`:void 0;return(0,t.jsx)(o.az,{..._,...T?{color:"fg.accentOne.primary",backgroundColor:"bg.accentOne.tertiary"}:{},padding:1,"data-cy":u.dataTableCellContent,onClick:Y,"data-format-rule":de,children:(0,t.jsx)(o.az,{marginBlock:0,marginInline:1,sx:{fontVariantNumeric:H?"tabular-nums":void 0},children:(0,t.jsx)(i.E,{noOfLines:W?10:1,whiteSpace:"normal",align:S,title:K,wordBreak:"break-all",children:xe(K)?(0,t.jsx)(re.N,{isExternal:!0,href:K,onClick:ie=>ie.stopPropagation(),children:K}):K})})})}),nt=(0,a.memo)(function({cell:S,isSelected:H}){const W=S.$.useValue(),T=S.column.$.useIsTextWrapEnabled(),N=S.column.columnDef.meta?.dataType??null,_=S.$.useNormalizedValue(),{formatStyle:K,formatRule:Y}=S.$.useFormattingRuleAndStyle(),de=(0,ae.vr)(S);return(0,t.jsx)(Ye,{isTextWrapEnabled:T,isSelected:H,isNumeric:(0,ke.o3)(N??""),formatRule:Y,cellFormatRuleStyle:K,value:W==null?null:_,textAlign:de})}),ft=(0,a.memo)(function({cell:S,isSelected:H,onSelect:W}){const T=(0,a.useCallback)(_=>{_.detail>=3?W(S.column.id,S.row.id):W(void 0,void 0)},[W,S.column.id,S.row.id]),N=S.column.$.useSize();return(0,t.jsx)(w,{role:"gridcell",width:N+"px",flexShrink:0,flexGrow:0,"aria-hidden":S.column.id===D.D1,"aria-selected":H,onClick:T,children:(0,t.jsx)(nt,{cell:S,isSelected:H})})}),mt=function({ariaColIndex:S,ariaRowIndex:H,children:W}){return(0,t.jsx)(o.az,{role:"row","aria-rowindex":H,"aria-colindex":S,minHeight:6,display:"flex",position:"relative",minWidth:"100%",borderBottomColor:"border.neutral.primary",borderBottomWidth:"1px",borderBottomStyle:"solid",background:"bg.neutral.primary",_even:{background:"bg.neutral.secondary"},_last:{borderBottom:"none"},children:W})},Ct=(0,a.memo)(function({row:S,ariaRowindex:H,virtualizedColumns:W,selectedColumnId:T,onSelect:N}){const _=(W[0]?.index??0)+1,K=S.$.useVisibleCells();return(0,t.jsx)(mt,{ariaColIndex:_,ariaRowIndex:H,children:W.map(Y=>{const de=K[Y.index];if(!de)return null;const ie=!!T&&T===de.column.id;return(0,t.jsx)(ft,{cell:de,isSelected:ie,onSelect:N},de?.column.id)})})}),St=(0,a.memo)(function({virtualizedColumns:S,width:H}){const{track:W,table:T}=(0,r.u)(),N=T.$.useCenterRows(),_=(0,a.useRef)(null),[K,Y]=(0,a.useState)({}),de=(0,a.useCallback)((ge,Ie)=>{Y({columnId:ge,rowId:Ie}),_.current?.focus(),W("DataFrame cell selected")},[W]),ie=(0,a.useCallback)(ge=>{if(!K.columnId||!K.rowId)return;const Ie=(0,ae.Ko)(N,K.columnId,K.rowId);Ie&&(ge.clipboardData.setData("text/plain",Ie),ge.preventDefault(),Fe.i.info({message:"Copied selected cell value to clipboard!"}),W("DataFrame cell value copied"))},[N,K.columnId,K.rowId,W]),Se=S[0]?.start??0;return(0,t.jsx)(se,{onCopy:ie,ref:_,...ht(Se,H),children:N.map((ge,Ie)=>{const Xe=K.rowId&&K.rowId===ge.id?K.columnId:void 0;return(0,t.jsx)(Ct,{row:ge,ariaRowindex:Ie+2,virtualizedColumns:S,selectedColumnId:Xe,onSelect:de},ge.id)})})});var xt=e(33026),It=e(6769),zt=e(39914),Dt=e(99036);const Ft=(0,a.memo)(function(){const{table:S,datatableId:H}=(0,r.u)(),{itemType:W,isDragging:T,item:N,offset:_}=(0,zt.V)(Se=>({item:Se.getItem(),itemType:Se.getItemType(),offset:Se.getSourceClientOffset(),isDragging:Se.isDragging()})),K=(0,xt.Z)(T),Y=(0,a.useRef)(null),de=(0,a.useRef)(0);T&&!K&&(de.current=Y.current?.getBoundingClientRect().left??0);let ie=null;if(T&&W===It.q.DataTableColumn&&(0,Dt.wv)(N)&&N.datatableId===H&&_?.x!==void 0){const ge=S.getColumn(N.columnId)?.getSize()??100,Ie=_.x-de.current;ie=(0,t.jsx)(o.az,{position:"absolute",top:0,bottom:0,width:ge+"px",transform:"auto",translateX:Ie+"px",background:"bg.accentOne.secondary",opacity:.4})}return(0,t.jsx)(o.az,{position:"absolute",inset:0,pointerEvents:"none",zIndex:10,ref:Y,children:ie})}),bt=(0,a.memo)(function({offset:S,leftColumn:H,rightColumn:W,targetColumnPosition:T}){const{table:N}=(0,r.u)(),_=T==="left"?H:W;if(!_)throw new Error("ColumnHeaderDropTarget's target column can't be undefined");const{isActive:K,isOver:Y,draggedColumnId:de,pointerHorizontalOffset:ie,dropRef:Se}=(0,Dt.Xq)(_.id),ge=N.$.useStateSlice(L=>L.columnVisibility),Ie=N.$.useStateSlice(L=>L.columnOrder),Xe=N.$.useReactive(()=>H?.getSize()??0),$e=N.$.useReactive(()=>W?.getSize()??0),we=N.$.useReactive(()=>de?N.getColumn(de)?.getSize()??0:0),{shouldExtendToRight:Ue,shouldExtendToLeft:tt}=(0,a.useMemo)(()=>{const L=de?Ie.indexOf(de):-1;if(!de||L===-1)return{shouldExtendToLeft:!1,shouldExtendToRight:!1};const b=(0,Dt.Ye)(L,ge,Ie),G=Ie[b],q=(0,Dt.PY)(L,ge,Ie),J=Ie[q];return{shouldExtendToRight:G===W?.id,shouldExtendToLeft:J===H?.id}},[de,ge,Ie,H,W]),ot=32,De=tt?Xe*-1-(we*.5-Math.max(ot/2,we*.1)):Xe*-.5,Oe=Ue?$e*-1-(we*.5-Math.max(ot/2,we*.1)):$e*-.5,Re=we/2-ie;return(0,t.jsxs)(o.az,{position:"absolute",left:S+"px",top:0,bottom:0,children:[(0,t.jsx)(o.az,{position:"absolute",left:De-Re+"px",right:Oe+Re+"px",top:0,bottom:0,zIndex:10,ref:Se,pointerEvents:K?"auto":"none"}),(0,t.jsx)(o.az,{position:"absolute",width:1,top:0,bottom:0,right:"0",transform:"translateX(50%)",backgroundClip:"content-box",background:Y?"bg.accentOne.primaryHover":void 0})]})}),Ht=[],$t=(0,a.memo)(function({virtualizedColumns:S}){const{table:H}=(0,r.u)(),W=H.$.useHeaderGroups()[0]?.headers??Ht,T=(0,a.useMemo)(()=>W.map(_=>_.column),[W]);return(0,Dt.K7)()?(0,t.jsx)(t.Fragment,{children:S.map((_,K)=>{const Y=T[_.index],de=T[_.index+1],ie=T[_.index-1],Se=K===0;if(!Y)return null;const ge=Y.id===D.D1,Ie=Y.id===D.RJ;return(0,t.jsxs)(a.Fragment,{children:[Se&&!Ie&&(0,t.jsx)(bt,{offset:_.start,leftColumn:ie,rightColumn:Y,targetColumnPosition:"right"}),!ge&&(0,t.jsx)(bt,{offset:_.end,leftColumn:Y,rightColumn:de,targetColumnPosition:"left"})]},Y.id)})}):null}),kt=(0,a.memo)(function({header:S}){const{table:H}=(0,r.u)(),W=H.$.useReactive(()=>S.column.columnDef.header===D.y$?H.getState().columnHeaderComponent:S.column.columnDef.header),T=S.getContext();return(0,oe.Kv)(W,T)}),Ut={background:"bg.accentOne.primaryHover",backgroundClip:"content-box"},Nt=(0,a.memo)(function(S){const{track:H}=(0,r.u)(),W=(0,Dt.K7)();if(!S.onResizeStart)return null;const T={onMouseDown:N=>{H("DataFrame column resized",{interfaceType:"mouse"}),N.preventDefault(),S.onResizeStart(N)},onTouchStart:N=>{H("DataFrame column resized",{interfaceType:"touch"}),N.preventDefault(),S.onResizeStart(N)},...S.isActive?Ut:{}};return(0,t.jsx)(o.az,{...T,"data-cy":u.dataTableColumnResizeHandle,display:"inline-block",boxSizing:"content-box",paddingInline:1,paddingBlock:0,width:1,height:"full",position:"absolute",right:"0",top:"0",transform:"translateX(50%)",zIndex:"1",cursor:"col-resize",_hover:W?void 0:Ut})}),jt=(0,a.memo)((0,a.forwardRef)(function({width:S,ariaSort:H,ariaLabel:W,ariaHidden:T,header:N,isResizing:_,onResizeStart:K},Y){return(0,t.jsxs)(w,{padding:1,width:S+"px",position:"relative",role:"columnheader","aria-sort":H,"aria-label":W,"aria-hidden":T,ref:Y,children:[(0,t.jsx)(kt,{header:N}),!!K&&(0,t.jsx)(Nt,{isActive:_,onResizeStart:K})]})})),Vt=(0,a.memo)(function(S){const{dragHandleRef:H}=(0,Dt.G4)(S.header.column.id);return(0,t.jsx)(jt,{...S,ref:H})}),_t=(0,a.memo)(function({column:S,header:H,isLastColumn:W}){const N=(0,Dt.i1)()?Vt:jt,_=S.$.useSize(),K=S.$.useIsSorted(),Y=S.$.useIsResizing(),de=S.$.useName(),ie=K==="asc"?"ascending":K==="desc"?"descending":void 0,Se=S.id===D.RJ?"Index":de,ge=S.id===D.D1;return(0,t.jsx)(N,{width:_,ariaSort:ie,ariaLabel:Se,ariaHidden:ge,header:H,isResizing:Y,onResizeStart:W?void 0:H.getResizeHandler()})}),wt=(0,a.memo)(function(S){const{headers:H,columns:W,virtualizedColumns:T,displayColumnStats:N,width:_}=S,{table:K}=(0,r.u)(),Y=K.$.useReactive(()=>(0,ae.vF)(W,N)),de=T[0]?.start??0,ie=(T[0]?.index??0)+1;return(0,t.jsx)(o.az,{"data-cy":u.dataTableHeader,role:"rowgroup",position:"sticky",top:0,zIndex:1,...ht(de,_),children:(0,t.jsx)(o.az,{role:"row","aria-rowindex":1,"aria-colindex":ie,minHeight:`${Y}px`,display:"flex",position:"relative",borderBottomColor:"border.neutral.primary",borderBottomWidth:"1px",borderBottomStyle:"solid",background:"bg.neutral.primary",_even:{background:"bg.neutral.secondary"},children:T.map(Se=>{const ge=W[Se.index],Ie=H[Se.index],Xe=Se.index===W.length-1;return!ge||!Ie?null:(0,t.jsx)(_t,{header:Ie,column:ge,isLastColumn:Xe},ge.id)})})})});var Gt=e(72819);const Qt=[],Zt=(0,a.memo)(function({virtualizedColumns:S,width:H}){const{table:W}=(0,r.u)(),T=W.$.useRowCount(),N=W.$.useHeaderGroups()[0]?.headers??Qt,_=(0,a.useMemo)(()=>N.map(K=>K.column),[N]);return(0,t.jsx)(wt,{virtualizedColumns:S,displayColumnStats:(0,Gt.x)(T),headers:N,columns:_,width:H})}),Yt=[],Xt=(0,a.memo)(function(){const{table:S}=(0,r.u)(),H=S.$.useHeaderGroups()[0]?.headers??Yt,W=(0,a.useMemo)(()=>H.map(Ue=>Ue.column),[H]),T=S.$.useCenterRows(),N=(0,Dt.i1)(),_=N?Ze.$:o.az,K=S.options.defaultColumn,Y=(0,a.useRef)(null),de=S.$.useReactive(()=>dt()(S.getVisibleFlatColumns(),Ue=>Ue.getSize())),ie=(0,a.useCallback)(Ue=>W[Ue]?.getSize()??K?.size??D.mv,[W,K?.size,de]),Se=(0,a.useCallback)(Ue=>W[Ue]?.id,[W]),ge=(0,a.useRef)([]),Ie=S.$.useStateSlice(Ue=>Ue.columnSizingInfo.isResizingColumn!==!1),Xe=(0,a.useCallback)(Ue=>{const tt=(0,rt.v)(Ue);return Ie&&ge.current.forEach(ot=>{tt.includes(ot)||tt.push(ot)}),tt},[Ie]),$e=(0,rt.z)({size:W.length,parentRef:Y,estimateSize:ie,overscan:2,horizontal:!0,initialRect:{width:vt.wQ,height:42},keyExtractor:Se,rangeExtractor:Xe});ge.current=$e.virtualItems.map(Ue=>Ue.index);const we=(0,a.useDeferredValue)($e);return(0,a.useEffect)(()=>{/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&Y.current?.addEventListener("wheel",()=>{})},[]),(0,t.jsxs)(n.s,{direction:"column",position:"relative",overflow:"hidden",children:[(0,t.jsxs)(_,{ref:Y,"data-cy":u.dataTable,overflowX:"auto",overflowY:"auto",position:"relative",fontFamily:et.gx.fontFamily.primaryFontFamily,textStyle:"ui.xs.regular",userSelect:Ie?"none":"unset",role:"grid","aria-readonly":"true","aria-rowcount":T.length+1,"aria-colcount":W.length,children:[(0,t.jsx)(Zt,{width:we.totalSize,virtualizedColumns:we.virtualItems}),(0,t.jsx)(St,{width:we.totalSize,virtualizedColumns:we.virtualItems}),N&&(0,t.jsx)($t,{virtualizedColumns:we.virtualItems})]}),N&&(0,t.jsx)(Ft,{})]})}),Jt=()=>{},qt=(0,a.memo)(function(S){const H=S.isStatic??!1,W=(0,m.f)(S.columns),T=ct({columns:W,columnCount:S.columnCount,rows:S.rows,totalRows:S.totalRows,isDisabled:S.isDisabled,isStatic:H,columnHeader:S.columnHeader,sharedState:S.sharedState,setSharedState:S.onSharedStateUpdateRequest,localState:S.localState,setLocalState:S.onLocalStateUpdateRequest,onColumnResizeStart:()=>{document.body.style.cursor="col-resize"},onColumnResizeEnd:()=>{document.body.style.removeProperty("cursor")}}),N=(0,a.useId)(),_=(0,a.useMemo)(()=>({table:T,datatableId:N,track:S.onTrackRequest??Jt}),[S.onTrackRequest,T,N]);return(0,t.jsx)(r.b,{value:_,children:(0,t.jsxs)(n.s,{direction:"column",overflow:"hidden",maxHeight:"100%",children:[(0,t.jsx)(Xt,{}),S.totalRows===0&&(0,t.jsx)(o.az,{padding:3,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"bg.neutral.secondary",children:(0,t.jsx)(i.E,{color:"fg.neutral.secondary",textStyle:"ui.xs.semibold",children:"No rows"})}),!H&&S.displayNavigationRow&&(0,t.jsx)(j,{onExportRequest:S.onExportRequest,cellFormattingButton:S.cellFormattingButton,isLoading:S.isLoading})]})})})},47433:(F,d,e)=>{e.d(d,{b:()=>o,u:()=>i});var t=e(63998);const n=(0,t.createContext)(null),o=n.Provider,i=()=>{const a=(0,t.useContext)(n);if(a===null)throw new Error("useDataTable should be used only inside DataTable");return a}},99036:(F,d,e)=>{e.d(d,{G4:()=>z,K7:()=>O,PY:()=>g,Xq:()=>I,Ye:()=>u,i1:()=>x,wv:()=>l});var t=e(66379),n=e(6769),o=e(63998),i=e(77616),a=e(65286),m=e(84830),r=e(11144),C=e(47433);function u(c,D,P){let R=c-1;for(;R>0&&D[P[R]]===!1;)R--;return R}function g(c,D,P){let R=c+1;for(;R<P.length&&D[P[R]]===!1;)R++;return R}function s(c,D,P,R){const y=u(c,P,R),k=g(c,P,R);return c!==-1&&(D<=y||D>k)}function l(c){return!c||typeof c!="object"?!1:"columnId"in c&&typeof c.columnId=="string"&&"datatableId"in c&&typeof c.datatableId=="string"}function x(){return!!(0,o.useContext)(i.M).dragDropManager}function O(){const{datatableId:c}=(0,C.u)(),[D,P]=(0,o.useState)(!1),R=(0,o.useContext)(i.M);return(0,o.useEffect)(()=>{if(!R.dragDropManager)return;const y=R.dragDropManager.getMonitor();return y.subscribeToStateChange(()=>{const k=y.getItem();setTimeout(()=>P(l(k)&&k.datatableId===c),0)})},[R,c]),D}function z(c){const{table:D,datatableId:P}=(0,C.u)(),R=D.$.useStateSlice(M=>M.isStatic),y=D.$.useStateSlice(M=>M.isDisabled),k=[t.RJ,t.D1].includes(c),[{isDragging:Q},E,B]=(0,a.i)(()=>({canDrag:!k&&!R&&!y,type:n.q.DataTableColumn,item:{columnId:c,datatableId:P},collect:M=>({isDragging:M.isDragging()})}),[k,R,y]);return B((0,r.n)()),{isDragging:Q,dragHandleRef:E}}function I(c){const{table:D,datatableId:P,track:R}=(0,C.u)(),y=D.$.useStateSlice(A=>A.columnOrder),k=D.$.useStateSlice(A=>A.columnVisibility),Q=(0,o.useCallback)(({columnId:A})=>{const j=[...D.getState().columnOrder],V=j.indexOf(A),oe=j.indexOf(c)+1;s(V,oe,D.getState().columnVisibility,j)&&(j.splice(V,1),j.splice(oe>V?oe-1:oe,0,A),D.setColumnOrder(j),R("Data table column reordered"))},[c,D,R]),[{isOver:E,isActive:B,draggedColumnId:M,pointerHorizontalOffset:v},p]=(0,m.H)({accept:[n.q.DataTableColumn],drop:Q,collect:A=>{const j=A.getItem();if(!l(j)||j.datatableId!==P)return{isOver:!1,isActive:!1,pointerHorizontalOffset:0,draggedColumnId:null};const V=y.indexOf(c)+1,oe=y.indexOf(j.columnId);return{isOver:A.isOver()&&s(oe,V,k,y),isActive:A.canDrop()&&s(oe,V,k,y),pointerHorizontalOffset:(A.getInitialClientOffset()?.x??0)-(A.getInitialSourceClientOffset()?.x??0),draggedColumnId:j.columnId}}},[y,k,c,P]);return{isOver:E,isActive:B,draggedColumnId:M,pointerHorizontalOffset:v,dropRef:p}}},55705:(F,d,e)=>{e.d(d,{B:()=>Qe});var t=e(45470),n=e(79381),o=e(50384),i=e(42172),a=e(93296),m=e(76424),r=e(54507);const C=(0,r.w)({displayName:"TextInputLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M13 7H5.2C4.0799 7 3.51984 7 3.09202 7.21799C2.71569 7.40973 2.40973 7.71569 2.21799 8.09202C2 8.51984 2 9.0799 2 10.2V13.8C2 14.9201 2 15.4802 2.21799 15.908C2.40973 16.2843 2.71569 16.5903 3.09202 16.782C3.51984 17 4.07989 17 5.2 17H13M17 7H18.8C19.9201 7 20.4802 7 20.908 7.21799C21.2843 7.40973 21.5903 7.71569 21.782 8.09202C22 8.51984 22 9.0799 22 10.2V13.8C22 14.9201 22 15.4802 21.782 15.908C21.5903 16.2843 21.2843 16.5903 20.908 16.782C20.4802 17 19.9201 17 18.8 17H17M17 21L17 3M19.5 3.00001L14.5 3M19.5 21L14.5 21",stroke:"#5B768F",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});var u=e(80929),g=e(76777),s=e(50214);const l=(0,r.w)({displayName:"ParagraphWrapLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M3 6H21M3 12H18C18.7956 12 19.5587 12.3161 20.1213 12.8787C20.6839 13.4413 21 14.2044 21 15C21 15.7956 20.6839 16.5587 20.1213 17.1213C19.5587 17.6839 18.7956 18 18 18H14M14 18L16 16M14 18L16 20M3 18H10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});var x=e(38244),O=e(45302),z=e(52187),I=e(32912),c=e(42971),D=e(37189),P=e(33343),R=e(15049),y=e(53429),k=e(38661),Q=e(74111),E=e(21582),B=e(56416),M=e(15135),v=e(63998),p=e(47433),A=e(99036),j=e(39060),V=e(60904),oe=e(34980),U=e(65918),Z=e(7536);const me=(0,v.memo)(function(ee){return(0,t.jsxs)(oe.M,{size:"xxs",children:[(0,t.jsx)(U.W,{children:(0,t.jsx)(Z.K,{"aria-label":ee.ariaLabel,variant:"unstyled",size:"xs",color:"fg.neutral.secondary",_focus:{outline:"none"},icon:(0,t.jsx)(i.I,{as:ee.icon,boxSize:3}),isDisabled:ee.mode!=="enabled",onClick:ee.handleClick})}),(0,t.jsx)(R.p,{noOfLines:1,paddingRight:ee.mode==="readonly"?2:6,_focus:{outline:"none"},isDisabled:ee.mode!=="enabled",onClick:ee.handleClick,...ee.inputProps}),ee.mode!=="readonly"&&(0,t.jsx)(U.t,{children:(0,t.jsx)(Z.K,{"aria-label":j.aV,variant:"unstyled",size:"xs",color:"fg.neutral.tertiary",_focus:{outline:"none"},icon:(0,t.jsx)(i.I,{as:V.C,color:"fg.neutral.tertiary",boxSize:3}),isDisabled:ee.mode!=="enabled",onClick:ee.handleRemove})})]})}),Ce=(0,v.memo)(function(ee){const{track:h,table:$}=(0,p.u)(),X=$.$.useStateSlice(He=>He.isStatic),fe=$.$.useStateSlice(He=>He.isDisabled),te=ee.column.$.useIsSorted()==="desc",Le=te?m.e:a.E,ue=te?j.kL:j.wy,Ee=(0,v.useCallback)(()=>{ee.column.toggleSorting(!te,!1),h("DataFrame sort added",{type:te?"desc":"asc"})},[ee.column,h,te]),ve=(0,v.useCallback)(()=>{ee.column.clearSorting(),h("DataFrame sort removed",{type:te?"desc":"asc"})},[ee.column,h,te]),Je={value:ue,cursor:"pointer",isReadOnly:!0};return(0,t.jsx)(me,{inputProps:Je,icon:Le,ariaLabel:j.Hf,mode:X?"readonly":fe?"disabled":"enabled",handleRemove:ve,handleClick:Ee})});function Me({min:ce,max:ee}){const h=`${ce} - ${ee}`;return(0,t.jsx)(D.E,{title:h,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",textStyle:"ui.xs.regular",textAlign:"left",color:"fg.neutral.secondary",flex:1,children:h})}var ae=e(45119);function ke(ce){const ee=ce*100;return(ee.toFixed(1).toString().split(".")[1]||"0")==="0"?ee.toFixed(0)+"%":ee.toFixed(1)+"%"}function ze(ce){return ce.includes(" others")}function ye(ce){return ce.includes("Missing")}function Ke({categories:ce,numberOfRows:ee}){return(0,t.jsx)(t.Fragment,{children:ce.map(h=>{const $=ke(h.count/ee);return(0,t.jsxs)(c.s,{textStyle:"ui.xs.regular",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",justifyContent:"space-between",children:[ye(h.name)?(0,t.jsx)(ae.B.span,{title:h.name,fontWeight:"ui.semibold",color:"fg.critical.primary",children:h.name}):ze(h.name)?(0,t.jsx)("span",{title:h.name,children:h.name}):(0,t.jsx)(ae.B.span,{title:h.name,color:"fg.accentOne.primary",fontWeight:500,maxWidth:"70%",overflow:"hidden",textOverflow:"ellipsis",children:h.name}),(0,t.jsx)(ae.B.span,{borderBottomWidth:"1px",borderBottomStyle:"dotted",borderBottomColor:"border.neutral.primary",margin:1,flex:1}),(0,t.jsx)(ae.B.span,{title:$,maxWidth:"70%",children:$})]},h.name)})})}function Ve({histogram:ce,nanCount:ee}){const h=(0,v.useMemo)(()=>{const ue=ce.map(Ee=>({x:Ee.bin_start,y:Ee.count,type:"regular"}));return ee>0&&ue.push({x:"Missing",y:ee,type:"missing"}),ue},[ce,ee]),$=30,X=h.map(ue=>ue.y).reduce((ue,Ee)=>Math.min(ue,Ee),0),fe=h.map(ue=>ue.y).reduce((ue,Ee)=>Math.max(ue,Ee),0),te=1,Le=(100-(h.length-1)*te)/h.length;return(0,t.jsx)(ae.B.div,{height:$+"px",position:"relative",minWidth:20,marginTop:1,"data-cy":o.dataTableColumnStatsHistogram,children:(0,t.jsx)(ae.B.svg,{position:"absolute",top:0,left:0,width:"100%",height:$+"px",children:h.map((ue,Ee)=>(0,t.jsx)(ae.B.rect,{width:`${Le}%`,height:(ue.y-X)/(fe-X)*$+1,x:`${(Le+te)*Ee}%`,y:$-(ue.y-X)/(fe-X)*$-1,fill:ue.type==="regular"?"fg.accentOne.primary":"fg.critical.primary",children:(0,t.jsx)("title",{children:ue.x})},ue.x))})})}var be=e(72819);function le(ce){return!ce.stats||!(0,be.x)(ce.numberOfRows)?null:(0,t.jsxs)("div",{"data-cy":o.dataTableColumnStats,children:[ce.stats.min!==void 0&&ce.stats.max!==void 0&&(0,t.jsx)(Me,{min:ce.stats.min,max:ce.stats.max}),ce.stats.histogram&&(0,t.jsx)(Ve,{histogram:ce.stats.histogram,nanCount:ce.stats.nan_count??0}),ce.stats.categories&&(0,t.jsx)(Ke,{categories:ce.stats.categories,numberOfRows:ce.numberOfRows})]})}const je=(0,O.p)(z.$,{variant:"ghost",colorScheme:"neutral",justifyContent:"flex-start",iconSpacing:2,fontWeight:"ui.regular"}),Qe=(0,v.memo)(function(ee){const{table:h,column:$}=ee,{track:X}=(0,p.u)(),fe=h.$.useRowCount(),te=h.$.useStateSlice(se=>se.isStatic),Le=h.$.useStateSlice(se=>se.isDisabled),ue=$.$.useIsSorted()!==!1,Ee=$.$.useCanSort(),ve=$.$.useName(),Je=$.$.useIsCustomName(),He=$.$.useIsTextWrapEnabled(),st=(0,A.K7)(),[ct,et]=(0,v.useState)(!1),[qe,dt]=(0,v.useState)(ve);function rt(se){ue&&$.getIsSorted()===se?($.clearSorting(),X("DataFrame sort removed",{type:se})):($.toggleSorting(se==="desc",!0),X("DataFrame sort added",{type:se}))}function vt(){I.i.info({message:"Copied to clipboard"}),(0,x.u)(ve)}function Ze(se){se.key==="Enter"&&qe?(se.preventDefault(),$.setName(qe),et(!1),X("Data table column name changed")):se.key==="Escape"&&(se.preventDefault(),et(!1))}const Fe=se=>(0,t.jsx)(i.I,{as:se,size:"md"}),ht=(0,t.jsx)(le,{stats:$.columnDef.meta?.dataStats,numberOfRows:fe}),ut=(0,t.jsxs)(c.s,{as:"span",maxWidth:"100%",gap:1,textStyle:"ui.xs.semibold",children:[(0,t.jsx)(D.E,{as:"span",minWidth:0,textOverflow:"ellipsis",overflowX:"hidden",flex:"none",maxWidth:"100%",children:ve}),(0,t.jsx)(D.E,{color:"fg.neutral.secondary",fontWeight:"ui.regular",as:"span",minWidth:0,textOverflow:"ellipsis",overflowX:"hidden",children:$.columnDef.meta?.dataType})]});return te?(0,t.jsxs)(c.s,{marginBlock:0,marginInline:1,height:"100%",direction:"column",justify:"space-between",overflow:"hidden",children:[(0,t.jsx)(P.az,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:ut}),ue&&(0,t.jsx)(P.az,{maxWidth:"180px",marginY:1,children:(0,t.jsx)(Ce,{...ee})}),ht]}):(0,t.jsxs)(c.s,{height:"100%",direction:"column",justify:"space-between",overflow:"hidden",children:[(0,t.jsxs)(c.s,{flexDirection:"column",alignItems:"flex-start",children:[ct?(0,t.jsx)(R.p,{autoFocus:!0,value:qe,size:"xxs",onKeyDown:Ze,onChange:se=>dt(se.target.value),onBlur:()=>et(!1),onFocus:se=>se.target.select()}):(0,t.jsx)(n.A,{isLazy:!0,placement:"bottom-start",gutter:1,returnFocusOnClose:!1,children:function({onClose:w}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.W,{children:(0,t.jsxs)(k.V,{tooltipProps:{label:ve},alignSelf:"stretch",size:"xs",variant:"ghost",colorScheme:"neutral",paddingX:1,"data-cy":o.dataTableColumnHeader,justifyContent:"flex-start",pointerEvents:st?"none":"auto",position:"relative",children:[(0,t.jsx)(P.az,{position:"absolute",inset:0}),ut]})}),(0,t.jsx)(Q.Z,{children:(0,t.jsxs)(E.h,{padding:1,children:[(0,t.jsx)(je,{isDisabled:!Ee,onClick:()=>{rt("asc"),w()},leftIcon:Fe(a.E),children:j.tF}),(0,t.jsx)(je,{isDisabled:!Ee,onClick:()=>{rt("desc"),w()},leftIcon:Fe(m.e),children:j.To}),ee.renderCustomFilterItem?.({onCloseRequest:w}),(0,t.jsx)(B.c,{borderColor:"border.neutral.secondary",marginBlock:1}),(0,t.jsx)(je,{isDisabled:Le,onClick:()=>{et(!0),dt(ve)},leftIcon:Fe(C),children:j.Cb}),(0,t.jsx)(je,{onClick:()=>{vt(),w()},leftIcon:Fe(u.t),children:j.Vn}),Je&&(0,t.jsx)(je,{isDisabled:Le,onClick:()=>{$.resetName(),X("Data table column name reset"),w()},leftIcon:Fe(g.r),children:j.OQ}),(0,t.jsx)(je,{isDisabled:Le,onClick:()=>{$.toggleVisibility(!1),X("Data table column hidden"),w()},leftIcon:Fe(s.G),children:j.Ab}),(0,t.jsx)(B.c,{borderColor:"border.neutral.secondary",marginBlock:1}),(0,t.jsx)(je,{isDisabled:Le,onClick:()=>{$.setIsTextWrapEnabled(!He),X(He?"Data table text wrap disabled":"Data table text wrap enabled"),w()},leftIcon:Fe(l),rightIcon:(0,t.jsx)(M.d,{isChecked:He,isDisabled:Le,size:"sm"}),children:(0,t.jsx)(D.E,{as:"span",flex:"auto",textAlign:"start",children:j.Jm})})]})})]})}}),ue&&(0,t.jsx)(P.az,{maxWidth:"180px",margin:1,children:(0,t.jsx)(Ce,{...ee})})]}),(0,t.jsx)(P.az,{marginBlock:0,marginInline:1,children:ht})]})})},72819:(F,d,e)=>{e.d(d,{x:()=>t});function t(n){return n>=9}},15690:(F,d,e)=>{e.d(d,{H:()=>P});var t=e(66379),n=e(45470),o=e(42172),i=e(50214),a=e(21305),m=e(14821),r=e(31576),C=e(7536),u=e(74111),g=e(76653),s=e(90933),l=e(63998),x=e(47433),O=e(20485);const z=(0,l.memo)(function({column:y}){const{table:k,track:Q}=(0,x.u)(),E=k.$.useStateSlice(v=>v.isStatic),B=k.$.useStateSlice(v=>v.isDisabled),M=y.$.useName();return(0,n.jsx)(a.D,{isDisabled:B||E,_hover:B||E?{}:void 0,icon:(0,n.jsx)(o.I,{as:i.G}),onClick:()=>{y.toggleVisibility(!0),Q("Data table column visibility restored")},children:M})}),I=(0,l.memo)(function(){const{table:y}=(0,x.u)(),k=y.$.useStateSlice(v=>v.columnVisibility),Q=y.$.useStateSlice(v=>v.isStatic),E=y.$.useStateSlice(v=>v.isDisabled),B=(0,l.useMemo)(()=>(0,O.km)(k),[k]);return B.length!==0?(0,n.jsxs)(m.W,{placement:"right-start",children:[(0,n.jsx)(r.I,{as:C.K,variant:"ghost",colorScheme:E||Q?"neutral":"accentOne","aria-label":"Hidden columns",marginTop:1,height:5,minHeight:5,icon:(0,n.jsx)(o.I,{as:i.G,size:"md",colorScheme:"accentOne"})}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(g.c,{maxWidth:"300px",children:(0,n.jsx)(s.r,{title:"Hidden columns",children:B.map(v=>{const p=y.getColumn(v);return p?(0,n.jsx)(z,{column:p},v):null})})})})]}):null}),c=new Map,D=R=>{const y=c.get(R);if(y)return y;const k=Q=>Q[R];return c.set(R,k),k};function P(R){return R.map(y=>y.name===t.RJ?{accessorKey:y.name,id:y.name,meta:{dataType:y.dtype},size:t.Zw,header:I}:{accessorFn:D(y.name),id:String(y.name),meta:{dataType:y.dtype,dataStats:y.stats}})}},92504:(F,d,e)=>{e.d(d,{$:()=>o});var t=e(66379);function n(i){const a=t.mf,m=1e3;let r=0;for(;;){if(r>m)throw new Error("Unable to find an unused name");const C=r<1?a:`${a} ${r}`;if(i.findIndex(u=>u===C)<0)return C;r=r+1}}function o(i,a){const m=n(i.map(g=>String(g.name))),r="",C=i.map(g=>g.name===r?{...g,name:m}:g),u=a.map(g=>r in g?{...g,[m]:g[r]}:g);return[C,u]}},39060:(F,d,e)=>{e.d(d,{Ab:()=>l,Cb:()=>x,Hf:()=>I,Jm:()=>g,Nc:()=>o,OQ:()=>O,R1:()=>r,RI:()=>n,To:()=>u,Vn:()=>s,aV:()=>z,aW:()=>i,kL:()=>D,mL:()=>t,o7:()=>m,ri:()=>a,tF:()=>C,wy:()=>c});const t="Go to first page",n="Go to previous page",o="Go to next page",i="Go to last page",a="Page",m="Export",r="Select page size",C="Sort ascending",u="Sort descending",g="Wrap cells",s="Copy name to clipboard",l="Hide column",x="Rename",O="Reset name",z="Remove",I="Sort",c="Sorted ascending",D="Sorted descending"},20485:(F,d,e)=>{e.d(d,{$_:()=>s,F6:()=>k,IQ:()=>C,Ko:()=>I,NW:()=>E,Rw:()=>Q,c4:()=>u,cR:()=>l,h6:()=>O,iK:()=>y,jK:()=>r,jV:()=>g,k6:()=>B,km:()=>P,pY:()=>x,up:()=>D,vF:()=>z,vr:()=>c,yI:()=>R});var t=e(66379),n=e(59958),o=e(31260),i=e.n(o),a=e(6254),m=e.n(a);function r(M){return M}function C(M){return M&&M!==0?M:Number(t.yQ)}function u(M){return M}function g(M,v){return Math.min(M??t.fs,v-1)}function s(M,v){return Math.ceil(M/C(v))}function l(M){return M.map(v=>({id:v.id,type:v.desc?"desc":"asc"}))}function x(M){return(M??t.Y2).map(v=>({id:v.id,desc:v.type==="desc"}))}function O(M){return Object.entries(M).map(([v,p])=>{const A=i()(p,V=>V??"<NA>"),j=A[t.RJ]??v;return{[t.RJ]:j,...A}})}function z(M,v){const p=t.om,A=v&&M.some(V=>V.columnDef.meta?.dataStats)?t._l:0,j=M.some(V=>V.getIsSorted())?t.zc:0;return p+A+j}function I(M,v,p){for(const A of M)if(A.id===p){for(const j of A.getVisibleCells())if(j.column.id===v)return j.getNormalizedValue();return}}function c(M){const{dataType:v}=M.column.columnDef.meta??{dataType:null};return v&&(0,n.o3)(v)?"right":"left"}function D(M){return[t._U,...M].join("-")}function P(M){return Object.entries(M).filter(([v,p])=>!p).map(([v])=>v)}function R(M){return M?Object.fromEntries(M.map(v=>[v,!1])):{}}function y(M){return M?Object.fromEntries(M.map(({columnName:v,displayName:p})=>[v,p])):{}}function k(M){return Object.entries(M).map(([v,p])=>({columnName:v,displayName:p}))}function Q(M,v){return Array.isArray(M)?M.filter(p=>v.includes(p)):m()(M,(p,A)=>v.includes(A))}function E(M){return M.filter(v=>![t.RJ,t.D1].includes(v))}function B(M){return[t.RJ,...M,t.D1]}},35811:(F,d,e)=>{e.d(d,{Q3:()=>C,WZ:()=>i,sB:()=>a});var t=e(25625),n=e(19550),o=e(72947);function i(u){switch(u){case"default":return{};case"defaultBold":return{fontWeight:"ui.semibold"};case"positive":return{backgroundColor:"bg.positive.tertiary"};case"positiveBold":return{fontWeight:"ui.semibold",backgroundColor:"bg.positive.tertiary"};case"positiveProminentBold":return{fontWeight:"ui.semibold",backgroundColor:"bg.positive.secondary"};case"attention":return{backgroundColor:"bg.attention.tertiary"};case"attentionBold":return{fontWeight:"ui.semibold",backgroundColor:"bg.attention.tertiary"};case"attentionProminentBold":return{fontWeight:"ui.semibold",backgroundColor:"bg.attention.secondary"};case"critical":return{backgroundColor:"bg.critical.tertiary"};case"criticalBold":return{fontWeight:"ui.semibold",backgroundColor:"bg.critical.tertiary"};case"criticalProminentBold":return{fontWeight:"ui.semibold",backgroundColor:"bg.critical.secondary"};default:(0,n.x)(u)}}function a(u){switch(u){case"defaultToPositive":return{min:"bg.neutral.primary",max:"bg.positive.secondary"};case"defaultToAttention":return{min:"bg.neutral.primary",max:"bg.attention.secondary"};case"positiveToDefault":return{min:"bg.positive.secondary",max:"bg.neutral.primary"};case"defaultToCritical":return{min:"bg.neutral.primary",max:"bg.critical.secondary"};case"attentionToDefault":return{min:"bg.attention.secondary",max:"bg.neutral.primary"};case"criticalToDefault":return{min:"bg.critical.secondary",max:"bg.neutral.primary"};case"criticalToDefaultToPositive":return{min:"bg.critical.secondary",mid:"bg.neutral.primary",max:"bg.positive.secondary"};case"criticalToAttentionToPositive":return{min:"bg.critical.secondary",mid:"bg.attention.secondary",max:"bg.positive.secondary"};case"positiveToDefaultToCritical":return{min:"bg.positive.secondary",mid:"bg.neutral.primary",max:"bg.critical.secondary"};case"positiveToAttentionToCritical":return{min:"bg.positive.secondary",mid:"bg.attention.secondary",max:"bg.critical.secondary"};default:(0,n.x)(u)}}function m(u,g,s){return g==="quantitative"?u.quantitative?.[s]??null:g==="temporal"?u.temporal?.[s].getTime()??null:null}const r=(()=>{const u=(s,l)=>s.length!==l.length?!1:s.every((x,O)=>Object.is(x,l[O])),g=[];return s=>{const l=g.find(O=>u(O.colors,s));if(l)return l.scale;const x=o.A.scale(s);return g.push({colors:s,scale:x}),g.length>1e3&&g.splice(0,500),x}})();function C(u,g,s,l){const x=a(u.scaleName),O=[x?.min,x?.mid,x?.max].filter(Boolean),z="invalid",I=O.map(B=>z),c=(0,t.gf)("colors",O,I)(g),D=c.some(B=>B===z),P=D?null:r(c),R=l==="temporal"?new Date(s).getTime():Number(s),y=m(u.resolvedValue,l,"min"),k=m(u.resolvedValue,l,"max"),E=!Number.isNaN(R)&&y!==null&&k!==null?(R-y)/(k-y):null;if((l==="quantitative"||l==="temporal")&&E!==null&&P!==null)return{backgroundColor:P(E).hex()};if(l==="bool"&&c.length>=2&&!D){if(s==="False")return{backgroundColor:c[0]};if(s==="True")return{backgroundColor:c[c.length-1]}}return{}}},5329:(F,d,e)=>{e.d(d,{M:()=>I});var t=e(45470),n=e(63998),o=e(33754),i=e(50779),a=e(16927),m=e(81550),r=e(95149),C=e(59998),u=e(92231),g=e(99121),s=e(42971),l=e(37189),x=e(64592),O=e(52187);const z=(0,n.memo)(function(D){const{onRestoreVariablesRequest:P,onRunNotebookRequest:R}=D,y=D.runtimeStatus==="preparing",k=D.runtimeStatus!=="ready",E=`${(0,u.DP)().colors.bg.neutral.primary}${g.A[90]}`;return(0,t.jsxs)(s.s,{position:"absolute",inset:0,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,padding:2,display:k?"flex":"none",backgroundColor:E,backdropFilter:"blur(4px)",textAlign:"center",children:[(0,t.jsxs)(s.s,{flexDirection:"column",gap:1,children:[(0,t.jsx)(l.E,{textStyle:"ui.sm.semibold",children:"Machine offline"}),(0,t.jsx)(l.E,{textStyle:"ui.sm.regular",children:"Run the notebook to make changes."})]}),(0,t.jsxs)(s.s,{flexWrap:"wrap",gap:1,justifyContent:"center",children:[(0,t.jsx)(x.m,{hidden:!y,label:"Waiting for the machine...",children:(0,t.jsx)(O.$,{isLoading:y,loadingText:"Run notebook",size:"xxs",onClick:R,children:"Run notebook"})}),D.isSessionPersisted&&(0,t.jsx)(x.m,{hidden:!y,label:"Waiting for the machine...",children:(0,t.jsx)(O.$,{variant:"outline",isLoading:y,loadingText:"Restore variables",colorScheme:"neutral",size:"xxs",onClick:P,children:"Restore variables"})})]})]})}),I=(0,n.memo)(function({eventTrackingSource:D,onRestoreVariables:P,onRunNotebook:R}){const{persistedSessionTimestamp:y}=(0,i.g)(),k=(0,o.gf)(),{projectTrack:Q}=(0,a.t4)(),E=(0,r.WA)(),{hardwareStatus:B,kernelStatus:M}=(0,m.p)(),v=(0,C.B)({hardwareStatus:B,kernelStatus:M}),p=(0,n.useCallback)(()=>{Q.track("Restore variables clicked",{workspaceId:E,source:"status bar",button:D}),k.notebookApi.restoreSession(),P?.()},[Q,E,D,k.notebookApi,P]),A=(0,n.useCallback)(()=>{k.notebookApi.executeAll(),R?.()},[k.notebookApi,R]);return(0,t.jsx)(z,{isSessionPersisted:!!y,runtimeStatus:v,onRestoreVariablesRequest:p,onRunNotebookRequest:A})})},16262:(F,d,e)=>{e.d(d,{L:()=>i});var t=e(74381),n=e.n(t),o=e(63998);function i(a){const{incomingValue:m,applyIncomingValue:r,debounce:C=null,onOutgoingValue:u}=a,g=(0,o.useRef)(!0),s=(0,o.useRef)(!0),[l,x]=(0,o.useState)({value:m,initial:!0,synced:!0}),O=(0,o.useCallback)(c=>{g.current=!C,s.current=!1,x(({value:D})=>({value:typeof c=="function"?c(D):c,initial:!1,synced:!1}))},[C]);(0,o.useEffect)(()=>{x(c=>c.initial&&c.value===m||!g.current?c:(g.current=!0,{value:r(m,c.value),initial:!1,synced:!0}))},[m,r]);const z=(0,o.useMemo)(()=>C?n()((...c)=>{g.current=!0,u?.(...c)},C,{leading:!0}):u,[u,C]),I=(0,o.useRef)(l.value);return(0,o.useEffect)(()=>{const c=I.current;I.current=l.value,!l.synced&&!s.current&&(s.current=!0,z?.(l.value,c))},[l.value,l.synced,z]),(0,o.useEffect)(()=>()=>{z&&"flush"in z&&z.flush()},[z]),[l.value,O]}},55561:(F,d,e)=>{e.d(d,{fl:()=>a,iG:()=>m,uP:()=>i});var t=e(45470),n=e(63998);const o=(0,n.createContext)(null);function i(r){const[C,u]=(0,n.useState)(!1),g=(0,n.useMemo)(()=>({isFullWidth:C,setIsFullWidth:u}),[C,u]);return(0,t.jsx)(o.Provider,{value:g,children:r.children})}function a(){const r=(0,n.useContext)(o);if(!r)throw new Error("useNotebookFullWidthControl() must be used within a <NotebookFullWidthProvider>");return r}function m(){const r=(0,n.useContext)(o);if(!r)throw new Error("useNotebookFullWidth() must be used within a <NotebookFullWidthProvider>");return r.isFullWidth}},50779:(F,d,e)=>{e.d(d,{O:()=>s,g:()=>g});var t=e(45470),n=e(12493),o=e(63998),i=e(97020),a=e(40177),m=e(13945),r=e(29740),C=e(55561);const u=(0,o.createContext)(null);u.displayName="NotebookMetadataContext";function g(){const l=(0,o.useContext)(u);if(!l)throw new Error("useNotebookMetadata() can only be used inside of <NotebookMetadataProvider />");return l}function s(l){const x=(0,i.Zi)(),O=(0,a.Vm)(x);if(!O)throw new Error("Notebook element not found");const z=["busy","idle","stopping"].includes(O.kernelState?.status??"missing"),I=(0,r.f)({workingDirectory:O.workingDirectory,isFullWidth:!!O.editorMetadata.deepnote_full_width,persistedSessionTimestamp:O.persistedSessionTimestamp,appSettings:(0,n.H)(O.appMetadata),kernelState:O.kernelState,activeVariables:z?O.variables:{},variables:O.variables,executionMode:O.executionMode,isModule:O.isModule}),{setIsFullWidth:c}=(0,C.fl)(),{setFocusedNotebookVariables:D}=(0,m.ic)();return(0,o.useEffect)(()=>{c(I.isFullWidth)},[I.isFullWidth,c]),(0,o.useEffect)(()=>(D(I.activeVariables),()=>{D({})}),[I.activeVariables,D]),(0,t.jsx)(u.Provider,{value:I,children:l.children})}},24922:(F,d,e)=>{e.d(d,{CL:()=>O,K1:()=>z});var t=e(45470),n=e(94270),o=e(87435),i=e(63998),a=e(24370),m=e(29740);function r(I,c){(0,i.useEffect)(function(){if(c.skip)return;let P=null,R=!1;const y=async()=>{try{await Promise.race([I(),c.requestTimeoutMs?new Promise(k=>setTimeout(k,c.requestTimeoutMs)):null])}catch{console.debug("Failed to periodically fetch hardware state")}finally{R||(P=setTimeout(()=>{y()},c.pollIntervalMs))}};return y(),()=>{R=!0,P&&clearTimeout(P)}},[I,c.pollIntervalMs,c.requestTimeoutMs,c.skip])}var C=e(32227);const u=(0,n.J1)`
  query GetProjectHardwareState($projectId: String!) {
    projectById(id: $projectId) {
      ... on Project {
        hardware_state {
          hardware_status
          executor_status
          initialized
        }
        hardware_message {
          message
          severity
          documentationUrl
          duration
          actionable
        }
      }
    }
  }
`,g=(0,n.J1)`
  subscription WatchProjectHardwareState($projectId: String!) {
    projectHardwareStateUpdate(projectId: $projectId) {
      projectId
    }
  }
`,s=(0,n.J1)`
  subscription WatchProjectHardwareMessage($projectId: String!) {
    projectHardwareMessageUpdate(projectId: $projectId) {
      message
      documentationUrl
      severity
      duration
      actionable
    }
  }
`,l=(0,i.createContext)(null);function x(I){const c={hardwareState:I.hardwareState};return jsx(l.Provider,{value:c,children:I.children})}function O(I){const[c,D]=(0,i.useState)(!1),[P,R]=(0,i.useState)(null),[y,k]=(0,i.useState)(null),Q=(0,o.m)(),E=(0,i.useCallback)(async function(){const{data:A,error:j}=await Q.query({query:u,variables:{projectId:I.projectId},fetchPolicy:"network-only"});if(j)throw new Error(`Received error while fetching hardware state: ${j.message}`,{cause:j});k(A)},[Q,I.projectId]);(0,a.i)(g,{variables:{projectId:I.projectId??""},onData:()=>{console.log("Project hardware state updated"),E().catch(()=>{console.debug("Failed to fetch hardware state update")})}}),(0,a.i)(s,{variables:{projectId:I.projectId??""},onData:({data:p})=>{const A=p?.data?.projectHardwareMessageUpdate;A&&R(A)}});const B=y?.projectById,M=(0,m.f)({hardwareState:{hardware_status:"missing",executor_status:"missing",initialized:!1,hardware_message:null,...B&&"hardware_state"in B?{...B.hardware_state,hardware_message:P||B.hardware_message}:{}}}),v=(0,C.CU)();return(0,i.useEffect)(function(){v.dispatch({type:"UPDATE_HARDWARE_STATUS",hardwareStatus:M.hardwareState.hardware_status})},[M.hardwareState.hardware_status,v]),r(E,{pollIntervalMs:c?1e3:1e4,requestTimeoutMs:1e4}),(0,i.useEffect)(function(){console.log("Hardware state updated",M.hardwareState.hardware_status),D(M.hardwareState.hardware_status==="starting"||M.hardwareState.hardware_status==="ready"&&!M.hardwareState.initialized||M.hardwareState.hardware_status==="stopping")},[M.hardwareState.hardware_status,M.hardwareState.initialized]),(0,t.jsx)(l.Provider,{value:M,children:I.children})}const z=()=>{const I=(0,i.useContext)(l);if(!I)throw new Error("useProjectHardwareState must be used within a ProjectHardwareStateProvider");return I.hardwareState}},85662:(F,d,e)=>{var t=e(45470),n=e(92231),o=e(17584),i=e(76219);(0,o.H)(document.getElementById("content-root")).render((0,t.jsx)(n.NP,{children:(0,t.jsx)(m,{})}));function m(){const r=window.__embed_data;return(0,t.jsx)(i.A,{stretchMode:!0,...r})}},81727:(F,d,e)=>{e.d(d,{h:()=>n});var t=e(17829);const n=function(i){return(0,t.du)(i.workspaceId)?i.children:i.fallback}},79695:(F,d,e)=>{e.d(d,{_:()=>t});const t={rawContent:"",textContent:"",mentions:{databaseTables:[],notebookVariables:[]}}},47275:(F,d,e)=>{e.d(d,{B:()=>a});var t=e(51881),n=e(63998),o=e(50779);function i(m){return Object.values(m).map(r=>{const C=r.varColumns?.map((g,s)=>({name:String(g),columnType:r.varColumnTypes?.[s]}));return{name:r.varName,type:r.varType,numElements:r.numElements??void 0,columns:C}})}function a(){const{activeVariables:m}=(0,o.g)();return{notebookVariablesForAi:(0,n.useMemo)(()=>{try{return i(m)}catch(C){return(0,t.H)(new Error(`Failed to create notebook variables for AI: ${C}`),"error"),[]}},[m])}}},59589:(F,d,e)=>{e.d(d,{U:()=>t});function t(n){return n==="sql"||n==="code"}},88844:(F,d,e)=>{e.d(d,{yB:()=>ee,Z1:()=>ce});var t=e(45470),n=e(4249),o=e(63998),i=e(65878),a=e(34597),m=e(92872),r=e(14967),C=e(47275);function u(h){return h.message&&h.message!=="undefined"?h.message:"We couldn\u2019t find the exact issue. It could\u2019ve been a network error \u2014\xA0please double check your connection."}var g=e(32204),s=e(58142);const l=s.Le.faster,x={seconds:l,miliseconds:l*1e3},O=s.Le.faster,z={seconds:O,miliseconds:O*1e3};var I=e(38038),c=e(32912),D=e(37112),P=e(33754),R=e(16927);function y(h){const{notebookApi:$}=(0,P.gf)(),{blockTransforms:X}=(0,R.t4)(),fe=(0,o.useCallback)(()=>{const Ee=X.getBlockById(h);if(!Ee){c.i.error({message:"Deepnote AI couldn\u2019t find the target block. Please try again"});return}return(0,D.__)(Ee.children).source},[h,X]),te=(0,o.useCallback)((Ee,ve)=>{X.setVoidBlockSource(h,(0,I.Jn)(Ee),{isMergeable:ve.isMergeable})},[h,X]),Le=(0,o.useCallback)(async({executionMode:Ee})=>{await $.executeCell(h,{selectBelow:!1,executionMode:Ee})},[h,$]),ue=(0,o.useCallback)(Ee=>{$.insertCellByType("text-cell-p","below",{source:Ee,button:"ai"})},[$]);return{getBlockContents:fe,updateBlock:te,runBlock:Le,addTextBlock:ue}}var k=e(59746);const Q=["idle","active.ready","active.streaming","active.review","active.error","error"];function E(h){return Q.includes(h)}function B(h){const $=typeof h.value=="string"?h.value:(0,k.I)(h.value).join(" ");return E($)?$:"error"}function M(h){const $=B(h),X=(0,o.useRef)($);return h.value!=="closing"&&$!==X.current&&(X.current=$),X.current}var v=e(94270),p=e(19550),A=e(24370);function j(h,$){const[X,fe]=(0,o.useState)(!0),te=(0,o.useRef)(),Le=(0,o.useRef)(),ue=(0,o.useRef)(),Ee=(0,o.useRef)(),ve=(0,o.useRef)($),Je=(0,o.useCallback)(({onConnect:qe,onData:dt,onError:rt,onComplete:vt,variables:Ze})=>{te.current=qe,Le.current=dt,ue.current=rt,Ee.current=vt,ve.current=Ze,fe(!1)},[]),He=(0,o.useCallback)(()=>{X||fe(!0)},[X]),st=(0,o.useCallback)(()=>{Ee.current?.(),He()},[He]),ct=(0,o.useCallback)(qe=>{ue.current?.(qe),He()},[He]),et=(0,A.i)(h,{skip:X,variables:ve.current,onConnect:te.current,onData:Le.current,onComplete:st,onError:ct});return{startStream:Je,stopStream:He,status:et}}var V=e(664),oe=e(72979),U=e(29909);function Z(h){const{data:{data:$}}=h;if(!$)return null;const X=$.blockAiEvent;return{type:X.type,content:X.content}}var me=e(14651);function Ce(){try{if(!(0,me.S)()&&window?.localStorage.getItem("ai-sql-logging-enabled")==="true")return!0}catch(h){console.warn(`During conditional debugging, there was error: ${h instanceof Error?h.message:"Unknown reason"}`)}return!1}const Me=(0,v.J1)`
  subscription WatchBlockAiEvents(
    $messages: [BlockAiMessage!]!
    $blockType: BlockAiBlockType!
    $blockId: String
    $projectId: String!
    $notebookId: String!
    $notebookVariables: [NotebookVariableInput!]!
  ) {
    blockAiEvent(
      messages: $messages
      blockType: $blockType
      blockId: $blockId
      projectId: $projectId
      notebookId: $notebookId
      notebookVariables: $notebookVariables
    ) {
      type
      content
    }
  }
`;function ae(h){const{getBlockContents:$,updateBlock:X}=y(h.blockId),{projectId:fe}=(0,oe.M)(),{projectTrack:te}=(0,R.t4)(),{refetch:Le}=(0,V.d)("LIMIT_WORKSPACE_AI_USAGE"),ue=(0,U.U)(h.blockSqlIntegrationId),Ee=(0,o.useRef)(null),ve=[{command:"edit",input:{promptData:{textContent:"",mentions:{databaseTables:[],notebookVariables:[]}},blockContents:"",errorMessage:null}}],Je={blockId:h.blockId,blockType:h.blockType,notebookVariables:h.notebookVariablesForAi,projectId:fe,notebookId:h.notebookId,messages:ve},{startStream:He,stopStream:st}=j(Me,Je),ct=(0,o.useCallback)((se,w,re,xe,Ye)=>{xe?.(w);const nt=Z(w);if(nt?.content)switch(nt.type){case"debugging":Ce()&&console.log(nt.content);break;case"content":{if(re?.(nt.content),se!=="explain"){const mt=(Ee.current??"")+nt.content;Ee.current=mt,X(mt,{isMergeable:Ye.isMergeable})}break}default:(0,p.x)(nt.type)}},[X]),et=(0,o.useCallback)((se,w,re)=>{te.track("Block AI response finished",{blockId:h.blockId,blockType:h.blockType,command:se,finishStatus:re,durationInSeconds:w,codeCharacterLength:Ee.current?.length}),Le()},[te,h.blockId,h.blockType,Le]),qe=(0,o.useCallback)((se,w,re,xe,Ye,nt)=>{const ft=$();if(ft===void 0)return;const mt=h.notebookVariablesForAi.filter(xt=>w.mentions.notebookVariables.every(It=>xt.name!==It.name&&xt.type!==It.type)),Ct={blockType:h.blockType,blockId:h.blockId,projectId:fe,notebookId:h.notebookId,notebookVariables:mt,messages:[...re,{command:se,input:{promptData:w,blockContents:ft,errorMessage:Ye??null}}]};te.track("Block AI called",{blockId:h.blockId,command:se,blockType:h.blockType,numberOfIterations:re.length+1,iterationRank:nt,sqlBlockIntegrationType:ue?.type,...w.mentions.databaseTables.length>0&&{databaseTableMentions:w.mentions.databaseTables.length},...w.mentions.notebookVariables.length>0&&{notebookVariableMentions:w.mentions.notebookVariables.length}}),h.blockType==="sql"&&te.track("SQL block AI called",{blockId:h.blockId,command:se,numberOfIterations:re.length+1,iterationRank:nt,sqlBlockIntegrationType:ue?.type});const St=Date.now();He({...xe,onComplete(){const xt=(Date.now()-St)/1e3;et(se,xt,"success"),xe.onComplete?.()},onError(xt){const It=(Date.now()-St)/1e3;et(se,It,"internal_error"),xe.onError?.(xt)},variables:Ct})},[$,h.notebookVariablesForAi,h.blockType,h.blockId,h.notebookId,fe,te,ue?.type,He,et]),dt=(0,o.useCallback)(({command:se,promptData:w,previousMessages:re,handlers:xe,blockErrorMessage:Ye,iterationRank:nt})=>{Ee.current=null;let ft=!1;qe(se,w,re,{...xe,onData(mt){const Ct=mt.data.data?.blockAiEvent.type==="content",St=!ft&&Ct;ct(se,mt,xe.onContentData,xe.onData??null,{isMergeable:!St}),St&&(ft=!0)}},Ye,nt)},[ct,qe]),rt=(0,o.useCallback)(()=>{st()},[st]),vt=(0,o.useCallback)(({command:se,iterationRank:w,codeCharacterLength:re,numberOfIterations:xe})=>{Ee.current&&te.track("Block AI response accepted",{blockId:h.blockId,blockType:h.blockType,command:se,iterationRank:w,codeCharacterLength:re,numberOfIterations:xe})},[h.blockId,h.blockType,te]),Ze=(0,o.useCallback)(({iterationRank:se,command:w,numberOfIterations:re,characterLength:xe})=>{te.track("Block AI response rejected",{blockId:h.blockId,blockType:h.blockType,command:w,numberOfIterations:re,characterLength:xe,iterationRank:se})},[h.blockId,h.blockType,te]),Fe=(0,o.useCallback)(({iterationRank:se,characterLength:w,numberOfIterations:re})=>{te.track("Block AI explanation pasted",{blockId:h.blockId,blockType:h.blockType,command:"explain",iterationRank:se,numberOfIterations:re,characterLength:w})},[h.blockId,h.blockType,te]),ht=(0,o.useCallback)(({command:se,iterationRank:w,numberOfIterations:re})=>{te.track("Block AI response cancelled",{blockId:h.blockId,blockType:h.blockType,command:se,iterationRank:w,numberOfIterations:re})},[h.blockId,h.blockType,te]),ut=(0,o.useCallback)(({command:se,iterationRank:w,characterLength:re,numberOfIterations:xe})=>{te.track("Block AI result ran",{blockId:h.blockId,blockType:h.blockType,command:se,iterationRank:w,characterLength:re,numberOfIterations:xe})},[h.blockId,h.blockType,te]);return{startStream:dt,stopStream:rt,trackAcceptResult:vt,trackRejectResult:Ze,trackExplanationAddedAsBlock:Fe,trackCancelGenerate:ht,trackRunBlock:ut}}var ke=e(79695);const ze=h=>h.type==="START_GENERATING_FIX"?{rawContent:"Fix this code",textContent:"Fix this code",mentions:{databaseTables:[],notebookVariables:[]}}:h.type==="START_GENERATING_EXPLAIN"?{rawContent:"Explain this code",textContent:"Explain this code",mentions:{databaseTables:[],notebookVariables:[]}}:h.type==="START_GENERATING_EDIT"?h.promptData:ke._,ye=h=>h.type==="START_GENERATING_FIX"?"fix":h.type==="START_GENERATING_EXPLAIN"?"explain":(h.type==="START_GENERATING_EDIT","edit"),Ke=h=>{const $=h[h.length-1];return $?$.command:"edit"},Ve=(h,$)=>{const X=h.findIndex(fe=>fe.id===$);if(X)return X+1};function be(h){const $=h.slice(0,-1);return $.length===0?[]:$.map(({command:X,input:fe,response:te})=>({command:X,input:{blockContents:fe.blockContents,errorMessage:fe.errorMessage,promptData:{mentions:fe.promptData.mentions,textContent:fe.promptData.textContent}},response:te}))}const le={status:"idle",isActive:!1,messages:[],selectedMessageId:null,originalBlockContents:null,aiErrorMessage:null,onOpenRequest:()=>{},onCloseRequest:()=>{},onStartGeneratingExplainRequest:()=>{},onStartGeneratingEditRequest:()=>{},onStartGeneratingFixRequest:()=>{},onStopGeneratingRequest:()=>{},onDiscardChangesRequest:()=>{},onRunCodeRequest:()=>{},onAddExplanationBlockRequest:()=>{},onKeepChangesRequest:()=>{},onSelectMessageRequest:()=>{},onSetBlockErrorMessageRequest:()=>{}},je=(0,o.createContext)(le);je.displayName="SingleBlockAiContext";const Qe=(0,a.Op)({types:{},id:"single-block-ai",initial:"idle",context:{originalBlockContents:null,aiErrorMessage:null,blockErrorMessage:null,messages:[],selectedMessageId:null},states:{idle:{entry:"clearContextData"},active:{initial:"ready",states:{ready:{},streaming:{invoke:{src:"generationRequest",input:({event:h,context:$})=>({command:ye(h),promptData:ze(h),blockErrorMessage:$.blockErrorMessage??void 0,previousMessages:be($.messages),iterationRank:Ve($.messages,$.selectedMessageId)}),onDone:"review",onError:{target:"error",actions:{type:"setAiErrorMessage",params:({event:{error:h}})=>({aiErrorMessage:typeof h=="string"?h:null})}}},entry:[{type:"addNewMessageToHistory",params:({event:h})=>({promptData:ze(h),command:ye(h)})}],on:{DATA_CHUNK:{actions:{type:"updateMessageResponse",params:({event:{newChunk:h}})=>({newChunk:h})}},STOP_GENERATING:[{target:"review",actions:[{type:"trackCancelGenerate",params:({context:h})=>({command:Ke(h.messages)})}]}]},exit:["stopGenerating","setLastMessageFinishedStreaming"]},review:{on:{RUN_CODE:{actions:["runBlock",{type:"trackRunBlock",params:({context:h})=>({command:Ke(h.messages)})}]}}},error:{}},on:{START_GENERATING_EDIT:[{target:".streaming",actions:"setOriginalBlockContents",guard:"isMessageHistoryEmpty"},{target:".streaming"}],KEEP_CHANGES:{target:"closing",actions:{type:"trackAcceptResult",params:({context:h})=>({command:Ke(h.messages)})}},ADD_EXPLANATION_BLOCK:{target:"closing",actions:["onAddExplanationBlockRequest",{type:"trackExplanationAddedAsBlock",params:({context:{messages:h,selectedMessageId:$}})=>({explanation:h.find(({id:X})=>X===$)?.response??""})}]}},onDone:"closing"},closing:{after:{[x.miliseconds+100]:"idle"}}},on:{CLOSE:{target:".closing",actions:["clearContextData"]},DISCARD_CHANGES:{target:".closing",actions:[{type:"trackRejectResult",params:({context:h})=>({command:Ke(h.messages)})},"restoreOriginalBlockContents","clearContextData"]},OPEN:".active",START_GENERATING_FIX:[{target:".active.streaming",actions:"setOriginalBlockContents",guard:"isMessageHistoryEmpty"},{target:".active.streaming"}],START_GENERATING_EXPLAIN:[{target:".active.streaming",actions:"setOriginalBlockContents",guard:"isMessageHistoryEmpty"},{target:".active.streaming"}],SELECT_MESSAGE:{actions:[{type:"setSelectedMessageId",params:({event:{id:h}})=>({id:h})},{type:"updateBlockContents",params:({context:{messages:h},event:{id:$}})=>{const X=h.find(({id:fe})=>fe===$);return!X||X.command==="explain"?{code:null}:{code:X.response}}}]},SET_BLOCK_ERROR_MESSAGE:{actions:[{type:"onSetBlockErrorMessageRequest",params:({event:{blockErrorMessage:h}})=>({blockErrorMessage:h})}]}}}).provide({actions:{setAiErrorMessage:(0,m.a)({aiErrorMessage:(h,$)=>$.aiErrorMessage}),onSetBlockErrorMessageRequest:(0,m.a)({blockErrorMessage:(h,$)=>$.blockErrorMessage}),setSelectedMessageId:(0,m.a)({selectedMessageId:(h,$)=>$.id}),updateMessageResponse:(0,m.a)(({context:h},$)=>{const X=h.messages[h.messages.length-1];return{messages:X?[...h.messages.slice(0,-1),{...X,response:X.response+$.newChunk}]:[]}}),clearContextData:(0,m.a)({messages:[],selectedMessageId:null}),setLastMessageFinishedStreaming:(0,m.a)(({context:h})=>{const $=h.messages[h.messages.length-1];return{messages:$?[...h.messages.slice(0,-1),{...$,finishedStreaming:!0}]:[]}})},guards:{isMessageHistoryEmpty:({context:h})=>h.messages.length===0,isSingleMessageInHistory:({context:h})=>h.messages.length===1}}),ce=function(){return(0,o.useContext)(je)};function ee({blockId:h,blockType:$,notebookId:X,blockSqlIntegrationId:fe,children:te}){const{notebookVariablesForAi:Le}=(0,C.B)(),{startStream:ue,stopStream:Ee,trackAcceptResult:ve,trackRejectResult:Je,trackExplanationAddedAsBlock:He,trackCancelGenerate:st,trackRunBlock:ct}=ae({notebookId:X,blockType:$,blockId:h,blockSqlIntegrationId:fe,notebookVariablesForAi:Le}),{getBlockContents:et,updateBlock:qe,runBlock:dt,addTextBlock:rt}=y(h),{executionMode:vt}=(0,g.v)(),[Ze,Fe]=(0,n.zl)(Qe.provide({actions:{runBlock:({context:w})=>{dt({executionMode:vt})},stopGenerating(){Ee()},setOriginalBlockContents:(0,m.a)({originalBlockContents:()=>et()??""}),addNewMessageToHistory:(0,m.a)(({context:w},re)=>{const xe=(0,i.A)();return{selectedMessageId:xe,messages:[...w.messages,{id:xe,command:re.command,finishedStreaming:!1,input:{promptData:re.promptData,errorMessage:w.aiErrorMessage??void 0,blockContents:et()??""},response:""}]}}),removeLastMessageFromHistory:(0,m.a)(({context:w})=>{const re=w.messages.at(-1),xe=w.messages.at(-2),Ye={messages:[...w.messages.slice(-0,-1)]};return w.selectedMessageId===re?.id&&(Ye.selectedMessageId=xe?.id??null),Ye}),updateBlockContents(w,re){re.code&&qe(re.code,{isMergeable:!0})},restoreOriginalBlockContents({context:w}){w.originalBlockContents&&qe(w.originalBlockContents,{isMergeable:!0})},onAddExplanationBlockRequest({context:{messages:w,selectedMessageId:re}}){const xe=w.find(({id:Ye})=>Ye===re)?.response??"";rt(xe)},trackAcceptResult({context:{messages:w,selectedMessageId:re}},xe){ve({command:xe.command,iterationRank:Ve(w,re),codeCharacterLength:w.find(({id:Ye})=>Ye===re)?.response?.length,numberOfIterations:w.length+1})},trackRejectResult({context:{messages:w,selectedMessageId:re}},xe){Je({command:xe.command,numberOfIterations:w.length+1,characterLength:w.find(({id:Ye})=>Ye===re)?.response?.length,iterationRank:Ve(w,re)})},trackExplanationAddedAsBlock({context:{messages:w,selectedMessageId:re}},xe){He({iterationRank:Ve(w,re),numberOfIterations:w.length+1,characterLength:xe.explanation.length})},trackCancelGenerate({context:{messages:w,selectedMessageId:re}},xe){st({command:xe.command,iterationRank:Ve(w,re),numberOfIterations:w.length+1})},trackRunBlock({context:{messages:w,selectedMessageId:re}},xe){ct({command:xe.command,iterationRank:Ve(w,re),characterLength:w.find(({id:Ye})=>Ye===re)?.response?.length,numberOfIterations:w.length+1})}},actors:{generationRequest:(0,r.Sx)(({input:{command:w,promptData:re,blockErrorMessage:xe,previousMessages:Ye,iterationRank:nt}})=>new Promise((ft,mt)=>{ue({command:w,promptData:{textContent:re.textContent,mentions:re.mentions},previousMessages:Ye,handlers:{onContentData(Ct){Fe({type:"DATA_CHUNK",newChunk:Ct})},onComplete(){ft("Completed")},onError(Ct){mt(u(Ct))}},blockErrorMessage:xe,iterationRank:nt})}))}})),ht=M(Ze),ut=(0,o.useMemo)(()=>Ze.value!=="idle"&&Ze.value!=="closing",[Ze.value]),se=(0,o.useMemo)(()=>({status:ht,isActive:ut,messages:Ze.context.messages,selectedMessageId:Ze.context.selectedMessageId,originalBlockContents:Ze.context.originalBlockContents,aiErrorMessage:Ze.context.aiErrorMessage,onOpenRequest:()=>Fe({type:"OPEN"}),onCloseRequest:()=>Fe({type:"CLOSE"}),onStartGeneratingEditRequest:w=>Fe({type:"START_GENERATING_EDIT",promptData:w}),onStartGeneratingExplainRequest:()=>Fe({type:"START_GENERATING_EXPLAIN"}),onStartGeneratingFixRequest:()=>Fe({type:"START_GENERATING_FIX"}),onStopGeneratingRequest:()=>Fe({type:"STOP_GENERATING"}),onDiscardChangesRequest:()=>Fe({type:"DISCARD_CHANGES"}),onRunCodeRequest:()=>Fe({type:"RUN_CODE"}),onAddExplanationBlockRequest:()=>Fe({type:"ADD_EXPLANATION_BLOCK"}),onKeepChangesRequest:()=>Fe({type:"KEEP_CHANGES"}),onSelectMessageRequest:w=>Fe({type:"SELECT_MESSAGE",id:w}),onSetBlockErrorMessageRequest:w=>Fe({type:"SET_BLOCK_ERROR_MESSAGE",blockErrorMessage:w})}),[ht,ut,Ze.context.messages,Ze.context.selectedMessageId,Ze.context.originalBlockContents,Ze.context.aiErrorMessage,Fe]);return(0,t.jsx)(je.Provider,{value:se,children:te})}},25956:(F,d,e)=>{e.d(d,{$8:()=>x,CE:()=>u,Sn:()=>r,dh:()=>z,oe:()=>O,qp:()=>C,rh:()=>i,rq:()=>l,wn:()=>g});var t=e(59958),n=e(19550),o=e(38038);const i={...t.bz,"between-numbers":"Number is between","between-dates":"Date is between"},a=null,m=null;function r(I){return u.find(c=>c.operators.includes(I))?.groupName??"Any column type"}const C={"Any column type":"nominal",Text:"nominal",Numbers:"quantitative",Dates:"temporal"},u=[{groupName:"Any column type",operators:["is-null","is-not-null","is-equal","is-not-equal","is-one-of","is-not-one-of"]},{groupName:"Text",operators:["text-contains","text-does-not-contain"]},{groupName:"Numbers",operators:["greater-than","greater-than-or-equal","less-than","less-than-or-equal","between-numbers","outside-of"]},{groupName:"Dates",operators:["is-after","is-before","is-on","between-dates","is-relative-today"]}];function g(I){return{type:"singleColor",ruleSingleColor:{columnNames:I,columnSelectionMode:"all",type:"singleColor",operator:"is-equal",comparativeValues:[],styleName:"positiveBold"},ruleColorScale:{columnNames:I,columnSelectionMode:"all",type:"colorScale",pointMin:{valueType:"autoAllColumns",value:null,customColor:null},pointMid:{valueType:"autoAllColumns",value:null,customColor:null},pointMax:{valueType:"autoAllColumns",value:null,customColor:null},scaleName:"defaultToPositive"}}}function s(I){return I==="between-numbers"||I==="between-dates"?"between":I}function l(I,c){const D=I.columnSelectionMode==="all"?c:I.columnNames?.filter(P=>c.includes(P))??[];if(I.type==="singleColor")return{ruleColorScale:{type:"colorScale",columnSelectionMode:I.columnSelectionMode,columnNames:D,pointMin:{valueType:"autoAllColumns",value:null,customColor:null},pointMid:{valueType:"autoAllColumns",value:null,customColor:null},pointMax:{valueType:"autoAllColumns",value:null,customColor:null},scaleName:"defaultToPositive"},type:"singleColor",ruleSingleColor:{...I,operator:z(I.operator,I.comparativeValues)}};if(I.type==="colorScale")return{ruleSingleColor:{type:"singleColor",columnSelectionMode:I.columnSelectionMode,columnNames:D,operator:"is-equal",comparativeValues:[],styleName:"positive"},type:"colorScale",ruleColorScale:I};(0,n.x)(I)}function x(I){if(I.type==="singleColor")return{...I.ruleSingleColor,operator:s(I.ruleSingleColor.operator)};if(I.type==="colorScale")return I.ruleColorScale;(0,n.x)(I.type)}function O(I,c){const D=new Set;for(const P of c??[])if(P.type==="colorScale")switch(P.columnSelectionMode){case"all":return I;case"allExcept":I.forEach(R=>{P.columnNames?.includes(R)||D.add(R)});break;case"only":P.columnNames?.forEach(R=>{D.add(R)});break;default:(0,n.x)(P.columnSelectionMode)}return[...D]}function z(I,c){if(I!=="between")return I;const[D,P]=c,R="between-numbers";if(!D||!P)return R;const y=(0,o.Iq)(D)&&(0,o.Iq)(P),k=(0,o.Xe)(D)&&(0,o.Xe)(P);return y?"between-numbers":k?"between-dates":R}},63628:(F,d,e)=>{e.d(d,{o:()=>Q});var t=e(45470),n=e(79381),o=e(21582),i=e(7802),a=e(53429),m=e(74111),r=e(63998),C=e(59958),u=e(33343),g=e(42971),s=e(31643),l=e(52187),x=e(5329);const O={quantitative:["is-equal","is-not-equal","is-one-of","is-not-one-of","is-null","is-not-null","greater-than","greater-than-or-equal","less-than","less-than-or-equal","between","outside-of"],nominal:["is-one-of","is-not-one-of","is-null","is-not-null","text-contains","text-does-not-contain"],temporal:["is-after","is-before","is-on","is-relative-today","between","is-null","is-not-null"]};var z=e(71878),I=e(76726);const c=(0,r.memo)(function({columns:B,columnDisplayNames:M,selectedColumnFieldName:v,placeholder:p,isDisabled:A=!1,onColumnSelectRequest:j}){const V=(0,r.useMemo)(()=>v?B.filter(U=>U.name===v).map(U=>({...U,type:(0,C.d3)(U.type)}))[0]:null,[B,v]),oe=(0,r.useMemo)(()=>[V].filter(Boolean),[V]);return(0,t.jsx)(I.i,{closeOnSelect:!0,selectedColumnIcon:!0,selectedColumns:oe,columns:B,columnDisplayNames:M,placeholder:p,isDisabled:A,onColumnSelectRequest:j})});var D=e(70935),P=e(59969);function R(E,B,M){switch(M){case"is-null":case"is-not-null":return!E;default:return!E||!B.every(v=>!!v.trim())}}const y=(E,B)=>{if(B==="temporal"&&E!=="is-relative-today")return[new Date().toISOString()];switch(E){case"is-relative-today":return["today"];default:return[]}},k=(0,r.memo)(function({columns:B,columnDisplayNames:M,filter:v,isDisabled:p=!1,onSaveRequest:A,onColumnValuesRequest:j}){const[V,oe]=(0,r.useState)(v?.column||B[0]?.name||null),[U,Z]=(0,r.useState)(v?.comparativeValues??[]),me=(0,r.useMemo)(()=>V&&B?.find(be=>be.name===V)||null,[V,B]),Ce=me?(0,C.d3)(me.type):"nominal",Me=v?.operator??D.FS[Ce],[ae,ke]=(0,r.useState)(Me),ze=p||R(V,U,ae),ye=(0,r.useContext)(P.q),Ke=be=>{be.preventDefault(),!(!ae||!V||ze)&&(A({column:V,operator:ae,comparativeValues:U.map(le=>le.trim()).filter(Boolean)}),oe(null),ke(Me),Z([]))},Ve=(0,r.useCallback)(async()=>!j||!V?Promise.resolve(null):j(V),[j,V]);return(0,t.jsx)(t.Fragment,{children:[V].map(be=>(0,t.jsx)("form",{onSubmit:Ke,children:(0,t.jsxs)(u.az,{flex:1,overflowY:"auto",overflowX:"hidden",maxHeight:"60vh",letterSpacing:0,borderRadius:"sm",position:ye?"relative":void 0,backgroundColor:"bg.neutral.primary",children:[(0,t.jsx)(g.s,{flex:1,marginRight:4,marginLeft:4,marginTop:4,marginBottom:4,minWidth:0,children:(0,t.jsxs)(g.s,{flex:1,direction:"column",gap:4,minWidth:0,children:[(0,t.jsx)(c,{columns:B??[],columnDisplayNames:M,placeholder:"Select column\u2026",selectedColumnFieldName:V,isDisabled:p,onColumnSelectRequest:({name:le,type:je})=>{oe(le),ke(Qe=>O[je].includes(Qe)?Qe:D.FS[je]),Z(y(Me,je))}}),(0,t.jsx)(s.a,{maxHeight:320,options:O[Ce].map(le=>({label:C.bz[le],value:le})),value:ae,type:"button",isDisabled:p,onChangeRequest:le=>{ke(le),Z(y(le,Ce))}}),(0,t.jsx)(z.b,{columnEncoding:Ce,operator:ae,comparativeValues:U,isDisabled:p,onComparativeValuesUpdateRequest:Z,onColumnValuesRequest:Ve}),(0,t.jsx)(g.s,{children:(0,t.jsx)(l.$,{colorScheme:"accentOne",disabled:ze,isDisabled:ze,size:"xs",type:"submit",children:"Apply"})})]})}),ye&&(0,t.jsx)(x.M,{eventTrackingSource:"Filter overlay"})]})},be))})}),Q=(0,r.memo)(function({children:B,placement:M="bottom-start",shouldRenderInPortal:v=!0,onSaveRequest:p,...A}){return(0,t.jsx)(n.A,{isLazy:!0,placement:M,gutter:-1,children:function({onClose:oe}){const U=(0,t.jsx)(o.h,{children:(0,t.jsx)(i.e,{padding:0,width:"224px",children:(0,t.jsx)(k,{onSaveRequest:Z=>{p(Z),oe()},...A})})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.W,{children:B}),v?(0,t.jsx)(m.Z,{children:U}):U]})}})})},34881:(F,d,e)=>{e.d(d,{_:()=>Q});var t=e(45470),n=e(50384),o=e(42172),i=e(14199),a=e(99920),m=e(93034),r=e(42971),C=e(40341),u=e(37189),g=e(30926),s=e(63998),l=e(74250),x=e(59148),O=e(19550),z=e(38661),I=e(57008),c=e(63628);const D=E=>{switch(E){case"text-contains":return"contains";case"text-does-not-contain":return"NOT contains";case"is-on":return"on";case"is-one-of":case"is-equal":return"=";case"is-not-one-of":case"is-not-equal":return"!=";case"is-null":return"is empty";case"is-not-null":return"is not empty";case"greater-than":return">";case"greater-than-or-equal":return">=";case"less-than":return"<";case"less-than-or-equal":return"<=";case"between":return"between";case"outside-of":return"outside of";case"is-relative-today":case"is-after":return"after";case"is-before":return"before";default:return(0,O.x)(E)}},P=E=>{switch(E){case"today":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.E,{as:"span",color:"fg.neutral.tertiary",children:"is"})," ","today"]});case"yesterday":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.E,{as:"span",color:"fg.neutral.tertiary",children:"was"})," ","yesterday"]});default:return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.E,{as:"span",color:"fg.neutral.tertiary",children:"since"})," ",(I.bf.find(({value:B})=>B.toLowerCase()===E.toLowerCase())?.label??"").toLowerCase()]})}},R=(E,B)=>{const M=B?.[E.column]??E.column;switch(E.operator){case"is-relative-today":return(0,t.jsxs)(t.Fragment,{children:[M," ",P(E.comparativeValues[0]??"")]});case"is-after":case"is-before":case"is-on":case"between":return(0,t.jsxs)(t.Fragment,{children:[M," ",(0,t.jsx)(u.E,{as:"span",color:"fg.neutral.tertiary",children:D(E.operator)})," ",E.comparativeValues.map(v=>(0,l.y)(v).format("YYYY-MM-DD")).join(", ")]});default:return(0,t.jsxs)(t.Fragment,{children:[M," ",(0,t.jsx)(u.E,{as:"span",color:"fg.neutral.tertiary",children:D(E.operator)})," ",E.comparativeValues.join(", ")]})}},y=(0,s.memo)(function({filter:B,columns:M,columnDisplayNames:v,index:p,mode:A="enabled",onDeleteRequest:j,onEditRequest:V,onColumnValuesRequest:oe}){const U=(0,s.useCallback)(Ce=>V?.(Ce,p),[p,V]),Z=(0,s.useCallback)(()=>{j?.(p)},[p,j]),me=R(B,v);return(0,t.jsx)(c.o,{filter:B,columns:M,columnDisplayNames:v,isDisabled:A==="disabled",onSaveRequest:U,onColumnValuesRequest:oe,children:(0,t.jsx)(z.V,{tooltipProps:{label:A==="disabled"?m.j:me},variant:"outline",colorScheme:"neutral",size:"xs",rightIcon:A!=="readonly"?(0,t.jsx)(o.I,{as:x.a,onClick:Ce=>{Ce.preventDefault(),Ce.stopPropagation(),Z()}}):void 0,isDisabled:A!=="enabled",children:(0,t.jsx)(u.E,{as:"span",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px",children:me})})})});var k=e(59969);const Q=(0,s.memo)(function({filters:B,columns:M,columnDisplayNames:v,isMachineOffline:p=!1,mode:A="enabled",onCreateRequest:j,onEditRequest:V,onDeleteRequest:oe,onColumnValuesRequest:U}){if(B.length===0)return null;const Z=A==="enabled";return(0,t.jsx)(k.q.Provider,{value:p,children:(0,t.jsxs)(r.s,{"data-cy":n.dataframeFiltersBar,flexWrap:"wrap",gap:2,paddingX:4,paddingY:3,alignItems:"center",children:[(0,t.jsxs)(C.E,{colorScheme:"neutral",children:[(0,t.jsx)(o.I,{as:i.F,size:"sm"}),(0,t.jsxs)(r.s,{display:"inline-flex",alignItems:"center",gap:.5,children:["Filters",(0,t.jsxs)(r.s,{display:"inline-flex",minWidth:5,justifyContent:"space-between",children:["(",(0,t.jsx)(u.E,{as:"span",children:B.length}),")"]})]})]}),(0,t.jsxs)(t.Fragment,{children:[B.map((Ce,Me)=>(0,t.jsx)(y,{index:Me,filter:Ce,columnDisplayNames:v,columns:M,mode:A,onEditRequest:V,onDeleteRequest:oe,onColumnValuesRequest:U},`${Ce.column}_${Me}_${Ce.operator}_${Ce.comparativeValues.join("_")}`)),A!=="readonly"&&j&&(0,t.jsx)(c.o,{columns:M,isDisabled:A==="disabled",onSaveRequest:j,onColumnValuesRequest:U,children:(0,t.jsx)(g.Y,{tooltipProps:{label:m.j,isDisabled:Z},"aria-label":"Add filter",variant:"outline",size:"xs",colorScheme:"neutral",icon:(0,t.jsx)(o.I,{as:a.Q}),isDisabled:A==="disabled"})})]})]})})})},6319:(F,d,e)=>{e.d(d,{L:()=>r});var t=e(45470),n=e(414),o=e(63998),i=e(45405),a=e(20485),m=e(34881);const r=(0,o.memo)(function({workspaceId:u,blockId:g,columnDescriptions:s,tableState:l,isMachineOffline:x,isDisabled:O=!1,mode:z,onTableStateUpdateRequest:I}){const c=(0,i.$)(s),D=(0,o.useMemo)(()=>(0,a.iK)(l.columnDisplayNames),[l.columnDisplayNames]),P=(0,o.useCallback)(k=>{I({...l,conditionalFilters:[...l?.conditionalFilters??[],k]}),(0,n.u4)("DataFrame filter added",{workspaceId:u,blockId:g,mode:z,operator:k.operator,source:"filters-bar"})},[g,z,I,l,u]),R=(0,o.useCallback)((k,Q)=>{I({...l,conditionalFilters:(l?.conditionalFilters??[]).map((E,B)=>B===Q?k:E)}),(0,n.u4)("DataFrame filter changed",{workspaceId:u,blockId:g,mode:z,operator:k.operator,source:"filters-bar"})},[g,z,I,l,u]),y=(0,o.useCallback)(k=>{I({...l,conditionalFilters:(l?.conditionalFilters??[]).filter((Q,E)=>E!==k)}),(0,n.u4)("DataFrame filter removed",{workspaceId:u,blockId:g,mode:z,source:"filters-bar"})},[g,z,I,l,u]);return(0,t.jsx)(m._,{filters:l?.conditionalFilters??[],columns:c,columnDisplayNames:D,isMachineOffline:x,mode:O?"disabled":"enabled",onCreateRequest:P,onEditRequest:R,onDeleteRequest:y})})},59969:(F,d,e)=>{e.d(d,{q:()=>n});var t=e(63998);const n=(0,t.createContext)(!1);n.displayName="IsMachineOfflineContext"},70935:(F,d,e)=>{e.d(d,{FS:()=>n,vQ:()=>a});var t=e(59958);const n={quantitative:"is-one-of",temporal:"is-before",nominal:"is-one-of"};function o(m){const r=getDataframeColumnEncodingType(m);return n[r]}function i(m,r){return[...(m??[]).flatMap(C=>{if(C.type!=="contains")return[];const u=r.find(O=>O.name===C.id)?.dtype;if(!u)return[];const g=(0,t.d3)(u),s=n[g],l=g==="temporal"&&C.value===""?new Date().toISOString():C.value;return{operator:s,column:C.id,comparativeValues:[l]}})]}function a(m,r){return{...m,filters:[],conditionalFilters:[...m.conditionalFilters??[],...i(m.filters,r)]}}},71878:(F,d,e)=>{e.d(d,{b:()=>I});var t=e(45470),n=e(31643),o=e(57008),i=e(29893),a=e(63998);const m=(0,a.memo)(function({values:D,isDisabled:P=!1,placeholder:R="Select or type\u2026",noOptionsMessage:y="No options",onValuesSelectRequest:k,onColumnValuesRequest:Q}){const E=(0,a.useMemo)(()=>new Set(D),[D]),[B,M]=(0,a.useState)(null),[v,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{async function U(){if(Q){p(!0);try{const Z=await Q();M(Z??[])}catch{}finally{p(!1)}}}return U(),()=>{M(null),p(!1)}},[Q]);const A=(0,a.useMemo)(()=>B?.map(U=>({value:String(U),label:String(U)}))??[],[B]),j=(0,a.useMemo)(()=>Array.from(new Set([...Array.from(E.values()).filter(Boolean),...A.filter(({value:U})=>E.has(U.toLowerCase())).map(({value:U})=>U)]).values()).map(U=>({value:U,label:U})),[A,E]),V=(0,a.useCallback)(U=>{if(U){const Z=U.map(({value:me})=>me);k(Z)}},[k]),oe=(0,a.useMemo)(()=>()=>y,[y]);return(0,t.jsx)(i.qJ,{isMulti:!0,isClearable:!1,isLoading:v,isDisabled:P,options:A,placeholder:R,noOptionsMessage:oe,size:"xxs",value:j,onChange:V})});var r=e(39066),C=e(42971),u=e(78558),g=e(37189),s=e(15049);const l=(0,a.memo)(function({columnEncoding:D,value:P,isDisabled:R=!1,shouldRenderInPortal:y=!1,onComparisonTargetValueChange:k}){const Q=D==="temporal",{start:E,end:B}=(0,a.useMemo)(()=>[P].reduce((V,oe)=>(Array.isArray(oe)&&oe.length===2&&(V.start=String(oe[0]),V.end=String(oe[1])),V),{start:Q?new Date().toISOString():"",end:Q?new Date().toISOString():""}),[Q,P]),[M,v]=(0,a.useState)(E),[p,A]=(0,a.useState)(B);(0,a.useEffect)(()=>{v(E),A(B)},[E,B]);const j=(0,a.useCallback)(V=>{k([V.start,V.end])},[k]);return Q?(0,t.jsxs)(C.s,{alignItems:"center",flex:1,direction:"row",gap:1,children:[(0,t.jsx)(u.J,{isDisabled:R,size:"xxs",type:"button",usePortal:y,value:E,onChange:V=>j({start:V,end:B})}),(0,t.jsx)(g.E,{children:"-"}),(0,t.jsx)(u.J,{isDisabled:R,size:"xxs",type:"button",usePortal:y,value:B,onChange:V=>j({start:E,end:V})})]}):(0,t.jsxs)(C.s,{alignItems:"center",flex:1,direction:"row",gap:1,children:[(0,t.jsx)(s.p,{isDisabled:R,placeholder:"Type in\u2026",size:"xxs",value:M,onChange:V=>{(0,r.D)(V.currentTarget.value).onFloatNumber(oe=>j({start:String(oe),end:p})).onNormalizedRawString(v)}}),(0,t.jsx)(g.E,{children:"-"}),(0,t.jsx)(s.p,{isDisabled:R,placeholder:"Type in\u2026",size:"xxs",value:p,onChange:V=>(0,r.D)(V.currentTarget.value).onFloatNumber(oe=>j({start:M,end:String(oe)})).onNormalizedRawString(A)})]})}),x=(0,a.memo)(function({columnEncoding:D,value:P,placeholder:R="Enter value",isDisabled:y=!1,shouldRenderInPortal:k=!1,onComparisonTargetValueChange:Q}){const[E,B]=(0,a.useState)(P);return(0,a.useEffect)(()=>{B(P)},[P]),D==="temporal"?(0,t.jsx)(u.J,{isDisabled:y,size:"xxs",type:"button",usePortal:k,value:P,onChange:Q}):D==="quantitative"?(0,t.jsx)(s.p,{isDisabled:y,placeholder:R,size:"xxs",value:E,onChange:M=>{(0,r.D)(M.currentTarget.value).onNormalizedRawString(B).onFloatNumber(v=>{Q(String(v))})}}):(0,t.jsx)(s.p,{isDisabled:y,placeholder:R,size:"xxs",value:P,onChange:M=>Q(M.currentTarget.value)})}),O=["is-null","is-not-null"],z=[...o.bf];function I({columnEncoding:c,operator:D,comparativeValues:P,isDisabled:R=!1,shouldRenderInPortal:y=!1,onComparativeValuesUpdateRequest:k,onColumnValuesRequest:Q}){const E=D==="is-one-of"||D==="is-not-one-of",B=D==="is-relative-today",M=D==="between"||D==="outside-of"||D==="between-numbers"||D==="between-dates";return(0,t.jsxs)(t.Fragment,{children:[!O.includes(D)&&!E&&!B&&!M&&(0,t.jsx)(x,{columnEncoding:c,value:P[0]??"",isDisabled:R,shouldRenderInPortal:y,onComparisonTargetValueChange:v=>k([v])}),E&&(0,t.jsx)(m,{values:P,isDisabled:R,placeholder:Q?"Select or type\u2026":"Enter value...",noOptionsMessage:Q?void 0:"Enter value...",onValuesSelectRequest:k,onColumnValuesRequest:Q}),B&&(0,t.jsx)(n.a,{options:z,value:P[0]&&(0,o.Q4)(P[0])?P[0]:"month-ago",type:"button",isDisabled:R,onChangeRequest:v=>k([v])}),M&&(0,t.jsx)(l,{columnEncoding:c,value:P,isDisabled:R,shouldRenderInPortal:y,onComparisonTargetValueChange:k})]})}},13945:(F,d,e)=>{e.d(d,{jk:()=>E,Vt:()=>M,ic:()=>B});var t=e(45470),n=e(60022),o=e(47628),i=e(51881),a=e(63998),m=e(33754),r=e(96975),C=e(19194),u=e(93099),g=e(32227),s=e(37977),l=e(45298),x=e(27529),O=e(94270),z=e(87435);const I=(0,O.J1)`
  query getIntegrationRelevantSqlContextBlocksData($integrationId: String!, $workspaceId: String!) {
    integrationRelevantSqlContextBlocks(integrationId: $integrationId, workspaceId: $workspaceId) {
      id
      content
    }
  }
`;function c(){const v=(0,z.m)();return{async fetchRelevantSqlContextBlocks(p,A){return(await v.query({query:I,variables:{integrationId:p,workspaceId:A},fetchPolicy:"cache-first"})).data?.integrationRelevantSqlContextBlocks}}}var D=e(3190),P=e(13983);const[,R]=(0,l.A)(()=>Promise.all([e.e(871),e.e(1691),e.e(9791),e.e(8948),e.e(309),e.e(1916),e.e(2410),e.e(1087),e.e(1337),e.e(9001)]).then(e.bind(e,69984)),"We failed to load a core library. Please try refreshing the page."),y=async(v,p)=>{const A=await R();if(!A)throw new Error("We failed to load language providers");return A.register(v,{...p,codeCompletionData:{...p.codeCompletionData,enabledBlocks:p.codeCompletionData.isRegisteredWithCodeium?p.codeCompletionData.enabledForBlocks:[]}})},k=(0,a.createContext)({focusedNotebookVariables:{}}),Q=(0,a.createContext)({setFocusedNotebookVariables:()=>{}});function E(v){const[p,A]=(0,a.useState)({}),j=(0,a.useMemo)(()=>({setFocusedNotebookVariables:A}),[A]),V=(0,a.useMemo)(()=>({focusedNotebookVariables:p}),[p]);return(0,t.jsx)(Q.Provider,{value:j,children:(0,t.jsx)(k.Provider,{value:V,children:v.children})})}function B(){return(0,a.useContext)(Q)}const M=(0,a.memo)(function(p){const{workspaceId:A,userId:j}=p,{notebookApi:V,editorApi:oe}=(0,m.gf)(),U=(0,g.A1)(u.hl),Z=(0,g.A1)(u.vp),me=(0,g.A1)(r.zf),Ce=(0,g.A1)(C.O9),Me=(0,a.useMemo)(()=>(0,s.uN)(me,"/")?.join(`
`)??null,[me]),{focusedNotebookVariables:ae}=(0,a.useContext)(k),{loading:ke,enabledBlocksForWorkspace:ze,enabledForUser:ye,isRegisteredWithCodeium:Ke}=(0,D.c)({workspaceId:p.workspaceId}),{parser:Ve}=(0,P.V)(),be=(0,a.useMemo)(()=>({projectName:Z,notebookName:p.notebookName,enabledForBlocks:ye&&p.notebookId?ze:[],isRegisteredWithCodeium:Ke,runtimeVariables:ae,rootDirContents:Me}),[Z,p.notebookId,p.notebookName,ye,ze,Ke,ae,Me]),{fetchIntegrationStructure:le,fetchIntegrationStructureColumns:je}=(0,x.fx)(),Qe=(0,a.useRef)(le);Qe.current=le;const ce=(0,a.useRef)(je);ce.current=je;const ee=(0,a.useMemo)(()=>({async fetchIntegrationStructure(fe){return(0,n.sE)(U,o.zd.VIEW_INTEGRATIONS)?Qe.current.call(null,{integrationId:fe,invalidateCache:!1}):{integrationStructure:null,error:null}},async fetchIntegrationStructureColumns(fe,te){return(0,n.sE)(U,o.zd.VIEW_INTEGRATIONS)?ce.current.call(null,{integrationId:fe,params:{databaseName:te.databaseName??void 0,databaseId:te.databaseId??void 0,schemaName:te.schemaName??void 0,tableName:te.tableName}}):{columns:[],error:null}}}),[U]),{fetchRelevantSqlContextBlocks:h}=c(),$=(0,a.useRef)(h);$.current=h;const X=(0,a.useMemo)(()=>({async fetchRelevantSqlContextBlocks(fe){return(0,n.sE)(U,o.zd.MANIPULATE_CELLS)?$.current.call(null,fe,A):[]}}),[A,U]);return(0,a.useEffect)(()=>{if(!ke&&(0,n.sE)(U,o.zd.MANIPULATE_CELLS)){const fe=y({notebookApi:V,editorApi:oe,integrationStructureFetcher:ee,relevantSqlBlocksFetcher:X,sqlParser:Ve},{workspaceId:A,userId:j,codeCompletionData:be,integrations:Ce});return()=>{fe.then(te=>te.dispose()).catch(te=>(0,i.H)(new Error("Cant dispose language providers"),"error",{error:te}))}}},[V,oe,ee,A,j,U,X,be,ke,Ve,Ce]),(0,t.jsx)(t.Fragment,{})})},3190:(F,d,e)=>{e.d(d,{c:()=>C,r:()=>g});var t=e(94270),n=e(64980),o=e(69e3),i=e(63998),a=e(50740);const m=(0,t.J1)`
  query getWorkspaceCodeCompletionSettings($workspaceId: String!) {
    team(id: $workspaceId) {
      __typename
      ... on Team {
        id
        code_completion_enabled
        code_completion_sql_enabled
        isUnderHipaa
      }
    }
  }
`,r=(0,t.J1)`
  query getUserCodeCompletionSettings {
    me {
      ... on Profile {
        id
        isRegisteredWithCodeium
        code_completion_enabled
      }
    }
  }
`,C=s=>{const{data:l,loading:x}=(0,n.IT)(m,{variables:{workspaceId:s.workspaceId},fetchPolicy:"cache-first"}),O=!x&&l?.team?.__typename==="Team"?l.team.code_completion_enabled:null,z=!x&&l?.team?.__typename==="Team"?l.team.code_completion_sql_enabled:null,I=!x&&l?.team?.__typename==="Team"?l.team.isUnderHipaa:null,{canUseFeature:c}=(0,a.X)("AI_CODE_COMPLETION"),{data:D,loading:P}=(0,n.IT)(r,{fetchPolicy:"cache-first"}),R=!P&&D?.me?.__typename==="Profile"?D.me:null,y=!!(O&&!I&&c),k=(0,i.useMemo)(()=>y?z?["code","markdown","sql"]:["code","markdown"]:[],[y,z]);return{loading:x||P,enabledBlocksForWorkspace:k,enabledForWorkspace:y,enabledForWorkspaceInSqlBlocks:!!(y&&z),enabledForUser:!!R?.code_completion_enabled,isRegisteredWithCodeium:!!R?.isRegisteredWithCodeium}},u=(0,t.J1)`
  mutation updateCodeCompletionEnabled($isEnabled: Boolean!) {
    updateCodeCompletionEnabled(isEnabled: $isEnabled) {
      id
      code_completion_enabled
    }
  }
`,g=()=>{const[s]=(0,o.n)(u);return{updateCodeCompletionEnabled:s}}},13983:(F,d,e)=>{e.d(d,{V:()=>g,j:()=>u});var t=e(45470),n=e(53929),o=e.n(n),i=e(63998),a=e(45298);const m={parser:null,isLoading:!0,error:null},r=(0,i.createContext)(m),[,C]=(0,a.A)(async()=>{const{SqlParserService:s}=await e.e(6420).then(e.t.bind(e,36420,23));return new s},"Failed to load SQL parser. Please try reloading the page.");function u({children:s}){const[l,x]=(0,i.useState)(m);return(0,i.useEffect)(()=>{let O=!1;return(async()=>{if(!l.parser)try{if(O)return;const I=await C();if(I){if(await I.initialize(),O)return;x({parser:I,isLoading:!1,error:null})}o()(I,"Failed to initialize SQL parser")}catch(I){if(O)return;x({parser:null,isLoading:!1,error:I instanceof Error?I:new Error("Unknown error")})}})(),()=>{O=!0}},[]),(0,t.jsx)(r.Provider,{value:l,children:s})}function g(){const s=(0,i.useContext)(r);if(!s)throw new Error("useSqlParser must be used within a SqlParserProvider");return s}},25551:(F,d,e)=>{e.d(d,{EA:()=>a,HU:()=>i,JT:()=>r,r0:()=>m,sZ:()=>n,tJ:()=>o,wC:()=>t,zJ:()=>C});const t=u=>{if(u.length===0)return!1;const g=s=>{const l=s.children[0];return s.text===""&&s.children.length<=1?!l||g(l):!1};return!g(u[0])},n=u=>u===2?"lower-roman":u===3?"lower-latin":"decimal",o=u=>{let g=1;for(const s of u)if(!s.text)g--;else return g;return 1},i="data-deepnote-id",a=(u,g)=>`${(u.slice(0,5)+g).toLowerCase().replace(/[^a-z0-9]/g,"")}`,m=u=>/^[a-z0-9]+$/.test(u),r=u=>`h-${u}`,C=(u,g)=>{const s=a(u,g);return r(s)}},81550:(F,d,e)=>{e.d(d,{p:()=>i});var t=e(50779),n=e(30002),o=e(82922);function i(){const m=(0,t.g)().kernelState?.status??"missing",{hardwareStatus:r}=(0,o.u)(),{name:C}=(0,n.E)();let u="notReady";return m==="idle"?u="idle":m==="busy"?u="busy":u="notReady",{hardwareStatus:r,hardwareName:C,kernelStatus:u,isSomethingExecuting:m==="busy"}}},98342:(F,d,e)=>{e.d(d,{n:()=>n});var t=e(63998);function n(){const[o,i]=(0,t.useState)(()=>navigator.onLine);return(0,t.useEffect)(function(){const m=()=>{i(navigator.onLine)};return window.addEventListener("online",m),window.addEventListener("offline",m),function(){window.removeEventListener("online",m),window.removeEventListener("offline",m)}},[]),o}},58451:(F,d,e)=>{e.d(d,{c:()=>i});var t=e(60022),n=e(93099),o=e(32227);const i=(a,m=!1)=>{const r=(0,o.A1)(n.hl);return(0,t.sE)(r,a,m)}},96975:(F,d,e)=>{e.d(d,{Jw:()=>r,K3:()=>a,QT:()=>C,ei:()=>u,g0:()=>i,n8:()=>g,rG:()=>m,zf:()=>o});var t=e(24232),n=e(82263);const o=s=>s.filesystem.entities,i=s=>s.filesystem.expandedDirPaths,a=s=>s.filesystem.renamingFilePath,m=s=>s.filesystem.uploadingItems,r=s=>s.filesystem.isReloading,C=s=>s.filesystem.isUnavailable,u=()=>(0,n.Mz)(o,s=>Object.values(s).filter(t.f)),g=()=>(0,n.Mz)(o,s=>s[""])},19194:(F,d,e)=>{e.d(d,{DF:()=>s,Ni:()=>g,O9:()=>a,ZC:()=>C,Zn:()=>m,mu:()=>r,qN:()=>u});var t=e(47628),n=e(31976),o=e(82263),i=e(688);const a=l=>l.integrationsState.integrations,m=l=>l.integrationsState.integrationsLoaded;function r(l){return(0,o.Mz)(x=>x.integrationsState.integrations,x=>x.find(O=>O.id===l))}function C(){return(0,o.Mz)(a,l=>l.filter(t.pr).find(x=>x.id===n.yy))}function u(){return(0,o.Mz)(a,l=>l.filter(i.ld))}function g(){return(0,o.Mz)(a,l=>l.filter(t.pr).filter(i.TH))}function s(){return(0,o.Mz)(a,l=>l.filter(x=>x.error_type))}},91704:(F,d,e)=>{e.d(d,{P:()=>t});function t(n){const o=document.createElement("a");o.href=n,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},18320:(F,d,e)=>{e.d(d,{A:()=>r});var t=e(73906),n=e.n(t),o=e(56474),i=e(25551);const a=C=>"target"in C,m=C=>C.nodeName==="IFRAME";function r(C){n().addHook("afterSanitizeAttributes",function(g){if(a(g)&&(g.setAttribute("target","_blank"),g.setAttribute("rel","noopener noreferrer")),!g.hasAttribute("target")&&(g.hasAttribute("xlink:href")||g.hasAttribute("href"))&&(g.setAttribute("xlink:show","new"),g.setAttribute("rel","noopener noreferrer")),g.tagName==="IMG"&&!g.getAttribute("loading")&&g.setAttribute("loading","lazy"),m(g)&&(g.setAttribute("sandbox","allow-scripts"),(g.src.startsWith("https://")||g.src.startsWith("http://"))&&g.setAttribute("sandbox","allow-scripts allow-same-origin")),g.hasAttribute(i.HU)){const s=g.getAttribute(i.HU)??"";(0,i.r0)(s)&&(g.setAttribute("id",(0,i.JT)(s)),g.removeAttribute(i.HU))}});const u={FORBID_TAGS:["style","form"],FORBID_ATTR:["id","name"],ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target","allowfullscreen"]};return n().sanitize((0,o.renderToStaticMarkup)(C),u)}},86805:(F,d,e)=>{e.d(d,{YR:()=>k});var t=e(45470),n=e(47628),o=e(48154),i=e(73570),a=e(33754),m=e(76253),r=e(11796),C=e(16927),u=e(2802),g=e(5012),s=e(52341),l=e(52405),x=e(71380),O=e(30052),z=e(76878),I=e(3104),c=e(32227);const D=E=>jsx(ApiProvider,{children:E()}),P=function(B=DEFAULT_APP_STATE){return function(v){return jsx(Provider,{store:createStore(combinedReducer,B),children:v()})}},R=(0,o.jM)(s.kx,E=>{E.project={...E.project,currentUserAccessType:n.BD.ADMIN}}),y=({children:E})=>{const B=useAppStore(),{commonApi:M}=useCommonServices(),v=useApolloClient(),p={},A={current:{type:"root"}},j=createServicesWithInternalDependencies({blockFetchQueue:createBlockFetchQueue,notebookWriteQueue:createNotebookWriteQueue,blockTransforms:createSlateBlockTransforms,blockTransport:createBlockApiBlockTransport,commonApi:M,init:{initialize:()=>()=>{}},fileSystemFetcher:createFileSystemFetcher,integrationFetcher:createIntegrationFetcher,projectFetcher:createProjectFetcher,payAsYouGoMachinesFetcher:createPayAsYouGoMachinesFetcher,slateRef:{current:null},terminalStore:{},projectTrack:()=>createProjectTrack("workspace-123")},{store:B,apolloClient:v,projectRedirect:p,projectRouteRef:A});return jsx(ProjectServiceContext.Provider,{value:j,children:E})},k=()=>!!{}.IS_STORYBOOK,Q=({appState:E=R,children:B})=>{const M=createStore(combinedReducer,E);return jsx(Provider,{store:M,children:jsx(ThemeProvider,{children:jsx(CommonServiceProvider,{children:jsx(ModalProvider,{children:jsx(y,{children:jsx(ApiProvider,{children:B})})})})})})}},30002:(F,d,e)=>{e.d(d,{E:()=>i});var t=e(93099),n=e(32227),o=e(76695);function i(){const a=(0,n.A1)(t.sg);return o.g[a]}},82922:(F,d,e)=>{e.d(d,{u:()=>a});var t=e(63998),n=e(24922);const o={READY:"fg.positive.primary",STARTING:"fg.attention.primary",ERROR:"fg.critical.primary",OFFLINE:"fg.neutral.secondary"},i={ready:o.READY,image_error:o.ERROR,trusted_image_error:o.ERROR,image_auth_error:o.ERROR,image_not_found:o.ERROR,registry_unavailable:o.ERROR,restart_loop:o.ERROR,error:o.ERROR,missing:o.OFFLINE,scaling:o.STARTING,starting:o.STARTING,stopping:o.STARTING};function a(){const m=(0,n.K1)().hardware_status,r=(0,t.useMemo)(()=>m?i[m]:o.STARTING,[m]);return{hardwareStatus:m,statusColor:r}}},72979:(F,d,e)=>{e.d(d,{M:()=>o});var t=e(93099),n=e(32227);function o(){return{projectId:(0,n.A1)(t.To)}}},29909:(F,d,e)=>{e.d(d,{U:()=>a});var t=e(47628),n=e(63998),o=e(19194),i=e(32227);const a=m=>{const r=(0,i.A1)(o.O9);return(0,n.useMemo)(()=>r.filter(t.pr),[r]).find(u=>u.id===m)??null}},32204:(F,d,e)=>{e.d(d,{v:()=>r});var t=e(94270),n=e(69e3),o=e(32912),i=e(63998),a=e(50779);const m=(0,t.J1)`
  mutation SetExecutionMode($notebookId: String!, $executionMode: ExecutionMode!) {
    setExecutionMode(notebookId: $notebookId, executionMode: $executionMode) {
      ... on SetExecutionModeSuccess {
        notebook {
          id
          execution_mode
        }
      }
      ... on SetExecutionModeError {
        message
      }
    }
  }
`;function r(){const{executionMode:C}=(0,a.g)(),[u]=(0,n.n)(m),g=(0,i.useCallback)(async s=>{const l=await u({variables:s});if(!l.data){o.i.error({message:"Something went wrong while changing the execution mode. Please try again or contact our support."});return}l.data.setExecutionMode.__typename==="SetExecutionModeError"&&o.i.error({message:l.data.setExecutionMode.message})},[u]);return{executionMode:C,setExecutionMode:g}}},12493:(F,d,e)=>{e.d(d,{H:()=>u});const t=!1,n=!0,o="standard",i=!1,a=!0,m=!0,r=!0,C=!1;function u(g){return{appEmbedEnabled:g?.deepnote_app_embed_enabled??!1,appLayout:g?.deepnote_app_layout??null,appWidth:g?.deepnote_app_width??o,clearOutputs:g?.deepnote_app_clear_outputs??a,commentsEnabled:g?.deepnote_app_comments_enabled??m,executionEnabled:g?.deepnote_app_execution_enabled??n,hideAllCodeBlocksEnabled:g?.deepnote_app_hide_all_code_blocks_enabled??i,tableOfContentsEnabled:g?.deepnote_app_table_of_contents_enabled??t,runOnInputEnabled:g?.deepnote_app_run_on_input_enabled??r,reactivityEnabled:g?.deepnote_app_reactivity_enabled??void 0,runOnLoadEnabled:g?.deepnote_app_run_on_load_enabled??C}}},4138:(F,d,e)=>{e.d(d,{W:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"ArrowNarrowDownLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M12 4V20M12 20L18 14M12 20L6 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},12881:(F,d,e)=>{e.d(d,{z:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"ArrowNarrowUpLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M12 20V4M12 4L6 10M12 4L18 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},7270:(F,d,e)=>{e.d(d,{M:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"ChevronLeftLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},7934:(F,d,e)=>{e.d(d,{S:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"ChevronRightDoubleLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M6 17L11 12L6 7M13 17L18 12L13 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},76777:(F,d,e)=>{e.d(d,{r:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"ReverseLeftLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M4 7H14C17.3137 7 20 9.68629 20 13C20 16.3137 17.3137 19 14 19H4M4 7L8 3M4 7L8 11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},93296:(F,d,e)=>{e.d(d,{E:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"DnAscendingLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M5 10H13M5 6H10M5 14H16.5M5 18H20",stroke:"currentcolor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},59749:(F,d,e)=>{e.d(d,{_:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"DnBugReportLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M10 10.5H14M10 15H14M6 16H2M22 16H18M6 10H2M22 10H18M6 13H2M22 13H18M10 5L8 3M14 5L16 3M12 21C13.3258 21 14.9329 20.1563 16.15 19.3637C17.3732 18.5672 18 17.16 18 15.7003V10.3922C18 8.87952 17.3258 7.42906 16.0472 6.62072C14.8007 5.83272 13.1997 5 12 5C10.8003 5 9.19928 5.83272 7.95282 6.62072C6.6742 7.42906 6 8.87952 6 10.3922V15.7003C6 17.1599 6.62683 18.5672 7.84998 19.3637C9.0671 20.1563 10.6742 21 12 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},76424:(F,d,e)=>{e.d(d,{e:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"DnDescendingLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M5 14H13M5 18H10M5 10H16.5M5 6H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},57836:(F,d,e)=>{e.d(d,{R:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"PaletteLineIcon",viewBox:"0 0 24 24",path:(0,t.jsxs)("g",{fill:"none",children:[(0,t.jsx)("path",{d:"M2 12C2 17.5228 6.47715 22 12 22C13.6569 22 15 20.6569 15 19V18.5C15 18.0356 15 17.8034 15.0257 17.6084C15.2029 16.2622 16.2622 15.2029 17.6084 15.0257C17.8034 15 18.0356 15 18.5 15H19C20.6569 15 22 13.6569 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M7 13C7.55228 13 8 12.5523 8 12C8 11.4477 7.55228 11 7 11C6.44772 11 6 11.4477 6 12C6 12.5523 6.44772 13 7 13Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M16 9C16.5523 9 17 8.55228 17 8C17 7.44772 16.5523 7 16 7C15.4477 7 15 7.44772 15 8C15 8.55228 15.4477 9 16 9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M10 8C10.5523 8 11 7.55228 11 7C11 6.44772 10.5523 6 10 6C9.44772 6 9 6.44772 9 7C9 7.55228 9.44772 8 10 8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})},49997:(F,d,e)=>{e.d(d,{h:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"CheckSquareLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M7.5 12L10.5 15L16.5 9M7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},60898:(F,d,e)=>{e.d(d,{U:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"Download02LineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M21 21H3M18 11L12 17M12 17L6 11M12 17V3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},14199:(F,d,e)=>{e.d(d,{F:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"FilterLinesLineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M6 12H18M3 6H21M9 18H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},7723:(F,d,e)=>{e.d(d,{P:()=>o});var t=e(45470),n=e(54507);const o=(0,n.w)({displayName:"LinkExternal02LineIcon",viewBox:"0 0 24 24",path:(0,t.jsx)("g",{fill:"none",children:(0,t.jsx)("path",{d:"M21 9.00001L21 3.00001M21 3.00001H15M21 3.00001L12 12M10 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},66379:(F,d,e)=>{e.d(d,{D1:()=>o,FL:()=>a,RJ:()=>n,Y2:()=>s,Zw:()=>l,_U:()=>t,_l:()=>I,dq:()=>i,fs:()=>g,hI:()=>C,mf:()=>m,mv:()=>x,om:()=>z,rG:()=>O,y$:()=>r,yQ:()=>u,zc:()=>c});const t="cell-local-table-state",n="_deepnote_index_column",o="_deepnote_resizer_column",i={},a={},m="unnamed column",r=()=>null,C=[5,10,25,50,100],u=C[1],g=0,s=[],l=48,x=128,O=1024,z=33,I=51,c=32},93034:(F,d,e)=>{e.d(d,{j:()=>t});const t="Please run the notebook to make changes"},59958:(F,d,e)=>{e.d(d,{Ie:()=>i,bz:()=>t,d3:()=>o,o3:()=>n});const t={"is-equal":"Is equal to","is-not-equal":"Is not equal to","is-one-of":"Is one of","is-not-one-of":"Is not one of","is-not-null":"Is not empty","is-null":"Is empty","text-contains":"Text contains","text-does-not-contain":"Text does not contain","greater-than":"Greater than","greater-than-or-equal":"Greater than or equal to","less-than":"Less than","less-than-or-equal":"Less than or equal to",between:"Between","outside-of":"Outside of","is-relative-today":"Relative to today","is-after":"Is on or after","is-before":"Is on or before","is-on":"Is on"},n=a=>a.startsWith("int")||a.startsWith("short")||a.startsWith("long")||a.startsWith("float")||a.startsWith("half")||a.startsWith("single")||a.startsWith("double")||a.startsWith("byte")||a.startsWith("uint")||a.startsWith("ushort")||a.startsWith("ulong")||a.startsWith("ubyte");function o(a){return n(a)?"quantitative":a.startsWith("date")?"temporal":"nominal"}function i(a){return n(a)?"quantitative":a.startsWith("date")?"temporal":a.startsWith("bool")?"bool":"nominal"}},59746:(F,d,e)=>{e.d(d,{I:()=>t});function t(n,o=[]){if(typeof n!="object"||Array.isArray(n)||n===null)return[];let i=[];return Object.entries(n).forEach(([a,m])=>{const r=o.concat(a);typeof m=="string"&&(r.push(m),i.push(r.join("."))),typeof m=="object"&&!Array.isArray(m)&&m!==null&&(i=i.concat(t(m,r)))}),i}},39066:(F,d,e)=>{e.d(d,{D:()=>t});function t(n){const o=n.replace(",",".").trim(),i=parseFloat(o),a={onNormalizedRawString:m=>(m(o),a),onFloatNumber:m=>(!isNaN(i)&&!o.endsWith(".")&&m(i),a)};return a}},95417:(F,d,e)=>{e.d(d,{M:()=>o});var t=e(63998);function n(){const[i,a]=(0,t.useState)("unknown");return(0,t.useEffect)(()=>{const m=window.matchMedia("(hover: hover)");a(m.matches?"supported":"notSupported");const r=C=>{a(C.matches?"supported":"notSupported")};return m.addEventListener("change",r),()=>{m.removeEventListener("change",r)}},[]),i}function o(){const[i,a]=(0,t.useState)(!1),m=n(),r=i||m==="notSupported",C=(0,t.useCallback)(()=>{m==="supported"&&a(!0)},[m]),u=(0,t.useCallback)(()=>{a(!1)},[]);return{shouldShowHoverableContent:r,hoverEventHandlers:{onPointerEnter:C,onPointerLeave:u}}}},78558:(F,d,e)=>{e.d(d,{J:()=>oe});var t=e(45470),n=e(63998),o=e(46285),i=e(74111),a=e(79381),m=e(53429),r=e(15049),C=e(21582),u=e(61250),g=e(75595),s=e(42971),l=e(15070),x=e(35396),O=e(56416),z=e(98519),I=e(33343),c=e(37189),D=e(58809),P=e(74250),R=e(42172),y=e(7934),k=e(7270),Q=e(27777),E=e(22242),B=e(147),M=e.n(B);const v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A="YYYY-MM-DD";function j(Z){return(0,P.y)().utc().startOf("day").year(Z.year()).month(Z.month()).date(Z.date()).toISOString()}function V(Z){const me=(0,P.y)(Z).utc();if(me.isValid())return me}const oe=({configs:Z={dateFormat:A,monthNames:v,dayNames:p},usePortal:me=!0,...Ce})=>{const{value:Me,footerText:ae,isDisabled:ke,isReadonly:ze=!1,onChange:ye,onKeyDown:Ke,inputRef:Ve,...be}=Ce,le=(0,n.useRef)(null),[je,Qe]=(0,n.useState)(!1),ce=V(Me),[ee,h]=(0,n.useState)(ce?ce.format(A):""),[$,X]=(0,n.useState)(0);(0,n.useEffect)(()=>{const ve=(0,P.y)(Me).utc().isValid()?(0,P.y)(Me).utc().format(A):"";h(ve)},[Me]),(0,o.j)({ref:le,handler:()=>{Qe(!1),X(0)}});const fe=ve=>{const{selectable:Je,date:He}=ve;if(Je&&!M()(He)){const st=(0,P.y)(He);ye(j(st)),X(0),Qe(!1)}},te=(0,E.F)({showOutsideDays:!0,onDateSelected:fe,selected:ce?ce.toDate():void 0,date:ce?ce.toDate():void 0,offset:$,onOffsetChanged:ve=>{X(ve)}}),Le=ve=>me?(0,t.jsx)(i.Z,{children:ve}):ve,ue=(0,n.useCallback)(ve=>{if(ve.key==="Enter"){if(ve.preventDefault(),ve.stopPropagation(),ee==="")h((0,P.y)(Me).utc().format(A)),ye(Me),X(0);else if((0,P.y)(ee).isValid()){const Je=(0,P.y)(ee);ye(j(Je)),X(0)}}Ke?.(ve)},[ee,ye,Ke,Me]),Ee=(0,n.useCallback)(()=>{if(ee===""||!(0,P.y)(ee,Z.dateFormat,!0).isValid())h((0,P.y)(Me).utc().format(A));else{const ve=(0,P.y)(ee,Z.dateFormat,!0);ye(j(ve))}},[ee,ye,Me,Z.dateFormat]);return(0,t.jsxs)(a.A,{initialFocusRef:Ve,returnFocusOnClose:!1,isOpen:!ke&&!ze&&je,onClose:()=>Qe(!1),isLazy:!0,eventListeners:{scroll:!1,resize:!1},children:[(0,t.jsx)(m.W,{children:(0,t.jsx)(r.p,{...be,autoComplete:"off",isDisabled:ke,readOnly:ze,ref:Ve,onClick:()=>Qe(!je),value:ee,"data-hotkeys-enabled":!0,autoFocus:Ce.autoFocus,onChange:ve=>{h(ve.target.value)},size:Ce.size,type:Ce.type,onKeyDown:ue,onBlur:Ee})}),Le((0,t.jsx)(C.h,{width:"304px",ref:le,children:(0,t.jsx)(U,{...te,configs:Z,footerText:ae})}))]})},U=Z=>{const{calendars:me,getDateProps:Ce,getBackProps:Me,getForwardProps:ae,configs:ke,footerText:ze}=Z;return(0,t.jsx)(u.z,{children:me.map(ye=>(0,t.jsxs)(g.T,{marginY:2,children:[(0,t.jsxs)(s.s,{paddingX:2,justifyContent:"space-between",width:"100%",alignItems:"center",children:[(0,t.jsx)(l.K,{...Me({calendars:me,offset:12}),"aria-label":"Backward year",color:"fg.neutral.secondary",variant:"ghost",colorScheme:"gray",size:"xs",transform:"rotate(180deg)",icon:(0,t.jsx)(R.I,{as:y.S,boxSize:4})}),(0,t.jsxs)(s.s,{alignItems:"center",children:[(0,t.jsx)(l.K,{...Me({calendars:me}),"aria-label":"Backward month",marginRight:1,color:"fg.neutral.secondary",variant:"ghost",colorScheme:"gray",size:"xs",icon:(0,t.jsx)(R.I,{as:k.M,boxSize:4})}),(0,t.jsxs)(x.D,{size:"xs",textAlign:"center",color:"fg.neutral.primary",children:[ke.monthNames[ye.month]," ",ye.year]}),(0,t.jsx)(l.K,{...ae({calendars:me}),"aria-label":"Forward month",color:"fg.neutral.secondary",marginLeft:1,variant:"ghost",colorScheme:"gray",size:"xs",icon:(0,t.jsx)(R.I,{as:Q.B,boxSize:4})})]}),(0,t.jsx)(l.K,{...ae({calendars:me,offset:12}),"aria-label":"Forward year",color:"fg.neutral.secondary",variant:"ghost",colorScheme:"gray",size:"xs",icon:(0,t.jsx)(R.I,{as:y.S,boxSize:4})})]}),(0,t.jsx)(O.c,{}),(0,t.jsxs)(z.r,{paddingX:2,columns:7,spacing:1.5,textAlign:"center",children:[ke.dayNames.map(Ke=>(0,t.jsx)(I.az,{children:(0,t.jsx)(c.E,{fontSize:"ui.sm",fontWeight:"ui.semibold",children:Ke})},`${ye.month}${ye.year}${Ke}`)),ye.weeks.map((Ke,Ve)=>Ke.map((be,le)=>{if(!be)return null;const{date:je,today:Qe,selected:ce}=be,ee=`${ye.month}${ye.year}${Ve}${le}`;return(0,n.createElement)(D.$,{...Ce({dateObj:be}),key:ee,size:"sm",colorScheme:"gray",variant:"ghost",border:"1px solid",borderColor:Qe?"border.neutral.primary":"transparent",background:ce?"bg.accentOne.tertiary":void 0,fontWeight:"regular"},je.getDate())}))]}),ze&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.c,{}),(0,t.jsx)(s.s,{children:(0,t.jsx)(c.E,{fontSize:"ui.xs",children:ze})})]})]},`${ye.month}${ye.year}`))})}},29349:(F,d,e)=>{e.d(d,{z:()=>r});var t=e(45470),n=e(27987),o=e(24116),i=e(33343),a=e(63998),m=e(21305);function r(C){const{children:u,onClick:g,cursor:s,...l}=C,O=!!(0,n.Uc)()?.isDisabled,z=(0,o.KZ)(),I=(0,a.useMemo)(()=>({...z,isOpen:!1}),[z]);return(0,t.jsx)(o.BV,{value:I,children:(0,t.jsx)(m.D,{...l,as:i.az,tabIndex:void 0,cursor:s??"pointer",...O?{disabled:!0}:{onClick:g},children:u})})}},47404:(F,d,e)=>{e.d(d,{c:()=>a});var t=e(45470),n=e(33343),o=e(37189),i=e(63998);const a=(0,i.memo)(function(r){return(0,t.jsxs)(n.az,{fontSize:"ui.xs",paddingX:4,paddingTop:2,paddingBottom:2,maxWidth:64,children:[(0,t.jsx)(o.E,{color:"fg.neutral.primary",fontWeight:"ui.semibold",children:r.heading}),r.description&&(0,t.jsx)(o.E,{marginTop:1,color:"fg.neutral.secondary",children:r.description})]})})},78146:(F,d,e)=>{e.d(d,{u:()=>u});var t=e(45470),n=e(76938),o=e(6348),i=e(54938),a=e(44366),m=e(63998),r=e(52187),C=e(67483);const u=(0,m.memo)(function({isOpen:s,onClose:l,onEsc:x,onKeepEditingRequest:O,onDiscardChangesRequest:z,...I}){return(0,t.jsxs)(n.aF,{isCentered:!0,isOpen:s,onClose:l,onEsc:x,closeOnEsc:!1,closeOnOverlayClick:!1,scrollBehavior:"inside",...I,children:[(0,t.jsx)(o.m,{}),(0,t.jsxs)(i.$,{children:[(0,t.jsx)(C.r,{children:"Discard changes?"}),(0,t.jsxs)(a.j,{children:[(0,t.jsx)(r.$,{variant:"ghost",colorScheme:"neutral",onClick:O,children:"Keep editing"}),(0,t.jsx)(r.$,{colorScheme:"critical",onClick:z,children:"Discard"})]})]})]})})},75019:(F,d,e)=>{e.d(d,{r:()=>i});var t=e(45470),n=e(59593),o=e(33343);function i({variant:a,...m}){const r=(0,n.Vl)("PopoverSection",{variant:a});return(0,t.jsx)(o.az,{__css:r,...m})}},38661:(F,d,e)=>{e.d(d,{V:()=>a});var t=e(45470),n=e(91234),o=e(58809),i=e(64592);const a=(0,n.R)(function({tooltipProps:r,tooltipRef:C,...u},g){return(0,t.jsx)(i.m,{placement:"top",ref:C,...r,children:(0,t.jsx)(o.$,{ref:g,...u})})})},31643:(F,d,e)=>{e.d(d,{a:()=>l});var t=e(45470),n=e(61250),o=e(37189),i=e(42172),a=e(25305),m=e(26591),r=e(64592),C=e(92759),u=e(21410),g=e(69586),s=e(65706);function l(x){const O=x.options.find(c=>c.value===x.value&&(!x.placeholder||c.value!=null)),z=O?O.variant:x.value&&x.variant==="block-header-variable"?"variable":null,I=(0,m.$)("SelectBox",{variant:x.variant,hasWarning:!!x.hasWarning,isSelectionEmpty:!(O??x.value)});return(0,t.jsxs)(u.D,{flex:x.flex,maxWidth:x.maxWidth,children:[(0,t.jsx)(r.m,{isDisabled:!x.hasWarning||!x.warningTooltip,label:x.warningTooltip,placement:"top",shouldWrapChildren:!0,children:(0,t.jsx)(g.T,{flex:1,isDisabled:x.isDisabled,display:"flex",alignItems:"center",minWidth:0,type:x.type,children:(0,t.jsxs)(C.a,{flex:1,isDisabled:x.isDisabled,variant:x.variant,hasWarning:!!x.hasWarning,children:[(0,t.jsxs)(n.z,{flex:1,minWidth:0,spacing:2,alignItems:"center",children:[O?.icon?(0,t.jsx)(i.I,{as:O.icon,color:"fg.neutral.secondary",width:3,height:3}):null,(0,t.jsx)(o.E,{fontFamily:z==="variable"?"mono":void 0,fontSize:"xxs",color:I.color,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:O?O.label??O.value:x.value??x.placeholder})]}),(0,t.jsx)(i.I,{as:a.D,width:3,height:3,color:"fg.neutral.secondary"})]})})}),(0,t.jsx)(s.h,{value:x.value,groups:x.groups,maxHeight:x.maxHeight,options:x.options,onChangeRequest:x.onChangeRequest})]})}},92759:(F,d,e)=>{e.d(d,{a:()=>u});var t=e(45470),n=e(27987),o=e(61250),i=e(42172),a=e(96737),m=e(63998),r=e(92231),C=e(26591);const u=(0,m.forwardRef)(function(s,l){const x=(0,n.Uc)(),O=s.isDisabled??x?.isDisabled??!1,{defaultProps:z}=r.Kp.SelectBoxInput,I=(0,C.$)("SelectBoxInput",{variant:s.variant,isDisabled:O,hasWarning:!!s.hasWarning});return(0,t.jsxs)(o.z,{...z,ref:l,flex:s.flex,minWidth:0,height:6,flexDirection:"row",alignItems:"center",...O?{}:{tabIndex:-1},__css:I,children:[!!s.hasWarning&&(0,t.jsx)(i.I,{as:a.S,color:"fg.attention.primary",w:4,h:4,mr:1.5}),s.children]})})},21410:(F,d,e)=>{e.d(d,{D:()=>m});var t=e(45470),n=e(27987),o=e(42971),i=e(14821),a=e(63998);function m(r){const C=(0,n.Uc)(),u=r.isDisabled??!!C?.isDisabled,g=(0,a.useCallback)(s=>s.stopPropagation(),[]);return(0,t.jsx)(o.s,{role:"group",flex:r.flex,minWidth:r.flex?0:void 0,height:"100%",maxWidth:r.maxWidth,flexDirection:"row",alignItems:"center",onClick:g,children:(0,t.jsx)(i.W,{offset:r.offset,...u?{isOpen:!1}:{},isLazy:!0,lazyBehavior:"unmount",strategy:"fixed",onClose:r.onClose,onOpen:r.onOpen,children:r.children})})}},69586:(F,d,e)=>{e.d(d,{T:()=>a});var t=e(45470),n=e(27987),o=e(31576),i=e(63998);const a=(0,i.forwardRef)(function(r,C){const u=(0,n.Uc)(),{children:g,isDisabled:s=!!u?.isDisabled,...l}=r;return(0,t.jsx)(o.I,{...l,ref:C,disabled:s,...s?{cursor:"not-allowed"}:{},children:g})})},65706:(F,d,e)=>{e.d(d,{h:()=>g});var t=e(45470),n=e(76653),o=e(90933),i=e(63998),a=e(47404),m=e(42172),r=e(4615),C=e(21305);function u(s){const{onSelectRequest:l}=s,x=(0,i.useCallback)(()=>{l(s.value)},[l,s.value]);return(0,t.jsx)(C.D,{isSelected:s.isSelected,icon:s.icon?(0,t.jsx)(m.I,{as:s.icon}):void 0,isDisabled:!!s.isDisabled,maxWidth:256,onClick:x,children:(0,t.jsx)(r.p,{tooltip:s.label??s.value,tooltipProps:{openDelay:1e3},fontFamily:s.variant==="variable"?"mono":void 0,fontSize:s.variant==="variable"?"ui.xs":void 0,children:s.label??s.value})})}function g(s){const l=(0,i.useMemo)(()=>{if(!s.groups)return null;const x={};return s.options.forEach(O=>{O.group&&(x[O.group]||(x[O.group]=[]),x[O.group]?.push(O))}),x},[s.groups,s.options]);return(0,t.jsxs)(n.c,{maxHeight:s.maxHeight,overflowY:"auto",zIndex:3,children:[s.heading?(0,t.jsx)(a.c,{heading:s.heading}):null,s.groups&&l?s.groups.map(x=>(0,t.jsx)(o.r,{title:x,children:l[x]?.map(O=>(0,t.jsx)(u,{value:O.value,label:O.label,icon:O.icon,isSelected:O.value===s.value,isDisabled:!!O.isDisabled,variant:O.variant??null,onSelectRequest:s.onChangeRequest},O.value))},x)):s.options.map(x=>(0,t.jsx)(u,{value:x.value,label:x.label,icon:x.icon,isSelected:x.value===s.value,isDisabled:!!x.isDisabled,variant:x.variant??null,onSelectRequest:s.onChangeRequest},x.value))]})}},26591:(F,d,e)=>{e.d(d,{$:()=>n});var t=e(59593);function n(i,a){return(0,t.Vl)(i,a??{})}function o(i,a){return useMultiStyleConfig(i,a??{})}},45302:(F,d,e)=>{e.d(d,{p:()=>o});var t=e(45470),n=e(63998);function o(i,a){const m=(0,n.forwardRef)(function(r,C){const u={...a,...r,ref:C};return(0,t.jsx)(i,{...u})});return m.displayName=`withProps(${i.displayName??"UnknownComponent"})`,m}}},F=>{F.O(0,[1722],()=>{F.E(3543)},5);var d=t=>F(F.s=t);F.O(0,[8217,6296,8609,3508,2938,2915,346,7466,6312,4457,5600,1781],()=>d(85662));var e=F.O()}]);

//# sourceMappingURL=embed.bundle.24a8f2a7.js.map